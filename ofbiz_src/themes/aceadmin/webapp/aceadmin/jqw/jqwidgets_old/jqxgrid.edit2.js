!function(e){e.extend(e.jqx._jqxGrid.prototype,{_handledblclick:function(t,i){if(null!=t.target&&!i.disabled&&!e(t.target).ischildof(this.columnsheader)){var l;if(t.which?l=3==t.which:t.button&&(l=2==t.button),!l){var o;if(t.which?o=2==t.which:t.button&&(o=1==t.button),!o){var d=this.showheader?this.columnsheader.height()+2:0,a=this._groupsheader()?this.groupsheader.height():0,s=this.showtoolbar?this.toolbarheight:0;a+=s;var r=this.host.offset(),n=t.pageX-r.left,c=t.pageY-d-r.top-a,h=this._hittestrow(n,c);if(h){var u=h.row,p=h.index,f=t.target.className,v=this.table[0].rows[p];if(null!=v){i.mousecaptured=!0,i.mousecaptureposition={left:t.pageX,top:t.pageY-a};for(var m=this.hScrollInstance,x=m.value,w=0,b=(this.groupable?this.groups.length:0,0);b<v.cells.length;b++){var g=parseInt(e(this.columnsrow[0].cells[b]).css("left")),y=g-x;i.columns.records[b].pinned&&(y=g);var q=this._getcolumnat(b);if(null==q||!q.hidden){var j=y+e(this.columnsrow[0].cells[b]).width();if(j>=n&&n>=y){w=b;break}}}if(null!=u){var q=this._getcolumnat(w);-1==f.indexOf("jqx-grid-group-expand")&&-1==f.indexOf("jqx-grid-group-collapse")&&-1!=u.boundindex&&i.begincelledit(i.getboundindex(u),q.datafield,q.defaulteditorvalue)}}}}}}},_getpreveditablecolumn:function(e){for(var t=this;e>0;){e--;var i=t.getcolumnat(e);if(!i)return null;if(i.editable&&!i.hidden)return i}return null},_getnexteditablecolumn:function(e){for(var t=this;e<this.columns.records.length;){e++;var i=t.getcolumnat(e);if(!i)return null;if(i.editable&&!i.hidden)return i}return null},_handleeditkeydown:function(t,i){if(i.handlekeyboardnavigation){var l=i.handlekeyboardnavigation(t);if(1==l)return!0}var o=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(i.showfilterrow&&i.filterable&&this.filterrow&&e(t.target).ischildof(this.filterrow))return!0;if(i.pageable&&e(t.target).ischildof(this.pager))return!0;if(this.showtoolbar&&e(t.target).ischildof(this.toolbar))return!0;if(this.showstatusbar&&e(t.target).ischildof(this.statusbar))return!0;if(this.rowdetails&&e(t.target).ischildof(this.content.find("[role='rowgroup']")))return!0;if(this.editcell){if("selectedrow"===this.editmode)return 13===o?this.endrowedit(this.editcell.row,!1):27===o&&this.endrowedit(this.editcell.row,!0),9===o?!1:!0;if(null==this.editcell.columntype||"textbox"==this.editcell.columntype||"numberinput"==this.editcell.columntype||"combobox"==this.editcell.columntype||"datetimeinput"==this.editcell.columntype){if(o>=33&&40>=o&&"multiplecellsadvanced"==i.selectionmode){var d="textbox"==this.editcell.columntype||null==this.editcell.columntype?this.editcell.editor:this.editcell.editor.find("input"),a=i._selection(d),s=d.val().length;a.length>0&&"datetimeinput"!=this.editcell.columntype&&(i._cancelkeydown=!0),a.start>0&&37==o&&(i._cancelkeydown=!0),a.start<s&&39==o&&"datetimeinput"!=this.editcell.columntype&&(i._cancelkeydown=!0),"datetimeinput"==this.editcell.columntype&&39==o&&a.start+a.length<s&&(i._cancelkeydown=!0)}}else"dropdownlist"==this.editcell.columntype?(37==o||39==o&&"multiplecellsadvanced"==i.selectionmode)&&(i._cancelkeydown=!1):"multiplecellsadvanced"==this.selectionmode&&"textbox"!=this.editcell.columntype&&"numberinput"!=this.editcell.columntype&&(i._cancelkeydown=!0);if(32==o&&"checkbox"==i.editcell.columntype){var r=i.getcolumn(i.editcell.datafield);if(r.editable){var n=!i.getcellvalue(i.editcell.row,i.editcell.column);if(r.cellbeginedit){var c=r.cellbeginedit(i.editcell.row,r.datafield,r.columntype,!n);if(0==c)return!1}var h=i.getrowdata(i.editcell.row);return i.setcellvalue(i.editcell.row,i.editcell.column,n,!0),i._raiseEvent(18,{rowindex:i.editcell.row,row:h,datafield:i.editcell.column,oldvalue:!n,value:n,columntype:"checkbox"}),!1}}if(9==o){var u=this.editcell.row,p=this.editcell.column,f=p,v=i._getcolumnindex(p),m=!1,x=i.getrowvisibleindex(u);if(this.editchar="",0!=this.editcell.validated){if(t.shiftKey){var r=i._getpreveditablecolumn(v);r&&(p=r.datafield,m=!0,-1!=i.selectionmode.indexOf("cell")&&(i.selectprevcell(u,f),setTimeout(function(){i.ensurecellvisible(x,p)},10)))}else{var r=i._getnexteditablecolumn(v);r&&(p=r.datafield,m=!0,-1!=i.selectionmode.indexOf("cell")&&(i.selectnextcell(u,f),i._oldselectedcell=i.selectedcell,setTimeout(function(){i.ensurecellvisible(x,p)},10)))}if(!m)return null!=this.editcell&&(i.endcelledit(u,p,!1),this._renderrows(this.virtualsizeinfo)),!0;i.begincelledit(u,p),null!=this.editcell&&"checkbox"==this.editcell.columntype&&this._renderrows(this.virtualsizeinfo)}return!1}if(13==o){var w=this.selectedcell;if(w)var b=this.getrowvisibleindex(w.rowindex);if(this.endcelledit(this.editcell.row,this.editcell.column,!1,!0),"multiplecellsadvanced"==this.selectionmode){var g=i.getselectedcell();if(null!=g&&i.selectcell&&null==this.editcell&&g.rowindex+1<this.dataview.totalrecords)if(this.sortcolumn!=g.datafield){var x=this.getrowvisibleindex(g.rowindex),y=this.dataview.loadedrecords[x+1];if(y&&(!this.pageable||this.pageable&&x+1<(this.dataview.pagenum+1)*this.pagesize)){this.clearselection(!1),this.selectcell(this.getboundindex(y),g.datafield);var g=this.getselectedcell();this.ensurecellvisible(y.visibleindex,g.datafield)}}else if(null!=w){var q=this.dataview.loadedrecords[b+1];if(q)if(!this.pageable||this.pageable&&b+1<this.pagesize)this.clearselection(!1),this.selectcell(this.getboundindex(q),g.datafield);else if(this.pageable&&b+1>=this.pagesize){this.clearselection(!1);var q=this.dataview.loadedrecords[b];this.selectcell(this.getboundindex(q),g.datafield)}}}return!1}if(27==o)return this.endcelledit(this.editcell.row,this.editcell.column,!0,!0),!1}else{var j=!1;if(113==o&&(j=!0),!t.ctrlKey&&!t.altKey){if(o>=48&&57>=o&&(this.editchar=String.fromCharCode(o),j=!0),o>=65&&90>=o){this.editchar=String.fromCharCode(o);var _=!1;t.shiftKey?_=t.shiftKey:t.modifiers&&(_=!!(4&t.modifiers)),_||(this.editchar=this.editchar.toLowerCase()),j=!0}else o>=96&&105>=o&&(this.editchar=o-96,this.editchar=this.editchar.toString(),j=!0);var I=e(".jqx-grid").length;j=j&&(1==I||I>1&&i.focused);var D=e.data(document.body,"jqxgrid.edit");if(void 0!==D&&""!==D&&(13===o||j)&&D!=i.element.id)return!0}if((13==o||j)&&i.getselectedrowindex){var u=i.getselectedrowindex();switch(i.selectionmode){case"singlerow":case"multiplerows":case"multiplerowsextended":if(u>=0){for(var p="",T=0;T<i.columns.records.length;T++){var r=i.getcolumnat(T);if(r.editable){p=r.datafield;break}}i.begincelledit(u,p)}break;case"singlecell":case"multiplecells":case"multiplecellsextended":var g=i.getselectedcell();if(null!=g){var r=i._getcolumnbydatafield(g.datafield);"checkbox"!=r.columntype&&i.begincelledit(g.rowindex,g.datafield)}break;case"multiplecellsadvanced":var g=i.getselectedcell();if(null!=g)if(13==o){if(i.selectcell&&g.rowindex+1<i.dataview.totalrecords){var x=this.getrowvisibleindex(g.rowindex),y=this.dataview.loadedrecords[x+1];if(y){this.clearselection(!1),this.selectcell(this.getboundindex(y),g.datafield);var g=this.getselectedcell();this.ensurecellvisible(y.visibleindex,g.datafield)}}}else"selectedrow"!==i.editmode&&i.begincelledit(g.rowindex,g.datafield)}return!1}if(46==o){var k=i.getselectedcells();if(-1==i.selectionmode.indexOf("cell")&&i._getcellsforcopypaste&&(k=i._getcellsforcopypaste()),null!=k&&k.length>0){for(var C=0;C<k.length;C++){var g=k[C];if(g.datafield){var r=i.getcolumn(g.datafield),S=i.getcellvalue(g.rowindex,g.datafield);if(""!==S&&r.editable&&i.enablekeyboarddelete){var z=null;if("checkbox"==r.columntype&&(r.threestatecheckbox||(z=!1)),r.cellbeginedit){var c=r.cellbeginedit(g.rowindex,r.datafield,r.columntype,z);if(0==c)return!1}var h=i.getrowdata(g.rowindex);if(i._raiseEvent(17,{rowindex:g.rowindex,row:h,datafield:g.datafield,value:S}),C==k.length-1?(i.setcellvalue(g.rowindex,g.datafield,z,!0),r.displayfield!=r.datafield&&i.setcellvalue(g.rowindex,r.displayfield,z,!0)):(i.setcellvalue(g.rowindex,g.datafield,z,!1),r.displayfield!=r.datafield&&i.setcellvalue(g.rowindex,r.displayfield,z,!0)),r.cellendedit){r.cellendedit(g.rowindex,r.datafield,r.columntype,z)}i._raiseEvent(18,{rowindex:g.rowindex,row:h,datafield:g.datafield,oldvalue:S,value:z})}}}return this.dataview.updateview(),this._renderrows(this.virtualsizeinfo),!1}}if(32==o){var g=i.getselectedcell();if(null!=g){var r=i.getcolumn(g.datafield);if("checkbox"==r.columntype&&r.editable){var n=!i.getcellvalue(g.rowindex,g.datafield);if(r.cellbeginedit){var c=r.cellbeginedit(g.rowindex,r.datafield,r.columntype,!n);if(0==c)return!1}var h=i.getrowdata(g.rowindex);return i._raiseEvent(17,{rowindex:g.rowindex,row:h,datafield:g.datafield,value:!n,columntype:"checkbox"}),i.setcellvalue(g.rowindex,g.datafield,n,!0),i._raiseEvent(18,{rowindex:g.rowindex,row:h,datafield:g.datafield,oldvalue:!n,value:n,columntype:"checkbox"}),!1}}}}return!0},begincelledit:function(t,i,l,o,d){var a=this.getcolumn(i);if(this._cellscache=new Array,null!=i&&"number"!=a.columntype&&"button"!=a.columntype){if(this.groupable){if(this.groups.indexOf(i)>=0)return;if(this.groups.indexOf(a.displayfield)>=0)return}if(void 0==this.editrow){if(this.editcell){if(this.editcell.row==t&&this.editcell.column==i)return!0;if("selectedrow"===this.editmode&&this.editcell.row==t)return;var s=this.endcelledit(this.editcell.row,this.editcell.column,!1,!0,!1);if(0==s)return}var r="checkbox"==a.columntype||"button"==a.columntype;if(this.host.removeClass("jqx-disableselect"),this.content.removeClass("jqx-disableselect"),a.editable){if(a.cellbeginedit){var n=this.getcell(t,i),c=a.cellbeginedit(t,i,a.columntype,null!=n?n.value:null);if(0==c)return}var h=this.getrowvisibleindex(t);if(this.editcell=this.getcell(t,i),this.editcell&&(this.editcell.visiblerowindex=h,!this.editcell.editing)){if(r||(this.editcell.editing=!0),this.editcell.columntype=a.columntype,this.editcell.defaultvalue=l,void 0!=a.defaultvalue&&(this.editcell.defaultvalue=a.defaultvalue),this.editcell.init=!0,"checkbox"!=a.columntype&&"selectedrow"!=this.editmode){var u=this.getrowdata(t);this._raiseEvent(17,{rowindex:t,row:u,datafield:a.datafield,value:this.editcell.value,columntype:a.columntype})}if(e.data(document.body,"jqxgrid.edit",this.element.id),!r){var p=this.getrowvisibleindex(t);o!==!1&&this.ensurecellvisible(p,a.datafield),d!==!1&&this._renderrows(this.virtualsizeinfo)}if(this.editcell)return this.editcell.init=!1,!0}}else{if(!this.editcell)return;this.editcell.editor=null,this.editcell.editing=!1,d!==!1&&this._renderrows(this.virtualsizeinfo),this.editcell=null}}}},getScrollTop:function(){if(this._py)return pageYOffset;if(this._py="undefined"!=typeof pageYOffset,this._py)return pageYOffset;var e=document.body,t=document.documentElement;return t=t.clientHeight?t:e,t.scrollTop},getScrollLeft:function(){if("undefined"!=typeof pageXOffset)return pageXOffset;var e=document.body,t=document.documentElement;return t=t.clientHeight?t:e,t.scrollLeft},endcelledit:function(t,i,l,o,d){if((void 0==t||void 0==i)&&(this.editcell&&(t=this.editcell.row,i=this.editcell.column),void 0==l&&(l=!0)),this.editcell){var a=this.getcolumn(i),s=this;if("selectedrow"===s.editmode)return void this.endrowedit(t,l);var r=function(){if(0!=d){if(s.isTouchDevice())return;if(!s.isNestedGrid){var e=s.getScrollTop(),t=s.getScrollLeft();try{s.element.focus(),s.content.focus(),e!=s.getScrollTop()&&window.scrollTo(t,e),setTimeout(function(){s.element.focus(),s.content.focus(),e!=s.getScrollTop()&&window.scrollTo(t,e)},10)}catch(i){}}}};if("checkbox"==a.columntype||"button"==a.columntype)return this.editcell&&(this.editcell.editor=null,this.editcell.editing=!1,this.editcell=null),!0;var n=this._geteditorvalue(a),c=function(e){if(e._hidecelleditor(),a.cellendedit&&a.cellendedit(t,i,a.columntype,e.editcell.value,n),e.editchar=null,a.displayfield!=a.datafield){var l=e.getcellvalue(e.editcell.row,a.displayfield),d=e.editcell.value;oldvalue={value:d,label:l}}else oldvalue=e.editcell.value;var s=e.getrowdata(t);e._raiseEvent(18,{rowindex:t,row:s,datafield:i,displayfield:a.displayfield,oldvalue:n,value:n,columntype:a.columntype}),e.editcell.editor=null,e.editcell.editing=!1,e.editcell=null,(o||void 0==o)&&e._renderrows(e.virtualsizeinfo),r(),e.enablebrowserselection||(e.host.addClass("jqx-disableselect"),e.content.addClass("jqx-disableselect"))};if(l)return c(this),!1;if(this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide()),a.cellvaluechanging){var h=a.cellvaluechanging(t,i,a.columntype,this.editcell.value,n);void 0!=h&&(n=h)}if(a.validation){var u=this.getcell(t,i);try{var p=a.validation(u,n),f=this.gridlocalization.validationstring;void 0!=p.message&&(f=p.message);var v="boolean"==typeof p?p:p.result;if(!v)return(void 0==p.showmessage||1==p.showmessage)&&this._showvalidationpopup(t,i,f),this.editcell.validated=!1,!1}catch(m){return this._showvalidationpopup(t,i,this.gridlocalization.validationstring),this.editcell.validated=!1,!1}}if(a.displayfield!=a.datafield){var x=this.getcellvalue(this.editcell.row,a.displayfield),w=this.editcell.value;oldvalue={value:w,label:x}}else oldvalue=this.editcell.value;var b=this.getrowdata(t);if(a.cellendedit){var g=a.cellendedit(t,i,a.columntype,this.editcell.value,n);if(0==g)return this._raiseEvent(18,{rowindex:t,row:b,datafield:i,displayfield:a.displayfield,oldvalue:oldvalue,value:oldvalue,columntype:a.columntype}),c(this),!1}return this._raiseEvent(18,{rowindex:t,row:b,datafield:i,displayfield:a.displayfield,oldvalue:oldvalue,value:n,columntype:a.columntype}),this._hidecelleditor(!1),void 0!=this.editcell&&(this.editcell.editor=null,this.editcell.editing=!1),this.editcell=null,this.editchar=null,this.setcellvalue(t,i,n,o),this.enablebrowserselection||(this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect")),e.jqx.browser.msie||r(),e.data(document.body,"jqxgrid.edit",""),!0}},beginrowedit:function(t){var i=this;i._oldselectedrow=t,this._cellscache=new Array;var l=!1;if("selectedrow"!=this.editmode&&(l=!0),l){var o=this.editmode;this.editmode="selectedrow"}e.each(this.columns.records,function(){if(i.editable&&this.editable){var e=i.getcell(t,this.datafield);i.begincelledit(t,this.datafield,null,!1,!1);var l=i.getrowdata(t);i._raiseEvent(17,{rowindex:t,row:l,datafield:this.datafield,value:e.value,columntype:this.columntype})}}),i.editcell&&(i.editcell.init=!0),this._renderrows(this.virtualsizeinfo),l&&(this.editmode=o)},endrowedit:function(t,i){var l=this;if(!this.editcell)return!1;if(void 0==this.editcell.editor)return!1;var o=!1;if("selectedrow"!=this.editmode&&(o=!0),o){var d=this.editmode;this.editmode="selectedrow"}var a=!1,s={};this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide());for(var r=0;r<this.columns.records.length;r++){var n=this.columns.records[r];if(n.editable&&!n.hidden&&"checkbox"!=n.columntype){var c=this._geteditorvalue(n),h=function(e){e._hidecelleditor();var i=e.getcellvalue(e.editcell.row,n.displayfield);if(n.cellendedit&&n.cellendedit(t,f,n.columntype,i,c),e.editchar=null,n.displayfield!=n.datafield){var l=e.getcellvalue(e.editcell.row,n.displayfield),o=i;u={value:o,label:l}}else u=i;var d=e.getrowdata(t);e._raiseEvent(18,{rowindex:t,row:d,datafield:f,displayfield:n.displayfield,oldvalue:i,value:i,columntype:n.columntype}),e.editcell.editing=!1};if(i)h(this);else{if(n.cellvaluechanging){var u=this.getcellvalue(this.editcell.row,n.displayfield),p=n.cellvaluechanging(t,f,n.columntype,u,c);void 0!=p&&(c=p)}var f=n.datafield;if(n.validation){var v=this.getcell(t,n.datafield);try{var m=n.validation(v,c),x=this.gridlocalization.validationstring;void 0!=m.message&&(x=m.message);var w="boolean"==typeof m?m:m.result;if(!w){(void 0==m.showmessage||1==m.showmessage)&&this._showvalidationpopup(t,f,x),a=!0,this.editcell[n.datafield].validated=!1;continue}}catch(b){this._showvalidationpopup(t,f,this.gridlocalization.validationstring),this.editcell[n.datafield].validated=!1,a=!0;continue}}if(n.displayfield!=n.datafield){var g=this.getcellvalue(this.editcell.row,n.displayfield),y=this.editcell.value;u={value:y,label:g}}else u=this.getcellvalue(this.editcell.row,n.displayfield);s[n.datafield]={newvalue:c,oldvalue:u}}}}var q={},j={};if(!a){this._hidecelleditor(!1);for(var r=0;r<this.columns.records.length;r++){var n=this.columns.records[r],f=n.datafield;if(!n.hidden&&n.editable){var _=this.getrowdata(t);if("checkbox"!=n.columntype){if(s[n.datafield]){var c=s[n.datafield].newvalue,u=s[n.datafield].oldvalue;if(n.cellendedit){var I=n.cellendedit(t,f,n.columntype,u,c);if(0==I){this._raiseEvent(18,{rowindex:t,row:_,datafield:f,displayfield:n.displayfield,oldvalue:u,value:u,columntype:n.columntype}),h(this);continue}}this.source.updaterow||this._raiseEvent(18,{rowindex:t,row:_,datafield:n.datafield,displayfield:n.displayfield,oldvalue:u,value:c,columntype:n.columntype}),q[n.datafield]=c,j[n.datafield]=u}}else{var c=this.getcellvalue(t,n.displayfield);this._raiseEvent(18,{rowindex:t,row:_,datafield:n.datafield,displayfield:n.displayfield,oldvalue:c,value:c,columntype:n.columntype})}}}var D=this.getrowid(t),_=this.getrowdata(t);if(e.each(q,function(e,t){if(t&&void 0!=t.label){var i=l.getcolumn(e);_[i.displayfield]=t.label,_[i.datafield]=t.value}else _[e]=t}),this.enablebrowserselection||(this.host.addClass("jqx-disableselect"),this.content.addClass("jqx-disableselect")),e.data(document.body,"jqxgrid.edit",""),this.editcell=null,this.editchar=null,this.source.updaterow){var T=!1,l=this,w=function(i){var o=l.source.updaterow;l.source.updaterow=null,0==i?(e.each(j,function(e,t){if(t&&void 0!=t.label){var i=l.getcolumn(e);_[i.displayfield]=t.label,_[i.datafield]=t.value}else _[e]=t}),l.updaterow(D,_)):l.updaterow(D,_);for(var d=0;d<l.columns.records.length;d++){{var a=l.columns.records[d];a.datafield}l._raiseEvent(18,{rowindex:t,datafield:a.datafield,row:_,displayfield:a.displayfield,oldvalue:j[a.datafield],value:_[a.displayfield],columntype:a.columntype})}l.source.updaterow=o};try{T=this.source.updaterow(D,_,w),void 0==T&&(T=!0)}catch(b){return void(T=!1)}}else this.updaterow(D,_),this._renderrows(this.virtualsizeinfo)}return o&&(this.editmode=d),a},_selection:function(e){if("selectionStart"in e[0]){var t=e[0],i=t.selectionEnd-t.selectionStart;return{start:t.selectionStart,end:t.selectionEnd,length:i,text:t.value}}var l=document.selection.createRange();if(null==l)return{start:0,end:t.value.length,length:0};var o=e[0].createTextRange(),d=o.duplicate();o.moveToBookmark(l.getBookmark()),d.setEndPoint("EndToStart",o);var i=l.text.length;return{start:d.text.length,end:d.text.length+l.text.length,length:i,text:l.text}},_setSelection:function(e,t,i){if("selectionStart"in i[0])i[0].focus(),i[0].setSelectionRange(e,t);else{var l=i[0].createTextRange();l.collapse(!0),l.moveEnd("character",t),l.moveStart("character",e),l.select()}},findRecordIndex:function(e,t,i){var i=i;if(t)for(var l=i.length,o=0;l>o;o++){var d=i[o],a=d.value;if(e==a)return o}return-1},_destroyeditors:function(){var t=this;this.columns.records&&(e.each(this.columns.records,function(){var i=e.trim(this.datafield).split(" ").join("");switch(this.columntype){case"dropdownlist":var l=t.editors["dropdownlist_"+i];l&&(l.jqxDropDownList("destroy"),t.editors["dropdownlist_"+i]=null);break;case"combobox":var o=t.editors["combobox_"+i];o&&(o.jqxComboBox("destroy"),t.editors["combobox_"+i]=null);break;case"datetimeinput":var d=t.editors["datetimeinput_"+this.datafield];d&&(d.jqxDateTimeInput("destroy"),t.editors["datetimeinput_"+i]=null);break;case"numberinput":var a=t.editors["numberinput_"+i];a&&(a.jqxNumberInput("destroy"),t.editors["numberinput_"+i]=null);break;case"custom":case"template":if(t.destroyeditor&&t.editors["templateeditor_"+i]&&(t.destroyeditor(t.editors["templateeditor_"+i]),t.editors["templateeditor_"+i]=null),t.destroyeditor)for(var s=t.getrows.length(),r=0;s>r;r++)t.editors["customeditor_"+i+"_"+r]&&(t.destroyeditor(t.editors["customeditor_"+i+"_"+r],r),t.editors["customeditor_"+i+"_"+r]=null);break;case"textbox":default:var n=t.editors["textboxeditor_"+i];n&&(t.removeHandler(n,"keydown"),t.editors["textbox_"+i]=null)}}),t.editors=new Array)},_showcelleditor:function(t,i,l,o,d){if(void 0!=l&&null!=this.editcell&&("checkbox"!=i.columntype||!i.editable)){void 0==d&&(d=!0),"selectedrow"==this.editmode&&(this.editchar="",d=!1);{var a=i.datafield,s=e(l),r=this,n=this.editcell.editor,c=this.getcellvalue(t,a),h=this.getcelltext(t,a),u=this.hScrollInstance,p=u.value,f=parseInt(p);this.columns.records.indexOf(i)}if(this.editcell.element=l,0==this.editcell.validated){var v="";this.validationpopup&&(v=this.validationpopup.text()),this._showvalidationpopup(t,a,v)}var m=function(e){r.hScrollInstance.isScrolling()||r.vScrollInstance.isScrolling()||d&&(r.isTouchDevice()||(e.focus(),0!=r.gridcontent[0].scrollTop&&(r.scrolltop(Math.abs(r.gridcontent[0].scrollTop)),r.gridcontent[0].scrollTop=0),0!=r.gridcontent[0].scrollLeft&&(r.gridcontent[0].scrollLeft=0)))};switch(i.columntype){case"dropdownlist":if(this.host.jqxDropDownList){l.innerHTML="";var x=e.trim(i.datafield).split(" ").join(""),w=e.trim(i.displayfield).split(" ").join("");-1!=x.indexOf(".")&&(x=x.replace(".","")),-1!=w.indexOf(".")&&(w=w.replace(".",""));var b=this.editors["dropdownlist_"+x];if(n=void 0==b?e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='dropdownlisteditor'></div>"):b,n.css("top",e(l).parent().position().top),this.oldhscroll?n.css("left",-f+parseInt(e(l).position().left)):n.css("left",parseInt(e(l).position().left)),i.pinned&&n.css("left",f+parseInt(e(l).position().left)),void 0==b){n.prependTo(this.table),n[0].id="dropdownlisteditor"+this.element.id+x;var g=this.source._source?!0:!1,y=null;if(g){var q={localdata:this.source.records,datatype:this.source.datatype,async:!1};y=new e.jqx.dataAdapter(q,{autoBind:!1,async:!1,uniqueDataFields:[w],autoSort:!0,autoSortField:w})}else y=new e.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[w],async:!1,autoSort:!0,autoSortField:w});var j=i.createeditor?!1:!0;n.jqxDropDownList({enableBrowserBoundsDetection:!0,keyboardSelection:!1,source:y,rtl:this.rtl,autoDropDownHeight:j,theme:this.theme,width:s.width()-2,height:s.height()-2,displayMember:w,valueMember:a}),this.editors["dropdownlist_"+x]=n,i.createeditor&&i.createeditor(t,c,n)}i._requirewidthupdate&&n.jqxDropDownList({width:s.width()-2});var _=n.jqxDropDownList("listBox").visibleItems;i.createeditor||(_.length<8?n.jqxDropDownList("autoDropDownHeight",!0):n.jqxDropDownList("autoDropDownHeight",!1));var c=this.getcellvalue(t,w),I=this.findRecordIndex(c,w,_);if(o&&(""!=c?n.jqxDropDownList("selectIndex",I,!0):n.jqxDropDownList("selectIndex",-1)),!this.editcell)return;void 0!=this.editcell.defaultvalue&&n.jqxDropDownList("selectIndex",this.editcell.defaultvalue,!0),d&&n.jqxDropDownList("focus")}break;case"combobox":if(this.host.jqxComboBox){l.innerHTML="";var x=e.trim(i.datafield).split(" ").join(""),w=e.trim(i.displayfield).split(" ").join("");-1!=x.indexOf(".")&&(x=x.replace(".","")),-1!=w.indexOf(".")&&(w=w.replace(".",""));var D=this.editors["combobox_"+x];if(n=void 0==D?e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='comboboxeditor'></div>"):D,n.css("top",e(l).parent().position().top),this.oldhscroll?n.css("left",-f+parseInt(e(l).position().left)):n.css("left",parseInt(e(l).position().left)),i.pinned&&n.css("left",f+parseInt(e(l).position().left)),void 0==D){n.prependTo(this.table),n[0].id="comboboxeditor"+this.element.id+x;var g=this.source._source?!0:!1,y=null;if(g){var q={localdata:this.source.records,datatype:this.source.datatype,async:!1};y=new e.jqx.dataAdapter(q,{autoBind:!1,async:!1,uniqueDataFields:[w],autoSort:!0,autoSortField:w})}else y=new e.jqx.dataAdapter(this.source,{autoBind:!1,uniqueDataFields:[w],async:!1,autoSort:!0,autoSortField:w});var j=i.createeditor?!1:!0;n.jqxComboBox({enableBrowserBoundsDetection:!0,keyboardSelection:!1,source:y,rtl:this.rtl,autoDropDownHeight:j,theme:this.theme,width:s.width()-2,height:s.height()-2,displayMember:w,valueMember:a}),n.removeAttr("tabindex"),n.find("div").removeAttr("tabindex"),this.editors["combobox_"+x]=n,i.createeditor&&i.createeditor(t,c,n)}i._requirewidthupdate&&n.jqxComboBox({width:s.width()-2});var _=n.jqxComboBox("listBox").visibleItems;i.createeditor||(_.length<8?n.jqxComboBox("autoDropDownHeight",!0):n.jqxComboBox("autoDropDownHeight",!1));var c=this.getcellvalue(t,w),I=this.findRecordIndex(c,w,_);if(o&&(""!=c?(n.jqxComboBox("selectIndex",I,!0),n.jqxComboBox("val",c)):(n.jqxComboBox("selectIndex",-1),n.jqxComboBox("val",c))),!this.editcell)return;void 0!=this.editcell.defaultvalue&&n.jqxComboBox("selectIndex",this.editcell.defaultvalue,!0),this.editchar&&this.editchar.length>0&&n.jqxComboBox("input").val(this.editchar),d&&setTimeout(function(){if(m(n.jqxComboBox("input")),n.jqxComboBox("_setSelection",0,0),r.editchar)n.jqxComboBox("_setSelection",1,1),r.editchar=null;else{var e=n.jqxComboBox("input").val();n.jqxComboBox("_setSelection",0,e.length)}},10)}break;case"datetimeinput":if(this.host.jqxDateTimeInput){l.innerHTML="";var x=e.trim(i.datafield).split(" ").join("");-1!=x.indexOf(".")&&(x=x.replace(".",""));var T=this.editors["datetimeinput_"+x];if(n=void 0==T?e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='datetimeeditor'></div>"):T,n.show(),n.css("top",e(l).parent().position().top),this.oldhscroll?n.css("left",-f+parseInt(e(l).position().left)):n.css("left",parseInt(e(l).position().left)),i.pinned&&n.css("left",f+parseInt(e(l).position().left)),void 0==T){n.prependTo(this.table),n[0].id="datetimeeditor"+this.element.id+x;var k={calendar:this.gridlocalization};n.jqxDateTimeInput({enableBrowserBoundsDetection:!0,localization:k,_editor:!0,theme:this.theme,rtl:this.rtl,width:s.width(),height:s.height(),formatString:i.cellsformat}),this.editors["datetimeinput_"+x]=n,i.createeditor&&i.createeditor(t,c,n)}if(i._requirewidthupdate&&n.jqxDateTimeInput({width:s.width()-2}),o){if(""!=c&&null!=c){var C=new Date(c);"Invalid Date"==C&&this.source.getvaluebytype&&(C=this.source.getvaluebytype(c,{name:i.datafield,type:"date"})),n.jqxDateTimeInput("setDate",C)}else n.jqxDateTimeInput("setDate",null);void 0!=this.editcell.defaultvalue&&n.jqxDateTimeInput("setDate",this.editcell.defaultvalue)}d&&setTimeout(function(){m(n.jqxDateTimeInput("dateTimeInput"))},10)}break;case"numberinput":if(this.host.jqxNumberInput){l.innerHTML="";var x=e.trim(i.datafield).split(" ").join("");-1!=x.indexOf(".")&&(x=x.replace(".",""));var S=this.editors["numberinput_"+x];if(n=void 0==S?e("<div style='border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='numbereditor'></div>"):S,n.show(),n.css("top",e(l).parent().position().top),this.oldhscroll?n.css("left",-f+parseInt(e(l).position().left)):n.css("left",parseInt(e(l).position().left)),i.pinned&&n.css("left",f+parseInt(e(l).position().left)),void 0==S){n.prependTo(this.table),n[0].id="numbereditor"+this.element.id+x;var z="",B="left",O=2;i.cellsformat?-1!=i.cellsformat.indexOf("c")?(z=this.gridlocalization.currencysymbol,B=this.gridlocalization.currencysymbolposition,B="before"==B?"left":"right",i.cellsformat.length>1&&(O=parseInt(i.cellsformat.substring(1),10))):-1!=i.cellsformat.indexOf("p")&&(z=this.gridlocalization.percentsymbol,B="right",i.cellsformat.length>1&&(O=parseInt(i.cellsformat.substring(1),10))):O=0,n.jqxNumberInput({decimalSeparator:this.gridlocalization.decimalseparator,decimalDigits:O,inputMode:"simple",theme:this.theme,rtl:this.rtl,width:s.width()-1,height:s.height()-1,spinButtons:!0,symbol:z,symbolPosition:B}),this.editors["numberinput_"+x]=n,i.createeditor&&i.createeditor(t,c,n)}if(i._requirewidthupdate&&n.jqxNumberInput({width:s.width()-2}),o){if(""!=c&&null!=c){var L=c;n.jqxNumberInput("setDecimal",L)}else n.jqxNumberInput("setDecimal",0);if(void 0!=this.editcell.defaultvalue&&n.jqxNumberInput("setDecimal",this.editcell.defaultvalue),this.editchar&&this.editchar.length>0){var N=parseInt(this.editchar);isNaN(N)||n.jqxNumberInput("setDecimal",N)}d&&setTimeout(function(){if(m(n.jqxNumberInput("numberInput")),n.jqxNumberInput("_setSelectionStart",0),r.editchar)i.cellsformat.length>0?n.jqxNumberInput("_setSelectionStart",2):n.jqxNumberInput("_setSelectionStart",1),r.editchar=null;else{var e=n.jqxNumberInput("spinButtons");if(e){var t=n.jqxNumberInput("numberInput").val();r._setSelection(n.jqxNumberInput("numberInput")[0],t.length,t.length)}else{var t=n.jqxNumberInput("numberInput").val();r._setSelection(n.jqxNumberInput("numberInput")[0],0,t.length)}}},10)}}break;case"custom":l.innerHTML="";var x=e.trim(i.datafield).split(" ").join("");-1!=x.indexOf(".")&&(x=x.replace(".",""));var E=this.editors["customeditor_"+x+"_"+t];if(n=void 0==E?e("<div style='overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='customeditor'></div>"):E,n.show(),n.css("top",e(l).parent().position().top),this.oldhscroll?n.css("left",-f+parseInt(e(l).position().left)):n.css("left",parseInt(e(l).position().left)),i.pinned&&n.css("left",f+parseInt(e(l).position().left)),void 0==E){n.prependTo(this.table),n[0].id="customeditor"+this.element.id+x+"_"+t,this.editors["customeditor_"+x+"_"+t]=n;var H=s.width()-1,P=s.height()-1;n.width(H),n.height(P),i.createeditor&&i.createeditor(t,c,n,h,H,P,this.editchar)}i._requirewidthupdate&&n.width(s.width()-2);break;case"template":l.innerHTML="";var x=e.trim(i.datafield).split(" ").join("");-1!=x.indexOf(".")&&(x=x.replace(".",""));var M=this.editors["templateeditor_"+x];if(n=void 0==M?e("<div style='overflow: hidden; border-radius: 0px; -moz-border-radius: 0px; -webkit-border-radius: 0px; z-index: 99999; top: 0px; left: 0px; position: absolute;' id='templateeditor'></div>"):M,n.show(),n.css("top",e(l).parent().position().top),this.oldhscroll?n.css("left",-f+parseInt(e(l).position().left)):n.css("left",parseInt(e(l).position().left)),i.pinned&&n.css("left",f+parseInt(e(l).position().left)),void 0==M){n.prependTo(this.table),n[0].id="templateeditor"+this.element.id+x,this.editors["templateeditor_"+x]=n;var H=s.width()-1,P=s.height()-1;n.width(H),n.height(P),i.createeditor&&i.createeditor(t,c,n,h,H,P,this.editchar)}i._requirewidthupdate&&n.width(s.width()-2);break;case"textbox":default:l.innerHTML="",n=this.editors["textboxeditor_"+i.datafield]||e("<input autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' type='textbox' id='textboxeditor'/>"),n[0].id="textboxeditor"+this.element.id+i.datafield,n.appendTo(s),this.rtl&&n.css("direction","rtl"),(o||""==n[0].className)&&(n.addClass(this.toThemeProperty("jqx-input")),n.addClass(this.toThemeProperty("jqx-widget-content")),this.editchar&&this.editchar.length>0?n.val(this.editchar):(""!=i.cellsformat&&(c=this.getcelltext(t,a)),void 0==c&&(c=""),n.val(c)),void 0!=this.editcell.defaultvalue&&n.val(this.editcell.defaultvalue),n.width(s.width()+1),n.height(s.height()+1),i.createeditor&&i.createeditor(t,c,n),""!=i.cellsformat&&(-1!=i.cellsformat.indexOf("p")||-1!=i.cellsformat.indexOf("c")||-1!=i.cellsformat.indexOf("n")||-1!=i.cellsformat.indexOf("f"))&&(this.editors["textboxeditor_"+i.datafield]||n.keydown(function(e){var t=e.charCode?e.charCode:e.keyCode?e.keyCode:0,l=String.fromCharCode(t),o=parseInt(l);if(isNaN(o))return!0;if(r._selection(n).length>0)return!0;var d="",a=n.val();if(i.cellsformat.length>1){var s=parseInt(i.cellsformat.substring(1));isNaN(s)&&(s=0)}else var s=0;if(s>0&&-1!=a.indexOf(r.gridlocalization.decimalseparator)&&r._selection(n).start>a.indexOf(r.gridlocalization.decimalseparator))return!0;for(var c=0;c<a.length-s;c++){var h=a.substring(c,c+1);null!=h.match(/^[0-9]+$/)&&(d+=h)}return d.length>=11?!1:void 0}))),this.editors["textboxeditor_"+i.datafield]=n,o&&d&&setTimeout(function(){m(n),r.editchar?(r._setSelection(n[0],1,1),r.editchar=null):r._setSelection(n[0],0,n.val().length)
},25)}n&&(n[0].style.zIndex=1+l.style.zIndex,e.jqx.browser.msie&&e.jqx.browser.version<8&&(n[0].style.zIndex=1+this.columns.records.length+l.style.zIndex),n.css("display","block"),this.editcell.editor=n,this.editcell[a]?this.editcell[a].editor=n:(this.editcell[a]={},this.editcell[a].editor=n)),o&&i.initeditor&&i.initeditor(t,c,n,h,this.editchar),r.isTouchDevice()||setTimeout(function(){r.content&&(r.content[0].scrollTop=0,r.content[0].scrollLeft=0),r.gridcontent&&(r.gridcontent[0].scrollLeft=0,r.gridcontent[0].scrollTop=0)},10)}},_setSelection:function(e,t,i){try{if("selectionStart"in e)e.setSelectionRange(t,i);else{var l=e.createTextRange();l.collapse(!0),l.moveEnd("character",i),l.moveStart("character",t),l.select()}}catch(o){}},_hideeditors:function(){if(null!=this.editcells){var e=this;for(var t in this.editcells)e.editcell=e.editcells[t],e._hidecelleditor()}},_hidecelleditor:function(e){if(this.editcell){if("selectedrow"===this.editmode){for(var t=0;t<this.columns.records.length;t++){var i=this.columns.records[t];if(this.editcell[i.datafield]&&this.editcell[i.datafield].editor){this.editcell[i.datafield].editor.hide();var l=this.editcell[i.datafield].editor;switch(i.columntype){case"dropdownlist":l.jqxDropDownList({closeDelay:0}),l.jqxDropDownList("hideListBox"),l.jqxDropDownList({closeDelay:300});break;case"combobox":l.jqxComboBox({closeDelay:0}),l.jqxComboBox("hideListBox"),l.jqxComboBox({closeDelay:300});break;case"datetimeinput":l.jqxDateTimeInput("isOpened")&&(l.jqxDateTimeInput({closeDelay:0}),l.jqxDateTimeInput("hideCalendar"),l.jqxDateTimeInput({closeDelay:300}))}}}return void(this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide()))}if("checkbox"!=this.editcell.columntype){if(this.editcell.editor)switch(this.editcell.editor.hide(),this.editcell.columntype){case"dropdownlist":this.editcell.editor.jqxDropDownList({closeDelay:0}),this.editcell.editor.jqxDropDownList("hideListBox"),this.editcell.editor.jqxDropDownList({closeDelay:300});break;case"combobox":this.editcell.editor.jqxComboBox({closeDelay:0}),this.editcell.editor.jqxComboBox("hideListBox"),this.editcell.editor.jqxComboBox({closeDelay:300});break;case"datetimeinput":var o=this.editcell.editor;o.jqxDateTimeInput("isOpened")&&(o.jqxDateTimeInput({closeDelay:0}),o.jqxDateTimeInput("hideCalendar"),o.jqxDateTimeInput({closeDelay:300}))}this.validationpopup&&(this.validationpopup.hide(),this.validationpopuparrow.hide()),this.isNestedGrid||0!=e&&this.element.focus()}}},_geteditorvalue:function(t){var i=new String;if(!this.editcell)return null;var l=this.editcell.editor;if("selectedrow"==this.editmode&&this.editcell[t.datafield])var l=this.editcell[t.datafield].editor;if(l){switch(t.columntype){case"textbox":default:if(i=l.val(),""!=t.cellsformat){var o="string",d=this.source.datafields||(this.source._source?this.source._source.datafields:null);if(d){var a="";e.each(d,function(){return this.name==t.displayfield?(this.type&&(a=this.type),!1):void 0}),a&&(o=a)}var s="number"===o||"float"===o||"int"===o||"integer"===o,r="date"===o||"time"===o;if(s||"string"===o&&(-1!=t.cellsformat.indexOf("p")||-1!=t.cellsformat.indexOf("c")||-1!=t.cellsformat.indexOf("n")||-1!=t.cellsformat.indexOf("f"))){if(""===i&&t.nullable)return"";i.indexOf(this.gridlocalization.currencysymbol)>-1&&(i=i.replace(this.gridlocalization.currencysymbol,""));var n=function(e,t,i){var l=e;if(t==i)return e;for(var o=l.indexOf(t);-1!=o;)l=l.replace(t,i),o=l.indexOf(t);return l};i=n(i,this.gridlocalization.thousandsseparator,""),i=i.replace(this.gridlocalization.decimalseparator,"."),i.indexOf(this.gridlocalization.percentsymbol)>-1&&(i=i.replace(this.gridlocalization.percentsymbol,""));for(var c="",h=0;h<i.length;h++){var u=i.substring(h,h+1);"-"===u&&(c+="-"),"."===u&&(c+="."),null!=u.match(/^[0-9]+$/)&&(c+=u)}i=c,i=i.replace(/ /g,""),i=new Number(i),isNaN(i)&&(i="")}if(r||"string"===o&&(-1!=t.cellsformat.indexOf("H")||-1!=t.cellsformat.indexOf("m")||-1!=t.cellsformat.indexOf("M")||-1!=t.cellsformat.indexOf("y")||-1!=t.cellsformat.indexOf("h")||-1!=t.cellsformat.indexOf("d"))){if(""===i&&t.nullable)return"";var p=i;i=new Date(i),("Invalid Date"==i||null==i)&&(e.jqx.dataFormat&&(i=e.jqx.dataFormat.tryparsedate(p,this.gridlocalization)),("Invalid Date"==i||null==i)&&(i=""))}}t.displayfield!=t.datafield&&(i={label:i,value:i});break;case"checkbox":l.jqxCheckBox&&(i=l.jqxCheckBox("checked"));break;case"datetimeinput":if(l.jqxDateTimeInput){if(l.jqxDateTimeInput({isEditing:!1}),l.jqxDateTimeInput("_validateValue"),i=l.jqxDateTimeInput("getDate"),null==i)return null;i=new Date(i.toString()),t.displayfield!=t.datafield&&(i={label:i,value:i})}break;case"dropdownlist":if(l.jqxDropDownList){var f=l.jqxDropDownList("selectedIndex"),v=l.jqxDropDownList("listBox").getVisibleItem(f);i=t.displayfield!=t.datafield?v?{label:v.label,value:v.value}:"":v?v.value:"",null==i&&(i="")}break;case"combobox":if(l.jqxComboBox){if(i=l.jqxComboBox("val"),t.displayfield!=t.datafield){var v=l.jqxComboBox("getSelectedItem");null!=v&&(i={label:v.label,value:v.value})}null==i&&(i="")}break;case"numberinput":if(l.jqxNumberInput){this.touchdevice&&l.jqxNumberInput("_doTouchHandling");var m=l.jqxNumberInput("getDecimal");i=new Number(m),i=parseFloat(i),isNaN(i)&&(i=0),t.displayfield!=t.datafield&&(i={label:i,value:i})}}t.geteditorvalue&&(i="selectedrow"==this.editmode?t.geteditorvalue(this.editcell.row,this.getcellvalue(this.editcell.row,t.datafield),l):t.geteditorvalue(this.editcell.row,this.editcell.value,l))}return i},hidevalidationpopups:function(){this.popups&&(e.each(this.popups,function(){this.validation.remove(),this.validationrow.remove()}),this.popups=new Array),this.validationpopup&&(this.validationpopuparrow.hide(),this.validationpopup.hide())},showvalidationpopup:function(t,i,l){if(void 0==l)var l=this.gridlocalization.validationstring;var o=e("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),d=e("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");o.html(l),d.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),o.addClass(this.toThemeProperty("jqx-grid-validation")),o.addClass(this.toThemeProperty("jqx-rc-all")),o.prependTo(this.table),d.prependTo(this.table);var a=this.hScrollInstance,s=a.value,r=parseInt(s),n=this.getcolumn(i).uielement,c=e(this.hittestinfo[t].visualrow);o.css("top",parseInt(c.position().top)+30+"px");var h=parseInt(o.css("top"));d.css("top",h-12),d.removeClass(),d.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));var u=!1;h>=this._gettableheight()&&(d.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),d.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),h=parseInt(c.position().top)-this.rowsheight-5,0>h&&(h=0,this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),u=!0),o.css("top",h+"px"),d.css("top",h+o.outerHeight()-9));var p=-r+parseInt(e(n).position().left);d.css("left",r+p+30);var f=o.width();if(f+p>this.host.width()-20){var v=f+p-this.host.width()+40;p-=v}u?o.css("left",r+parseInt(e(n).position().left)-o.outerWidth()):o.css("left",r+p),o.show(),d.show(),this.popups||(this.popups=new Array),this.popups[this.popups.length]={validation:o,validationrow:d}},_showvalidationpopup:function(t,i,l){var o=this.editcell,d=this.editcell.editor;if("selectedrow"==this.editmode){var o=this.editcell[i];o&&o.editor&&(d=o.editor,o.element=d)}if(d&&!(this.validationpopup&&e.jqx.isHidden(this.validationpopup)&&(this.validationpopup.remove&&(this.validationpopup.remove(),this.validationpopuparrow.remove()),this.validationpopup=null,this.validationpopuparrow=null,void 0===i&&void 0===l&&this.editors&&0===this.editors.length))){if(this.validationpopup)this.validationpopup.html(l);else{var a=e("<div style='z-index: 99999; top: 0px; left: 0px; position: absolute;'></div>"),s=e("<div style='width: 20px; height: 20px; z-index: 999999; top: 0px; left: 0px; position: absolute;'></div>");a.html(l),s.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),a.addClass(this.toThemeProperty("jqx-grid-validation")),a.addClass(this.toThemeProperty("jqx-rc-all")),a.prependTo(this.table),s.prependTo(this.table),this.validationpopup=a,this.validationpopuparrow=s}var r=this.hScrollInstance,n=r.value,c=parseInt(n);"selectedrow"==this.editmode?this.validationpopup.css("top",parseInt(e(o.editor).position().top)+(this.rowsheight+5)+"px"):this.validationpopup.css("top",parseInt(e(o.element).parent().position().top)+(this.rowsheight+5)+"px");var h=parseInt(this.validationpopup.css("top"));this.validationpopuparrow.css("top",h-12),this.validationpopuparrow.removeClass(),this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-up"));var u=this._gettableheight(),p=!1;h>=u&&(this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-up")),this.validationpopuparrow.addClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),h="selectedrow"==this.editmode?parseInt(e(o.editor).position().top)-this.rowsheight-5:parseInt(e(o.element).parent().position().top)-this.rowsheight-5,0>h&&(h=0,this.validationpopuparrow.removeClass(this.toThemeProperty("jqx-grid-validation-arrow-down")),p=!0),this.validationpopup.css("top",h+"px"),this.validationpopuparrow.css("top",h+this.validationpopup.outerHeight()-9));var f=-c+parseInt(e(o.element).position().left);this.validationpopuparrow.css("left",c+f+30);var v=this.validationpopup.width();if(v+f>this.host.width()-20){var m=v+f-this.host.width()+40;f-=m}p?this.validationpopup.css("left",c+parseInt(e(o.element).position().left)-this.validationpopup.outerWidth()):this.validationpopup.css("left",c+f),"none"==this.editcell.editor.css("display")?(this.validationpopup.hide(),this.validationpopuparrow.hide()):(this.validationpopup.show(),this.validationpopuparrow.show())}}})}(jqxBaseFramework);