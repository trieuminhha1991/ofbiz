<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="../../../framework/widget/dtd/widget-screen.xsd">
	<screen name="PromotionCommonDecorator">
		<section>
			<actions>
				<set field="tabBarName" value="ProductPromoTabBar" global="true" />
				<set field="tabBarLocation" value="component://basesales/widget/BaseSalesTabBarMenus.xml" global="true" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<section>
							<condition>
								<and>
									<not><if-empty field="productPromoId"/></not>
								</and>
							</condition>
							<actions><set field="printTabBar" value="true"/></actions>
	                     	<widgets></widgets>
	                 	</section>
	             	</widgets>
				</section>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
                    	<decorator-section-include name="body"/>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
<!-- 	<screen name="PromotionViewCommonDecorator">
		<section>
			<actions>
				<set field="selectedMenuItem" value="promotion" global="true"/>
				<set field="selectedSubMenuItem" value="promotionList" global="true"/>
				<set field="productPromoId" from-field="parameters.productPromoId" global="true"/>
				<set field="tabButtonItem" from-field="tabButtonItem" default-value="" global="true"/>
				<script location="component://basesales/webapp/basesales/WEB-INF/actions/navigator/nav_promoView.groovy"/>
			</actions>
			<widgets>
				<section>
					<condition>
						<or>
							<if-has-permission permission="PRODPROMOTION" action="_VIEW"/>
							<if-has-permission permission="PRODPROMOTION_DIS" action="_VIEW"/>
						</or>
					</condition>
					<actions>
						<entity-one value-field="productPromo" entity-name="ProductPromo">
							<field-map field-name="productPromoId" value="${productPromoId}"/>
						</entity-one>
						<set field="productPromo" from-field="productPromo" global="true"/>
					</actions>
					<widgets>
						<section>
							<condition><not><if-empty field="productPromo"/></not></condition>
							<actions>
								<set field="titleHeaderValue" value="promotionTitle" global="true"/>
								<set field="titleHeaderLocation" value="component://basesales/widget/ProductPromoScreens.xml" global="true"/>
								<set field="currentStatusId" from-field="productPromo.statusId" global="true"/>
							</actions>
							<widgets>
								<decorator-screen name="PromotionCommonDecorator">
									<decorator-section name="body">
										<decorator-section-include name="body"/>
									</decorator-section>
								</decorator-screen>
							</widgets>
							<fail-widgets>
								<decorator-screen name="PromotionCommonDecorator">
									<decorator-section name="body">
										<container style="alert alert-info">
						               		<label text="${uiLabelMap.BSProductPromoHasIdIsNotFound}"></label>
						               	</container>
						           	</decorator-section>
						       	</decorator-screen>
							</fail-widgets>
						</section>
					</widgets>
					<fail-widgets>
						<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<container style="alert alert-info">
									<label text="${uiLabelMap.BSYouHavenotViewPermission}"></label>
								</container>
							</decorator-section>
						</decorator-screen>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen> -->
	<screen name="PromotionViewCommonDecorator">
		<section>
			<actions>
				<set field="selectedMenuItem" value="promotionExt"/>
				<set field="selectedSubMenuItem" value="promotionListExt"/>
				<set field="productPromoId" from-field="parameters.productPromoId" global="true"/>
				<set field="tabButtonItem" from-field="tabButtonItem" default-value="" global="true"/>
				<script location="component://basesalesmtl/webapp/basesalesmtl/WEB-INF/actions/navigator/nav_promoExtView.groovy"/>
			</actions>
			<widgets>
				<section>
					<condition>
						<if-olbius-has-permission/>
					</condition>
					<actions>
						<entity-one value-field="productPromo" entity-name="ProductPromoExt">
							<field-map field-name="productPromoId" value="${productPromoId}"/>
						</entity-one>
						<set field="productPromo" from-field="productPromo" global="true"/>
					</actions>
					<widgets>
						<section>
							<condition><not><if-empty field="productPromo"/></not></condition>
							<actions>
								<set field="titleHeaderValue" value="promotionTitle" global="true"/>
								<set field="titleHeaderLocation" value="component://basesales/widget/ProductPromoScreens.xml" global="true"/>
								<set field="currentStatusId" from-field="productPromo.statusId" global="true"/>
							</actions>
							<widgets>
								<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
									<decorator-section name="body">
										<decorator-section-include name="body"/>
									</decorator-section>
								</decorator-screen>
							</widgets>
							<fail-widgets>
								<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
									<decorator-section name="body">
										<container style="alert alert-info">
						               		<label text="${uiLabelMap.BSProductPromoHasIdIsNotFound}"></label>
						               	</container>
						           	</decorator-section>
						       	</decorator-screen>
							</fail-widgets>
						</section>
					</widgets>
					<fail-widgets>
						<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<container style="alert alert-info">
									<label text="${uiLabelMap.BSYouHavenotViewPermission}"></label>
								</container>
							</decorator-section>
						</decorator-screen>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="PromotionSettlementCommonDecorator">
		<section>
			<actions>
				<set field="selectedMenuItem" from-field="selectedMenuItem" default-value="promotionSettlement"/>
				<set field="selectedSubMenuItem" from-field="selectedSubMenuItem" default-value="promotionSettlementList"/>
			</actions>
			<widgets>
				<section>
					<condition>
						<if-olbius-has-permission/>
					</condition>
					<actions>
						<set field="titleHeaderValue" value="promotionSettlementTitle" global="true"/>
						<set field="titleHeaderLocation" value="component://basesalesmtl/widget/ProductPromoScreens.xml" global="true"/>
					</actions>
					<widgets>
						<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
		                    	<decorator-section-include name="body"/>
							</decorator-section>
						</decorator-screen>
					</widgets>
					<fail-widgets>
						<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
		                    	<container style="alert alert-info">
									<label text="${uiLabelMap.BSYouHavenotViewPermission}"></label>
								</container>
							</decorator-section>
						</decorator-screen>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="ListPromotionExt">
		<section>
			<actions>
				<set field="selectedMenuItem" value="promotionExt"/>
				<set field="selectedSubMenuItem" value="promotionListExt"/>
				<set field="titleProperty" value="BSListExhibitionAccumulation"/>
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-olbius-has-permission/>
							</condition>
							<widgets>
								<platform-specific>
									<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/product/promotionExtList.ftl"/></html>
								</platform-specific>
							</widgets>
							<fail-widgets>
								<container style="alert alert-info">
									<label text="${uiLabelMap.BSYouHavenotViewPermission}"></label>
								</container>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="NewPromotionExtInfo">
		<section>
			<widgets>
				<platform-specific>
					<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/product/promotionExtNewInfo.ftl"/></html>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<screen name="NewPromotionExtRules">
		<section>
			<widgets>
				<platform-specific>
					<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/product/promotionExtNewRules.ftl"/></html>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<screen name="NewPromotionExt">
		<section>
			<actions>
				<set field="selectedMenuItem" value="promotionExt"/>
				<set field="selectedSubMenuItem" value="newPromotionExt"/>
				<set field="titleProperty" value="BSCreateNewProductPromotion"/>
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-olbius-has-permission/>
							</condition>
							<widgets>
								<platform-specific>
									<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/product/promotionExtNewTotal.ftl"/></html>
								</platform-specific>
							</widgets>
							<fail-widgets>
								<container style="alert alert-info">
									<label text="${uiLabelMap.BSYouHavenotCreatePermission}"></label>
								</container>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="EditPromotionExt">
		<section>
			<actions>
				<set field="selectedMenuItem" value="promotionExt"/>
				<set field="selectedSubMenuItem" value="promotionListExt"/>
				<set field="titleProperty" value="BSEditProductPromotion"/>
				<set field="productPromoId" from-field="parameters.productPromoId"/>
			</actions>
			<widgets>
				<section>
					<condition>
						<if-olbius-has-permission/>
					</condition>
					<actions>
						<entity-one value-field="productPromo" entity-name="ProductPromoExt">
							<field-map field-name="productPromoId" value="${productPromoId}"/>
						</entity-one>
					</actions>
					<widgets>
						<section>
							<condition><not><if-empty field="productPromo"/></not></condition>
							<actions>
								<set field="titleHeaderValue" value="promotionTitle" global="true"/>
								<set field="titleHeaderLocation" value="component://basesalesmtl/widget/ProductPromoScreens.xml" global="true"/>
								<set field="currentStatusId" from-field="productPromo.statusId"/>
								<script location="component://basesalesmtl/webapp/basesalesmtl/WEB-INF/actions/product/EditProductPromoExt.groovy"/>
							</actions>
							<widgets>
								<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
									<decorator-section name="body">
										<platform-specific>
											<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/product/promotionExtNewTotal.ftl"/></html>
										</platform-specific>
									</decorator-section>
								</decorator-screen>
							</widgets>
							<fail-widgets>
								<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
									<decorator-section name="body">
										<container style="alert alert-info">
						               		<label text="${uiLabelMap.BSProductPromoHasIdIsNotFound}"></label>
						               	</container>
						           	</decorator-section>
						       	</decorator-screen>
							</fail-widgets>
						</section>
					</widgets>
					<fail-widgets>
						<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<container style="alert alert-info">
									<label text="${uiLabelMap.BSYouHavenotUpdatePermission}"></label>
								</container>
							</decorator-section>
						</decorator-screen>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="promotionTitle">
		<section>
			<condition>
				<not><if-empty field="productPromo"/></not>
			</condition>
			<widgets>
				<label style="ibefore-icon-angle-right" text="${uiLabelMap.BSId}: "></label>
				<link url-mode="plain" target="viewPromotion?productPromoId=${productPromo.productPromoId}" text="${productPromo.productPromoId}"></link>
			</widgets>
		</section>
	</screen>
	<screen name="ViewPromotionExt">
		<section>
			<actions>
				<set field="titleProperty" value="BSViewProductPromotion" global="true"/>
				<set field="tabButtonItem" value="ViewPromotion"/>
			</actions>
			<widgets>
				<decorator-screen name="PromotionViewCommonDecorator">
					<decorator-section name="body">
						<section>
							<actions>
								<script location="component://basesalesmtl/webapp/basesalesmtl/WEB-INF/actions/product/ViewProductPromoExt.groovy"/>
							</actions>
							<widgets>
								<screenlet title="${uiLabelMap.BSProductPromo}: ${productPromo.promoName} (${productPromo.productPromoId})" navigation-menu-name="ViewPromoSubTabBar">
									<include-menu name="ViewPromoSubTabBar" location="component://basesalesmtl/widget/BaseSalesMtlTabBarMenus.xml" />
									<platform-specific>
										<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/product/promotionExtView.ftl"/></html>
									</platform-specific>
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<!-- <screen name="EditPromotion">
		<section>
			<actions>
				<set field="selectedMenuItem" value="promotion"/>
				<set field="selectedSubMenuItem" value="newPromotion"/>
				<set field="titleProperty" value="BSEditProductPromotion"/>
				<set field="productPromoId" from-field="parameters.productPromoId"/>
			</actions>
			<widgets>
				<section>
					<condition>
						<if-has-permission permission="PRODPROMOTION" action="_UPDATE"/>
					</condition>
					<actions>
						<entity-one value-field="productPromo" entity-name="ProductPromo">
							<field-map field-name="productPromoId" value="${productPromoId}"/>
						</entity-one>
					</actions>
					<widgets>
						<section>
							<condition><not><if-empty field="productPromo"/></not></condition>
							<actions>
								<set field="titleHeaderValue" value="promotionTitle" global="true"/>
								<set field="titleHeaderLocation" value="component://basesales/widget/ProductPromoScreens.xml" global="true"/>
								<set field="currentStatusId" from-field="productPromo.statusId"/>
								<script location="component://basesales/webapp/basesales/WEB-INF/actions/product/EditProductPromo.groovy"/>
							</actions>
							<widgets>
								<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
									<decorator-section name="body">
										<platform-specific>
											<html><html-template location="component://basesales/webapp/basesales/product/promotionNewTotal.ftl"/></html>
										</platform-specific>
									</decorator-section>
								</decorator-screen>
							</widgets>
							<fail-widgets>
								<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
									<decorator-section name="body">
										<container style="alert alert-info">
						               		<label text="${uiLabelMap.BSProductPromoHasIdIsNotFound}"></label>
						               	</container>
						           	</decorator-section>
						       	</decorator-screen>
							</fail-widgets>
						</section>
					</widgets>
					<fail-widgets>
						<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<container style="alert alert-info">
									<label text="${uiLabelMap.BSYouHavenotUpdatePermission}"></label>
								</container>
							</decorator-section>
						</decorator-screen>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen> -->
	<!-- <screen name="ListPromotionCode">
		<section>
			<actions>
				<set field="titleProperty" value="BSListVoucher" global="true"/>
				<set field="tabButtonItem" value="ListPromotionCode"/>
			</actions>
			<widgets>
				<decorator-screen name="PromotionViewCommonDecorator">
					<decorator-section name="body">
						<section>
							<widgets>
								<platform-specific>
									<html><html-template location="component://basesales/webapp/basesales/product/promotionCodeList.ftl"/></html>
								</platform-specific>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen> -->
	<!-- <screen name="ViewPromotionCode">
		<section>
			<actions>
				<set field="titleProperty" value="BSListVoucher" global="true"/>
				<set field="tabButtonItem" value="ViewPromotionCode"/>
			</actions>
			<widgets>
				<decorator-screen name="PromotionViewCommonDecorator">
					<decorator-section name="body">
						<include-screen name="ViewPromotionCodeAjax"/>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ViewPromotionCodeAjax">
		<section>
			<actions>
				<property-map map-name="uiLabelMap" resource="CommonUiLabels" global="true"/>
				<property-map map-name="uiLabelMap" resource="WidgetUiLabels" global="true"/>
				<property-map map-name="uiLabelMap" resource="BaseSalesUiLabels" global="true"/>
				<property-map map-name="uiLabelMap" resource="BaseSalesErrorUiLabels" global="true"/>
				
				<entity-one value-field="productPromoCode" entity-name="ProductPromoCode">
					<field-map field-name="productPromoCodeId" from-field="parameters.productPromoCodeId"/>
				</entity-one>
			</actions>
			<widgets>
				<platform-specific>
					<html><html-template location="component://basesales/webapp/basesales/product/promotionCodeViewTotal.ftl"/></html>
				</platform-specific>
			</widgets>
		</section>
	</screen> -->
	
	<screen name="ListPromoSettlement">
		<section>
			<actions>
				<set field="titleProperty" value="BSPromotionSettlementList"/>
			</actions>
			<widgets>
				<decorator-screen name="PromotionSettlementCommonDecorator">
					<decorator-section name="body">
						<platform-specific>
							<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/product/promotionSettlementList.ftl"/></html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ListPromoSettlementResult">
		<section>
			<actions>
				<set field="selectedMenuItem" value="promotionSettlement"/>
				<set field="selectedSubMenuItem" value="promotionSettlementListResult"/>
				<set field="titleProperty" value="BSPromotionSettlementList"/>
			</actions>
			<widgets>
				<decorator-screen name="PromotionSettlementCommonDecorator">
					<decorator-section name="body">
						<platform-specific>
							<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/product/promotionSettlementListResutlByResult.ftl"/></html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="promotionSettlementTitle">
		<section>
			<condition>
				<not><if-empty field="promoSettlement"/></not>
			</condition>
			<widgets>
				<label style="ibefore-icon-angle-right" text="${uiLabelMap.BSId}: "></label>
				<link url-mode="plain" target="viewPromoSettle?promoSettlementId=${promoSettlement.promoSettlementId}" text="${promoSettlement.promoSettlementId}"></link>
			</widgets>
		</section>
	</screen>
	<screen name="ViewPromoSettlement">
		<section>
			<actions>
				<set field="titleProperty" value="BSViewPromotionSettlement"/>
				<entity-one value-field="promoSettlement" entity-name="ProductPromoSettlement">
					<field-map field-name="promoSettlementId" from-field="parameters.promoSettlementId"/>
				</entity-one>
				<set field="currentStatusId" from-field="promoSettlement.statusId"/>
			</actions>
			<widgets>
				<decorator-screen name="PromotionSettlementCommonDecorator">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.BSProductPromoSettlement}: ${promoSettlement.promoSettlementName} (${promoSettlement.promoSettlementId})" navigation-menu-name="ViewPromoSettlementSubTabBar">
							<include-menu name="ViewPromoSettlementSubTabBar" location="component://basesalesmtl/widget/BaseSalesMtlTabBarMenus.xml" />
							<section>
								<condition>
									<not><if-empty field="promoSettlement.productPromoId"/></not>
								</condition>
								<widgets>
									<platform-specific>
										<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/product/promotionSettlementView.ftl"/></html>
									</platform-specific>
								</widgets>
								<fail-widgets>
									<platform-specific>
										<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/product/promotionSettlementExtView.ftl"/></html>
									</platform-specific>
								</fail-widgets>
							</section>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
</screens>