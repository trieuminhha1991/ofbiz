<?xml version="1.0" encoding="UTF-8"?>
<menus xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../framework/widget/dtd/widget-menu.xsd">
	
	<menu name="ViewPromoSubTabBar" extends="CommonTabBarMenu" extends-resource="component://common/widget/CommonMenus.xml">
        <menu-item name="editPromotion" title="${uiLabelMap.BSEdit}" widget-style="icon-pencil open-sans">
            <condition>
            	<and>
            		<if-olbius-has-permission/>
            		<or>
            			<if-empty field="currentStatusId"></if-empty>
            			<and>
            				<not><if-empty field="currentStatusId"></if-empty></not>
            				<if-compare field="currentStatusId" value="PROMO_CREATED" operator="equals"></if-compare>
            			</and>
            		</or>
            	</and>
          	</condition>
            <link target="editPromotionExt">
            	<parameter param-name="productPromoId" from-field="productPromo.productPromoId"/>
            </link>
        </menu-item>
        <menu-item name="newPromotionExt" title="${uiLabelMap.BSCreateNew}" widget-style="icon-plus open-sans">
        	<condition>
				<if-olbius-has-permission/>
			</condition>
            <link target="newPromotionExt"/>
        </menu-item>
	</menu>
	<menu name="ViewPromoSettlementSubTabBar" extends="CommonTabBarMenu" extends-resource="component://common/widget/CommonMenus.xml">
        <menu-item name="processProductPromo" title="${uiLabelMap.BSToDoProcess}" widget-style="fa fa-check open-sans">
            <condition>
            	<and>
            		<if-olbius-has-permission/>
            		<not><if-empty field="currentStatusId"></if-empty></not>
         			<if-compare field="currentStatusId" value="PSETTLE_CREATED" operator="equals"></if-compare>
            	</and>
          	</condition>
            <link target="javascript:OlbPromoSettleView.processProductPromo();" url-mode="plain"/>
        </menu-item>
        <menu-item name="approveProductPromo" title="${uiLabelMap.BSProcessPay}" widget-style="icon-ok open-sans">
            <condition>
            	<and>
            		<if-olbius-has-permission/>
            		<not><if-empty field="currentStatusId"></if-empty></not>
         			<if-compare field="currentStatusId" value="PSETTLE_PROCESSING" operator="equals"></if-compare>
            	</and>
          	</condition>
            <link target="javascript:OlbPromoSettleView.approveProductPromo();" url-mode="plain"/>
        </menu-item>
        <menu-item name="cancelProductPromo" title="${uiLabelMap.BSCancel}" widget-style="icon-remove open-sans">
            <condition>
            	<and>
            		<if-olbius-has-permission/>
            		<not><if-empty field="currentStatusId"></if-empty></not>
            		<or>
            			<if-compare field="currentStatusId" value="PSETTLE_CREATED" operator="equals"></if-compare>
            			<if-compare field="currentStatusId" value="PSETTLE_PROCESSING" operator="equals"></if-compare>
            		</or>
            	</and>
          	</condition>
            <link target="javascript:OlbPromoSettleView.cancelProductPromo();" url-mode="plain"/>
        </menu-item>
        <menu-item name="completeProductPromo" title="${uiLabelMap.BSApproveComplete}" widget-style="icon-ok open-sans">
            <condition>
            	<and>
            		<if-olbius-has-permission/>
            		<not><if-empty field="currentStatusId"></if-empty></not>
         			<if-compare field="currentStatusId" value="PSETTLE_APPROVED" operator="equals"></if-compare>
            	</and>
          	</condition>
            <link target="javascript:OlbPromoSettleView.completeProductPromo();" url-mode="plain"/>
        </menu-item>
        
        <menu-item name="btnCalculateResult" title="${uiLabelMap.BSCalculate}" widget-style="fa fa-calculator open-sans">
            <condition>
            	<and>
            		<if-olbius-has-permission/>
            		<not><if-empty field="currentStatusId"></if-empty></not>
            		<!-- <or>
            			<if-compare field="currentStatusId" value="PSETTLE_CREATED" operator="equals"></if-compare>
            			<if-compare field="currentStatusId" value="PSETTLE_PROCESSING" operator="equals"></if-compare>
            			<if-compare field="currentStatusId" value="PSETTLE_APPROVED" operator="equals"></if-compare>
            		</or> -->
            		<if-compare field="currentStatusId" value="PSETTLE_PROCESSING" operator="equals"></if-compare>
            	</and>
          	</condition>
            <link target="javascript:OlbPromoSettleView.calculateResult();" url-mode="plain"/>
        </menu-item>
        <menu-item name="addPromoSettleItem" title="${uiLabelMap.BSAddItem}" widget-style="icon-pencil open-sans">
            <condition>
            	<and>
            		<if-olbius-has-permission/>
            		<not><if-empty field="currentStatusId"></if-empty></not>
         			<if-compare field="currentStatusId" value="PSETTLE_PROCESSING" operator="equals"></if-compare>
            	</and>
          	</condition>
            <link target="javascript:OlbPromoSettleView.openWindowAddPromoSettleItem();" id="addPromoSettleItem" url-mode="plain"/>
        </menu-item>
	</menu>
</menus>