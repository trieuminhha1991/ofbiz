<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:noNamespaceSchemaLocation="../../../../framework/widget/dtd/widget-screen.xsd">

	<screen name="AgreementWithDistributor">
		<section>
			<actions>
			<set field="link" value="AgreementWithDistributor"/>
				<set field="titleHeaderValue" value="listAgreementTitle" global="true"/>
				<set field="titleHeaderLocation" value="component://basesalesmtl/widget/agreement/AgreementScreens.xml" global="true"/>
				<set field="selectedMenuItem" value="Agreement"/>
				<set field="selectedSubMenuItem" from-field="parameters.sub" default-value="AgreementWithDistributor"/>
				<set field="titleProperty" value="BSAgreementWithDistributor"/>
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-olbius-has-permission/>
							</condition>
							<widgets>
								<platform-specific>
									<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/agreement/agreementWithDistributor.ftl"/></html>
								</platform-specific>
							</widgets>
							<fail-widgets>
								<container style="alert alert-info">
									<label text="${uiLabelMap.BSYouHavenotViewPermission}"/>
								</container>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="listAgreementTitle">
		<section>
			<condition>
				<not><if-empty field="parameters.partyIdFrom"/></not>
			</condition>
			<widgets>
				<label style="ibefore-icon-angle-right" text="${uiLabelMap.BSPartner}: "></label>
				<link url-mode="plain" target="${link}?partyIdFrom=${parameters.partyIdFrom}" text="${parameters.partyIdFrom}"></link>
			</widgets>
		</section>
	</screen>
	<screen name="AgreementWithAgent">
		<section>
			<actions>
				<set field="link" value="AgreementWithAgent"/>
				<set field="titleHeaderValue" value="listAgreementTitle" global="true"/>
				<set field="titleHeaderLocation" value="component://basesalesmtl/widget/agreement/AgreementScreens.xml" global="true"/>
				<set field="selectedMenuItem" from-field="parameters.me" default-value="Agreement"/>
				<set field="selectedSubMenuItem" from-field="parameters.sub" default-value="AgreementWithAgent"/>
				<set field="titleProperty" value="BSAgreementWithAgent"/>
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-olbius-has-permission/>
							</condition>
							<widgets>
								<platform-specific>
									<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/agreement/agreementWithAgent.ftl"/></html>
								</platform-specific>
							</widgets>
							<fail-widgets>
								<container style="alert alert-info">
									<label text="${uiLabelMap.BSYouHavenotViewPermission}"/>
								</container>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="agreementTitle">
		<section>
			<condition>
				<not><if-empty field="parameters.agreementId"/></not>
			</condition>
			<widgets>
				<label style="ibefore-icon-angle-right" text="${uiLabelMap.DAId}: "></label>
				<link url-mode="plain" target="${link}?agreementId=${parameters.agreementId}" text="${parameters.agreementId}"></link>
			</widgets>
		</section>
	</screen>
	<screen name="AddAgreement">
		<section>
			<actions>
				<set field="link" value="AddAgreement"/>
				<set field="titleHeaderValue" value="agreementTitle" global="true"/>
				<set field="titleHeaderLocation" value="component://basesalesmtl/widget/agreement/AgreementScreens.xml" global="true"/>
				<set field="selectedMenuItem" value="Agreement"/>
				<set field="selectedSubMenuItem" from-field="parameters.sub" default-value="AddAgreement"/>
				<set field="titleProperty" value="BSAddAgreement"/>
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-olbius-has-permission/>
							</condition>
							<widgets>
								<platform-specific>
									<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/agreement/addAgreement.ftl"/></html>
								</platform-specific>
							</widgets>
							<fail-widgets>
								<container style="alert alert-info">
									<label text="${uiLabelMap.BSYouHavenotViewPermission}"/>
								</container>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="AgreementDetail">
		<section>
			<actions>
				<set field="link" value="AgreementDetail"/>
				<set field="titleHeaderValue" value="agreementTitle" global="true"/>
				<set field="titleHeaderLocation" value="component://basesalesmtl/widget/agreement/AgreementScreens.xml" global="true"/>
				<set field="selectedMenuItem" value="Agreement"/>
				<set field="selectedSubMenuItem" from-field="parameters.sub" default-value="AgreementWithDistributor"/>
				<set field="titleProperty" value="BSAgreementDetail"/>
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<condition>
								<if-olbius-has-permission/>
							</condition>
							<widgets>
								<platform-specific>
									<html><html-template location="component://basesalesmtl/webapp/basesalesmtl/agreement/agreementDetail.ftl"/></html>
								</platform-specific>
							</widgets>
							<fail-widgets>
								<container style="alert alert-info">
									<label text="${uiLabelMap.BSYouHavenotViewPermission}"/>
								</container>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="AgreementPDF">
		<section>
			<actions>
				<property-map resource="BasePOUiLabels" map-name="uiLabelMap" global="true"/>
					<property-map resource="BaseLogisticsUiLabels" map-name="uiLabelMap" global="true"/>
					<property-map resource="BaseSalesUiLabels" map-name="uiLabelMap" global="true"/>
					<property-map resource="BaseSalesMtlUiLabels" map-name="uiLabelMap" global="true"/>
					<property-map resource="BaseAccountingUiLabels" map-name="uiLabelMap" global="true"/>
				<script location="component://basesalesmtl/webapp/basesalesmtl/WEB-INF/actions/agreement/agreementInfo.groovy"/>
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare operator="equals" value="RETAIL_OUTLET" field="agreement.partyTypeFrom"/>
					</condition>
					<widgets>
								<include-screen name="AgreementAgent"/>
					</widgets>
					<fail-widgets>
						<include-screen name="AgreementDistributor"/>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="AgreementAgent">
		<section>
			<actions>
				<service service-name="loadAgreementDOrAInfo" result-map="resultValueLoad">
					<field-map field-name="typePDF" value="agent"/>
				</service>
				<set field="agreementInfo" from-field="resultValueLoad.agreementInfo.listTerms"/>
			</actions>
			<widgets>
					<decorator-screen name="FoReportDecorator" location="component://basepo/widget/OrderScreens.xml">
						<decorator-section name="headerLogo">
							<platform-specific>
								<xsl-fo><html-template location="component://basesalesmtl/webapp/basesalesmtl/agreement/document/agreementAgentHeader.fo.ftl"/></xsl-fo>
							</platform-specific>
						</decorator-section>
						<decorator-section name="body">
							<platform-specific>
							 	<xsl-fo><html-template location="component://basesalesmtl/webapp/basesalesmtl/agreement/document/agreementAgent.fo.ftl"/></xsl-fo>
							</platform-specific>
						</decorator-section>
					</decorator-screen> 
			</widgets>
		</section>
	</screen>
	<screen name="AgreementDistributor">
		<section>
			<actions>
				<service service-name="loadAgreementDOrAInfo" result-map="resultValueLoad">
					<field-map field-name="typePDF" value="distributor"/>
				</service>
				<set field="agreementInfo" from-field="resultValueLoad.agreementInfo.listTerms"/>
			</actions>
			<widgets>
					<decorator-screen name="FoReportDecorator" location="component://basepo/widget/OrderScreens.xml">
						<decorator-section name="headerLogo">
							<platform-specific>
								<xsl-fo><html-template location="component://basesalesmtl/webapp/basesalesmtl/agreement/document/agreementDistributorHeader.fo.ftl"/></xsl-fo>
							</platform-specific>
						</decorator-section>
						<decorator-section name="body">
							<platform-specific>
							 	<xsl-fo><html-template location="component://basesalesmtl/webapp/basesalesmtl/agreement/document/agreementDistributor.fo.ftl"/></xsl-fo>
							</platform-specific>
						</decorator-section>
					</decorator-screen> 
			</widgets>
		</section>
	</screen>
	
</screens>