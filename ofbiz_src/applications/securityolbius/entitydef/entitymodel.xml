<?xml version="1.0" encoding="UTF-8"?>

<entitymodel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../../../framework/entity/dtd/entitymodel.xsd">

	<entity entity-name="OlbiusApplication" package-name="com.olbius.security.application">
		<field name="applicationId" type="id-ne" />
		<field name="applicationType" type="id-ne" />
		<field name="application" type="description" />
		<field name="name" type="description" />
		<field name="permissionId" type="id-long-ne" />
		<field name="moduleId" type="id-ne" />
		<prim-key field="applicationId" />
		<relation rel-entity-name="SecurityPermission" type="one" fk-name="OLB_APP_PERM">
			<key-map field-name="permissionId" />
		</relation>
		<relation rel-entity-name="OlbiusApplication" type="one" fk-name="OLB_APP_MODULE">
			<key-map field-name="moduleId" rel-field-name="applicationId" />
		</relation>
	</entity>

	<entity entity-name="OlbiusOverridePermission" package-name="com.olbius.security.application">
		<field name="applicationId" type="id-ne" />
		<field name="permissionId" type="id-long-ne" />
		<field name="overridePermissionId" type="id-long-ne" />
		<prim-key field="applicationId" />
		<prim-key field="permissionId" />
		<relation rel-entity-name="OlbiusApplication" type="one" fk-name="OLB_APP_OVP">
			<key-map field-name="applicationId" />
		</relation>
		<relation rel-entity-name="SecurityPermission" title="permission" type="one" fk-name="OLB_APP_OVP_PERM">
			<key-map field-name="permissionId" />
		</relation>
		<relation rel-entity-name="SecurityPermission" title="overridePermission" type="one" fk-name="OLB_APP_OVP_OPERM">
			<key-map field-name="overridePermissionId" rel-field-name="permissionId" />
		</relation>
	</entity>

	<entity entity-name="OlbiusPermission" package-name="com.olbius.security.party">
		<field name="permissionId" type="id-long-ne" />
		<field name="permissionIncludeId" type="id-long-ne" />
		<prim-key field="permissionIncludeId" />
		<relation rel-entity-name="SecurityPermission" title="permission" type="one" fk-name="OLB_PERM_P">
			<key-map field-name="permissionId" />
		</relation>
		<relation rel-entity-name="SecurityPermission" title="IncludePermission" type="one" fk-name="OLB_PERM_PI">
			<key-map field-name="permissionIncludeId" rel-field-name="permissionId" />
		</relation>
	</entity>

	<entity entity-name="OlbiusPartyPermission" package-name="com.olbius.security.party">
		<field name="applicationId" type="id-ne" />
		<field name="partyId" type="id-ne" />
		<field name="permissionId" type="id-long-ne" />
		<field name="fromDate" type="date-time" />
		<field name="thruDate" type="date-time" />
		<field name="allow" type="boolean" />
		<prim-key field="applicationId" />
		<prim-key field="partyId" />
		<prim-key field="permissionId" />
		<prim-key field="fromDate" />
		<relation rel-entity-name="OlbiusApplication" type="one" fk-name="OLB_PP_APP">
			<key-map field-name="applicationId" />
		</relation>
		<relation rel-entity-name="Party" type="one" fk-name="OLB_PP_PARTY">
			<key-map field-name="partyId" />
		</relation>
		<relation rel-entity-name="SecurityPermission" type="one" fk-name="OLB_PP_PERM">
			<key-map field-name="permissionId" />
		</relation>
	</entity>

	<entity entity-name="OlbiusPartyRelationshipType" package-name="com.olbius.security.party">
		<field name="partyRelationshipTypeId" type="id" />
		<field name="member" type="id-ne" />
		<prim-key field="partyRelationshipTypeId" />
		<relation type="one" fk-name="OLB_PARTY_REL_TYPE" rel-entity-name="PartyRelationshipType">
			<key-map field-name="partyRelationshipTypeId" />
		</relation>
	</entity>

</entitymodel>
