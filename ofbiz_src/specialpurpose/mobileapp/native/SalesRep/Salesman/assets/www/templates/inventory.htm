<ion-view view-title="{{header}}">
	<ion-nav-buttons side="right">
		<button class="button buttons" ng-click="createOrder()" ng-if="isInventory && isValidDistance">
			<i class="icon fa fa-cart-plus"></i>
		</button>
		<button class="button buttons" ng-click="buildConfirm(null, getLabel('ConfirmCheckInventory'), checkInventory)" ng-if="isValidDistance && (currentCustomer.isInventory || !isInventory)">
			<i class="icon ion-checkmark"></i>
		</button>
    </ion-nav-buttons>
	<ion-content scroll="false">
		<search-input class='search' ng-if="isValidDistance && currentInventory.length" search="self.search"></search-input>
		<ion-scroll direction="y" class='inventory-container'>
			<ion-refresher pulling-text="{{getLabel('PullToRefresh')}}" on-refresh="getLastInventory(true)"></ion-refresher>
			<ion-list class='inventory' ng-if="isValidDistance && currentInventory.length">
				<ion-item ng-repeat="product in currentInventory | filter:search track by $index " class='item-icon-right cart-item'>
					<div
					ng-click="setQuantity(product, 'qtyInInventory', true, product.max)"
					on-swipe-left="setQuantity(product, 'qtyInInventory', false, 0)"
					on-swipe-right="setQuantity(product, 'qtyInInventory', true, product.max)"
					on-hold="handleHoldQuantity(product, 'qtyInInventory', true, product.max)"
					on-release="handleReleaseQuantity(product, 'qtyInInventory', true, product.max)"
					>
						<h3>{{product.productCode}} - {{product.productName}} </h3>
						<p>
							<i class='ion-ios-calendar-outline'></i>&nbsp;{{ product.orderDate}}
						</p>
					</div>
					<div class="cartquantity">
						<input type="number" name="input" class="number" placeholder="0" id="quantity{{product.productId}}"
							ng-model="product.qtyInInventory" min="0" max="{{product.max}}"
							ng-keyup="changeQuantity(product, 'qtyInInventory')" required>
						<div class='regulator'>
							<div class="rexsub" ng-class="{'disabled': product.qtyInInventory==0}"
							ng-click="setQuantity(product, 'qtyInInventory', false, 0)">
								<i class="ion-ios-minus-outline"></i>
							</div>
							<div class="rexadd" ng-class="{'disabled':product.qtyInInventory==product.max}"
							ng-click="setQuantity(product, 'qtyInInventory', true, product.max)">
								<i class="ion-ios-plus-outline"></i>
							</div>
						</div>
					</div>
				</ion-item>
			</ion-list>
			<div ng-if="!currentInventory.length && isValidDistance">
				<ion-list>
					<ion-item class='item-body item-icon-right'>
						<b class="red">{{getLabel('NoInventoryStore')}}</b>
						<i class='icon fa fa-cart-plus positive' ng-click="createOrder()">&nbsp;</i>
					</ion-item>
				</ion-list>
			</div>
			<div ng-if="!isValidDistance">
				<ion-list>
					<ion-item class='item-body'>
						{{getLabel('ConditionCreateOrder')}} <span class="blue">{{getLabel('reload')}}
					</ion-item>
				</ion-list>
				<button ng-click="reloadDistance()" class="button button-royal button-fab button-fab-bottom-right">
					<i class="icon fa fa-refresh"></i>
				</button>
				<button ng-click="editLocation()" class="button button-assertive button-fab button-fab-bottom-right">
					<i class="icon fa fa-map-marker"></i>
				</button>
			</div>
		</ion-scroll>
	</ion-content>
</ion-view>