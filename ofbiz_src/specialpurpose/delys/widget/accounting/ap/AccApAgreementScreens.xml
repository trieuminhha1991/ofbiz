<?xml version="1.0" encoding="UTF-8"?>
<!-- Licensed to the Apache Software Foundation (ASF) under one or more contributor
	license agreements. See the NOTICE file distributed with this work for additional
	information regarding copyright ownership. The ASF licenses this file to
	you under the Apache License, Version 2.0 (the "License"); you may not use
	this file except in compliance with the License. You may obtain a copy of
	the License at http://www.apache.org/licenses/LICENSE-2.0 Unless required
	by applicable law or agreed to in writing, software distributed under the
	License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS
	OF ANY KIND, either express or implied. See the License for the specific
	language governing permissions and limitations under the License. -->

<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <screen name="CommonAgreementDecorator">
        <section>
            <actions>
                <set field="selectedSubMenuItem" value="accApAgreements"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="WorkEffortUiLabels" map-name="uiLabelMap" global="true"/>
            </actions>
            <widgets>
            	<section>
                    <condition>
                        <and>
                            <if-service-permission service-name="acctgAgreementPermissionCheck" main-action="VIEW"/>
                            <not><if-empty field="agreement"/></not>
                        </and>
                    </condition>
                    <actions>
						<set field="tabBarName" value="AgreementTabBar" global="true" />
						<set field="tabBarLocation" value="component://delys/widget/accounting/ap/AccApAccountingMenus.xml" global="true" />
						<set field="titleHeaderContent" value="[${agreement.agreementId}]" global="true" />
				  </actions>
                    <widgets>
                    	<section>
		                	<actions>
								<set field="printTabBar" value="true" />
							</actions>
		                    <widgets>

		                    </widgets>
		                </section>
                    </widgets>
                </section>
                <decorator-screen name="main-decorator" location="component://delys/widget/accounting/ap/CommonScreens.xml">
                    <decorator-section name="pre-body">
                        <section>
                            <condition>
                                <and>
                                    <if-service-permission service-name="acctgAgreementPermissionCheck" main-action="VIEW"/>
                                    <not><if-empty field="agreement"/></not>
                                </and>
                            </condition>
                            <widgets>
                            </widgets>
                        </section>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <if-service-permission service-name="acctgAgreementPermissionCheck" main-action="VIEW"/>
                            </condition>
                            <widgets>
                                <section>
                                    <condition>
                                        <not><if-empty field="agreement"/></not>
                                    </condition>
                                    <widgets>
                                        <container	style="smaller lighter blue">
                                        </container>
                                    </widgets>
                                </section>
                                <decorator-section-include name="body"/>
                            </widgets>
                            <fail-widgets>
                            	<container style="smaller blue lighter">
                                <label style="h3" text="${uiLabelMap.AccountingViewPermissionError}"></label>
                                </container>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <!-- list all assets in a tabular format -->
    <screen name="FindAgreement">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleFindAgreement"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <if-service-permission service-name="acctgAgreementPermissionCheck" main-action="VIEW"/>
                            </condition>
                            <widgets>
                                <platform-specific>
                                   		<html>
                                   			<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementJQ.ftl"/>
                                   		</html>
                                </platform-specific>
                            </widgets>
                            <fail-widgets>
                            	<container style="smaller lighter blue">
                                	<label style="h3">${uiLabelMap.AccountingViewPermissionError}</label>
                                </container>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
         </section>
    </screen>

    <screen name="EditAgreement">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditAgreement"/>
                <set field="tabButtonItem" value="AgreementMain"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <entity-one entity-name="Agreement" value-field="agreement"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <not><if-empty field="agreement"/></not>
                            </condition>
                            <widgets>
                                <screenlet title="${uiLabelMap.PageTitleEditAgreement}" navigation-menu-name="CreateAgreeTabBar">
                        			<include-menu name="CreateAgreeTabBar" location="component://delys/widget/accounting/ap/AccApAgreementMenus.xml"/>
                            		<include-form name="EditAgreement" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        		</screenlet>
                            </widgets>
                            <fail-widgets>
                            	<screenlet title="${uiLabelMap.PageTitleNewAgreement}" navigation-menu-name="CreateAgreeTabBar">
                            		<include-form name="EditAgreement" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        		</screenlet>
                            </fail-widgets>
                        </section>

                        <platform-specific>
                            <html><html-template location="component://accounting/webapp/accounting/agreement/CopyAgreement.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ListAgreementItems">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleListAgreementItems"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <entity-one entity-name="Agreement" value-field="agreement"/>
                <entity-and entity-name="AgreementItem" list="agreementItems">
                    <field-map from-field="agreement.agreementId" field-name="agreementId"/>
                </entity-and>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                       <platform-specific>
							<html>
								<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementItems.ftl"></html-template>
							</html>                       
                       </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EditAgreementItem">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditAgreementItem"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="EditAgreementItem"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <entity-one entity-name="Agreement" value-field="agreement"/>
                <property-to-field field="defaultCurrencyUomId" resource="general" property="currency.uom.id.default" default="USD"/>
                <set field="agreementItemSeqId" from-field="parameters.agreementItemSeqId"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
						<section>
							<condition>
								<not>
									<if-empty field="agreement"/>
								</not>
							</condition>
							<widgets>
								<screenlet title="                    " navigation-menu-name="AgreementItemTabBar">
									 <include-menu name="AgreementItemTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
<!--                            			 <include-form name="EditAgreementItem" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/> -->
                        		</screenlet>
		                        <platform-specific>
		                        	<html>
		                        		<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementItemsSeq.ftl"></html-template>
		                        	</html>
		                        </platform-specific>                        		
							</widgets>
							<fail-widgets>
								<screenlet title="${uiLabelMap.PageTitleNewAgreementItem}">
                           			 <include-form name="EditAgreementItem" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        		</screenlet>
							</fail-widgets>
						</section>

                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EditAgreementTerms">
        <section>
            <actions>
                <set field="titleProperty" value="AccountingAgreementTerms"/>
                <set field="tabButtonItem" value="AgreementTerms"/>
                <set field="buttonBarItem" value="EditAgreementTerms"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <entity-one entity-name="Agreement" value-field="agreement"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                    	<platform-specific>
                    		<html>
                    			<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementTerms.ftl"></html-template>
                    		</html>
                    	</platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ListAgreementPromoAppls">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleListAgreementPromoAppls"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementPromoAppls"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <entity-one entity-name="Agreement" value-field="agreement"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-and entity-name="AgreementPromoAppl" list="agreementPromoAppls">
                    <field-map from-field="agreement.agreementId" field-name="agreementId"/>
                    <field-map from-field="agreementItem.agreementItemSeqId" field-name="agreementItemSeqId"/>
                    <order-by field-name="sequenceNum"/>
                </entity-and>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="                                " navigation-menu-name="AgreementItemPromotionSubTabBar">
                           	<include-menu name="AgreementItemPromotionSubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
                            <!-- <include-form name="ListAgreementPromoAppls" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/> -->
                        </screenlet>
                        <platform-specific>
                        	<html>
                        		<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementItemPromoAppls.ftl"></html-template>
                        	</html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EditAgreementPromoAppl">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditAgreementPromoAppl"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementPromoAppls"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <entity-one entity-name="Agreement" value-field="agreement"/>
                <set field="agreementTermId" from-field="parameters.agreementTermId"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem" auto-field-map="true"/>
                <entity-one entity-name="AgreementPromoAppl" value-field="agreementPromoAppl" auto-field-map="true"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
<!--                         <container> -->
<!--                             <link target="accApEditAgreementPromoAppl" text="${uiLabelMap.AccountingNewAgreementPromoAppl}" style="btn btn-info btn-small"> -->
<!--                                 <parameter param-name="agreementId" from-field="agreement.agreementId"/> -->
<!--                                 <parameter param-name="agreementItemSeqId" from-field="agreementItem.agreementItemSeqId"/> -->
<!--                             </link> -->
<!--                         </container> -->
                        <screenlet title="${uiLabelMap.PageTitleEditAgreementPromoAppl}" navigation-menu-name="AgreementItemPromotionSubTabBar">
							<include-menu name="AgreementItemPromotionSubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
                            <include-form name="EditAgreementPromoAppl" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ListAgreementItemTerms">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleListAgreementItemTerms"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementItemTerms"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <entity-one entity-name="Agreement" value-field="agreement"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-and entity-name="AgreementTerm" list="agreementTerms">
                    <field-map from-field="agreement.agreementId" field-name="agreementId"/>
                    <field-map from-field="agreementItem.agreementItemSeqId" field-name="agreementItemSeqId"/>
                </entity-and>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="                " navigation-menu-name="AgreementItemTermSubTabBar">
                        	<include-menu name="AgreementItemTermSubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
                            <!-- <include-form name="ListAgreementItemTerms" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/> -->
                        	<platform-specific>
                        		<html>
                        			<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementItemTerms.ftl"/>
                        		</html>
                        	</platform-specific>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EditAgreementItemTerm">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditAgreementItemTerm"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementItemTerms"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <set field="agreementItemSeqId" from-field="parameters.agreementItemSeqId"/>
                <set field="agreementTermId" from-field="parameters.agreementTermId"/>
                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem" auto-field-map="true"/>
                <entity-one entity-name="AgreementTerm" value-field="agreementTerm" auto-field-map="true"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <container>
                            <link target="accApEditAgreementItemTerm" text="${uiLabelMap.AccountingNewAgreementItemTerm}" style="btn btn-info btn-small">
                                <parameter param-name="agreementId" from-field="agreement.agreementId"/>
                                <parameter param-name="agreementItemSeqId" from-field="agreementItem.agreementItemSeqId"/>
                            </link>
                        </container>
                        <screenlet title="${uiLabelMap.PageTitleEditAgreementItemTerm}" navigation-menu-name="AgreementItemTermSubTabBar">
                            <include-menu name="AgreementItemTermSubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
                            <include-form name="EditAgreementItemTerm" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ListAgreementItemProducts">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleListAgreementItemProducts"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementItemProducts"/>
                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-and entity-name="AgreementProductAppl" list="agreementProducts">
                    <field-map from-field="agreement.agreementId" field-name="agreementId"/>
                    <field-map from-field="agreementItem.agreementItemSeqId" field-name="agreementItemSeqId"/>
                    <order-by field-name="productId"/>
                </entity-and>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="                  " navigation-menu-name="AgreementItemProductSubTabBar">
                            <include-menu name="AgreementItemProductSubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
                            <platform-specific>
                        		<html>
                        			<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementProductAppl.ftl"/>
                        		</html>
                        	</platform-specific>
<!--                             <include-form name="ListAgreementItemProducts" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/> -->
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ListAgreementItemFacilities">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleListAgreementItemFacilities"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementItemFacilities"/>
                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-and entity-name="AgreementFacilityAppl" list="agreementFacilities">
                    <field-map from-field="agreement.agreementId" field-name="agreementId"/>
                    <field-map from-field="agreementItem.agreementItemSeqId" field-name="agreementItemSeqId"/>
                    <order-by field-name="facilityId"/>
                </entity-and>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="         " navigation-menu-name="AgreementItemFacilitiesSubTabBar">
                        	<include-menu name="AgreementItemFacilitiesSubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
							<platform-specific>
                        		<html>
                        			<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementItemFacility.ftl"/>
                        		</html>
                        	</platform-specific>                        	
<!--                             <include-form name="ListAgreementItemFacilities" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/> -->
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ListAgreementItemProductsReport">
        <section>
            <actions>
                <set field="titleProperty" value="AccountingPageTitleAgreementPriceList"/>
                <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>

                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-and entity-name="AgreementProductAppl" list="agreementProducts">
                    <field-map from-field="agreement.agreementId" field-name="agreementId"/>
                    <field-map from-field="agreementItem.agreementItemSeqId" field-name="agreementItemSeqId"/>
                    <order-by field-name="productId"/>
                </entity-and>
            </actions>
            <widgets>
                <decorator-screen name="SimpleDecorator" location="component://common/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.AccountingAgreement}">
                            <include-form name="ViewAgreementInfoForReport" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                        <screenlet title="${uiLabelMap.AccountingAgreementItem}">
                            <include-form name="ViewAgreementItemInfoForReport" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                        <screenlet title="${uiLabelMap.AccountingAgreementItemProductsForReport}">
                            <include-form name="ListAgreementItemProductsForReport" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ListAgreementItemFacilitiesReport">
        <section>
            <actions>
                <set field="titleProperty" value="AccountingPageTitleAgreementPriceList"/>
                <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>

                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-and entity-name="AgreementFacilityAppl" list="agreementFacilities">
                    <field-map from-field="agreement.agreementId" field-name="agreementId"/>
                    <field-map from-field="agreementItem.agreementItemSeqId" field-name="agreementItemSeqId"/>
                    <order-by field-name="facilityId"/>
                </entity-and>
            </actions>
            <widgets>
                <decorator-screen name="SimpleDecorator" location="component://common/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.AccountingAgreement}">
                            <include-form name="ViewAgreementInfoForReport" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                        <screenlet title="${uiLabelMap.AccountingAgreementItem}">
                            <include-form name="ViewAgreementItemInfoForReport" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                        <screenlet title="${uiLabelMap.AccountingAgreementItemFacilitiesForReport}">
                            <include-form name="ListAgreementItemFacilitiesForReport" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EditAgreementItemProduct">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditAgreementItemProduct"/>
                <set field="tabButtonItem" value="AgreementItems"/>

                <set field="agreementId" from-field="parameters.agreementId"/>
                <set field="agreementItemSeqId" from-field="parameters.agreementItemSeqId"/>
                <set field="productId" from-field="parameters.productId"/>

                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-one entity-name="AgreementProductAppl" value-field="agreementProductAppl" auto-field-map="true"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.PageTitleEditAgreementItemProduct}" navigation-menu-name="AgreementItemProductSubTabBar">
                            <include-menu name="AgreementItemProductSubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
                            <include-form name="EditAgreementItemProduct" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EditAgreementItemFacility">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditAgreementItemFacility"/>
                <set field="tabButtonItem" value="AgreementItems"/>

                <set field="agreementId" from-field="parameters.agreementId"/>
                <set field="agreementItemSeqId" from-field="parameters.agreementItemSeqId"/>
                <set field="facilityId" from-field="parameters.facilityId"/>

                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-one entity-name="AgreementFacilityAppl" value-field="agreementFacilityAppl" auto-field-map="true"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.PageTitleEditAgreementItemFacility}" navigation-menu-name="AgreementItemFacilitiesSubTabBar">
                        	<include-menu name="AgreementItemFacilitiesSubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
                            <include-form name="EditAgreementItemFacility" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ListAgreementItemSupplierProducts">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleListAgreementItemProducts"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementItemSupplierProducts"/>
                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-and entity-name="SupplierProduct" list="agreementProducts">
                    <field-map from-field="agreement.agreementId" field-name="agreementId"/>
                    <field-map from-field="agreementItem.agreementItemSeqId" field-name="agreementItemSeqId"/>
                    <order-by field-name="productId"/>
                </entity-and>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <container>
                            <link target="accApEditAgreementItemSupplierProduct" text="${uiLabelMap.ProductNewProduct}" style="btn btn-info btn-small">
                                <parameter param-name="agreementId" from-field="agreement.agreementId"/>
                                <parameter param-name="agreementItemSeqId" from-field="agreementItem.agreementItemSeqId"/>
                            </link>
                            <link target="accApListAgreementItemSupplierProductsReport" text="${uiLabelMap.CommonPrint}" style="btn btn-info btn-small">
                                <parameter param-name="agreementId" from-field="agreement.agreementId"/>
                                <parameter param-name="agreementItemSeqId" from-field="agreementItem.agreementItemSeqId"/>
                            </link>
                        </container>
                        <screenlet title="${uiLabelMap.PageTitleListAgreementItemProducts}">
                            <include-form name="ListAgreementItemSupplierProducts" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ListAgreementItemSupplierProductsReport">
        <section>
            <actions>
                <set field="titleProperty" value="AccountingPageTitleAgreementPriceList"/>
                <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>

                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-and entity-name="SupplierProduct" list="agreementProducts">
                    <field-map from-field="agreement.agreementId" field-name="agreementId"/>
                    <field-map from-field="agreementItem.agreementItemSeqId" field-name="agreementItemSeqId"/>
                    <order-by field-name="productId"/>
                </entity-and>
            </actions>
            <widgets>
                <decorator-screen name="SimpleDecorator" location="component://common/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.AccountingAgreement}">
                            <include-form name="ViewAgreementInfoForReport" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                        <screenlet title="${uiLabelMap.AccountingAgreementItem}">
                            <include-form name="ViewAgreementItemInfoForReport" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                        <screenlet title="${uiLabelMap.AccountingAgreementItemSupplierProductsForReport}">
                            <include-form name="ListAgreementItemSupplierProductsForReport" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EditAgreementItemSupplierProduct">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditAgreementItemProduct"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementItemSupplierProducts"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <set field="agreementItemSeqId" from-field="parameters.agreementItemSeqId"/>
                <set field="productId" from-field="parameters.productId"/>
                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-one entity-name="SupplierProduct" value-field="agreementProductAppl" auto-field-map="true"/>
            </actions>
            <widgets>
            <section>
            <condition>
                <and>
                    <not><if-empty field="agreement.partyIdTo"/></not>
                    <not><if-empty field="agreementItem.currencyUomId"/></not>
                </and>
            </condition>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <container>
                            <link target="accApEditAgreementItemSupplierProduct" text="${uiLabelMap.ProductNewProduct}" style="buttontext">
                                <parameter param-name="agreementId" from-field="agreement.agreementId"/>
                                <parameter param-name="agreementItemSeqId" from-field="agreementItem.agreementItemSeqId"/>
                            </link>
                        </container>
                        <screenlet title="${uiLabelMap.PageTitleEditAgreementItemProduct}">
                            <include-form name="EditAgreementItemSupplierProduct" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
            <fail-widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <container>
                            <label style="h2">${uiLabelMap.AccountingAgreementIsNotSetForSupplierProducts}</label>
                        </container>
                    </decorator-section>
                </decorator-screen>
            </fail-widgets>
            </section>
        </widgets>
        </section>
    </screen>

    <screen name="ListAgreementItemParties">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleListAgreementItemParties"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementItemParties"/>
                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-and entity-name="AgreementPartyApplic" list="agreementParties">
                    <field-map from-field="agreement.agreementId" field-name="agreementId"/>
                    <field-map from-field="agreementItem.agreementItemSeqId" field-name="agreementItemSeqId"/>
                </entity-and>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="          " navigation-menu-name="AgreementItemPartySubTabBar">
                        	<include-menu name="AgreementItemPartySubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
							<platform-specific>
								<html>
									<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementItemParties.ftl"/>
								</html>
							</platform-specific>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EditAgreementItemParty">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditAgreementItemParty"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementItemParties"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <set field="agreementItemSeqId" from-field="parameters.agreementItemSeqId"/>
                <set field="partyId" from-field="parameters.partyId"/>
                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-one entity-name="AgreementPartyApplic" value-field="agreementPartyApplic" auto-field-map="true"/>
           </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.PageTitleEditAgreementItemParty}" navigation-menu-name="AgreementItemPartySubTabBar">
                        	<include-menu name="AgreementItemPartySubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
                            <include-form name="EditAgreementItemParty" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="ListAgreementGeographicalApplic">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleListAgreementGeographicalApplic"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementGeographicalApplic"/>
                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem"/>
                <entity-and entity-name="AgreementGeographicalApplic" list="agreementGeographicalApplics">
                    <field-map from-field="agreement.agreementId" field-name="agreementId"/>
                    <field-map from-field="agreementItem.agreementItemSeqId" field-name="agreementItemSeqId"/>
                </entity-and>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="                " navigation-menu-name="AgreementItemGeographicalApplicSubTabBar">
                        	<include-menu name="AgreementItemGeographicalApplicSubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
                            <!-- <include-form name="ListAgreementGeographicalApplic" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/> -->
                        	<platform-specific>
                        		<html>
                        			<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementItemGeographicalApplic.ftl"/>
                        		</html>
                        	</platform-specific>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EditAgreementGeographicalApplic">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditAgreementGeographicalApplic"/>
                <set field="tabButtonItem" value="AgreementItems"/>
                <set field="buttonBarItem" value="ListAgreementGeographicalApplic"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <set field="agreementItemSeqId" from-field="parameters.agreementItemSeqId"/>
                <set field="geoId" from-field="parameters.geoId"/>
                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
                <entity-one entity-name="AgreementItem" value-field="agreementItem" auto-field-map="true"/>
                <entity-one entity-name="AgreementGeographicalApplic" value-field="agreementGeographicalApplic" auto-field-map="true"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.PageTitleEditAgreementGeographicalApplic}" navigation-menu-name="AgreementItemGeographicalApplicSubTabBar">
                        	<include-menu name="AgreementItemGeographicalApplicSubTabBar" location="component://delys/widget/accounting/ap/AccApAccountingMenus.xml"/>
                            <include-form name="EditAgreementGeographicalApplic" location="component://delys/widget/accounting/ap/AccApAgreementForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="EditAgreementWorkEffortApplics">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditAgreementWorkEffortApplics"/>
                <set field="tabButtonItem" value="AgreementWorkEffortApplics"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                    	<platform-specific>
                    		<html>
                    			<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementWorkEffortApplics.ftl"></html-template>
                    		</html>
                    	</platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="EditAgreementRoles">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleFindAgreementRoles"/>
                <set field="tabButtonItem" value="AgreementRoles"/>
                <property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <entity-one entity-name="Agreement" value-field="agreement" auto-field-map="true"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonAgreementDecorator" location="component://delys/widget/accounting/ap/AccApAgreementScreens.xml">
                    <decorator-section name="body">
                    	<platform-specific >
                    		<html>
                    			<html-template location="component://delys/webapp/delys/accounting/agreement/listApAgreementRoles.ftl"></html-template>
                    		</html>
                    	</platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
</screens>
