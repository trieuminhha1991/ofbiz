<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">
	<!-- dashboardLogStorekeeper -->
	<screen name="dashboard">
		<section>
			<actions>
				<set field="navMenuName" value="SearchDelysSubTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<script location="component://delys/webapp/delys/WEB-INF/actions/delys/EmplFilter.groovy"/>
				<set field="titleProperty" value="PageTitleListOrderItems"/>
				<set field="headerItem" value="distributor"/>
				<set field="tabButtonItem" value="OrderMangement"/>
				<set field="filterDate" type="Timestamp" from-field="parameters.filterDate"/>
				<script
					location="component://delys/webapp/delys/WEB-INF/actions/order/listOrder.groovy"/>
				<script
					location="component://delys/webapp/delys/WEB-INF/actions/order/filterOrder.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="EmplMgr" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="mainBody">
							<decorator-screen name="FindScreenDecorator"
								location="component://common/widget/CommonScreens.xml">
								<decorator-section name="search-options">
									<platform-specific><html><html-template location="component://delys/webapp/delys/logistics/LogSearchOptions.ftl"/></html></platform-specific>								
								</decorator-section>
								<decorator-section name="search-results">
									<platform-specific><html><html-template location="component://delys/webapp/delys/logistics/LogisticsOrderList.ftl"/></html></platform-specific>
								</decorator-section>
							</decorator-screen>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="OrderHeaderListView">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="SalesOrders"/>
				<set field="titleProperty" value="OrderLookupOrder"/>
				<set field="headerItem" value="orderlist"/>
				<set field="filterDate" type="Timestamp" from-field="parameters.filterDate"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderList.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/FilterOrderList.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<platform-specific>
							<html>
								<html-template
									location="component://delys/webapp/delys/logistics/listOrderLogistics.ftl"/>
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ListMarketingOrders">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="MarketingOrders"/>
                <set field="navMenuName" value="FindMarketingOrderTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="titleProperty" value="ListMarketingOrders"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
							 <decorator-section name="search-options">
                            <include-form name="FindMarketingOrder" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                            	<screenlet>
                                 	<include-form name="ListMarketingOrders" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                 </screenlet>
                            </decorator-section>
                        </decorator-screen>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ListChangeDateOrders">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="ChangeDateOrders"/>
                <set field="navMenuName" value="FindChangeDateOrderTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="titleProperty" value="ListChangeDateOrders"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
							 <decorator-section name="search-options">
                            <include-form name="FindChangeDateOrder" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
							<decorator-section name="search-results">
                            	<screenlet>
                                 	<include-form name="ListChangeDateOrders" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                 </screenlet>
                           </decorator-section>
                       </decorator-screen>
                    </decorator-section>
                </decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ListInternalSalesOrders">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="InternalSalesOrders"/>
				<set field="navMenuName" value="FindInternalSalesOrderTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="titleProperty" value="ListInternalSalesOrders"/>
    		</actions>
    		<widgets>
    			 <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
						 	<decorator-section name="search-options">
                            	<include-form name="FindInternalSalesOrder" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                            	<screenlet>
                                 	<include-form name="ListInternalSalesOrders" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                 </screenlet>
                            </decorator-section>
                        </decorator-screen>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
		</section>
	</screen>
	<screen name="TransferOrderGeneralInfo">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="TransferOrders"/>
                <set field="tabButtonItem" value="GeneralInfo"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu name="TransferOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
					<include-screen name="orderHeader"/>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="InternalSalesOrderGeneralInfo">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="InternalSalesOrders"/>
                <set field="tabButtonItem" value="GeneralInfo"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu name="InternalSalesOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
					<include-screen name="orderHeader"/>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="MarketingOrderGeneralInfo">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="MarketingOrders"/>
                <set field="tabButtonItem" value="GeneralInfo"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu name="MarketingOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
					<include-screen name="orderHeader"/>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="PurchaseOrderGeneralInfo">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="PurchaseOrders"/>
                <set field="tabButtonItem" value="GeneralInfo"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="PurchaseOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
						<include-screen name="orderHeader"/>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ChangeDateOrderGeneralInfo">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="ChangeDateOrders"/>
                <set field="tabButtonItem" value="GeneralInfo"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu name="ChangeDateOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
					<include-screen name="orderHeader"/>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ListOrderItems">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
                <set field="tabButtonItem" value="OrderItems"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
				<entity-condition list="listOrderItems" entity-name="OrderItem">
					<condition-expr field-name="orderId" from-field="parameters.orderId"/>
				</entity-condition>
				<entity-one value-field="orderHeader" entity-name="OrderHeader">
					<field-map field-name="orderId" from-field="parameters.orderId"/>
				</entity-one>
				<set field="salesMethodChannelEnumId" value="${orderHeader.salesMethodChannelEnumId}"/>
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare operator="equals" value="LOG_SALES_INTERNAL" field="salesMethodChannelEnumId"/>
					</condition>
					<widgets>
						<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
							<include-menu name="InternalSalesOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
							<screenlet title="${uiLabelMap.ListOrderItems}">
								<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="TotalOrderItems"/>
								<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="ListOrderItems"/>
							</screenlet>
						</decorator-section>
					</decorator-screen>
					</widgets>
					<fail-widgets>
						<section>
							<condition>
								<if-compare operator="equals" value="MKT_METHOD_CHANNEL" field="salesMethodChannelEnumId"/>
							</condition>
							<widgets>
								<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
									<decorator-section name="body">
									<include-menu name="MarketingOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
									<screenlet title="${uiLabelMap.ListOrderItems}">
										<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="TotalOrderItems"/>
										<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="ListOrderItems"/>
										</screenlet>
									</decorator-section>
							</decorator-screen>
							</widgets>
							<fail-widgets>
								<section>
									<condition>
										<if-compare operator="equals" value="PURCHASE_ORDER" field="orderTypeId"/>
									</condition>
									<widgets>
										<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
											<decorator-section name="body">
											<include-menu name="PurchaseOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
											<screenlet title="${uiLabelMap.ListOrderItems}">
												<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="TotalOrderItems"/>
												<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="ListOrderItems"/>
											</screenlet>
											</decorator-section>
										</decorator-screen>
									</widgets>
									<fail-widgets>
										<section>
											<condition>
												<if-compare operator="equals" value="LOG_CHANGE_DATE" field="salesMethodChannelEnumId"/>
											</condition>
											<widgets>
												<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
													<decorator-section name="body">
													<include-menu name="ChangeDateOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
													<screenlet title="${uiLabelMap.ListOrderItems}">
														<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="TotalOrderItems"/>
														<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="ListOrderItems"/>
													</screenlet>
													</decorator-section>
												</decorator-screen>
											</widgets>
											<fail-widgets>
												<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
													<decorator-section name="body">
													<include-menu name="TransferOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
													<screenlet title="${uiLabelMap.ListOrderItems}">
														<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="TotalOrderItems"/>
														<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="ListOrderItems"/>
													</screenlet>
													</decorator-section>
												</decorator-screen>
											</fail-widgets>
										</section>
									</fail-widgets>
								</section>
								
								
							</fail-widgets>
						</section>
					</fail-widgets>
				</section>
				
			</widgets>
		</section>
	</screen>
	<screen name="MarketingOrderPaymentInfo">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="MarketingOrders"/>
                <set field="tabButtonItem" value="PaymentInfo"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="MarketingOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
						<screenlet title="${uiLabelMap.PaymentInfo}">
							<platform-specific>
								<html>
									<html-template
										location="component://delys/webapp/delys/logistics/MarketingOrderPaymentInfo.ftl"/>
								</html>
							</platform-specific>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ReceivePaymentMaketing">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="MarketingOrders"/>
                <set field="tabButtonItem" value="PaymentInfo"/>
                <set field="orderId" from-field="parameters.orderId"/>
                <script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/ReceivePayment.groovy"/>
				<entity-and entity-name="OrderRole" list="orderRoles">
					<field-map field-name="orderId" value="${parameters.orderId}"/>
					<field-map field-name="roleTypeId" value="BILL_FROM_VENDOR"/>
				</entity-and>
				<entity-and entity-name="PaymentMethod" list="paymentMethods">
					<field-map field-name="partyId" from-field="orderRoles[0].partyId"/>
				</entity-and>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="MarketingOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
						<screenlet title="">
							<platform-specific>
								<html>
									<html-template location="component://delys/webapp/delys/logistics/receivePayment.ftl"/>
								</html>
							</platform-specific>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="PurchaseOrderPaymentInfo">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="PurchaseOrders"/>
                <set field="tabButtonItem" value="PaymentInfo"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="PurchaseOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
						<screenlet title="${uiLabelMap.PaymentInfo}">
							<platform-specific>
								<html>
									<html-template
										location="component://delys/webapp/delys/logistics/ChangeDateOrderPaymentInfo.ftl"/>
								</html>
							</platform-specific>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ChangeDateOrderPaymentInfo">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="ChangeDateOrders"/>
                <set field="tabButtonItem" value="PaymentInfo"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="ChangeDateOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
						<screenlet title="${uiLabelMap.PaymentInfo}">
							<platform-specific>
								<html>
									<html-template
										location="component://delys/webapp/delys/logistics/ChangeDateOrderPaymentInfo.ftl"/>
								</html>
							</platform-specific>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="InternalSalesPaymentInfo">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="InternalSalesOrders"/>
                <set field="tabButtonItem" value="PaymentInfo"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="InternalSalesOrderTabBar" location="component://delys/widget/DelysMenus.xml"/>
						<screenlet title="${uiLabelMap.PaymentInfo}">
							<platform-specific>
								<html>
									<html-template
										location="component://delys/webapp/delys/logistics/InternalSalesOrderPaymentInfo.ftl"/>
								</html>
							</platform-specific>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ContactInfo">
		<section>
			<actions>
				<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
                <set field="tabButtonItem" value="ContactInfo"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					
						<include-menu name="${parameters.nameTabBar}" location="component://delys/widget/DelysMenus.xml"/>
						<screenlet title="${uiLabelMap.ContactInfo}">
							<platform-specific>
								<html>
									<html-template
										location="component://delys/webapp/delys/logistics/OrderContactInfo.ftl"/>
								</html>
							</platform-specific>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="GeneralInfoOrder">
		<section>
			<actions>
				<set field="orderId" from-field="parameters.orderId"/>
				<entity-one value-field="orderHeader" entity-name="OrderHeader">
					<field-map field-name="orderId" from-field="parameters.orderId"/>
				</entity-one>
				<set field="salesMethodChannelEnumId" from-field="orderHeader.salesMethodChannelEnumId"/>
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare operator="equals" value="MKT_METHOD_CHANNEL" field="salesMethodChannelEnumId"/>
					</condition>
					<widgets>
						<include-screen name="MarketingOrderGeneralInfo"/>
					</widgets>
					<fail-widgets>
						<section>
							<condition>
								<if-compare operator="equals" value="LOG_CHANGE_DATE" field="salesMethodChannelEnumId"/>
							</condition>
							<widgets>
								<include-screen name="ChangeDateOrderGeneralInfo"/>
							</widgets>
							<fail-widgets>
								<section>
									<condition>
										<if-compare operator="equals" value="LOG_SALES_INTERNAL" field="salesMethodChannelEnumId"/>
									</condition>
									<widgets>
										<include-screen name="InternalSalesOrderGeneralInfo"/>
									</widgets>
									<fail-widgets>
										<section>
											<condition>
												<if-compare operator="equals" value="PURCHASE_ORDER" field="orderTypeId"/>
											</condition>
											<widgets>
												<include-screen name="PurchaseOrderGeneralInfo"/>
											</widgets>
											<fail-widgets>
												<section>
													<condition>
														<if-compare operator="equals" value="TRANSFER_ORDER" field="orderTypeId"/>
													</condition>
													<widgets>
														<include-screen name="TransferOrderGeneralInfo"/>
													</widgets>
												</section>
											</fail-widgets>
										</section>
									</fail-widgets>
								</section>
							</fail-widgets>
						</section>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="orderHeader">
		<section>
			<condition>
				<not>
					<if-empty field="orderHeader"/>
				</not>
			</condition>
			<widgets>
				<include-screen name="orderinfo"/>
			</widgets>
			<fail-widgets>
				<label style="h2" text="${uiLabelMap.OrderNoOrderFound}: [${orderId}]"></label>
			</fail-widgets>
		</section>
	</screen>
	<screen name="orderinfo">
		<section>
			<widgets>
				<platform-specific>
					<html>
						<html-template
							location="component://delys/webapp/delys/logistics/LogisticsOrderInfo.ftl"/>
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<screen name="DelysFindShipment">
        <section>
            <actions>
                <set field="titleProperty" value="ProductFindShipment"/>
                <set field="headerItem" value="shipment"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/FindShipment.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<container style="header smaller blue lighter">
                    		<label style="h3" text="${uiLabelMap.ProductIncomingShipments}"></label>
                    	</container>
                        <platform-specific>
                            <html><html-template location="component://product/webapp/facility/shipment/FindShipment.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="DelysAddItemsFromInventory">
        <section>
            <actions>
                <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="ManufacturingUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="titleProperty" value="ProductAddItemsFromInventory"/>
                <set field="headerItem" value="shipment"/>
                <set field="tabButtonItem" value="AddItemsFromInventory"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/AddItemsFromInventory.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonShipmentDecorator">
                    <decorator-section name="body">
                        <platform-specific>
                            <html><html-template location="component://product/webapp/facility/shipment/AddItemsFromInventory.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ItemsFromOrder">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleAddItemsFromOrder"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="OrderItem"/>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics/update_shipment.js" global="true"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/AddItemsFromOrder.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonShipmentDecorator">
                    <decorator-section name="body">
                        <platform-specific>
                            <html><html-template location="component://product/webapp/facility/shipment/AddItemsFromOrder.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ShipmentItems">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditShipmentItems"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="ShipmentItem"/>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics/update_shipment.js" global="true"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipmentItems.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonShipmentDecorator">
                    <decorator-section name="body">
                        <platform-specific>
                            <html><html-template location="component://product/webapp/facility/shipment/EditShipmentItems.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
     <screen name="ShipmentPackages">
        <section>
            <actions>
                <set field="titleProperty" value="DelysCommonShipmentDecorator"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="ShipmentPackage"/>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics/update_shipment.js" global="true"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipmentPackages.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonShipmentDecorator">
                    <decorator-section name="body">
                        <platform-specific>
                            <html><html-template location="component://product/webapp/facility/shipment/EditShipmentPackages.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="DelysEditShipmentRouteSegments">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditShipmentRouteSegments"/>
                <set field="headerItem" value="shipment"/>
                <set field="tabButtonItem" value="DelysEditShipmentRouteSegments"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipmentRouteSegments.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonShipmentDecorator">
                    <decorator-section name="body">
                        <platform-specific>
                            <html><html-template location="component://product/webapp/facility/shipment/EditShipmentRouteSegments.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="DelysEditShipmentRouteSegments">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditShipmentRouteSegments"/>
                <set field="headerItem" value="shipment"/>
                <set field="tabButtonItem" value="EditShipmentRouteSegments"/>

                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipmentRouteSegments.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonShipmentDecorator">
                    <decorator-section name="body">
                        <platform-specific>
                            <html><html-template location="component://product/webapp/facility/shipment/EditShipmentRouteSegments.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="DelysViewShipmentReceipts">
        <section>
            <actions>
                <set field="titleProperty" value="ViewShipmentReceipts"/>
                <set field="headerItem" value="shipment"/>
                <set field="tabButtonItem" value="ViewShipmentReceipts"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonShipmentDecorator">
                    <decorator-section name="body">
                        <include-form name="ShipmentReceipts" location="component://product/widget/facility/ShipmentForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="EditShipmentPlan">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditShipmentPlan"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="ShipmentPlan"/>
           	 	<set field="shipmentId" from-field="parameters.shipmentId"/>	
                <entity-one entity-name="Shipment" value-field="shipment"/>
                <set field="shipmentTypeId" from-field="shipment.shipmentTypeId"/>
                <set field="shipmentId" from-field="shipment.shipmentId" global="true"/>
                <get-related-one value-field="shipment" to-value-field="facility" relation-name="DestinationFacility"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipmentPlan.groovy"/>
                <set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics/update_shipment.js" global="true"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonShipmentDecorator">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.ProductShipmentPlan}" navigation-menu-name="ProductGenerateShipmentManifestReportSubTabBar">
                        	<include-menu location="component://product/widget/facility/FacilityMenus.xml" name="ProductGenerateShipmentManifestReportSubTabBar"/>
                            <include-form name="findOrderItems" location="component://product/widget/facility//ShipmentForms.xml"/>
                        </screenlet>
                        <section>
                            <condition>
                                <not><if-empty field="addToShipmentPlanRows"/></not>
                            </condition>
                            <widgets>
                                <screenlet title="${uiLabelMap.ProductShipmentPlanAdd}">
                                    <include-form name="addToShipmentPlan" location="component://product/widget/facility//ShipmentForms.xml"/>
                                </screenlet>
                            </widgets>
                        </section>
                        <screenlet title="${uiLabelMap.ProductShipmentPlanList}">
                            <include-form name="listShipmentPlan" location="component://product/widget/facility/ShipmentForms.xml"/>
                            <container style="alert alert-info">
                            <label style="h4" text="${uiLabelMap.ProductShipmentTotalWeight}: ${totWeight} ${uiLabelMap.ProductShipmentTotalVolume}: ${totVolume}"/>
                            </container>
                        </screenlet>
                        <section>
                            <condition>
                                <if-compare field="shipment.shipmentTypeId" operator="equals" value="SALES_SHIPMENT"/>
                            </condition>
                            <widgets>
                                <link text="${uiLabelMap.ProductShipmentPlanToOrderItems}" target="addItemsFromOrder" style="btn btn-info btn-small">
                                    <parameter param-name="shipmentId"/>
                                    <parameter param-name="selectFromShipmentPlan" value="true"/>
                                </link>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="DelysViewShipment">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleViewShipment"/>
                <set field="headerItem" value="shipment"/>
                <set field="tabButtonItem" value="DelysViewShipment"/>

                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/ViewShipment.groovy"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipmentItems.groovy"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipmentPackages.groovy"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipmentRouteSegments.groovy"/>
            </actions>
            <widgets>
                <section>
                    <condition>
                        <not>
                            <if-empty field="shipment"/>
                        </not>
                    </condition>
                    <widgets>
                        <decorator-screen name="DelysCommonShipmentDecorator">
                            <decorator-section name="body">
                                <platform-specific>
                                    <html><html-template location="component://product/webapp/facility/shipment/ViewShipmentInfo.ftl"/></html>
                                </platform-specific>
                                <screenlet id="shipmentItemPanel" title="${uiLabelMap.PageTitleViewShipmentItemInfo}" initially-collapsed="true">
                                    <platform-specific>
                                        <html><html-template location="component://product/webapp/facility/shipment/ViewShipmentItemInfo.ftl"/></html>
                                    </platform-specific>
                                </screenlet>
                                <screenlet id="shipmentPackagePanel" title="${uiLabelMap.PageTitleViewShipmentPackageInfo}" initially-collapsed="true">
                                    <platform-specific>
                                        <html><html-template location="component://product/webapp/facility/shipment/ViewShipmentPackageInfo.ftl"/></html>
                                    </platform-specific>
                                </screenlet>
                                <screenlet id="shipmentRoutePanel" title="${uiLabelMap.PageTitleViewShipmentRouteInfo}" initially-collapsed="true">
                                    <platform-specific>
                                        <html><html-template location="component://product/webapp/facility/shipment/ViewShipmentRouteInfo.ftl"/></html>
                                    </platform-specific>
                                </screenlet>
                                <screenlet id="shipmentReceiptPanel" title="${uiLabelMap.PageTitleViewShipmentReceipts}" initially-collapsed="true">
                                    <platform-specific>
                                        <html><html-template location="component://product/webapp/facility/shipment/ViewShipmentRouteInfo.ftl"/></html>
                                    </platform-specific>
                                </screenlet>
                            </decorator-section>
                        </decorator-screen>
                    </widgets>
                    <fail-widgets>
                        <include-screen name="FindShipment"/>
                    </fail-widgets>
                </section>
            </widgets>
        </section>
    </screen>
    <screen name="DelysCommonShipmentDecorator">
        <section>
            <actions>
                <set field="shipmentId" from-field="parameters.shipmentId"/>
                <entity-one entity-name="Shipment" value-field="shipment"/>
                <set field="shipmentId" from-field="shipment.shipmentId" global="true"/>
                <get-related-one value-field="shipment" to-value-field="facility" relation-name="DestinationFacility"/>
            </actions>
            <widgets>
            	<section>
				 			<widgets>
				       			 <section>
									   <actions>
										    <set field="tabBarName" value="DelysShipmentTabBar" global="true" />
										    <set field="tabBarLocation"
										     value="component://delys/widget/DelysMenus.xml"
										     global="true" />
										    <set field="subTabBarName" value="DelysShipmentTabBarAdvance"
												global="true" />
											<set field="subTabBarLocation"
												value="component://delys/widget/DelysMenus.xml"
												global="true" />
									   </actions>
									   <widgets>
										    <section>
											     <actions>
											      <set field="printTabBar" value="true" />
											     </actions>
											     <widgets>
											     	<container>
											     	</container>
												 </widgets>
											</section>
									   </widgets>                                    
				        		</section>                                
							 </widgets>            
						</section>
						
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <if-has-permission permission="FACILITY" action="_VIEW"/>
                            </condition>
                            <widgets>
<!--                                 <include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/> -->
<!--                                 <platform-specific> -->
<!--                                     <html><html-template location="component://delys/webapp/delys/logistics/DelysShipmentTabBar.ftl"/></html> -->
<!--                                 </platform-specific> -->
                                <section>
                                    <condition>
                                        <not><if-empty field="shipment"/></not>
                                    </condition>
                                    <widgets>
                                    	<container style="header smaller lighter blue">
                                        <label style="h3" text="${uiLabelMap.ProductShipmentId}: ${shipment.shipmentId}"/>
                                        </container>
                                        <container>
                                            <link style="btn btn-info btn-small" text="${uiLabelMap.ProductGenerateShipmentManifestReport}" target="ShipmentManifest.pdf" target-window="_BLANK">
                                                <parameter param-name="shipmentId" from-field="shipment.shipmentId"/>
                                            </link>
                                        </container>
                                    </widgets>
                                </section>
                                <section>
                                    <condition>
                                        <and>
                                            <not><if-empty field="shipment"/></not>
                                            <not><if-empty field="facility"/></not>
                                            <if-compare field="shipment.shipmentTypeId" operator="equals" value="PURCHASE_SHIPMENT"/>
                                        </and>
                                    </condition>
                                    <widgets>
                                        <container>
                                            <link style="btn btn-info btn-mini" text="${uiLabelMap.ProductReceiveInventory}" target="ReceiveInventory">
                                                <parameter param-name="shipmentId" from-field="shipment.shipmentId"/>
                                                <parameter param-name="facilityId" from-field="facility.facilityId"/>
                                                <parameter param-name="purchaseOrderId" from-field="shipment.primaryOrderId"/>
                                                <parameter param-name="initialSelected" value="Y"/>
                                            </link>
                                        </container>
                                    </widgets>
                                </section>
                                <section>
                                    <condition>
                                        <and>
                                            <not><if-empty field="shipment"/></not>
                                            <not><if-empty field="facility"/></not>
                                            <if-compare field="shipment.shipmentTypeId" operator="equals" value="PURCHASE_SHIPMENT"/>
                                            <not><if-empty field="shipment.primaryOrderId"/></not>
                                        </and>
                                    </condition>
                                    <widgets>
                                        <container>
                                            <link style="btn btn-info btn-mini" text="${uiLabelMap.ProductReceiveInventoryAgainstPO}" target="ReceiveInventoryAgainstPurchaseOrder">
                                                <parameter param-name="shipmentId" from-field="shipment.shipmentId"/>
                                                <parameter param-name="purchaseOrderId" from-field="shipment.primaryOrderId"/>
                                            </link>
                                        </container>
                                    </widgets>
                                </section>
                                <decorator-section-include name="body"/>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}</label>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="ListProductStores">
        <section>
            <actions>
            	 <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="listStores"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
                <set field="permission" from-field="NoPermisson"/>
                <set field="listProductStores" from-field="listProductStores"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<screenlet title="${uiLabelMap.ListStoresOwner}">
                    	 	<include-form name="ListProductStores" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                    	 </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="ListProducts">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="Product"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
				<set field="titleProperty" value="${uiLabelMap.ProductListProduct}"/>
            </actions>
            <widgets>
            	<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
							<screenlet>
								<platform-specific>
									<html><html-template location="component://delys/webapp/delys/logistics/listProducts.ftl"/></html>
								</platform-specific>
							</screenlet>
    				</decorator-section>
    			</decorator-screen>
            </widgets>
        </section>
    </screen>
	<screen name="ListFacilities">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItem" value="ReceiveInventory"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/checkFaciltyRole.groovy"/>
                <set field="permission" from-field="NoPermisson"/>
                <set field="listFacilities" from-field="listFacilities"/>
                <!-- <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilitiesOwner.groovy"/> -->
                <set field="permission" from-field="NoPermisson"/>
                <set field="titleProperty" value="ListFacilityOwner"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <entity-condition entity-name="FacilityGroup" list="listFG">
    				<condition-expr field-name="facilityGroupId" operator="not-equals" value="_NA_"></condition-expr>
    			</entity-condition>
    			<property-map map-name="uiLabelMap" resource="SecurityUiLabels.xml" global="true"/>
    			<entity-condition entity-name="FacilityType" list="listFT">
    			</entity-condition>
    			<entity-condition entity-name="Uom" list="listUoms">
	    			<condition-list>
	    				<condition-expr field-name="uomTypeId" operator="equals" value="AREA_MEASURE"></condition-expr>
	    			</condition-list>
    			</entity-condition>
            </actions>
            <widgets>
            	<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<!-- <screenlet title="${uiLabelMap.ListFacilityOwner}">
                    		<link target="createNewFacility" text="${uiLabelMap.CommonCreateNew}" style="icon-plus open-sans">
                            </link>
                    	 	<include-form name="ListProductStoreFacility" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                    	 </screenlet> -->
                   		<screenlet>
	                    	<platform-specific>
								<html><html-template location="component://delys/webapp/delys/logistics/facility/FacilityListJqx.ftl"/></html>
							</platform-specific>
                   		</screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="EditFacilityInfo">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItem" value="EditFacility"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <set field="titleProperty" value="LogFacilityDetail"/>
                <entity-one value-field="facility" entity-name="Facility">
                	<field-map field-name="facilityId" from-field="parameters.facilityId"/>
                </entity-one>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/checkFaciltyRole.groovy"/>
                <set field="listFacilities" from-field="listFacilities"/>
                <entity-condition entity-name="FacilityGroupMember" list="listGroups">
	    			<condition-expr field-name="facilityId" from-field="facilityId"/>
    			</entity-condition>
    			<property-map map-name="uiLabelMap" resource="SecurityUiLabels.xml" global="true"/>
    			<entity-one entity-name="Facility" value-field="facility">
                	<field-map field-name="facilityId" from-field="parameters.facilityId"/>
                </entity-one>
            </actions>
            <widgets>
            	<section>
                	<condition>
                        <not><if-empty field="facility"/></not>
                    </condition>
                    <widgets>
                    	<section>
                    	<condition>
		    				<if-compare field="hasViewPermission" operator="equals" value="true"></if-compare> 
						</condition>
			    		<widgets>
			    			<section>
		                   		<actions>
								    <set field="tabBarName" value="FacilityTabBar" global="true" />
								    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
							    </actions>
							    <widgets>
							    	<section>
							    		 <actions>
									      <set field="printTabBar" value="true" />
									     </actions>
									     <widgets>
									     	<container></container>
									     </widgets>
							    	</section>
 							    </widgets>
						    </section>
          						<section>
          							<widgets>
          								<decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.mainDecoratorLocation}">
          									<decorator-section name="body">
              									<screenlet title="${uiLabelMap.LogFacilityDetailByFacilityId}" navigation-menu-name="menuForEditFacility">
			                               			<include-menu location="component://delys/widget/DelysMenus.xml" name="menuForEditFacility"/>
				                                 	<!-- <include-form name="EditFacilityInfo" location="component://delys/widget/logistics/LogisticsForms.xml"/> -->
                                					<platform-specific>
							                            <html>
							                            	<html-template location="component://delys/webapp/delys/logistics/facility/viewDetailsFacility.ftl"/>
							                            </html>
							                        </platform-specific>
                                				</screenlet>
                               				</decorator-section>
    									</decorator-screen>
          							</widgets>
       						</section>
			    		</widgets>
			    		<fail-widgets>
			    			<decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.mainDecoratorLocation}">
        							<decorator-section name="body">
			    					<label text="${uiLabelMap.noViewPerm}" style="alert alert-danger span12"></label>
		    					</decorator-section>
	    					</decorator-screen>
			    		</fail-widgets>
			    		</section>
		    		</widgets>
                   	<fail-widgets>
                    	<section>
                    		<condition>
   								<if-compare field="hasCreatePermission" operator="equals" value="true"></if-compare>
   							</condition>
   							<widgets>
   								<decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.mainDecoratorLocation}">
         							<decorator-section name="body">
				    					<screenlet title="${uiLabelMap.ProductNewFacility}" navigation-menu-name="menuForEditFacility">
				                        	<include-form name="EditFacilityInfo" location="component://delys/widget/logistics/LogisticsForms.xml"/>
				                        </screenlet>
			    					</decorator-section>
		    					</decorator-screen>
   							</widgets>
   							<fail-widgets>
				    			<decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.mainDecoratorLocation}">
         							<decorator-section name="body">
				    					<label text="${uiLabelMap.noViewPerm}" style="alert alert-danger span12"></label>
			    					</decorator-section>
		    					</decorator-screen>
				    		</fail-widgets>
                    	</section>
                    </fail-widgets>
            	</section>
            </widgets>
        </section>
    </screen>
    <screen name="PrepareReceiveInventory">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="ReceiveInventory"/>
                <set field="tabButtonItem" value="ReceiveInventory"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilitiesOwner.groovy"/>
                <set field="permission" from-field="NoPermisson"/>
                <set field="listFacilities" from-field="listFacilities"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<platform-specific><html><html-template location="component://delys/webapp/delys/logistics/PrepareReceiveInventory.ftl"/></html></platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="EditInventoryItemInfo">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="titleProperty" value="PageTitleEditInventoryItem"/>
                <set field="tabButtonItem" value="Inventory"/>
                <set field="displayWithNoFacility" value="Y"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <set field="inventoryItemId" from-field="parameters.inventoryItemId"/>
                <set field="locationSeqId" from-field="parameters.locationSeqId"/>
                <entity-one entity-name="Facility" value-field="facility" auto-field-map="true"/>
                <entity-one entity-name="InventoryItem" value-field="inventoryItem" auto-field-map="true"/>
                
                <entity-condition entity-name="OrderItemShipGrpInvRes" list="inventoryItemReservations">
                    <condition-list combine="and">
                        <condition-expr field-name="inventoryItemId" operator="equals" from-field="inventoryItemId"/>
                    </condition-list>
                    <order-by field-name="reservedDatetime"/>
                </entity-condition>
                
                <!-- HUNGNC START EDIT -->
                <entity-condition entity-name="InventoryItemLocation" list="inventoryItemLocation">
                	 <!-- <condition-list> -->
                	 	<condition-expr field-name="inventoryItemId" operator="equals" from-field="inventoryItemId"/>
                	 	<!-- <condition-expr field-name="facilityId" operator="equals" from-field="facilityId"/>
                	 </condition-list> -->		
                </entity-condition>
                <!-- HUNGNC END EDIT -->
            </actions>
            <widgets>
                <section>
                    <condition>
                        <and>
                            <not>
                                <if-empty field="inventoryItem"/>
                            </not>
                            <if-empty field="facility"/>
                        </and>
                    </condition>
                    <actions>
                        <set field="parameters.facilityId" from-field="inventoryItem.facilityId"/>
                        <set field="facilityId" from-field="inventoryItem.facilityId"/>
                        <entity-one entity-name="Facility" value-field="facility"/>
                    </actions>
                    <widgets/>
                </section>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    <include-menu location="component://delys/widget/DelysMenus.xml" name="FacilityTabBar"/>
                        <section>
                            <condition>
                                <not><if-empty field="inventoryItem"/></not>
                            </condition>
                            <widgets>
                                <container style="header smaller lighter blue">
                                    <label text="${uiLabelMap.PageTitleEditInventoryItem}" style="h3"/>
                                </container>
                                <container>
                                    <link target="editInventoryItemInfo" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
                                        <parameter param-name="facilityId" from-field="facilityId"/>
                                    </link>
                                    <label text="|"></label>
                                    <link target="TransferInventoryItem" text="${uiLabelMap.ProductTransferItem}" style="icon-cloud-upload open-sans">
                                        <parameter param-name="inventoryItemId" from-field="inventoryItemId"/>
                                        <parameter param-name="facilityId" from-field="facilityId"/>
                                    </link>
                                </container>
                            </widgets>
                            <fail-widgets>
                                <container style="header smaller lighter blue">
                                    <label text="${uiLabelMap.ProductNewInventoryItem}" style="h3"/>
                                </container>
                            </fail-widgets>
                        </section>
                        <include-form name="EditInventoryItem" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                        <section>
                            <condition>
                                <not><if-empty field="inventoryItemId"/></not>
                            </condition>
                            <widgets>
                                <screenlet id="inventory-item-reservations" title="${uiLabelMap.ProductInventoryItemReservations}" initially-collapsed="true">
                                    <include-form name="InventoryItemReservations" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                </screenlet>
                            </widgets>
                        </section>
                        <!-- HUNGNC START EDIT -->
                        <section>
                        	 <!-- <actions>
		                        <set field="parameters.facilityId" from-field="inventoryItem.facilityId"/>
		                        <set field="facilityId" from-field="inventoryItem.facilityId"/>
		                        <entity-one entity-name="Facility" value-field="facility"/>
		                    </actions> -->
		                    <widgets>
                                <screenlet id="inventory-item-location" title="${uiLabelMap.ProductInventoryItemLocation}" initially-collapsed="true">
                                    <include-form name="UpdateInventoryItemLocation" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                    <include-form name="ListInventoryItemLocation" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                </screenlet>
                            </widgets>
                        </section>
                        <!-- HUNGNC END EDIT -->
                        <section>
                            <condition>
                                <if-compare field="inventoryItem.inventoryItemTypeId" operator="equals" value="NON_SERIAL_INV_ITEM"/>
                            </condition>
                            <actions>
                                <script location="component://product/webapp/facility/WEB-INF/actions/inventory/PhysicalInventoryVariance.groovy"/>
                            </actions>
                            <widgets>
                                <screenlet id="physical-inventory-variances" title="${uiLabelMap.ProductPhysicalInventoryVariances}" initially-collapsed="true">
                                    <include-form name="CreatePhysicalInventoryAndVariance" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                    <include-form name="ViewPhysicalInventoryAndVariance" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                </screenlet>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    

    <screen name="DelysReceiveInventory">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="ReceiveInventory"/>
                <set field="tabButtonItem" value="ReceiveInventory"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/inventory/ReceiveInventory.groovy"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <entity-one entity-name="Facility" value-field="facility"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.ProductReceiveInventory}"/>
                <set field="layoutSettings.javaScripts[+0]" value="/ordermgr/images/js/ConvertUom.js" global="true"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<screenlet title="${title}">
                        <platform-specific>
                            <html><html-template location="component://delys/webapp/delys/logistics/ReceiveInventory.ftl"/></html>
                        </platform-specific>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="DelysViewInventoryItemDetail">
        <section>
            <actions>
                <property-map resource="WorkEffortUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="titleProperty" value="PageTitleEditInventoryItem"/>
                <set field="headerItem" value="facility"/>
                <set field="tabButtonItem" value="EditfacilityItems"/>
                <set field="subTabButtonItem" value="ViewInventoryItemDetail"/>

                <set field="inventoryItemId" from-field="parameters.inventoryItemId"/>
                <set field="facilityId" from-field="parameters.facilityId"/>

                <entity-condition entity-name="InventoryItemDetail" list="inventoryItemDetails">
                    <condition-list combine="and">
                        <condition-expr field-name="inventoryItemId" operator="equals" from-field="inventoryItemId"/>
                    </condition-list>
                    <order-by field-name="-inventoryItemDetailSeqId"/>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <include-menu name="DelysInventoryItemTabBar" location="component://delys/widget/DelysMenus.xml"/>
                        <screenlet title="${uiLabelMap.ProductInventoryDetails} ${uiLabelMap.CommonFor} [${inventoryItemId}]">
                            <include-form name="ListInventoryItemDetail" location="component://product/widget/facility/InventoryForms.xml"/>
                        </screenlet>
                        <screenlet title="${uiLabelMap.ProductShipmentReceiptsFor} [${inventoryItemId}]">
                            <include-form name="ViewInventoryItemShipmentReceipts" location="component://product/widget/facility/InventoryForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="DelysEditInventoryItemLabels">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditInventoryItemLabels"/>
                <set field="headerItem" value="facility"/>
                <set field="tabButtonItem" value="EditfacilityItems"/>
                <set field="subTabButtonItem" value="EditInventoryItemLabels"/>

                <set field="inventoryItemId" from-field="parameters.inventoryItemId"/>
                <set field="facilityId" from-field="parameters.facilityId"/>

                <entity-condition entity-name="InventoryItemLabelAppl" list="inventoryItemLabelAppls">
                    <condition-list combine="and">
                        <condition-expr field-name="inventoryItemId" operator="equals" from-field="inventoryItemId"/>
                    </condition-list>
                    <order-by field-name="sequenceNum"/>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <include-menu name="DelysInventoryItemTabBar" location="component://delys/widget/DelysMenus.xml"/>
                        <screenlet id="AddInventoryItemLabelPanel" title="${uiLabelMap.ProductInventoryItemLabels} ${uiLabelMap.CommonFor} [${inventoryItemId}]" collapsible="true">
                            <include-form name="AddInventoryItemLabelAppl" location="component://product/widget/facility/InventoryForms.xml"/>
                        </screenlet>
                        <include-form name="UpdateInventoryItemLabelAppls" location="component://product/widget/facility/InventoryForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="Inventory">
        <section>
            <actions>
                <set field="tabButtonItem" value="inventory"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<screenlet title="${uiLabelMap.ListFacilityOwner}">
                    	 	<include-menu location="component://delys/widget/DelysMenus.xml" name=""/>
                    	 </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="DetailStore">
    	<section>
            <actions>
                 <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="listStores"/>
                <set field="labelTitleProperty" value="ProductStore"/>
                <set field="productStoreId" from-field="parameters.productStoreId"/>
                <entity-one entity-name="ProductStore" value-field="productStore" auto-field-map="true"/>
                <property-to-field field="defaultCurrencyUomId" resource="general" property="currency.uom.id.default" default="USD"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.ProductProductStore}">
                            <include-form name="EditProductStore" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    <screen name="ListInventoryItemsByProduct">
		<section>
			<actions>
				<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItem" value="Inventory"/>
				<entity-condition list="listInventoryItemsByProduct" entity-name="InventoryItemAndLocation">
					<condition-list>
						<condition-expr field-name="facilityId" operator="equals" from-field="parameters.facilityId"/>
						<condition-expr field-name="productId" operator="equals" value="${parameters.productId}"/>
					</condition-list>
				</entity-condition>
				<set field="facilityId" from-field="parameters.facilityId"/>
			</actions>
			<widgets>
				<section>
					<condition>
						<or>
							<if-has-permission permission="INVENTORY_ITEM_CREATE"/>
							<if-has-permission permission="INVENTORY_ITEM_ADMIN"/>
						</or>
					</condition>
					<widgets>
						<decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.mainDecoratorLocation}">
		                    <decorator-section name="body">
		                        <screenlet title="${uiLabelMap.ListInventoryItemsByProduct} ${parameters.productId} ${uiLabelMap.CommonOf} ${uiLabelMap.facility} ${facilityId}">
		                        	<container id="table-container">
		                            	<include-form name="ListInventoryItemsByProduct" location="component://delys/widget/logistics/LogisticsForms.xml"/>
		                           	</container>
		                        </screenlet>
		                    </decorator-section>
		                </decorator-screen>					
					</widgets>
					<fail-widgets>
						<decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.mainDecoratorLocation}">
		                    <decorator-section name="body">
		                        <screenlet title="${uiLabelMap.ListInventoryItemsByProduct} ${parameters.productId} ${uiLabelMap.CommonOf} ${uiLabelMap.facility} ${facilityId}">
		                        	<container id="table-container">
		                            	<include-form name="ListInventoryItemsByProductView" location="component://delys/widget/logistics/LogisticsForms.xml"/>
		                           	</container>
		                        </screenlet>
		                    </decorator-section>
		                </decorator-screen>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="DashboardImport">
		<section>
			<actions>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <label style="alert alert-info" text="Welcome to import management system"></label>
                    </decorator-section>
                </decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="DashboardLogistics">
		<section>
			<actions>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <label style="alert alert-info" text="Welcome to logistics management system"></label>
                    </decorator-section>
                </decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="dashboardLogStorekeeper">
		<section>
			<actions>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <label style="alert alert-info" text="Welcome to facility management system"></label>
                    </decorator-section>
                </decorator-screen>
			</widgets>
		</section>
	</screen>
    <screen name="InventoryItemList">
		<section>
			<actions>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItem" value="Inventory"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listProductStores" value="${listProductStores}"/>
				<entity-condition list="listProducts" entity-name="InventoryItemTotal">
					<condition-expr field-name="facilityId" from-field="parameters.facilityId"/>
				</entity-condition>
				<set field="facilityId" from-field="parameters.facilityId"/>
				<entity-one value-field="facility" entity-name="Facility">
					<field-map field-name="facilityId" from-field="parameters.facilityId"/>
				</entity-one>
				<set field="titleProperty" value="ListInventoryItemsTotal" />
			</actions>
			<widgets>
				<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                </section>
				<decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet>
<!--                         	<include-menu location="component://delys/widget/DelysMenus.xml" name="menuForEditFacility"/> -->
<!--                            	<include-form name="ListInventoryItemsTotal" location="component://delys/widget/logistics/LogisticsForms.xml"/> -->
                           	<platform-specific><html><html-template location="component://delys/webapp/delys/logistics/facility/ListInventoryItem.ftl"/></html></platform-specific>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="LookupContainer">
		<section>
			<actions>
			</actions>
			<widgets>
				<decorator-screen name="LookupDecorator" location="component://common/widget/CommonScreens.xml">
					<decorator-section name="search-options">
                        <include-form name="LookupContainer" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                    </decorator-section>
                    <decorator-section name="search-results">
                        <include-form name="listLookupContainer" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                    </decorator-section>
                </decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="LookupProductLot">
		<section>
			<actions>
			</actions>
			<widgets>
				<decorator-screen name="LookupDecorator" location="component://common/widget/CommonScreens.xml">
					<decorator-section name="search-options">
                        <include-form name="LookupProductLot" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                    </decorator-section>
                    <decorator-section name="search-results">
                        <include-form name="listLookupProductLot" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                    </decorator-section>
                </decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="LookupFixedAsset">
		<section>
			<actions>
			</actions>
			<widgets>
				<decorator-screen name="LookupDecorator" location="component://common/widget/CommonScreens.xml">
					<decorator-section name="search-options">
                        <include-form name="LookupFixedAsset" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                    </decorator-section>
                    <decorator-section name="search-results">
                        <include-form name="listLookupFixedAsset" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                    </decorator-section>
                </decorator-screen>
			</widgets>
		</section>
	</screen>
	 <screen name="ListProductConfigPacking">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="Product"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/delys/navigator/nav_productList.groovy"/>
                <set field="tabButtonItem" value="ConfigPacking"/>
                <set field="productId" from-field="parameters.productId"/>
<!--                 <entity-condition list="listProductConfigPacking" entity-name="ConfigPacking"> -->
<!--                 	<condition-expr field-name="productId" from-field="parameters.productId"/> -->
<!--                 </entity-condition> -->
                <entity-condition list="listProductConfigPacking" entity-name="ConfigPacking">
                	<condition-expr field-name="productId" from-field="parameters.productId"/>
                </entity-condition>
                <entity-one value-field="product" entity-name="Product">
                	<field-map field-name="productId" from-field="parameters.productId"/>
                </entity-one>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getListQuantityUom.groovy"/>
            </actions>
            <widgets>
            <section>
		 			<widgets>
		       			 <section>
							   <actions>
								    <set field="tabBarName" value="DelysProductTabBar" global="true" />
								    <set field="tabBarLocation"
								     value="component://delys/widget/DelysMenus.xml"
								     global="true" />
								     <set field="titleProperty" value="${product.productName} [${product.productId}]"/>
							   </actions>
							   <widgets>
								    <section>
									     <actions>
									      <set field="printTabBar" value="true" />
									     </actions>
									     <widgets>
									     	<container>
									     	</container>
										 </widgets>
									</section>
							   </widgets>                                    
		        		</section>                                
					 </widgets>            
				</section>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet>
<!--                         	<include-menu location="component://delys/widget/DelysMenus.xml" name="menuForListProductConfigPacking"/> -->
<!--                             <include-form name="ListProductConfigPacking" location="component://delys/widget/logistics/LogisticsForms.xml"/> -->
                            <platform-specific>
									<html><html-template location="component://delys/webapp/delys/logistics/listProductConfigPacking.ftl"/></html>
							</platform-specific>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    <screen name="EditProductConfigPacking"> 
    	<section>
    		<actions>
    			<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="Product"/>
                <set field="tabButtonItem" value="ConfigPacking"/>
                <entity-one value-field="productConfigPacking" entity-name="ConfigPacking">
                	<field-map field-name="productId" from-field="parameters.productId"/>
                	<field-map field-name="uomFromId" from-field="parameters.uomFromId"/>
                	<field-map field-name="uomToId" from-field="parameters.uomToId"/>
                </entity-one>
	    		<entity-one entity-name="Product" value-field="product">
	    			<field-map field-name="productId" from-field="parameters.productId"/>
	    		</entity-one>
	    		<set field="productId" from-field="parameters.productId"/>
	    		<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics_product_packing.js" global="true"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="DelysProductTabBar"
								location="component://delys/widget/DelysMenus.xml"/>
                        <screenlet title="${uiLabelMap.EditProductConfigPacking} ${uiLabelMap.CommonFor} ${product.productName} [${product.productId}]">
                        	<container>
                        		<link target="ListProductConfigPacking" text="${uiLabelMap.CommonList}" style="icon-tasks">
        	                   		<parameter param-name="productId" from-field="productId"/>
    	                       </link>
    	                       <label text="|"></label>
    	                       <link target="CreateProductConfigPacking" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
        	                   		<parameter param-name="productId" from-field="productId"/>
    	                       </link>
	                         </container>
                            <include-form name="EditProductConfigPacking" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
    		</widgets>
    	</section>
    </screen>
     <screen name="EditUomPacking">
    	<section>
    		<actions>
    			<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="Product"/>
                <set field="tabButtonItem" value="ConfigPacking"/>
                <set field="productId" from-field="parameters.productId"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
                    	<include-menu name="DelysProductTabBar"
								location="component://delys/widget/DelysMenus.xml"/>
                        <screenlet title="${uiLabelMap.AddUomPacking}">
                            <include-form name="EditUomPacking" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                        </screenlet>
                    </decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
	<screen name="EditProduct">
		<section>
			<actions>
				<set field="tabButtonItem" value="EditProduct"/>
				<set field="selectedMenuItem" value="facility"/>
	            <set field="selectedSubMenuItem" value="Product"/>
	            <script location="component://delys/webapp/delys/WEB-INF/actions/delys/navigator/nav_productList.groovy"/>
				<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilitiesOwner.groovy"/>
	            <set field="listFacilities" from-field="listFacilities"/>
	            <entity-one entity-name="Product" value-field="product" auto-field-map="true">
					<field-map field-name="productId" from-field="parameters.productId"/>
				</entity-one>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<set field="productId" from-field="parameters.productId"/>
				<entity-condition entity-name="SupplierProduct" list="listSuppliers">
    				<condition-expr field-name="productId" from-field="productId"/>
    			</entity-condition>
    			<set field="supplierId" value="${listSuppliers[0].partyId}"/>
			</actions>
			<widgets>
			<section>
			<condition>
				<if-empty field="product"/>
			</condition>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.DelysCreateProduct}" navigation-menu-name="menuForEditProduct">
                        <include-menu location="component://delys/widget/DelysMenus.xml" name="menuForEditProduct"/>
                        <include-form name="DelysCreateProduct" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
            <fail-widgets>
            	<section>
		 			<widgets>
		       			 <section>
							   <actions>
								    <set field="tabBarName" value="DelysProductTabBar" global="true" />
								    <set field="tabBarLocation"
								     value="component://delys/widget/DelysMenus.xml"
								     global="true" />
							   </actions>
							   <widgets>
								    <section>
									     <actions>
									      <set field="printTabBar" value="true" />
									     </actions>
									     <widgets>
									     	<container>
									     	</container>
										 </widgets>
									</section>
							   </widgets>                                    
		        		</section>                                
					 </widgets>            
				</section>
				<section>
					<condition>
						<if-has-permission permission="PRODUCT_UPDATE"/>
					</condition>
					<widgets>
							<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
		                    	<decorator-section name="body">						
			                        <screenlet title="${product.productName} [${product.productId}]" navigation-menu-name="menuForEditProduct">
					                        <include-menu location="component://delys/widget/DelysMenus.xml" name="menuForEditProduct"/>
					                        <include-form name="EditProduct" location="component://delys/widget/logistics/LogisticsForms.xml"/>
					                        <platform-specific>
												<html><html-template location="component://delys/webapp/delys/logistics/editProduct.ftl"/></html>
											</platform-specific>
			                        </screenlet>
			                    </decorator-section>
		                	</decorator-screen>
					</widgets>
					<fail-widgets>
							<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
		                    	<decorator-section name="body">						
			                        <screenlet title="${product.productName} [${product.productId}]" navigation-menu-name="menuForEditProduct">
					                        <include-menu location="component://delys/widget/DelysMenus.xml" name="menuForEditProduct"/>
<!-- 					                        <include-form name="ViewProduct" location="component://delys/widget/logistics/LogisticsForms.xml"/> -->
					                        <platform-specific>
														<html><html-template location="component://delys/webapp/delys/logistics/viewProducts.ftl"/></html>
											</platform-specific>
					                        <platform-specific>
														<html><html-template location="component://delys/webapp/delys/logistics/editProduct.ftl"/></html>
											</platform-specific>
			                        </screenlet>
			                    </decorator-section>
		                	</decorator-screen>
					</fail-widgets>
				</section>
            	
            	
            </fail-widgets>
			</section>
			</widgets>
		</section>
	</screen>
	<screen name="ListProductSupplier">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="Product"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/delys/navigator/nav_productList.groovy"/>
                <set field="tabButtonItem" value="Supplier"/>
                <set field="productId" from-field="parameters.productId"/>
                <entity-condition list="listSuppliers" entity-name="SupplierProduct">
                	<condition-expr field-name="productId" from-field="parameters.productId"/>
                </entity-condition>
                <entity-one value-field="product" entity-name="Product">
                	<field-map field-name="productId" from-field="parameters.productId"/>
                </entity-one>
                <set field="titleProperty" value="${product.productName} [${product.productId}]"/>
            </actions>
            <widgets>
            <section>
		 			<widgets>
		       			 <section>
							   <actions>
								    <set field="tabBarName" value="DelysProductTabBar" global="true" />
								    <set field="tabBarLocation"
								     value="component://delys/widget/DelysMenus.xml"
								     global="true" />
							   </actions>
							   <widgets>
								    <section>
									     <actions>
									      <set field="printTabBar" value="true" />
									     </actions>
									     <widgets>
									     	<container>
									     	</container>
										 </widgets>
									</section>
							   </widgets>                                    
		        		</section>                                
					 </widgets>            
				</section>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet>
<!--                         	<include-menu location="component://delys/widget/DelysMenus.xml" name="menuForListProductSupplier"/> -->
<!--                             <include-form name="ListProductSuppliers" location="component://delys/widget/logistics/LogisticsForms.xml"/> -->
                            <platform-specific>
									<html><html-template location="component://delys/webapp/delys/logistics/listProductSupplier.ftl"/></html>
							</platform-specific>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
	
    <screen name="EditProductSupplier">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="Product"/>
                <set field="tabButtonItem" value="Supplier"/>
                <set field="productId" from-field="parameters.productId"/>
                <entity-one value-field="supplierProduct" entity-name="SupplierProduct">
                	<field-map field-name="productId" from-field="parameters.productId"/>
                	<field-map field-name="partyId" from-field="parameters.partyId"/>
                	<field-map field-name="currencyUomId" from-field="parameters.currencyUomId"/>
                	<field-map field-name="minimumOrderQuantity" from-field="parameters.minimumOrderQuantity"/>
                	<field-map field-name="availableFromDate" from-field="parameters.availableFromDate"/>
                </entity-one>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="DelysProductTabBar"
								location="component://delys/widget/DelysMenus.xml"/>
                        <screenlet title="${uiLabelMap.UpdateSuppliers} ${uiLabelMap.CommonFor} ${uiLabelMap.ProductProduct} ${parameters.productId}">
                        <container>
	                           <link target="ListProductSupplier" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
	                           		<parameter param-name="productId" from-field="${product.productId}"/>
	                           </link>
	                           <label text="|"></label>
	                           <link target="CreateProductSupplier" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
	                           		<parameter param-name="productId" from-field="${product.productId}"/>
	                           </link>
                         </container>
                            <include-form name="EditProductSuppliers" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    <screen name="ListDelivery">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="Delivery"/>
                <set field="shipmentId" from-field="parameters.shipmentId"/>
                <entity-one value-field="shipment" entity-name="Shipment"></entity-one>
  				<set field="shipmentTypeId" from-field="shipment.shipmentTypeId"/>
                <entity-condition list="listOrders" entity-name="OrderShipment">
                	<condition-expr field-name="shipmentId" from-field="parameters.shipmentId" operator="equals"/>
                	<select-field field-name="orderId"/>
                </entity-condition>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/convertListGenericValue.groovy"/>
                <set field="listOrderId" value="${listOrderId}"/>
                <entity-condition entity-name="OrderShipment" list="listOrders">
					<condition-expr field-name="shipmentId" from-field="shipmentId"/>
				</entity-condition>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getOrderToCreateDelivery.groovy"/>
				<set field="listOrdersToAdd" value="${listOrders}" type="List"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    <include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
                    <section>
                    	<condition>
                    		<not>
                    			<if-empty field="listOrderId"/>
                    		</not>
                    	</condition>
                    	<actions>
							<entity-condition list="listDelivery" entity-name="Delivery">
			                	<condition-list combine="and">
			                		<condition-expr field-name="orderId" operator="in" from-field="listOrderId"/>
			                		<condition-expr field-name="statusId" value="DLV_EXPORTED"/>
			                	</condition-list>
			                </entity-condition>                    	
                    	</actions>
                    	<widgets>
                    		<section>
                    			<condition>
                    				<if-empty field="listOrdersToAdd"/>
                    			</condition>
                    			<widgets>
									<screenlet title="${uiLabelMap.ListDelivery} ${uiLabelMap.CommonOf} ${uiLabelMap.Shipment} [${shipmentId}]">
			                            <include-form name="ListDelivery" location="component://delys/widget/logistics/LogisticsForms.xml"/>
			                        </screenlet>                    			
                    			</widgets>
                    			<fail-widgets>
                    				<screenlet title="${uiLabelMap.ListDelivery}">
			                        <container>
			                           <link target="CreateDelivery" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
			                           	<parameter param-name="shipmentId" from-field="parameters.shipmentId"/>
			                           </link>
			                         </container>
			                            <include-form name="ListDelivery" location="component://delys/widget/logistics/LogisticsForms.xml"/>
			                        </screenlet>   
                    			</fail-widgets>
                    		</section>
                    	</widgets>
                    	<fail-widgets>
                    		<section>
	                    		<condition>
                    				<if-empty field="listOrdersToAdd"/>
                    			</condition>
                    			<widgets>
                    				<screenlet title="${uiLabelMap.ListDelivery}">
			                         	<container style="margin-top20">
			                         		<label style="alert alert-info" text="${uiLabelMap.NoDeliveryForThisShipment}"></label>
			                         	</container>
			                        </screenlet>
                    			</widgets>
                    			<fail-widgets>
                    				<screenlet title="${uiLabelMap.ListDelivery}">
			                        	<container>
				                           <link target="CreateDelivery" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
				                           	<parameter param-name="shipmentId" from-field="parameters.shipmentId"/>
				                           </link>
			                         	</container>
			                         	<container style="margin-top20">
			                         		<label style="alert alert-info" text="${uiLabelMap.NoDeliveryForThisShipment}"></label>
			                         	</container>
			                        </screenlet>
                    			</fail-widgets>
                   			</section>
                    	</fail-widgets>
                    </section>
                    	
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    <screen name="EditDelivery">
    	<section>
   			<actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="partyId" from-field="parameters.partyId"/>
                <set field="deliveryId" from-field="parameters.deliveryId"/>
                <entity-one value-field="delivery" entity-name="Delivery">
                	<field-map field-name="deliveryId" from-field="parameters.deliveryId"/>
                </entity-one>
                <set field="orderId" from-field="parameters.orderId" default-value="${delivery.orderId}"/>
                <entity-one value-field="orderHeader" entity-name="OrderHeader">
                	<field-map field-name="orderId" from-field="orderId"/>
                </entity-one>
                <set field="orderTypeId" value="${orderHeader.orderTypeId}"/>
                <set field="orderItemTypeId" value="${delivery.orderItemTypeId}"/>
                <entity-condition entity-name="OrderItem" list="listItems">
                	<condition-list>
    					<condition-expr field-name="orderId" from-field="orderId"/>
    					<condition-expr field-name="orderItemTypeId" from-field="orderItemTypeId" ignore-if-empty="true" ignore-if-null="true"/>
    				</condition-list>
    			</entity-condition>
    			<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics_store_facility.js" global="true"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/CaculateTotalOrderAmount.groovy"/>
            </actions>
            <widgets>
            	<section>
		    		<condition>
		    			<not>
		    				<if-empty field="parameters.shipmentId"/>
		    			</not>
		    		</condition>
		    		<actions>
		    			<set field="selectedMenuItem" value="facilityShipment"/>
                		<set field="selectedSubMenuItem" value="Shipment"/>
                		<set field="tabButtonItem" value="Delivery"/>
                		<set field="shipmentId" from-field="parameters.shipmentId"/>
		    		</actions>
					<widgets>
				    	<section>
				            <widgets>
				            	<section>
				            		<condition>
				            			<if-empty field="orderId"/>
				            		</condition>
				            		<widgets>
				            			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
						                    <decorator-section name="body">
						                    	<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
						                        <screenlet title="${uiLabelMap.CreateDelivery}">
						                        <container>
						                           	<link target="listDelivery" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
						                           		<parameter param-name="shipmentId" from-field="shipmentId"/>
						                           	</link>
					                         	</container>
				                            	<include-form name="EditDelivery" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						                        </screenlet>
						                    </decorator-section>
						                </decorator-screen>
				            		</widgets>
				            		<fail-widgets>
				            			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
							                  <decorator-section name="body">
							                  		<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
							                      <screenlet title="${uiLabelMap.UpdateDelivery} ${uiLabelMap.CommonOf} ${uiLabelMap.OrderOrder} [${orderId}]">
							                      <container>
							                          <link target="listDelivery" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
							                          	<parameter param-name="shipmentId" from-field="parameters.shipmentId"/>
							                          </link>
							                          <label text="|"></label>
							                          <link target="CreateDelivery" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
							                          	<parameter param-name="shipmentId" from-field="parameters.shipmentId"/>
							                          </link>
							                       </container>
							                          <include-form name="EditDelivery" location="component://delys/widget/logistics/LogisticsForms.xml"/>
							                          <include-form name="OrderDetails" location="component://delys/widget/logistics/LogisticsForms.xml"/>
							                      </screenlet>
							                  </decorator-section>
							              </decorator-screen>
				            		</fail-widgets>
				            	</section>
				            </widgets>
				       </section>
					</widgets>
					<fail-widgets>
						<section>
							<actions>
								<set field="selectedMenuItem" value="delivery"/>
                				<set field="selectedSubMenuItem" value="DeliveryNote"/>
							</actions>
							<widgets>
								<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
				                  <decorator-section name="body">
				                      <screenlet title="${uiLabelMap.UpdateDelivery} ${uiLabelMap.CommonOf} ${uiLabelMap.OrderOrder} [${orderId}]">
				                      <container>
				                          <link target="listAllDeliveries" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
				                          </link>
				                          <label text="|"></label>
											<link target="createNewDelivery" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
											</link>
				                       </container>
				                          <include-form name="EditDelivery" location="component://delys/widget/logistics/LogisticsForms.xml"/>
				                          <screenlet title="${uiLabelMap.ProductListProduct}">
				                          	<include-form name="OrderDetails" location="component://delys/widget/logistics/LogisticsForms.xml"/>
				                          </screenlet>
				                      </screenlet>
				                  </decorator-section>
				              </decorator-screen>
							</widgets>
						</section>
					</fail-widgets>    	
		    	</section>
            </widgets>
    	</section>
    </screen>
    <screen name="DetailDelivery">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="partyId" from-field="parameters.partyId"/>
                <set field="deliveryId" from-field="parameters.deliveryId"/>
                <entity-one value-field="delivery" entity-name="Delivery">
                	<field-map field-name="deliveryId" from-field="parameters.deliveryId"/>
                </entity-one>
                <set field="deliveryTypeId" value="${delivery.deliveryTypeId}"/>
             </actions>  
            <widgets>
            	<section>
            		<condition>
            			<if-compare operator="equals" value="DELIVERY_SALES" field="deliveryTypeId"/>
            		</condition>
            		<actions>
            			<set field="orderId" value="${delivery.orderId}"/>
		                <entity-condition entity-name="DeliveryItem" list="listItems">
		    				<condition-expr field-name="deliveryId" from-field="deliveryId"/>
		    			</entity-condition>
		    			<set field="shipmentId" from-field="parameters.shipmentId"/>
		    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/CaculateTotalOrderAmount.groovy"/>
            		</actions>
            		<widgets>
            			<section>
		            		<condition>
		            			<if-empty field="shipmentId"/>
		            		</condition>
		            		<actions>
		            			<set field="selectedMenuItem" value="delivery"/>
				                <set field="selectedSubMenuItem" value="DeliveryNote"/>
		            		</actions>
		            		<widgets>
		            			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
				                    <decorator-section name="body">
				                        <screenlet title="${uiLabelMap.DetailDelivery} ([${deliveryId}]) ${uiLabelMap.CommonOf} ${uiLabelMap.OrderOrder} [${orderId}]">
				                        <container>
					                           <link target="listAllDeliveries" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
					                           		<parameter param-name="shipmentId" from-field="shipmentId"/>
					                           </link>
					                           <label text="|"></label>
					                           <link target="printDeliveryNote" text="${uiLabelMap.CommonPrint}" style="icon-print open-sans">
					                           		<parameter param-name="deliveryId" from-field="deliveryId"/>
					                           </link>
				                         </container>
			                         	<platform-specific><html><html-template location="component://delys/webapp/delys/logistics/ListProductToDelivery.ftl"/></html></platform-specific>
				                        </screenlet>
				                    </decorator-section>
				                </decorator-screen>
		            		</widgets>
		            		<fail-widgets>
		            			<section>
		            				<actions>
		            					<set field="selectedMenuItem" value="facilityShipment"/>
						                <set field="selectedSubMenuItem" value="Shipment"/>
		                				<set field="tabButtonItem" value="Delivery"/>
		            				</actions>
		            				<widgets>
		            					<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
						                    <decorator-section name="body">
						                    	<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
						                        <screenlet title="${uiLabelMap.DetailDelivery} ${uiLabelMap.CommonOf} ${uiLabelMap.OrderOrder} [${orderId}]">
						                        <container>
							                           <link target="listDelivery" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
							                           	<parameter param-name="shipmentId" from-field="shipmentId"/>
							                           </link>
							                           <label text="|"></label>
							                           <link target="CreateDelivery" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
							                           		<parameter param-name="shipmentId" from-field="shipmentId"/>
							                           </link>
							                           <label text="|"></label>
							                           <link target="printDeliveryNote" text="${uiLabelMap.CommonPrint}" style="icon-print open-sans">
							                           		<parameter param-name="deliveryId" from-field="deliveryId"/>
							                           </link>
						                         </container>
						                         	<include-form name="DetailDeliveryInfo" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						                            <platform-specific><html><html-template location="component://delys/webapp/delys/logistics/ListProductToDelivery.ftl"/></html></platform-specific>
						                        </screenlet>
						                    </decorator-section>
						                </decorator-screen>
		            				</widgets>
		            			</section>
		            		</fail-widgets>
		            	</section>
            		</widgets>
            		<fail-widgets>
            			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
		                    <decorator-section name="body">
		                        <screenlet title="${uiLabelMap.DetailDelivery} ([${deliveryId}])">
		                        <container>
		                           <link target="printDeliveryNote" text="${uiLabelMap.CommonPrint}" style="icon-print open-sans">
		                           		<parameter param-name="deliveryId" from-field="deliveryId"/>
		                           </link>
		                         </container>
	                         	<platform-specific><html><html-template location="component://delys/webapp/delys/logistics/ListProductToDelivery.ftl"/></html></platform-specific>
		                        </screenlet>
		                    </decorator-section>
		                </decorator-screen>
            		</fail-widgets>
            	</section>
            </widgets>
       </section>
    </screen>
    <screen name="ListProductPrice">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="Product"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/delys/navigator/nav_productList.groovy"/>
                <set field="tabButtonItem" value="Price"/>
                <set field="productId" from-field="parameters.productId"/>
                <entity-and entity-name="ProductPrice" list="productPrices">
					<field-map field-name="productId" from-field="parameters.productId"/>
					<order-by field-name="productStoreGroupId"/>
					<order-by field-name="productPricePurposeId"/>
					<order-by field-name="productPriceTypeId"/>
					<order-by field-name="currencyUomId"/>
					<order-by field-name="fromDate"/>
				</entity-and>
				<entity-one value-field="product" entity-name="Product">
					<field-map field-name="productId" from-field="parameters.productId"/>
				</entity-one>
				<set field="titleProperty" value="${product.productName} [${product.productId}]"/>
				<property-to-field field="defaultCurrencyUomId"
					resource="general" property="currency.uom.id.default" default="USD"/>
				<entity-condition list="listProductPriceType" entity-name="ProductPriceType"></entity-condition>
				<entity-condition list="listProductPricePurpose" entity-name="ProductPricePurpose"></entity-condition>
				<entity-condition list="listCurrencyUom" entity-name="Uom">
					<condition-expr field-name="uomTypeId" value="CURRENCY_MEASURE"/>
				</entity-condition>
				<entity-condition list="listProductStoreGroup" entity-name="ProductStoreGroup"></entity-condition>
			</actions>
			<widgets>
			<section>
		 			<widgets>
		       			 <section>
							   <actions>
								    <set field="tabBarName" value="DelysProductTabBar" global="true" />
								    <set field="tabBarLocation"
								     value="component://delys/widget/DelysMenus.xml"
								     global="true" />
								     <set field="titleProperty" value="${product.productName} [${product.productId}]"/>
							   </actions>
							   <widgets>
								    <section>
									     <actions>
									      <set field="printTabBar" value="true" />
									     </actions>
									     <widgets>
									     	<container>
									     	</container>
										 </widgets>
									</section>
							   </widgets>                                    
		        		</section>                                
					 </widgets>            
				</section>
			
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
<!-- 						<include-menu name="DelysProductTabBar" -->
<!-- 								location="component://delys/widget/DelysMenus.xml"/> -->
                        
						<screenlet>
<!-- 							<include-form name="UpdateProductPrice" -->
<!-- 								location="component://delys/widget/logistics/LogisticsForms.xml"/> -->
								<platform-specific>
									<html><html-template location="component://delys/webapp/delys/logistics/listProductPrice.ftl"/></html>
								</platform-specific>
						</screenlet>
<!-- 						<screenlet title="${uiLabelMap.PageTitleAddProductPrices}"> -->
<!-- 							<container style="alert alert-info"> -->
<!-- 								<label style="h5" text="${uiLabelMap.ProductPricesWarning}"/> -->
<!-- 							</container> -->
<!-- 							<include-form name="AddProductPrice" -->
<!-- 								location="component://product/widget/catalog/ProductForms.xml"/> -->
<!-- 						</screenlet> -->
					</decorator-section>
				</decorator-screen>
			</widgets>
       </section>
    </screen>
     <screen name="EditProductPrice">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="Product"/>
                <set field="tabButtonItem" value="Price"/>
                <set field="productId" from-field="parameters.productId"/>
                <entity-one value-field="product" entity-name="Product">
                	<field-map field-name="productId" from-field="parameters.productId"/>
                </entity-one>
                <entity-one value-field="productPrice" entity-name="ProductPrice">
                	<field-map field-name="productId" from-field="parameters.productId"/>
                	<field-map field-name="productPriceTypeId" from-field="parameters.productPriceTypeId"/>
                	<field-map field-name="productPricePurposeId" from-field="parameters.productPricePurposeId"/>
                	<field-map field-name="currencyUomId" from-field="parameters.currencyUomId"/>
                	<field-map field-name="productStoreGroupId" from-field="parameters.productStoreGroupId"/>
                	<field-map field-name="fromDate" from-field="parameters.fromDate"/>
                </entity-one>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="DelysProductTabBar"
								location="component://delys/widget/DelysMenus.xml"/>
             			<screenlet title="${uiLabelMap.UpdateProductPrice} ${uiLabelMap.CommonFor} ${product.productName} [${product.productId}]">
                        <container>
	                           <link target="ListProductPrice" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
	                           		<parameter param-name="productId" from-field="${product.productId}"/>
	                           </link>
	                           <label text="|"></label>
	                           <link target="EditProductPrice" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
	                           		<parameter param-name="productId" from-field="${product.productId}"/>
                          </link>
                       </container>
                          <include-form name="AddProductPrice" location="component://product/widget/catalog/ProductForms.xml"/>
                     </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    <screen name="ListVehicles">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Vehicles"/>
                <set field="navMenuName" value="FindVehicle"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="titleProperty" value="ListVehicles"/>
				<entity-condition list="PartyNameView" entity-name="PartyNameView">
					<condition-expr field-name="partyTypeId" value="PARTY_GROUP"/>
				</entity-condition>
				<entity-condition list="listUom" entity-name="Uom">
					<condition-expr field-name="uomTypeId" value="LENGTH_MEASURE"/>
				</entity-condition>
				<entity-condition list="listUomW" entity-name="Uom">
					<condition-expr field-name="uomTypeId" value="WEIGHT_MEASURE"/>
				</entity-condition>
				<entity-condition list="listUomC" entity-name="Uom">
					<condition-expr field-name="uomTypeId" value="CURRENCY_MEASURE"/>
				</entity-condition>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/ckeditor/ckeditor.js"
					global="true" />
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<platform-specific>
							<html><html-template location="component://delys/webapp/delys/logistics/listVehicles.ftl"/></html>
						</platform-specific>
    				</decorator-section>
    			</decorator-screen>
			</widgets>
       </section>
    </screen>
    <screen name="EditVehicles">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Vehicles"/>
                <set field="vehicleId" from-field="parameters.vehicleId"/>
                <entity-one value-field="Vehicle" entity-name="Vehicle">
                	<field-map field-name="vehicleId" from-field="vehicleId"/>
                </entity-one>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
             			<screenlet title="${uiLabelMap.UpdateVehicles}" navigation-menu-name="menuForEditVehicle">
             			<include-menu location="component://delys/widget/DelysMenus.xml" name="menuForEditVehicle"/>
<!--                         <container> -->
<!-- 	                           <link target="ListVehicles" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks"> -->
<!-- 	                           </link> -->
<!-- 	                           <label text="|"></label> -->
<!-- 	                           <link target="EditVehicles" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans"> -->
<!--                           	</link> -->
<!--                        	</container> -->
                        <include-form name="EditVehicles"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    <screen name="ListShippingContract">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="ShippingContract"/>
				<set field="navMenuName" value="FindShippingContractTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="titleProperty" value="${uiLabelMap.ShippingContract}"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
							 <decorator-section name="search-options">
                            <include-form name="FindShippingContract" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                               	<include-form name="ListShippingContract" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                        </decorator-screen>
    				</decorator-section>
    			</decorator-screen>
			</widgets>
       </section>
    </screen>
    
    <screen name="ListShipmentMethodByContract">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="ShippingContract"/>
                <set field="tabButtonItem" value="ShipmentMethod"/>
                <entity-one value-field="shippingContract" entity-name="ShippingContract">
                	<field-map field-name="contractId" from-field="parameters.contractId"/>
                </entity-one>
                <set field="contractId" from-field="parameters.contractId"/>
                <set field="carrierPartyId" value="${shippingContract.toPartyGroupId}"/>
                <entity-condition list="listShipmentMethodByContract" entity-name="CarrierShipmentMethod">
                	<condition-list>
                		<condition-expr field-name="partyId" operator="equals" value="${shippingContract.toPartyGroupId}"/>
                		<condition-expr field-name="roleTypeId" operator="equals" value="CARRIER"/>
                	</condition-list>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu location="component://delys/widget/DelysMenus.xml" name="ShippingContractTabBar"/>
             			<screenlet title="${uiLabelMap.ShipmentMethodByContract} [${parameters.contractId}]">
                        <container>
                           <link target="addShipmentMethodToContract" text="${uiLabelMap.CommonAdd}" style="icon-plus-sign open-sans">
                          </link>
                       </container>
                  		<include-form name="AddShipmentMethod"
							location="component://delys/widget/logistics/LogisticsForms.xml"/>
                       	<include-form name="ListShipmentMethodByContract"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    
    <screen name="EditShippingContract">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="ShippingContract"/>
                <set field="tabButtonItem" value="EditContract"/>
                <entity-one value-field="shippingContract" entity-name="ShippingContract">
                	<field-map field-name="contractId" from-field="parameters.contractId"/>
                </entity-one>
                <set field="contractId" from-field="parameters.contractId"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu location="component://delys/widget/DelysMenus.xml" name="ShippingContractTabBar"/>
             			<screenlet title="${uiLabelMap.ContractInfo}">
                        <container>
	                           <link target="ListShippingContract" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
	                           </link>
	                           <label text="|"></label>
	                           <link target="EditShippingContract" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
                          </link>
                       </container>
                          <include-form name="EditShippingContract"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    
    <screen name="ListShipmentOrder">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="ShipmentOrder"/>
                <set field="shipmentId" from-field="parameters.shipmentId"/>
                <entity-condition list="listShipmentOrders" entity-name="OrderShipment">
                	<condition-expr field-name="shipmentId" from-field="parameters.shipmentId"/>
                </entity-condition>
                <entity-one value-field="shipment" entity-name="Shipment">
                	<field-map field-name="shipmentId" from-field="parameters.shipmentId"/>
                </entity-one>
                <set field="statusId" value="${shipment.statusId}"/>
			</actions>
			<widgets>
			<section>
				<condition>
					<if-compare operator="equals" value="SHIPMENT_INPUT" field="statusId"/>
				</condition>
				<widgets>
					<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
						<screenlet title="${uiLabelMap.ListShipmentOrders} ${uiLabelMap.CommonOf} ${uiLabelMap.Shipment} [${parameters.shipmentId}]">
							<container>
	                           	<link target="AddOrderToShipment" text="${uiLabelMap.CommonAdd} ${uiLabelMap.order}" style="icon-plus-sign open-sans">
                          			<parameter param-name="shipmentId" from-field="shipmentId"/>
                          		</link>
                       			</container>
							<include-form name="ListShipmentOrder"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
					</decorator-screen>
				</widgets>
				<fail-widgets>
					<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
						<screenlet title="${uiLabelMap.ListShipmentOrders} ${uiLabelMap.CommonOf} ${uiLabelMap.Shipment} [${parameters.shipmentId}]">
							<include-form name="ListShipmentOrder"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
				</fail-widgets>
			</section>
			</widgets>
       </section>
    </screen>
    <screen name="AddOrderToShipment">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="ShipmentOrder"/>
                <set field="shipmentId" from-field="parameters.shipmentId"/>
                <set field="orderTypeId" value="SALES_ORDER"/>
                <set field="statusId" value="ORDER_APPROVED"/>
                <set field="action" value="parameters.action"/>
                <entity-condition list="listShipmentOrders" entity-name="OrderShipment">
                	<condition-expr field-name="shipmentId" from-field="parameters.shipmentId"/>
                </entity-condition>
                <entity-one value-field="shipment" entity-name="Shipment"></entity-one>
  				<set field="shipmentTypeId" from-field="shipment.shipmentTypeId"/>
                <set field="orderId" from-field="parameters.orderId"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipmentPlan.groovy"/>
                <set field="addToShipmentPlanRows" value="${addToShipmentPlanRows}"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
						<screenlet title="${uiLabelMap.AddOrderToShipment} [${parameters.shipmentId}]">
							<container>
	                           	<link target="ListShipmentOrder" text="${uiLabelMap.ShipmentOrder}" style="icon-plus-sign icon-tasks">
                          			<parameter param-name="shipmentId" from-field="shipmentId"/>
                          		</link>
                       		</container>
								<include-form name="AddOrderToShipment"
									location="component://delys/widget/logistics/LogisticsForms.xml"/>
							<section>
								<condition>
									<if-empty field="orderId"/>
								</condition>
								<widgets>
								</widgets>
								<fail-widgets>
									<section>
										<condition>
											<if-empty field="addToShipmentPlanRows"/>
										</condition>
										<widgets>
											<container style="alert alert-info">
												<label text="${uiLabelMap.NoOrderItemShipGroup}"></label>
											</container>
										</widgets>
										<fail-widgets>
											<screenlet title="${uiLabelMap.ListOrderItems} ${orderId}">
												<include-form name="ListItemAddToShipmentPlan"
													location="component://delys/widget/logistics/LogisticsForms.xml"/>
											<label style="alert alert-info" text="${NoOrderItemShipGroup}"></label>
											</screenlet>
										</fail-widgets>
									</section>
									
								</fail-widgets>
							</section>
							<screenlet title="${uiLabelMap.ListItemForShipmentPlan} [${shipmentId}]">
								<include-form name="ListShipmentOrder"
									location="component://delys/widget/logistics/LogisticsForms.xml"/>
							</screenlet>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
       </section>
    </screen>
    
    <screen name="ListShipmentItem">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="ShipmentItem"/>
                <set field="shipmentId" from-field="parameters.shipmentId"/>
<!-- 				<entity-condition list="listShipmentItems" entity-name="ShipmentItem"> -->
<!-- 					<condition-expr field-name="shipmentId" from-field="parameters.shipmentId"/> -->
<!-- 				</entity-condition> -->
				<entity-one value-field="shipment" entity-name="Shipment"></entity-one>
  				<set field="shipmentTypeId" from-field="shipment.shipmentTypeId"/>
				<script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipmentPlan.groovy"/>
				<set field="listShipmentItems" value="${listShipmentPlanRows}"/>
				<entity-one value-field="shipment" entity-name="Shipment"/>
				<set field="shipmentStatus" from-field="shipment.statusId"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
						<screenlet title="${uiLabelMap.ListShipmentItems} ${uiLabelMap.CommonOf} ${uiLabelMap.Shipment} [${parameters.shipmentId}]">
							<include-form name="ListShipmentItem"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
       </section>
    </screen>
     <screen name="ListShipment">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
            	<set field="titleProperty" value="ListShipments"/>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
				<entity-condition list="listShipment" entity-name="Shipment">
					<condition-list combine="or">
						<condition-expr field-name="originFacilityId" ignore-if-empty="true" ignore-if-null="true" from-field="parameters.facilityId"/>
						<condition-expr field-name="destinationFacilityId" ignore-if-empty="true" ignore-if-null="true" from-field="parameters.facilityId"/>
					</condition-list>
					<order-by field-name="-createdDate"/>
				</entity-condition>
				<entity-condition list="listSMStatus" entity-name="StatusItem">
					<condition-list combine="or">
					<condition-expr field-name="statusTypeId" value="SHIPMENT_STATUS"/>
					<condition-expr field-name="statusTypeId" value="PURCH_SHIP_STATUS"/>
					</condition-list>
				</entity-condition>
				<entity-condition list="listWeightUnit" entity-name="Uom">
					<condition-expr field-name="uomTypeId" value="WEIGHT_MEASURE"/>
				</entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<platform-specific>
							<html><html-template location="component://delys/webapp/delys/logistics/shipment/listShipment.ftl"/></html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
       </section>
    </screen>
    <screen name="ShipmentByFacility">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
            	<property-map resource="DelysUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItem" value="Shipment"/>
                
                <set field="facilityId" from-field="parameters.facilityId"/>
				<entity-condition list="listShipment" entity-name="Shipment">
					<condition-list combine="or">
						<condition-expr field-name="originFacilityId" ignore-if-empty="true" ignore-if-null="true" from-field="parameters.facilityId"/>
						<condition-expr field-name="destinationFacilityId" ignore-if-empty="true" ignore-if-null="true" from-field="parameters.facilityId"/>
					</condition-list>
				</entity-condition>
				<entity-condition list="listSMStatus" entity-name="StatusItem">
					<condition-list combine="or">
						<condition-expr field-name="statusTypeId" value="SHIPMENT_STATUS"/>
						<condition-expr field-name="statusTypeId" value="PURCH_SHIP_STATUS"/>
					</condition-list>
				</entity-condition>
				<entity-condition list="listWeightUnit" entity-name="Uom">
					<condition-expr field-name="uomTypeId" value="WEIGHT_MEASURE"/>
				</entity-condition>
				<set field="navMenuName" value="ShipmentNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
			</actions>
			<widgets>
				<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation"
					     value="component://delys/widget/DelysMenus.xml"
					     global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						      <set field="titleProperty" value="${uiLabelMap.ListShipments}"/>
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                  </section>
				<decorator-screen name="LogisticsFacilityCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
<!-- 						<screenlet title="${uiLabelMap.ListShipments} ${uiLabelMap.CommonOf} ${uiLabelMap.facility} ${facilityId}" navigation-menu-name="menuForEditFacility"> -->
						<screenlet>
<!-- 							<include-menu location="component://delys/widget/DelysMenus.xml" name="menuForEditFacility"/> -->
							<platform-specific>
								<html><html-template location="component://delys/webapp/delys/logistics/shipment/listShipment.ftl"/></html>
							</platform-specific>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
       </section>
    </screen>
    <screen name="DelysEditShipment">
        <section>
            <actions>
                <set field="titleProperty" value="ProductEditShipment"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="EditShipment"/>
                <set field="shipmentId" from-field="parameters.shipmentId"/>
                <set field="shipmentTypeId" from-field="parameters.shipmentTypeId"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipment.groovy"/>
                <entity-one value-field="shipmentTmp" entity-name="Shipment">
                	<field-map field-name="shipmentId" from-field="parameters.shipmentId"/>
                </entity-one>
                <set field="shipmentTypeId" from-field="parameters.shipmentTypeId"/>
                <get-related-one value-field="shipment" to-value-field="facility" relation-name="DestinationFacility"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/EditShipment.groovy"/>
            </actions>
            <widgets>
            	<section>
            		<condition>
            			 <if-empty field="shipmentId"/>
            		</condition>
            		<widgets>
            			<decorator-screen name="DelysCommonShipmentDecorator">
		                    <decorator-section name="body">
		                    <screenlet title="${uiLabelMap.ShipmentInformations}">
		 	                       <link target="ListShipment" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
		 	                       </link>
		 	                       <label text="|"></label>
		 	                       <link target="prepareCreateNewShipment" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
		 	                       </link>
		                        <include-form name="DelysEditShipment" location="component://delys/widget/logistics/LogisticsForms.xml"/>
		                    </screenlet>
		                    </decorator-section>
		                </decorator-screen>
            		</widgets>
            		<fail-widgets>
            			
            			<decorator-screen name="DelysCommonShipmentDecorator">
		                    <decorator-section name="body">
<!-- 		                    <include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/> -->
		                    <screenlet title="${uiLabelMap.ShipmentInformations}" navigation-menu-name="menuForDelysEditShipment">
		                    <include-menu location="component://delys/widget/DelysMenus.xml" name="menuForDelysEditShipment"/>
<!-- 		 	                       <link target="ListShipment" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks"> -->
<!-- 		 	                       </link> -->
<!-- 		 	                       <label text="|"></label> -->
<!-- 			 	                   <link target="prepareCreateNewShipment" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans"> -->
<!-- 		 	                       </link> -->
		                        <include-form name="DelysEditShipment" location="component://delys/widget/logistics/LogisticsForms.xml"/>
		                    </screenlet>
		                    </decorator-section>
		                </decorator-screen>
            		</fail-widgets>
            	</section>
            </widgets>
        </section>
    </screen>
    <screen name="ListSalesRequirements">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="Requirements"/>
                <set field="selectedSubMenuItem" value="SalesRequirement"/>
                <set field="reqTypeId" value="SALES_REQ"/>
                <set field="navMenuName" value="FindRequirementTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="requestParameters.requirementTypeId" value="SALES_REQ"/>
				<set field="targetFormSearch" value="findSalesRequirement"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
							 <decorator-section name="search-options">
                            <include-form name="FindRequirement" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                            	<screenlet title="${uiLabelMap.ListSalesRequirements}">
                                 	<include-form name="ListSalesRequirements" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                 </screenlet>
                            </decorator-section>
                        </decorator-screen>
    				</decorator-section>
    			</decorator-screen>
			</widgets>
       </section>
    </screen>
    <screen name="ListInternalSalesRequirements">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="Requirements"/>
                <set field="selectedSubMenuItem" value="InternalSalesRequirement"/>
                <set field="reqTypeId" value="INTERNAL_SALES_REQ"/>
                <set field="navMenuName" value="FindRequirementTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="requestParameters.requirementTypeId" value="INTERNAL_SALES_REQ"/>
				<set field="targetFormSearch" value="findInternalSalesRequirement"/>
				<set field="titleProperty" value="ListInternalSalesRequirements"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
							 <decorator-section name="search-options">
                            <include-form name="FindRequirement" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                            	<screenlet>
                                 	<include-form name="ListInternalSalesRequirements" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                 </screenlet>
                            </decorator-section>
                        </decorator-screen>
    				</decorator-section>
    			</decorator-screen>
			</widgets>
       </section>
    </screen>
    <screen name="ListMarketingRequirements">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="Requirements"/>
                <set field="selectedSubMenuItem" value="MarketingRequirement"/>
                <set field="reqTypeId" value="MARKETING_REQ"/>
                <set field="navMenuName" value="FindRequirementTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="requestParameters.requirementTypeId" value="MARKETING_REQ"/>
				<set field="targetFormSearch" value="findMarketingRequirement"/>
				<set field="titleProperty" value="ListMarketingRequirements"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
							 <decorator-section name="search-options">
                            <include-form name="FindRequirement" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                            	<screenlet>
                                 	<include-form name="ListMarketingRequirements" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                 </screenlet>
                            </decorator-section>
                        </decorator-screen>
    				</decorator-section>
    			</decorator-screen>
			</widgets>
       </section>
    </screen>
    <screen name="ListGiftRequirements">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="Requirements"/>
                <set field="selectedSubMenuItem" value="GiftRequirement"/>
                <set field="reqTypeId" value="GIFT_REQ"/>
                <set field="navMenuName" value="FindRequirementTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="requestParameters.requirementTypeId" value="GIFT_REQ"/>
				<set field="targetFormSearch" value="findGiftRequirement"/>
				<set field="titleProperty" value="ListGiftRequirements"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
							 <decorator-section name="search-options">
                            <include-form name="FindRequirement" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                            	<screenlet>
                                 	<include-form name="ListGiftRequirements" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                 </screenlet>
                            </decorator-section>
                        </decorator-screen>
    				</decorator-section>
    			</decorator-screen>
			</widgets>
       </section>
    </screen>
    <screen name="ListChangeDateRequirements">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="Requirements"/>
                <set field="selectedSubMenuItem" value="ChangeDateRequirement"/>
                <set field="reqTypeId" value="CHANGE_DATE_REQ"/>
                <set field="navMenuName" value="FindRequirementTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="requestParameters.requirementTypeId" value="CHANGE_DATE_REQ"/>
				<set field="targetFormSearch" value="findChangeDateRequirement"/>
				<set field="titleProperty" value="ListChangeDateRequirements"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
							 <decorator-section name="search-options">
                            <include-form name="FindRequirement" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                            	<screenlet>
                                 	<include-form name="ListChangeDateRequirements" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                 </screenlet>
                            </decorator-section>
                        </decorator-screen>
    				</decorator-section>
    			</decorator-screen>
			</widgets>
       </section>
    </screen>
    
    <screen name="EditRequirement">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
   	            <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getSelectedMenuItem.groovy"/>
                <set field="selectedMenuItem" value="Requirements"/>
                <set field="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
                <entity-one value-field="requirement" entity-name="Requirement">
                	<field-map field-name="requirementId" from-field="parameters.requirementId"/>
                </entity-one>
                <entity-one entity-name="RequirementFacility" value-field="reqFacility">
        			<field-map field-name="requirementId" value="${requirement.requirementId}"/>
        		</entity-one>
                <set field="requirementTypeId" from-field="parameters.requirementTypeId"/>
                <set field="requirementId" from-field="parameters.requirementId"/>
                <entity-condition entity-name="RequirementRole" list="listRequestor">
	        		<condition-list>
	        			<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
	        			<condition-expr field-name="roleTypeId" value="OWNER"/>
	       			</condition-list>
       				<order-by field-name="-fromDate"/>
        		</entity-condition>
        		<entity-condition entity-name="RequirementRole" list="listReceivers">
        		<condition-list>
        			<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
        			<condition-expr field-name="roleTypeId" value="RECEIVER"/>
        		</condition-list>
        		<order-by field-name="-fromDate"/>
        		</entity-condition>
        		<entity-condition entity-name="RequirementRole" list="listCustomer">
	        		<condition-list>
	        			<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
	        			<condition-expr field-name="roleTypeId" value="CUSTOMER"/>
	       			</condition-list>
       				<order-by field-name="-fromDate"/>
        		</entity-condition>
    			<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics.js" global="true"/>
    			<entity-condition list="listRequirementItems" entity-name="RequirementItem">
    				<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
    			</entity-condition>
    			<set field="statusId" value="${requirement.statusId}"/>
    			<!-- <entity-condition list="listFindAmountLimit" entity-name="FindAmountLimitIntenalPurchaseLimit"></entity-condition> -->
			</actions>
			<widgets>
			<section>
				<condition>
					<not>
						<if-compare operator="equals" value="REQ_ORDERED" field="statusId"/>
					</not>
				</condition>
				<widgets>
					<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.EditRequirement}">
							<link target="EditRequirement" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
								<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
 	                       	</link>
							<include-form name="EditRequirement"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
						<section>
							<condition>
								<not>
									<if-empty field="parameters.requirementId"/>
								</not>
							</condition>
							<widgets>
								<screenlet title="${uiLabelMap.ProductListProduct}">
									<include-form name="ListRequirementItems"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>
								</screenlet>							
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
				</widgets>
				<fail-widgets>
					<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.RequirementInfo}">
							<link target="EditRequirement" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
								<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
 	                       	</link>
							<include-form name="ViewRequirement"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
						<screenlet title="${uiLabelMap.ProductListProduct}">
						<include-form name="ListRequirementItemsCompleted"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
				</fail-widgets>
			</section>
			</widgets>
       </section>
    </screen>
    <screen name="AddProductToRequirement">
    	<section>
    		<actions>
    			<set field="requirementTypeId" from-field="parameters.requirementTypeId"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getSelectedMenuItem.groovy"/>
    			<set field="selectedMenuItem" value="Requirements"/>
                <set field="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
                <set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics_catalog_category.js" global="true"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listCatalogs" value="${listCatalogs}"/>
    			<set field="listCategories" value="${listCategories}"/>
    			<set field="prodCatalogId" from-field="parameters.prodCatalogId"/>
    			<set field="prodCategoryId" from-field="parameters.prodCategoryId"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getListProduct.groovy"/>
    			<set field="listProducts" value="${listProducts}"/>
    			<set field="requirementId" from-field="parameters.requirementId"/>
    			<entity-condition list="listRequirementItems" entity-name="RequirementItem">
    				<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.AddProductToRequirement} ${parameters.requirementId}">
							<link target="EditRequirement" text="${uiLabelMap.CommonBack}" style="icon-arrow-left icon-on-left">
								<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
								<parameter param-name="requirementId" from-field="parameters.requirementId"/>
 	                       	</link>
 	                       	<label text="|"></label>
							<link target="EditRequirement" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
								<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
 	                       	</link>
	                        <include-form name="LookupRequirementProduct" location="component://delys/widget/logistics/LogisticsForms.xml"/>
	                        <container id="table-container">
	                        	<include-form name="ListLookupRequirementProduct" location="component://delys/widget/logistics/LogisticsForms.xml"/>
	                        </container>
						</screenlet>
						<screenlet title="${uiLabelMap.ProductListProduct}">
							<include-form name="ListRequirementItemAfterAdds"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="EditTransferOrder">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="TransferOrders"/>
    			<set field="orderId" from-field="parameters.orderId"/>
    			<set field="requirementId" from-field="parameters.requirementId"/>
    			<entity-one value-field="order" entity-name="OrderHeader">
    				<field-map field-name="orderId" from-field="orderId"/>
    			</entity-one>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listProductStores" value="${listProductStores}"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.EditTransferOrder}">
							<container>
							<link target="getListTransferOrders" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
							<label text="|"></label>
							<link target="createNewTransferOrder" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans"></link>
 	                       	</container>
							<include-form name="EditTransferOrder"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="EditInternalSalesOrder">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="InternalSalesOrders"/>
    			<set field="orderId" from-field="parameters.orderId"/>
    			<set field="requirementId" from-field="parameters.requirementId"/>
    			<entity-one value-field="order" entity-name="OrderHeader">
    				<field-map field-name="orderId" from-field="orderId"/>
    			</entity-one>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listProductStores" value="${listProductStores}"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.EditInternalSalesOrder}">
							<container>
							<link target="getListInternalSalesOrders" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
							<label text="|"></label>
							<link target="editInternalSalesOrder" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans"></link>
 	                       	</container>
							<include-form name="EditInternalSalesOrder"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="EditMarketingOrder">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="MarketingOrders"/>
    			<set field="orderId" from-field="parameters.orderId"/>
    			<set field="requirementId" from-field="parameters.requirementId"/>
    			<entity-one value-field="order" entity-name="OrderHeader">
    				<field-map field-name="orderId" from-field="orderId"/>
    			</entity-one>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listProductStores" value="${listProductStores}"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.EditInternalSalesOrder}">
							<container>
							<link target="getListMarketingOrders" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
							<label text="|"></label>
							<link target="createNewMarketingOrder" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans"></link>
 	                       	</container>
							<include-form name="EditMarketingOrder"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="EditChangeDateOrder">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="ChangeDateOrders"/>
    			<set field="orderId" from-field="parameters.orderId"/>
    			<set field="requirementId" from-field="parameters.requirementId"/>
    			<entity-one value-field="order" entity-name="OrderHeader">
    				<field-map field-name="orderId" from-field="orderId"/>
    			</entity-one>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listProductStores" value="${listProductStores}"/>
   				<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilitiesOwner.groovy"/>
    			<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics_store_facility.js" global="true"/>
                <set field="listFacilities" from-field="listFacilities"/>
    			<set field="reasonTypeId" from-field="parameters.reasonTypeId"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.EditChangeDateOrder}">
							<container>
							<link target="getListChangeDateOrders" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
							<label text="|"></label>
							<link target="selectCreateOrderFrom" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans"></link>
 	                       	</container>
							<include-form name="EditChangeDateOrder"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="ListReceiveRequirementProducts">
    	<section>
			<actions>
				<set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="ReceiveByProduct"/>
				<entity-condition list="listReceiveRequirements" entity-name="Requirement">
					<condition-list>
						<condition-expr field-name="requirementTypeId" operator="equals" value="RECEIVE_PRODUCT_REQ"/>
					</condition-list>
				</entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.ListReceiveRequirement}">
							<container>
							<link target="getListReceiveRequirementProducts" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
							<label text="|"></label>
							<link target="createReceiveRequirements" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
								<parameter param-name="requirementTypeId" value="RECEIVE_PRODUCT_REQ"/>
								<parameter param-name="parentTypeId" value=""/>
								<parameter param-name="selectedSubMenuItem" value="ReceiveByProduct"/>
							</link>
 	                       	</container>
							<include-form name="ListReceiveRequirements" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>    	
    	</section>
    </screen>
    <screen name="ListReceiveRequirementPurchaseOrders">
    	<section>
			<actions>
				<set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="ReceiveFromOrder"/>
                <set field="tabButtonItem" value="ReceiveFromRequirement"/>
				<entity-condition list="listReceiveRequirements" entity-name="Requirement">
					<condition-list>
						<condition-expr field-name="requirementTypeId" operator="equals" value="RECEIVE_ORDER_REQ"/>
					</condition-list>
				</entity-condition>
				<entity-condition list="listReceivableRequirements" entity-name="Requirement">
					<condition-list>
						<condition-expr field-name="requirementTypeId" operator="equals" value="RECEIVE_ORDER_REQ"/>
						<condition-expr field-name="statusId" operator="equals" value="REQ_APPROVED"/>
					</condition-list>
				</entity-condition>
				<entity-condition list="listApprovableRequirements" entity-name="Requirement">
					<condition-list>
						<condition-expr field-name="requirementTypeId" operator="equals" value="RECEIVE_ORDER_REQ"/>
						<condition-expr field-name="statusId" operator="not-equals" value="REQ_APPROVED"/>
						<condition-expr field-name="statusId" operator="not-equals" value="REQ_COMPLETED"/>
					</condition-list>
				</entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
<!-- 						<include-menu location="component://delys/widget/DelysMenus.xml" name="ReceiveFromOrderTabBar"/> -->
						<screenlet title="${uiLabelMap.ListReceiveRequirement}">
							<container>
							<link target="getListReceiveRequirementPurchaseOrders" text="${uiLabelMap.CommonList} ${uiLabelMap.Requirement}" style="icon-plus-sign icon-tasks"></link>
							<label text="|"></label>
							<link target="createReceiveRequirementsFromPO" text="${uiLabelMap.CommonCreateNew} ${uiLabelMap.Requirement}" style="icon-plus-sign open-sans">
								<parameter param-name="requirementTypeId" value="RECEIVE_ORDER_REQ"/>
								<parameter param-name="parentTypeId" value=""/>
								<parameter param-name="selectedSubMenuItem" value="ReceiveFromOrder"/>
							</link>
 	                       	</container>
							<include-form name="ListReceiveRequirementsFromPO" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>    	
    	</section>
    </screen>
    <screen name="EditReceiveRequirementFromPO">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
    			<set field="requirementTypeId" from-field="parameters.requirementTypeId"/>
    			<entity-one value-field="requirement" entity-name="Requirement">
    				<field-map field-name="requirementId" from-field="parameters.requirementId"/>
    			</entity-one>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listProductStores" value="${listProductStores}"/>
   				<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilitiesOwner.groovy"/>
    			<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics/store_facility.js" global="true"/>
                <set field="listFacilities" from-field="listFacilities"/>
                <set field="listCatalogs" value="${listCatalogs}"/>
    			<set field="listCategories" value="${listCategories}"/>
    			<set field="statusId" from-field="requirement.statusId"/>
    			<entity-condition entity-name="RequirementRole" list="listRequestor">
	        		<condition-list>
	        			<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
	        			<condition-expr field-name="roleTypeId" value="OWNER"/>
	       			</condition-list>
       				<order-by field-name="-fromDate"/>
        		</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.EditRequirement}">
							<container>
							<link target="getListReceiveRequirementPurchaseOrders" text="${uiLabelMap.CommonList} ${uiLabelMap.Requirement}" style="icon-plus-sign icon-tasks"></link>
							<label text="|"></label>
							<link target="createReceiveRequirementsFromPO" text="${uiLabelMap.CommonCreateNew} ${uiLabelMap.Requirement}" style="icon-plus-sign open-sans">
								<parameter param-name="parentTypeId" from-field="parameters.parentTypeId"/>
								<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
								<parameter param-name="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
							</link>
 	                       	</container>
							<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="EditReceiveRequirementFromPO"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="EditReceiveRequirement">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
    			<set field="requirementTypeId" from-field="parameters.requirementTypeId"/>
    			<entity-condition list="listReqTypes" entity-name="RequirementType">
    				<condition-expr field-name="parentTypeId" from-field="parameters.parentTypeId" operator="equals"/>
    				<select-field field-name="requirementTypeId"/>
    			</entity-condition>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getListReqType.groovy"/>
    			<entity-one value-field="requirement" entity-name="Requirement">
    				<field-map field-name="requirementId" from-field="parameters.requirementId"/>
    			</entity-one>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listProductStores" value="${listProductStores}"/>
   				<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilitiesOwner.groovy"/>
    			<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics_store_facility.js" global="true"/>
                <set field="listFacilities" from-field="listFacilities"/>
                <set field="listCatalogs" value="${listCatalogs}"/>
    			<set field="listCategories" value="${listCategories}"/>
    			<set field="requirementId" from-field="parameters.requirementId"/>
    			<entity-condition list="listRequirementItems" entity-name="RequirementItem">
    				<condition-expr field-name="requirementId" from-field="requirementId"/>
    			</entity-condition>
    			<entity-condition list="listReqItemsApprovedOrReceiveds" entity-name="RequirementItem">
    				<condition-list combine="and">
	    				<condition-expr field-name="requirementId" from-field="requirementId"/>
   						<condition-expr field-name="statusId" value="REQ_ITEM_APPROVED" operator="equals"/>
    				</condition-list>
    			</entity-condition>
    			<set field="statusId" from-field="requirement.statusId"/>
    			<entity-condition entity-name="RequirementRole" list="listRequestor">
	        		<condition-list>
	        			<condition-expr field-name="requirementId" from-field="requirementId"/>
	        			<condition-expr field-name="roleTypeId" value="OWNER"/>
	       			</condition-list>
       				<order-by field-name="-fromDate"/>
        		</entity-condition>
    		</actions>
    		<widgets>
    			<section>
    				<condition>
    					<if-empty field="requirement"/>
    				</condition>
    				<widgets>
    					<decorator-screen name="DelysCommonDecorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<screenlet title="${uiLabelMap.EditRequirement}">
									<container>
									<link target="getListReceiveRequirementProducts" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
									<label text="|"></label>
									<link target="createReceiveRequirements" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
										<parameter param-name="parentTypeId" from-field="parameters.parentTypeId"/>
										<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
										<parameter param-name="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
									</link>
		 	                       	</container>
									<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="EditReceiveRequirement"/>
								</screenlet>
							</decorator-section>
						</decorator-screen>
    				</widgets>
    				<fail-widgets>
    					<section>
    						<condition>
    							<and>
    								<if-compare operator="equals" value="REQ_APPROVED" field="statusId"/>
	    							<not>
	    								<if-empty field="listReqItemsApprovedOrReceiveds"/>
	    							</not>
    							</and>
    						</condition>
    						<widgets>
    						<decorator-screen name="DelysCommonDecorator"
								location="${parameters.mainDecoratorLocation}">
								<decorator-section name="body">
									<screenlet title="${uiLabelMap.EditRequirement}">
										<container>
										<link target="getListReceiveRequirementProducts" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
										<label text="|"></label>
										<link target="createReceiveRequirements" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
											<parameter param-name="parentTypeId" from-field="parameters.parentTypeId"/>
											<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
											<parameter param-name="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
										</link>
			 	                       	</container>
										<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="EditReceiveRequirement"/>
									</screenlet>
									<screenlet title="${uiLabelMap.ProductListProduct}">
										<container>
											<link target="prepareAddProductToReceiveRequirement" text="${uiLabelMap.ProductAddProduct}" style="icon-plus">
												<parameter param-name="requirementId" from-field="parameters.requirementId"/>
												<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
												<parameter param-name="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
											</link>
										</container>
										<include-form name="ListReceiveRequirementItemsCompleted"
											location="component://delys/widget/logistics/LogisticsForms.xml"/>
									</screenlet>
								</decorator-section>
							</decorator-screen>
    						</widgets>
    						<fail-widgets>
    							<section>
    								<condition>
    									<if-compare operator="equals" value="REQ_COMPLETED" field="statusId"/>
    								</condition>
    								<widgets>
    									<decorator-screen name="DelysCommonDecorator"
											location="${parameters.mainDecoratorLocation}">
											<decorator-section name="body">
												<screenlet title="${uiLabelMap.EditRequirement}">
													<container>
													<link target="getListReceiveRequirementProducts" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
													<label text="|"></label>
													<link target="createReceiveRequirements" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
														<parameter param-name="parentTypeId" from-field="parameters.parentTypeId"/>
														<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
														<parameter param-name="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
													</link>
						 	                       	</container>
													<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="ShowReceiveRequirementCompleted"/>
												</screenlet>
												<screenlet title="${uiLabelMap.ProductListProduct}">
													<include-form name="ListReceiveRequirementItemsCompleted"
														location="component://delys/widget/logistics/LogisticsForms.xml"/>
												</screenlet>
											</decorator-section>
										</decorator-screen>
    								</widgets>
    								<fail-widgets>
    									<section>
		    								<actions>
		    									<entity-condition list="listRequirementItemsToApproves" entity-name="RequirementItem">
								    				<condition-list>
								    					<condition-expr field-name="statusId" operator="not-equals" value="REQ_ITEM_APPROVED"/>
								    					<condition-expr field-name="statusId" operator="not-equals" value="REQ_ITEM_RECEIVED"/>
								    					<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
								    				</condition-list>
								    			</entity-condition>
		    								</actions>
		    								<widgets>
		    									<decorator-screen name="DelysCommonDecorator"
													location="${parameters.mainDecoratorLocation}">
													<decorator-section name="body">
														<screenlet title="${uiLabelMap.EditRequirement}">
															<container>
															<link target="getListReceiveRequirementProducts" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
															<label text="|"></label>
															<link target="createReceiveRequirements" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
																<parameter param-name="parentTypeId" from-field="parameters.parentTypeId"/>
																<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
																<parameter param-name="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
															</link>
								 	                       	</container>
															<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="EditReceiveRequirement"/>
														</screenlet>
														<screenlet title="${uiLabelMap.ProductListProduct}">
															<container>
																<link target="prepareAddProductToReceiveRequirement" text="${uiLabelMap.ProductAddProduct}" style="icon-plus">
																	<parameter param-name="requirementId" from-field="parameters.requirementId"/>
																	<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
																	<parameter param-name="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
																</link>
															</container>
															<include-form name="ListReceiveRequirementItems"
																location="component://delys/widget/logistics/LogisticsForms.xml"/>
														</screenlet>
													</decorator-section>
												</decorator-screen>
		    								</widgets>
		    							</section>
    								</fail-widgets>
    							</section>
    						</fail-widgets>
    					</section>
    				</fail-widgets>
    			</section>
    		</widgets>
    	</section>
    </screen>
    <screen name="AddProductToReceiveRequirement">
    	<section>
    		<actions>
    			<set field="requirementTypeId" from-field="parameters.requirementTypeId"/>
    			<set field="selectedMenuItem" value="receiveProduct"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getSelectedMenuItem.groovy"/>
                <set field="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
                <set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics_catalog_category.js" global="true"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listCatalogs" value="${listCatalogs}"/>
    			<set field="listCategories" value="${listCategories}"/>
    			<set field="prodCatalogId" from-field="parameters.prodCatalogId"/>
    			<set field="prodCategoryId" from-field="parameters.prodCategoryId"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getListProduct.groovy"/>
    			<set field="listProducts" value="${listProducts}"/>
    			<set field="requirementId" from-field="parameters.requirementId"/>
    			<entity-condition list="listRequirementItems" entity-name="RequirementItem">
    				<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
    			</entity-condition>
    			<entity-condition list="listRequirementItemsToReceive" entity-name="RequirementItem">
    				<condition-list>
    					<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
    					<condition-expr field-name="statusId" operator="equals" value="REQ_ITEM_APPROVED"/>
    				</condition-list>
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.AddProductToRequirement} ${parameters.requirementId}">
							<link target="editReceiveRequirement" text="${uiLabelMap.CommonBack}" style="icon-arrow-left icon-on-left">
								<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
								<parameter param-name="requirementId" from-field="parameters.requirementId"/>
								<parameter param-name="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
 	                       	</link>
 	                       	<label text="|"></label>
							<link target="editReceiveRequirement" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
								<parameter param-name="requirementTypeId" from-field="parameters.requirementTypeId"/>
 	                       	</link>
	                        <include-form name="LookupRequirementProduct" location="component://delys/widget/logistics/LogisticsForms.xml"/>
	                        <container id="table-container">
	                        	<include-form name="ListLookupReceiveRequirementProduct" location="component://delys/widget/logistics/LogisticsForms.xml"/>
	                        </container>
						</screenlet>
						<screenlet title="${uiLabelMap.ProductListProduct}">
						<include-form name="ListReceiveRequirementItemAfterAdds"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="EditRequirementItem">
    	<section>
    		<actions>
    			<set field="requirementTypeId" from-field="parameters.requirementTypeId"/>
    			<set field="selectedMenuItem" value="receiveProduct"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getSelectedMenuItem.groovy"/>
                <set field="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.EditRequirementItem} ${parameters.requirementId} ${parameters.reqItemSeqId}">
							<include-form name="EditRequirementItem" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    
    <screen name="ReceiveInventoryDetail"> 
    	<section>
    		<actions>
 			   	<set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
    			<entity-condition list="listOrderItemToReceives" entity-name="OrderItem">
    				<condition-expr field-name="orderId" from-field="parameters.orderId"/>
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
							<screenlet title="${uiLabelMap.ProductListProduct} ${uiLabelMap.CommonFor} ${uiLabelMap.OrderId} ${parameters.orderId}">
								<container>
									<link target="getListReceiveRequirementPurchaseOrders" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
									<label text="|"></label>
									<link target="createReceiveRequirementsFromPO" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
										<parameter param-name="requirementTypeId" value="RECEIVE_ORDER_REQ"/>
										<parameter param-name="parentTypeId" value=""/>
										<parameter param-name="selectedSubMenuItem" value="ReceiveFromOrder"/>
									</link>
	 	                       	</container>
								<include-form name="ListItemReceivedDetail" location="component://delys/widget/logistics/LogisticsForms.xml"/>
							</screenlet>
                    </decorator-section>
                 </decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="ListOrderItemToReceive"> 
    	<section>
    		<actions>
 			   	<set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" from-field="parameters.selectedSubMenuItem"/>
    			<entity-condition list="listOrderItemToReceives" entity-name="OrderItem">
    				<condition-list>
    					<condition-expr field-name="orderId" from-field="parameters.orderId"/>
    					<condition-expr field-name="statusId" operator="equals" value="ITEM_APPROVED"/>
    				</condition-list>
    			</entity-condition>
    			<entity-one value-field="orderHeader" entity-name="OrderHeader">
    				<field-map field-name="orderId" from-field="parameters.orderId"/>
    			</entity-one>
    			<set field="requirementId" from-field="parameters.requirementId"></set>
    			<entity-one entity-name="Requirement" value-field="requirement"></entity-one>
    			<set field="facilityId" value="${requirement.facilityId}"></set>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilityOwnerAcctgPref.groovy"/>
    			<set field="currencyUomId" value="${currencyUomId}"/>    			
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
							<screenlet title="${uiLabelMap.ProductListProduct} ${uiLabelMap.CommonFor} ${uiLabelMap.OrderId} ${parameters.orderId}">
								<container>
									<link target="getListReceiveRequirementPurchaseOrders" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
									<label text="|"></label>
									<link target="createReceiveRequirementsFromPO" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
										<parameter param-name="requirementTypeId" value="RECEIVE_ORDER_REQ"/>
										<parameter param-name="parentTypeId" value=""/>
										<parameter param-name="selectedSubMenuItem" value="ReceiveFromOrder"/>
									</link>
	 	                       	</container>
	 	                       	<container id="table-container">
									<include-form name="ListOrderItemToReceive" location="component://delys/widget/logistics/LogisticsForms.xml"/>
								</container>
							</screenlet>
                    </decorator-section>
                 </decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="OrderItemToReceives"> 
    	<section>
    		<actions>
 			   	<set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="ReceiveFromShipment"/>
    			<entity-condition list="listOrderItemToReceives" entity-name="OrderItem">
    				<condition-expr field-name="orderId" from-field="parameters.orderId"/>
    			</entity-condition>
    			<set field="shipmentId" from-field="parameters.shipmentId"/>
    			<set field="facilityId" from-field="parameters.facilityId"/>
    			<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/changeFromAction.js" global="true"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilityOwnerAcctgPref.groovy"/>
		    	<set field="currencyUomId" value="${currencyUomId}"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
							<screenlet title="${uiLabelMap.ProductListProduct} ${uiLabelMap.CommonFor} ${uiLabelMap.OrderId} ${parameters.orderId}">
	 	                       	<container>
								<link target="getOrderFromShipment" text="${uiLabelMap.CommonList} ${uiLabelMap.OrderOrder}" style="icon-tasks">
									<parameter param-name="shipmentId" from-field="shipmentId"/>
									<parameter param-name="facilityId" from-field="facilityId"/>
								</link>
 	                       		</container>
	 	                       	<container id="table-container">
									<include-form name="ListOrderItemToReceive" location="component://delys/widget/logistics/LogisticsForms.xml"/>
								</container>
							</screenlet>
                    </decorator-section>
                 </decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="ShipmentReports">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Reports"/>
                <set field="tabButtonItem" value="GeneralReport"/>
    			<entity-condition list="listShipments" entity-name="Shipment">
    			</entity-condition>
    		</actions>
    		<widgets>
    			<section>
		 			<widgets>
		       			 <section>
							   <actions>
								    <set field="tabBarName" value="ShipmentReportMenu" global="true" />
								    <set field="tabBarLocation"
								     value="component://delys/widget/DelysMenus.xml"
								     global="true" />
							   </actions>
							   <widgets>
								    <section>
									     <actions>
									      <set field="printTabBar" value="true" />
									     </actions>
									     <widgets>
									     	<container>
									     	</container>
										 </widgets>
									</section>
							   </widgets>                                    
		        		</section>                                
					 </widgets>            
				</section>
				
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
<!-- 						<include-menu location="component://delys/widget/DelysMenus.xml" name="ShipmentReportMenu"/> -->
						<screenlet title="BCTK" navigation-menu-name="menuForShipmentReports">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="menuForShipmentReports"/>
<!-- 							<container> -->
<!-- 								<link target="print" text="${uiLabelMap.CommonPrint}" style="icon-print"></link> -->
<!-- 								<label text="|"></label> -->
<!-- 								<link target="search" text="${uiLabelMap.CommonFilter}" style="icon-search"> -->
<!-- 									<parameter param-name=""/> -->
<!-- 								</link> -->
<!--  	                       	</container> -->
							<include-form name="ShipmentReports" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="InventoryItemReports">
    	<section>
    		<actions>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getInventoryItems.groovy"/>
    			<set field="listItems" value="${listItems}"/>
    			<set field="navMenuName" value="InventoryReportNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
    			<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItemSub" value="Reports"/>
   			  	<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listProductStores" value="${listProductStores}"/>
   				<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilitiesOwner.groovy"/>
    			<set field="listFacilities" value="${listFacilities}"/>
    			<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics_store_facility.js" global="true"/>
    			<set field="facilityId" from-field="parameters.facilityId" global="true"></set>
    		</actions>
    		<widgets>
    			<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation"
					     value="component://delys/widget/DelysMenus.xml"
					     global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                  </section>
    			<decorator-screen name="LogisticsFacilityCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
	                    	<decorator-section name="search-options">
	                        	<include-form name="SearchInventoryItemsParams" location="component://delys/widget/logistics/LogisticsForms.xml"/>
	                       	</decorator-section>
	                       	<decorator-section name="search-results">
	                       		<include-form name="InventoryReports" location="component://delys/widget/logistics/LogisticsForms.xml"/>
	                        </decorator-section>
	                    </decorator-screen>
                    </decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="PrintListInventoryItems">
    	<section>
    		<actions>
    			<property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
    			<property-map resource="DelysUiLabels" map-name="uiLabelMap" global="true"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getInventoryItems.groovy"/>
    			<set field="listItems" value="${listItems}"/>
    		</actions>
    		<widgets>
   				<platform-specific>
                 	<xsl-fo><html-template location="component://delys/webapp/delys/logistics/reports/inventoryItemReport.fo.ftl"/></xsl-fo>
               	</platform-specific>
    		</widgets>
    	</section>
    </screen>
    <screen name="OrderReports">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="Reports"/>
                <set field="tabButtonItem" value="GeneralReport"/>
    			<entity-condition list="listOrders" entity-name="OrderHeader">
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="OrderReportMenu"/>
						<screenlet title="">
							<container>
								<link target="print" text="${uiLabelMap.CommonPrint}" style="icon-print"></link>
								<label text="|"></label>
								<link target="search" text="${uiLabelMap.CommonFilter}" style="icon-search">
									<parameter param-name=""/>
								</link>
 	                       	</container>
							<include-form name="OrderReports" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="ReceiveReports">
    	<section>
    		<actions>
    			<set field="navMenuName" value="ReceiveReportNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
    			<set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="Reports"/>
                <set field="tabButtonItem" value="GeneralReport"/>
   				<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilitiesOwner.groovy"/>
    			<set field="listFacilities" value="${listFacilities}"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getReceivedProducts.groovy"/>
    			<set field="listProducts" value="${listProducts}"/>
    		</actions>
    		<widgets>
    			 <section>
		 			<widgets>
		       			 <section>
							   <actions>
								    <set field="tabBarName" value="ReceiveReportMenu" global="true" />
								    <set field="tabBarLocation"
								     value="component://delys/widget/DelysMenus.xml"
								     global="true" />
								     <set field="titleProperty" value="Report"/>
							   </actions>
							   <widgets>
								    <section>
									     <actions>
									      <set field="printTabBar" value="true" />
									     </actions>
									     <widgets>
									     	<container>
									     	</container>
										 </widgets>
									</section>
							   </widgets>                                    
		        		</section>                                
					 </widgets>            
				</section>
    			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
<!-- 					<include-menu location="component://delys/widget/DelysMenus.xml" name="ReceiveReportMenu"/> -->
						<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
	                    	<decorator-section name="search-options">
	                        	<include-form name="SearchReceiveParams" location="component://delys/widget/logistics/LogisticsForms.xml"/>
	                       	</decorator-section>
	                       	<decorator-section name="search-results">
<!-- 	                       		<screenlet> -->
<!-- 	                       			<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="ListProductByOrder"/> -->
<!-- 	                       		</screenlet> -->
	                       		<platform-specific><html><html-template location="component://delys/webapp/delys/logistics/ReceiveProductReport.ftl"/></html></platform-specific>
	                        </decorator-section>
	                    </decorator-screen>
                    </decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="DeliveryReports">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="Reports"/>
                <set field="tabButtonItem" value="Requirements"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="DeliveryReportMenu"/>
						<screenlet title="">
							<container>
								<link target="print" text="${uiLabelMap.CommonPrint}" style="icon-print"></link>
								<label text="|"></label>
								<link target="search" text="${uiLabelMap.CommonFilter}" style="icon-search">
									<parameter param-name=""/>
								</link>
 	                       	</container>
							<include-form name="DeliveryReports" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
     <screen name="ShipmentCostDetails">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Reports"/>
                <set field="tabButtonItem" value="GeneralReport"/>
    			<entity-condition list="listShipmentCost" entity-name="Shipment">
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="DeliveryReportMenu"/>
						<screenlet title="">
							<container>
								<link target="print" text="${uiLabelMap.CommonPrint}" style="icon-print"></link>
								<label text="|"></label>
								<link target="search" text="${uiLabelMap.CommonFilter}" style="icon-search">
									<parameter param-name=""/>
								</link>
 	                       	</container>
							<include-form name="ShipmentCostDetails" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="ListPurchaseOrders">
    	<section>
	    	<actions>
	    		<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="PurchaseOrders"/>
    			<set field="navMenuName" value="FindPurchaseOrderTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="orderTypeId" value="PURCHASE_ORDER"/>
				<set field="titleProperty" value="PurchaseOrder"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
							 <decorator-section name="search-options">
                            	<include-form name="FindPurchaseOrders" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                            	<screenlet>
                                 	<include-form name="ListPurchaseOrders" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                                 </screenlet>
                            </decorator-section>
                        </decorator-screen>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="logicticsFacilityContactMechTitle">
    	<section>
    		<actions>
				<set field="facilityId" from-field="parameters.facilityId"/>
			</actions>
    		<widgets>
    			<label style="ibefore-icon-angle-right">${uiLabelMap.LogTitleContactMechInFacilityId}  [${facilityId}]</label>
    		</widgets>
    	</section>
    </screen>
    <screen name="ViewContactMechInfo">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItemSub" value="ViewContactMechs"/>
                <!-- <script location="component://product/webapp/facility/WEB-INF/actions/facility/ViewContactMechs.groovy"/> -->
                <set field="facilityId" from-field="parameters.facilityId"/>
                <entity-one entity-name="Facility" value-field="facility"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="titleProperty" value="PageTitleViewFacilityContactMechanism"/>
                <set field="titleHeaderValue" value="logicticsFacilityContactMechTitle" global="true" />
				<set field="titleHeaderLocation" value="component://delys/widget/logistics/LogisticsScreens.xml" global="true" />
                <entity-condition list="listContactMechType" entity-name="ContactMechType">
                	<condition-list combine="or">
                		<condition-expr field-name="contactMechTypeId" value="POSTAL_ADDRESS" />
                		<condition-expr field-name="contactMechTypeId" value="EMAIL_ADDRESS" />
                		<condition-expr field-name="contactMechTypeId" value="TELECOM_NUMBER" />
                	</condition-list>
                </entity-condition>
            </actions>
            <widgets>
            	<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation"
					     value="component://delys/widget/DelysMenus.xml"
					     global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                  </section>
                <decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                         <section>
                             <condition>
                                 <not><if-empty field="facilityId"/></not>
                             </condition>
                             <widgets>
                                 <section>
                                     <condition>
                                         <if-service-permission service-name="facilityGenericPermission" main-action="CREATE"/>
                                     </condition>
                                     <widgets>
				                            <platform-specific><html><html-template location="component://delys/webapp/delys/logistics/facility/ViewContactMechDetails.ftl"/></html></platform-specific>
                                     </widgets>
                                 </section>
                             </widgets>
                         </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ViewContactMechPostalAddressInfo">
         <section>
         	 <actions>
                <script location="component://product/webapp/facility/WEB-INF/actions/facility/ViewContactMechs.groovy"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <set field="contactMechTypeId" from-field="parameters.contactMechTypeId"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <property-map resource="DelysSalesUiLabels" map-name="uiLabelMap"/>
                <property-map resource="PartyUiLabels" map-name="uiLabelMap"/>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap"/>
                
             </actions>
             <widgets>
        			<platform-specific><html><html-template location="component://delys/webapp/delys/logistics/facility/createContectMectPostalAddress.ftl"/></html></platform-specific>
             </widgets>
         </section>
    </screen>
    <screen name="EditContactMech">
    	<section>
    		<actions>
				<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItemSub" value="ViewContactMechs"/>
    			<script location="component://product/webapp/facility/WEB-INF/actions/facility/EditContactMech.groovy"/>
    			<set field="dependentForm" value="editcontactmechform"/>
                <set field="paramKey" value="countryGeoId"/>
                <set field="mainId" value="countryGeoId"/>
                <set field="dependentId" value="stateProvinceGeoId"/>
                <set field="requestName" value="getAssociatedStateList"/>
                <set field="responseName" value="stateList"/>
                <set field="dependentKeyName" value="geoId"/>
                <set field="descName" value="geoName"/>
                <set field="selectedDependentOption" from-field="mechMap.postalAddress.stateProvinceGeoId" default-value="_none_"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <entity-one entity-name="Facility" value-field="facility"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.PageTitleNewFacilityContactMech}"/>
    		</actions>
    		<widgets>
    			<section>
                    <condition>
                        <not><if-empty field="parameters.contactMechId"/></not>
                    </condition>
                    <actions>
                        <set field="title" value="${uiLabelMap.PageTitleEditFacilityContactMech}"/>
                    </actions>
                    <widgets/>
                </section>
    			<decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.PartyContactInformation}" navigation-menu-name="ViewContactMechsSubTabBar">
                            <platform-specific><html><html-template location="component://product/webapp/facility/facility/EditContactMech.ftl"/></html></platform-specific>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
    		</widgets>
   		</section>
	</screen>
    <screen name="ListGroupFacilities">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="facilitySetting"/>
                <set field="selectedSubMenuItem" value="GroupFacility"/>
                <set field="titleProperty" value="GroupFacility"/>
    			<entity-condition list="listIt" entity-name="FacilityGroup">
    			</entity-condition>
    			<property-map resource="DelysSalesUiLabels" map-name="uiLabelMap"/>
    		</actions>
    		<widgets>
    		<section>
    			<condition>
    				<if-has-permission permission="FACILITY_ADMIN"/>
    			</condition>
    			<widgets>
    				<decorator-screen name="DelysCommonDecorator"
						location="${parameters.mainDecoratorLocation}">
						<decorator-section name="body">
							<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.GroupFacility}" navigation-menu-name="facilityGroupSubTabBar">
								<include-menu location="component://delys/widget/DelysMenus.xml" name="facilityGroupSubTabBar"/>
								<platform-specific>
									<html>
										<html-template location="component://delys/webapp/delys/logistics/facility/ListGroupFacilities.ftl"/>
									</html>
								</platform-specific>
							</screenlet>
	                    </decorator-section>
					</decorator-screen>
    			</widgets>
    			<fail-widgets>
    				<decorator-screen name="DelysCommonDecorator"
						location="${parameters.mainDecoratorLocation}">
						<decorator-section name="body">
								<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.GroupFacility}">
									<platform-specific>
										<html>
											<html-template location="component://delys/webapp/delys/logistics/facility/ListGroupFacilities.ftl"/>
										</html>
									</platform-specific>
								</screenlet>
						</decorator-section>
					</decorator-screen>
    			</fail-widgets>
    		</section>
    		</widgets>
    	</section>
    </screen>
    
    <screen name="EditGroupFacility">
    	<section>
    		<actions>	
    			<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="GroupFacility"/>
                <set field="tabButtonItem" value="EditFacilityGroup"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
                <set field="permission" from-field="NoPermisson"/>
                <set field="listProductStores" from-field="listProductStores"/>
                <entity-one value-field="facilityGroup" entity-name="FacilityGroup">
                	<field-map field-name="facilityGroupId" from-field="parameters.facilityGroupId"/>
                </entity-one>
                <set field="facilityGroupId" from-field="parameters.facilityGroupId"/>
    		</actions>
    		<widgets>
    			<section>
				 			<widgets>
				       			 <section>
									   <actions>
										    <set field="tabBarName" value="FacilityGroupMenu" global="true" />
										    <set field="tabBarLocation"
										     value="component://delys/widget/DelysMenus.xml"
										     global="true" />
									   </actions>
									   <widgets>
										    <section>
											     <actions>
											      <set field="printTabBar" value="true" />
											     </actions>
											     <widgets>
											     	<container>
											     	</container>
												 </widgets>
											</section>
									   </widgets>                                    
				        		</section>                                
							 </widgets>            
						</section>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
<!-- 						<include-menu location="component://delys/widget/DelysMenus.xml" name="FacilityGroupMenu"/> -->
						<screenlet title="${uiLabelMap.CommonEdit} ${uiLabelMap.FacilityGroup} ${facilityGroup.facilityGroupName}" navigation-menu-name="menuForFacilityGroupRoles">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="menuForFacilityGroupRoles"/>
<!-- 							<container> -->
<!-- 								<link target="getListGroupFacilities" text="${uiLabelMap.CommonList}" style="icon-tasks"> -->
<!-- 								</link> -->
<!-- 								<label text="|"></label> -->
<!-- 								<link target="createNewGroupFacility" text="${uiLabelMap.CommonCreateNew}" style="icon-plus"> -->
<!-- 								</link> -->
<!--  	                       	</container> -->
							<include-form name="EditGroupFacility" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    
    <screen name="EditFacilityGroupRollupByFacilityGroupId">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facilitySetting"/>
                <set field="selectedSubMenuItem" value="GroupFacility"/>
                <set field="tabButtonItem" value="EditFacilityGroupRollup"/>
                <set field="titleProperty" value="LogEditRoleFacilityGroup"/>
                <entity-condition list="listRole" entity-name="RoleType">
    			</entity-condition>
                <entity-one entity-name="FacilityGroup" value-field="facilityGroup"/>
                <set field="parameters.facilityGroupId" default-value="${parameters.facilityGroupId}"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonFacilityGroupDecorator">
                    <decorator-section name="body">
							<!-- <include-menu location="component://delys/widget/DelysMenus.xml" name="facilityGroupSubTabBar"/> -->
							<platform-specific>
								<html>
									<html-template location="component://delys/webapp/delys/logistics/facility/ListGroupFacilitiesRollup.ftl"/>
								</html>
							</platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="AddFacilityGroupMemeber">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facilitySetting"/>
                <set field="selectedSubMenuItem" value="GroupFacility"/>
                <set field="tabButtonItem" value="EditFacilityGroupMembers"/>
                <set field="titleProperty" value="PageTitleEditFacilityGroupMembers"/>
                <entity-one entity-name="FacilityGroup" value-field="facilityGroup"/>
                <set field="parameters.facilityGroupId" default-value="${parameters.facilityGroupId}"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonFacilityGroupDecorator">
                    <decorator-section name="body">
							<!-- <include-menu location="component://delys/widget/DelysMenus.xml" name="facilityGroupSubTabBar"/> -->
							<platform-specific>
								<html>
									<html-template location="component://delys/webapp/delys/logistics/facility/ListFacilityGroupMember.ftl"/>
								</html>
							</platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="CommonFacilityGroupDecorator">
        <section>
            <actions>
                <set field="facilityGroupId" from-field="parameters.facilityGroupId"/>
                <entity-one entity-name="FacilityGroup" value-field="facilityGroup"/>
            </actions>
            <widgets>
            	 <section>
                      <condition>
                          <if-has-permission permission="FACILITY" action="_VIEW"/>
                      </condition>
                      <actions>
							<set field="tabBarName" value="FacilityGroupTabBar" global="true" />
							<set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
							<set field="titleHeaderContent" value="${facilityGroup.facilityGroupName} [${facilityGroup.facilityGroupId}]"/>
					  </actions>
                      <widgets>
                      		 <section>
                      		 	<condition>
		                          <if-has-permission permission="FACILITY" action="_VIEW"/>
		                      </condition>				 
								<actions>
									<set field="printTabBar" value="true" />
								</actions>
								<widgets>					 
								</widgets>
							 </section>
                      </widgets>
                  </section>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="pre-body">
                        <section>
                            <condition>
                                <if-has-permission permission="FACILITY" action="_VIEW"/>
                            </condition>
                            <widgets>
                            </widgets>
                        </section>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <if-has-permission permission="FACILITY" action="_VIEW"/>
                            </condition>
                            <widgets>
                                <decorator-section-include name="body"/>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}</label>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="FacilityGroupMembers">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="GroupFacility"/>
                <set field="tabButtonItem" value="EditFacilityGroupMembers"/>
                <entity-one entity-name="FacilityGroup" value-field="facilityGroup">
                	<field-map field-name="facilityGroupId" from-field="parameters.facilityGroupId"/>
                </entity-one>
                <set field="orderByList[]" value="sequenceNum"/>
                <get-related value-field="facilityGroup" relation-name="FacilityGroupMember" list="facilityGroupMembers" order-by-list="orderByList"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilitiesOwner.groovy"/>
                <set field="listFacilities" from-field="listFacilities"/>
                <set field="facilityGroupId" from-field="parameters.facilityGroupId"/>
    		</actions>
    		<widgets>
    			<section>
				 			<widgets>
				       			 <section>
									   <actions>
										    <set field="tabBarName" value="FacilityGroupMenu" global="true" />
										    <set field="tabBarLocation"
										     value="component://delys/widget/DelysMenus.xml"
										     global="true" />
									   </actions>
									   <widgets>
										    <section>
											     <actions>
											      <set field="printTabBar" value="true" />
											     </actions>
											     <widgets>
											     	<container>
											     	</container>
												 </widgets>
											</section>
									   </widgets>                                    
				        		</section>                                
							 </widgets>            
						</section>
    		
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
    				<decorator-section name="body">
<!-- 						<include-menu location="component://delys/widget/DelysMenus.xml" name="FacilityGroupMenu"/> -->
						<screenlet title="${uiLabelMap.CommonEdit} ${uiLabelMap.FacilityGroup} ${facilityGroup.facilityGroupName}" navigation-menu-name="menuForFacilityGroupRoles">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="menuForFacilityGroupRoles"/>
<!-- 							<container> -->
<!-- 								<link target="getListGroupFacilities" text="${uiLabelMap.CommonList}" style="icon-tasks"> -->
<!-- 								</link> -->
<!-- 								<label text="|"></label> -->
<!-- 								<link target="createNewGroupFacility" text="${uiLabelMap.CommonCreateNew}" style="icon-plus"> -->
<!-- 								</link> -->
<!-- 		                       	</container> -->
							<include-form name="AddFacilityGroupMember" location="component://delys/widget/logistics/LogisticsForms.xml"/>
							<include-form name="UpdateFacilityGroupMembers" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="FacilityGroupRoles">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="GroupFacility"/>
                <set field="tabButtonItem" value="EditFacilityGroupRoles"/>
                <entity-one entity-name="FacilityGroup" value-field="facilityGroup">
                	<field-map field-name="facilityGroupId" from-field="parameters.facilityGroupId"/>
                </entity-one>
                <get-related value-field="facilityGroup" relation-name="FacilityGroupRole" list="facilityRoles"/>
                <set field="facilityGroupId" from-field="parameters.facilityGroupId"/>
    		</actions>
    		<widgets>
    			<section>
				 			<widgets>
				       			 <section>
									   <actions>
										    <set field="tabBarName" value="FacilityGroupMenu" global="true" />
										    <set field="tabBarLocation"
										     value="component://delys/widget/DelysMenus.xml"
										     global="true" />
									   </actions>
									   <widgets>
										    <section>
											     <actions>
											      <set field="printTabBar" value="true" />
											     </actions>
											     <widgets>
											     	<container>
											     	</container>
												 </widgets>
											</section>
									   </widgets>                                    
				        		</section>                                
							 </widgets>            
						</section>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
    				<decorator-section name="body">
<!-- 						<include-menu location="component://delys/widget/DelysMenus.xml" name="FacilityGroupMenu"/> -->
						<screenlet title="${uiLabelMap.CommonEdit} ${uiLabelMap.FacilityGroup} ${facilityGroup.facilityGroupName}" navigation-menu-name="menuForFacilityGroupRoles">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="menuForFacilityGroupRoles"/>
<!-- 							<container> -->
<!-- 								<link target="getListGroupFacilities" text="${uiLabelMap.CommonList}" style="icon-tasks"> -->
<!-- 								</link> -->
<!-- 								<label text="|"></label> -->
<!-- 								<link target="createNewGroupFacility" text="${uiLabelMap.CommonCreateNew}" style="icon-plus"> -->
<!-- 								</link> -->
<!-- 		                       	</container> -->
							<include-form name="AddFacilityGroupRole" location="component://delys/widget/logistics/LogisticsForms.xml"/>
							<include-form name="UpdateFacilityGroupRoles" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="ListFacilityPartyRoles">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItemSub" value="FacilityRole"/>
    			<entity-one value-field="facility" entity-name="Facility">
    				<field-map field-name="facilityId" from-field="parameters.facilityId"/>
    			</entity-one>
    			<entity-condition list="listFacilityPartyRoles" entity-name="FacilityParty">
    				<condition-expr field-name="facilityId" from-field="parameters.facilityId"/>
    			</entity-condition>
    			<entity-condition list="listRole" entity-name="RoleType">
    				<condition-expr field-name="parentTypeId" value="LOG_ADMIN"></condition-expr>
    			</entity-condition>
    			<set field="facilityId" from-field="parameters.facilityId"/>
    			<set field="titleProperty" value="CommonEdit-Roles-CommonOf-ProductFacility-[${facility.facilityName}(${parameters.facilityId})]"></set>
    			<property-map map-name="uiLabelMap" resource="SecurityUiLabels" global="true"/>
    		</actions>
    		<widgets>
    			<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                  </section>
    			<decorator-screen name="LogisticsFacilityCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
    				<decorator-section name="body">
							<!-- <include-menu location="component://delys/widget/DelysMenus.xml" name="menuForEditFacility"/>
							<include-form name="AddFacilityPartyRole" location="component://delys/widget/logistics/LogisticsForms.xml"/>
							<include-form name="ListFacilityPartyRoles" location="component://delys/widget/logistics/LogisticsForms.xml"/> -->
							<screenlet>
		                    	<platform-specific>
									<html><html-template location="component://delys/webapp/delys/logistics/facility/FacilityRoleJqx.ftl"/></html>
								</platform-specific>
	                   		</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="ListTransferOrders">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="TransferOrders"/>
                <set field="navMenuName" value="FindTransferOrderTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
    		</actions>
    		<widgets>
              	<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
             		<decorator-section name="body">
           				<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
 							<decorator-section name="search-options">
                     			<include-form name="FindTransferOrder" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     		</decorator-section>
                     		<decorator-section name="search-results">
                   				<screenlet title="${uiLabelMap.ListTransferOrders}">
                					<include-form name="ListTransferOrders" location="component://delys/widget/logistics/LogisticsForms.xml"/>
              					</screenlet>
                     		</decorator-section>
                 		</decorator-screen>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="ListShipmentPackages">
    	<section>
    		<actions>
    			<property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
    			<set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="ShipmentPackage"/>
    			<entity-condition list="listShipmentPackages" entity-name="ShipmentPackageContent">
    				<condition-expr field-name="shipmentId" from-field="parameters.shipmentId"/>
    			</entity-condition>
    			<set field="shipmentId" from-field="parameters.shipmentId"/>
    			<entity-one value-field="shipment" entity-name="Shipment"></entity-one>
  				<set field="shipmentTypeId" from-field="shipment.shipmentTypeId"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
    				<decorator-section name="body">
    					<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
						<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.ProductPackages}">
                        	<container>
	                           <link target="createNewShipmentPackage" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
                          		</link>
                       		</container>
                       		<include-form name="ListShipmentPackages" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     	</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="ListShipmentSegments">
    	<section>
    		<actions>
    			<property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
    			<set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="ShipmentSegment"/>
    			<entity-condition list="listShipmentRouteSegments" entity-name="ShipmentRouteSegment">
    				<condition-expr field-name="shipmentId" from-field="parameters.shipmentId"/>
    			</entity-condition>
    			<set field="shipmentId" from-field="parameters.shipmentId"/>
    			<entity-one value-field="shipment" entity-name="Shipment"></entity-one>
  				<set field="shipmentTypeId" from-field="shipment.shipmentTypeId"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
    				<decorator-section name="body">
    					<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
						<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.ProductRouteSegment}">
                        	<container>
	                           <link target="createNewRouteSegment" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
	                           		<parameter param-name="shipmentId" from-field="shipmentId"/>
                          		</link>
                       		</container>
                       		<include-form name="ListShipmentSegments" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     	</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="DetailShipmentRouteSegment">
    	<section>
    		<actions>
    			<property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
    			<set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="ShipmentSegment"/>
    			<entity-one value-field="routeSegment" entity-name="ShipmentRouteSegment">
    				<field-map field-name="shipmentId" from-field="parameters.shipmentId"/>
    				<field-map field-name="shipmentRouteSegmentId" from-field="parameters.shipmentRouteSegmentId"/>
    			</entity-one>
    			<set field="shipmentId" from-field="parameters.shipmentId"/>
    			<entity-one value-field="shipment" entity-name="Shipment"></entity-one>
  				<set field="shipmentTypeId" from-field="shipment.shipmentTypeId"/>
    			<set field="shipmentRouteSegmentId" from-field="parameters.shipmentRouteSegmentId"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
    				<decorator-section name="body">
    					<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
						<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.ProductRouteSegment}">
                        	<container>
                        		<link target="getListShipmentSegments" text="${uiLabelMap.CommonList}" style="icon-tasks open-sans">
                        			<parameter param-name="shipmentId" from-field="parameters.shipmentId"/>
                          		</link>
                          		<label text="|"></label>
	                           	<link target="createNewRouteSegment" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
	                           		<parameter param-name="shipmentId" from-field="parameters.shipmentId"/>
                          		</link>
                       		</container>
                       		<include-form name="DetailShipmentRouteSegment" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     	</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="EditShipmentRouteSegment">
    	<section>
    		<actions>
    			<property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
    			<set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="ShipmentSegment"/>
    			<entity-one value-field="routeSegment" entity-name="ShipmentRouteSegment">
    				<field-map field-name="shipmentId" from-field="parameters.shipmentId"/>
    				<field-map field-name="shipmentRouteSegmentId" from-field="parameters.shipmentRouteSegmentId"/>
    			</entity-one>
    			<set field="shipmentId" from-field="parameters.shipmentId"/>
    			<entity-one value-field="shipment" entity-name="Shipment"></entity-one>
  				<set field="shipmentTypeId" from-field="shipment.shipmentTypeId"/>
    			<set field="shipmentRouteSegmentId" from-field="parameters.shipmentRouteSegmentId"/>
    			<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics_shipment.js" global="true"/>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilityRouteSegment.groovy"/>
    			<set field="listDestFacilities" value="${listDestFacilities}"/>
    			<set field="listOriginFacilities" value="${listOriginFacilities}"/>
    			<set field="updatedByUserLoginId" from-field="parameters.userLogin.partyId"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
    				<decorator-section name="body">
    					<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/>
						<screenlet title="${uiLabelMap.CommonEdit} ${uiLabelMap.ProductRouteSegment}">
                        	<container>
                        		<link target="getListShipmentSegments" text="${uiLabelMap.CommonList}" style="icon-tasks open-sans">
                        			<parameter param-name="shipmentId" from-field="parameters.shipmentId"/>
                          		</link>
                          		<label text="|"></label>
	                           	<link target="createNewRouteSegment" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
	                           		<parameter param-name="shipmentId" from-field="shipmentId"/>
                          		</link>
                       		</container>
                       		<include-form name="EditShipmentRouteSegment" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     	</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    
    <screen name="ListVehiclesByContract">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="ShippingContract"/>
                <set field="tabButtonItem" value="Vehicle"/>
                <entity-one value-field="shippingContract" entity-name="ShippingContract">
                	<field-map field-name="contractId" from-field="parameters.contractId"/>
                </entity-one>
                <set field="contractId" from-field="parameters.contractId"/>
                <set field="carrierPartyId" value="${shippingContract.toPartyGroupId}"/>
                <entity-condition list="listVehicles" entity-name="Vehicle">
                	<condition-list>
                		<condition-expr field-name="partyCarrierId" operator="equals" value="${shippingContract.toPartyGroupId}"/>
                	</condition-list>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu location="component://delys/widget/DelysMenus.xml" name="ShippingContractTabBar"/>
             			<screenlet title="${uiLabelMap.VehicleByContract} [${parameters.contractId}]">
                        <container>
                           <link target="editVehicleForContract" text="${uiLabelMap.CommonAdd}" style="icon-plus-sign open-sans">
                           		<parameter param-name="partyCarrierId" from-field="carrierPartyId"/>
                           		<parameter param-name="contractId" from-field="contractId"/>
                          </link>
                       </container>
                       	<include-form name="ListVehicles"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    
    <screen name="EditVehicleForContract">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="ShippingContract"/>
                <set field="tabButtonItem" value="Vehicle"/>
                <entity-one value-field="Vehicle" entity-name="Vehicle">
                	<field-map field-name="vehicleId" from-field="parameters.vehicleId"/>
                </entity-one>
                <entity-one value-field="shippingContract" entity-name="ShippingContract">
                	<field-map field-name="contractId" from-field="parameters.contractId"/>
                </entity-one>
                <set field="contractId" from-field="parameters.contractId"/>
                <set field="carrierPartyId" value="${shippingContract.toPartyGroupId}"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu location="component://delys/widget/DelysMenus.xml" name="ShippingContractTabBar"/>
             			<screenlet title="${uiLabelMap.UpdateVehicles}">
                        <container>
	                           <link target="getListVehiclesByContract" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
	                           </link>
	                           <label text="|"></label>
	                           <link target="editVehicleForContract" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
                          </link>
                       </container>
                          <include-form name="EditVehicleForContract"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    
    
    
    
<!-- ================================================BEGIN PHYSICAL DAT================================== -->    


    
	<screen name="PhysicalInventory">
		<section>
			<actions>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="Physic"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-form
							location="component://delys/widget/logistics/LogisticsForms.xml"
							name="FindFacility10"/>
					</decorator-section>
				</decorator-screen>

			</widgets>

		</section>
	</screen>

	<screen name="FindFacilityPhysicalInventory">
		<section>
			<actions>
				<set field="physicalInventoryId" value="${requestParameters.physicalInventoryId}"/>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItemSub" value="FindFacilityPhysicalInventory"/>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js"
					global="true"/>
				<set field="facilityId" value="${parameters.facilityId}"></set>
				<set field="titleProperty" value="DSInventoryItemDetail"  />
				
				<entity-condition list="listVarianceReason" entity-name="VarianceReason">
                </entity-condition>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getInventoryItemsByLocationSeqId.groovy"/>
			</actions>
			<widgets>
				<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                </section>
				<decorator-screen name="LogisticsFacilityCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						
						<!-- <screenlet title="${uiLabelMap.ThisPhysical} ${groovy: org.ofbiz.base.util.UtilDateTime.nowTimestamp()}" >
							<link target="PhysicalInventory" text="${uiLabelMap.SelectFacility}" style="icon-back"></link>
							<label text="|"></label>
							<link target="PhysFacility" text="${uiLabelMap.ListPhys}" style="icon-list">
								<parameter param-name="facilityId" from-field="parameters.facilityId"/>
							</link>
							<label text="|"></label>
							<link target="XemKiem" text="${uiLabelMap.ViewThisPhys}" style="icon-exchange">
								<parameter param-name="facilityId" from-field="parameters.facilityId"/>
								<parameter param-name="physicalInventoryId" from-field="parameters.physicalInventoryId"/>
							</link>
						</screenlet> -->
						
						<!-- <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml" > -->
							<!-- <decorator-section name="search-options">
		                    	<include-menu name="PrintFacilityPhysicalInventory" location="component://delys/widget/DelysMenus.xml"/>
		                        <include-form name="FindProductsToPhysical" location="component://delys/widget/logistics/LogisticsForms.xml"/>
							</decorator-section>
							<decorator-section name="search-results">
								<container id="table-container">
									<include-form
										location="component://delys/widget/logistics/LogisticsForms.xml"
										name="ListProductsToPhysical"/>
								</container>
							</decorator-section> -->
							<!-- <include-menu name="InventoryDetailsByLocationSeqID" location="component://delys/widget/DelysMenus.xml"/> -->
						<!-- </decorator-screen> -->
							<!-- <screenlet navigation-menu-name="PrintFacilityPhysicalInventory">
								<include-menu name="PrintFacilityPhysicalInventory" location="component://delys/widget/DelysMenus.xml"/>
							</screenlet> -->
							<platform-specific>
		                		<html><html-template location="component://delys/webapp/delys/logistics/facility/FindFacilityPhysicalInventory.ftl"/></html>
		                	</platform-specific>
					</decorator-section>
				</decorator-screen>

			</widgets>

		</section>
	</screen>

	<screen name="ChonKhoHuy">
		<section>
			<actions>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="HangHuy"/>
				<set field="navMenuName" value="PhysicalNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-form
							location="component://delys/widget/logistics/LogisticsForms.xml"
							name="FindFacilityHuy"/>
					</decorator-section>
				</decorator-screen>

			</widgets>
		</section>
	</screen>
	
	<screen name="ViewListHangChoHuy">
		<section>
			<actions>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="HangHuy"/>
				<set field="navMenuName" value="DestroyNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js"
					global="true"/>
				<!-- <script location="component://delys/webapp/delys/WEB-INF/actions/inventorys/FindFacilityPhysicalInventory.groovy"/> -->
				<set field="facilityId" from-field="parameters.facilityId"></set>
				<entity-condition list="listPhysInvVar" entity-name="ListPhysInvVar">
					<condition-expr  field-name="facilityId" from-field="parameters.facilityId"/>
					<order-by field-name="-physicalInventoryId"/>
				</entity-condition>
				<!-- <set field="orderName" value="${parameters.orderName}"/>
				<set field="productStoreId" value="${parameters.productStoreId}"/>
				<set field="orderDate" value="${parameters.orderDate}"/>
				<set field="orderTypeId" value="${parameters.orderTypeId}"/>
				<set field="orderId" value="${parameters.orderId}"/> -->
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<!-- <decorator-screen name="FindScreenDecorator"
							location="component://common/widget/CommonScreens.xml">
							<decorator-section name="search-options">
								<include-form name="FindProductStoreRole"
									location="component://delys/widget/logistics/LogisticsForms.xml"/>
							</decorator-section>
						</decorator-screen> -->
						<include-form name="ListPhysInvVar"
							location="component://delys/widget/logistics/LogisticsForms.xml"/>
					</decorator-section>
				</decorator-screen>

			</widgets>

		</section>
	</screen>

	<screen name="HangChoHuy">
		<section>
			<actions>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="LapHuy"/><!-- 
				<set field="navMenuName" value="DestroyNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/> -->
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js"
					global="true"/>
				<!-- <script location="component://delys/webapp/delys/WEB-INF/actions/inventorys/FindFacilityPhysicalInventory.groovy"/> -->
				<set field="facilityId" from-field="parameters.facilityId"></set>
				<entity-condition list="listHangHuy" entity-name="ListHangHuy">
					<condition-expr field-name="facilityId" from-field="parameters.facilityId"/>
				</entity-condition>
				<set field="orderName" value="${parameters.orderName}"/>
				<set field="productStoreId" value="${parameters.productStoreId}"/>
				<set field="orderDate" value="${parameters.orderDate}"/>
				<set field="orderTypeId" value="${parameters.orderTypeId}"/>
				<set field="orderId" value="${parameters.orderId}"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<screenlet title="${uiLabelMap.CreateOrderCancel}">
						<container>
							<link target="LapHuy" text="${uiLabelMap.Back}" style="icon-back"></link>
							<label text="|"></label>
							<link target="ViewDestroy" text="${uiLabelMap.ViewDestroy}" style="icon-list">
								<parameter param-name="orderTypeId" value="${parameters.orderTypeId}"/>
								<parameter param-name="orderId" from-field="parameters.orderId"/>
							</link>
							<label text="|"></label>
							<link target="ViewDetailDestroy" text="${uiLabelMap.ViewDetailDestroy}" style="icon-list"></link>
						</container>
						<decorator-screen name="FindScreenDecorator"
							location="component://common/widget/CommonScreens.xml">
							<decorator-section name="search-options">
								<!-- <include-form name="FindProductStoreRole"
									location="component://delys/widget/logistics/LogisticsForms.xml"/> -->
							</decorator-section>
						</decorator-screen>
						<include-form name="ListHangHuy"
							location="component://delys/widget/logistics/LogisticsForms.xml"/>
							</screenlet>
					</decorator-section>
				</decorator-screen>

			</widgets>

		</section>
	</screen>

	<screen name="LapDonHangChoHuy">
		<section>
			<actions>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="LapHuy"/>
				<set field="navMenuName" value="PhysicalNavMenu"/>
				<!-- <set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js" 
					global="true"/> -->
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics.js"
					global="true"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="facilityId" from-field="parameters.facilityId"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.errorProductOrder}">
							<include-form name="OrderHeaderDestroy"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="DetailDestroy">
		<section>
			<condition>
				<not>
					<if-compare operator="equals" value="1"
						field="${parameters.Approve}"/>
				</not>
			</condition>
			<actions>
				<set field="navMenuName" value="DetailDestroyNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="LapHuy"/>
				<set field="facilityId" value="${parameters.facilityId}"></set>
				<!-- <set field="physicalInventoryId" from-field="${parameters.physicalInventoryId}"></set> -->
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js"
					global="true"/>
				<entity-condition list="detailOrderDestroy"
					entity-name="DetailOrderDestroy">
					<condition-expr field-name="orderId" from-field="parameters.orderId"/>
				</entity-condition>
				<set field="orderId" from-field="parameters.orderId"/>
				<!-- <set field="orderName" value="${parameters.orderName}"/> -->
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					
						<decorator-screen name="FindScreenDecorator"
							location="component://common/widget/CommonScreens.xml">
							<decorator-section name="search-results">
								<screenlet title="${uiLabelMap.Detail}">
									<include-form name="DetailOrderHeader"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>

									<include-form name="DetailOrderItemDestroy"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>
								</screenlet>
							</decorator-section>

						</decorator-screen>
					</decorator-section>
				</decorator-screen>

			</widgets>
			<fail-widgets>
				<section>
					<actions>
						<set field="navMenuName" value="DetailDestroyNavMenu"/>
						<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
						<set field="selectedMenuItem" value="facility"/>
						<set field="selectedSubMenuItem" value="DuyetHuy"/>
						<set field="facilityId" value="${parameters.facilityId}"></set>
						<!-- <set field="physicalInventoryId" from-field="${parameters.physicalInventoryId}"></set> -->
						<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js"
							global="true"/>
						<entity-condition list="detailApproveOrderDestroy"
							entity-name="OrderItem">
							<condition-expr field-name="orderId" from-field="parameters.orderId"/>
						</entity-condition>
						<set field="orderId" from-field="parameters.orderId"/>
						<set field="productStoreId" from-field="parameters.productStoreId"/>
						<set field="orderDate" from-field="parameters.orderDate"/>
						<set field="orderTypeId" from-field="parameters.orderTypeId"/>
						<set field="orderName" from-field="parameters.orderName"/>
					</actions>
					<widgets>
						<decorator-screen name="DelysCommonDecorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<screenlet title="${uiLabelMap.ApproveOrder} ${parameters.orderName}">
									<link target="DuyetHuy" text="${uiLabelMap.Back}" style="icon-back">
										<parameter param-name="salesMethodChannelEnumId" value="LOG_DAMAGED_CANCEL"/>
										<parameter param-name="Approve" value="1"/>
									</link>
								</screenlet>
											<include-form name="DetailOrderHeader"
												location="component://delys/widget/logistics/LogisticsForms.xml"/>

											<include-form name="ApproveOrderItemDestroy"
												location="component://delys/widget/logistics/LogisticsForms.xml"/>
							</decorator-section>
						</decorator-screen>
					</widgets>
				</section>

			</fail-widgets>
		</section>
	</screen>

	<screen name="ViewDestroy">
		<section>

			<actions><!-- 
				<set field="navMenuName" value="DetailDestroyNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/> -->
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="DuyetHuy"/>
				<!-- <set field="facilityId" value="${parameters.facilityId}"></set> 
					<set field="physicalInventoryId" from-field="${parameters.physicalInventoryId}"></set> -->
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js"
					global="true"/>
				<entity-condition list="viewDestroy" entity-name="OrderHeader"><!-- 
						<condition-expr field-name="orderId" from-field="parameters.orderId"/> -->
					<condition-expr field-name="orderTypeId"
						value="${parameters.orderTypeId}"/>
				</entity-condition>
				<set field="orderId" from-field="parameters.orderId"/>
				<!-- <set field="orderName" value="${parameters.orderName}"/> -->
			</actions>


			<widgets>
				<section>
					<condition>
						<not>
							<if-empty field="orderId"/>
						</not>
					</condition>
					<actions>
						<set field="selectedMenuItem" value="facility"/>
						<set field="selectedSubMenuItem" value="LapHuy"/>
					</actions>
					<widgets>
						<decorator-screen name="DelysCommonDecorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<decorator-screen name="FindScreenDecorator"
									location="component://common/widget/CommonScreens.xml">
									<decorator-section name="search-results">
										<screenlet title="${uiLabelMap.Detail}">
											<include-form name="ViewDestroy"
												location="component://delys/widget/logistics/LogisticsForms.xml"/>
										</screenlet>
									</decorator-section>

								</decorator-screen>
							</decorator-section>
						</decorator-screen>
					</widgets>
					<fail-widgets>
						<decorator-screen name="DelysCommonDecorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<screenlet title="${uiLabelMap.Detail}">
									<include-form name="ViewDestroy"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>
								</screenlet>

							</decorator-section>
						</decorator-screen>

					</fail-widgets>
				</section>
			</widgets>

		</section>
	</screen>
	<screen name="Test">
		<section>
			<actions>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="Test"/>
				<set field="navMenuName" value="PhysicalNavMenu"/>
				<set field="name" value="${parameters.name}"></set>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js"
					global="true"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<entity-condition list="listHangHuy" entity-name="ListHangHuy">
					<condition-expr field-name="facilityId" from-field="parameters.facilityId"/>
				</entity-condition>
				<script location="component://delys/webapp/delys/WEB-INF/actions/Test.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="Test">
							<label id="result" text="hahah"></label>
							<include-form name="Test"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
							<platform-specific>
								<html>
									<html-template location="component://delys/widget/logistics/Test.ftl"/>
								</html>
							</platform-specific>
							<include-form name="ListTest"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>

			</widgets>
		</section>
	</screen>

	<screen name="abc">
		<section>
			<actions>
				<set field="a[].name" global="true" from-field="parameters.name"/>
			</actions>
			<widgets>
				<include-form name="ListTest"
					location="component://delys/widget/logistics/LogisticsForms.xml"/>
			</widgets>
		</section>
	</screen>

	<screen name="XemKiem">
		<section>
		<condition>
			<if-compare operator="not-equals" value="1" field="${parameters.viewPhysical}"/>
		</condition>
			<widgets>
				<section>
			<actions>
				<set field="navMenuName" value="ViewPhysicalNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="Physic"/>
				<set field="facilityId" value="${parameters.facilityId}"></set>
				<set field="physicalInventoryId" from-field="${parameters.physicalInventoryId}"></set>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js"
					global="true"/>
				<entity-condition list="ListPhysicalInv"
					entity-name="ListPhysicalInv">
					<condition-list combine="and">
						<condition-expr field-name="facilityId" from-field="parameters.facilityId"/>
						<condition-expr field-name="physicalInventoryId"
							from-field="parameters.physicalInventoryId"/>
						<condition-expr field-name="status" operator="not-equals" value="1"/>
					</condition-list>

				</entity-condition>
			</actions>
				<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<decorator-screen name="FindScreenDecorator"
							location="component://common/widget/CommonScreens.xml">
							<decorator-section name="search-results">
								<screenlet title="${uiLabelMap.Detail}">
									<include-form name="PhysicalHeader"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>

									<include-form name="ListPhysicalInv"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>
								</screenlet>
							</decorator-section>

						</decorator-screen>
					</decorator-section>
				</decorator-screen>
				</widgets>
			</section>
			</widgets>
			<fail-widgets>
				<section>
			<actions>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="HangHuy"/>
				<set field="facilityId" value="${parameters.facilityId}"></set>
				<set field="physicalInventoryId" from-field="${parameters.physicalInventoryId}"></set>
				<entity-condition list="ListPhysicalInv"
					entity-name="ListPhysicalInv">
					<condition-list combine="and">
						<condition-expr field-name="facilityId" from-field="parameters.facilityId"/>
						<condition-expr field-name="physicalInventoryId"
							from-field="parameters.physicalInventoryId"/>
					</condition-list>
				</entity-condition>
			</actions>
				<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
								<screenlet title="${uiLabelMap.Detail}">
									<link target="ViewHangChoHuy" text="${uiLabelMap.Back}" style="icon-back">
										<parameter param-name="facilityId" from-field="facilityId"/>
										<parameter param-name="viewPhysical" value="1"/>
									</link>
									<include-form name="PhysicalHeader"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>

									<include-form name="ListPhysicalInvToView"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>
								</screenlet>

					</decorator-section>
				</decorator-screen>
				</widgets>
			</section>
			</fail-widgets>
		</section>
	</screen>

	<screen name="PhysFacility">
		<section>
			<condition>
				<if-compare operator="not-equals" value="1" field="${parameters.viewPhysical}"/>
			</condition>
			<widgets>
			<section>
				<actions>
				<!-- <set field="navMenuName" value="ViewPhysicalNavMenu"/> <set field="navMenuLocation" 
					value="component://delys/widget/DelysMenus.xml"/> -->
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="Physic"/>
				<set field="facilityId" value="${parameters.facilityId}"></set>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js"
					global="true"/>
				<set field="facilityId" value="${parameters.facilityId}"/>
				<entity-condition list="ListPhysFacility"
					entity-name="ListPhysFacilityNotTransfer">
					<condition-expr field-name="facilityId"
						value="${parameters.facilityId}"/>
					<order-by field-name="-physicalInventoryId"/>
				</entity-condition>
				<set field="titleProperty" value="Detail"/>
			</actions>
				<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<decorator-screen name="FindScreenDecorator"
							location="component://common/widget/CommonScreens.xml">
							<decorator-section name="search-results">
								<screenlet>
									<include-form name="PhysFacility"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>
								</screenlet>
							</decorator-section>

						</decorator-screen>
					</decorator-section>
				</decorator-screen>
				</widgets>
			</section>
			</widgets>
			<fail-widgets>
				<section>
					<actions>
				<!-- <set field="navMenuName" value="ViewPhysicalNavMenu"/> <set field="navMenuLocation" 
					value="component://delys/widget/DelysMenus.xml"/> -->
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="HangHuy"/>
				<set field="facilityId" value="${parameters.facilityId}"></set>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js"
					global="true"/>
				<set field="facilityId" value="${parameters.facilityId}"/>
				<entity-condition list="ListPhysFacility"
					entity-name="ListPhysFacility">
					<condition-expr field-name="facilityId"
						value="${parameters.facilityId}"/>
					<order-by field-name="-physicalInventoryId"/>
				</entity-condition>
				<set field="titleProperty" value="Detail"/>
			</actions>
				<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<decorator-screen name="FindScreenDecorator"
							location="component://common/widget/CommonScreens.xml">
							<decorator-section name="search-results">
								<screenlet>
									<include-form name="PhysFacilityToView"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>
								</screenlet>
							</decorator-section>
						</decorator-screen>
					</decorator-section>
				</decorator-screen>
				</widgets>
				</section>
			</fail-widgets>
		</section>
	</screen>
	
	
	<screen name="getListCatalogs">
		<section>
			<actions>
				<set field="tabButtonItem" value="EditProduct"/>
				<set field="selectedMenuItem" value="store"/>
				<set field="selectedSubMenuItem" value="Catalogs"/>
				<set field="navMenuName" value="CatalogNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
				<entity-condition list="listCatalogs" entity-name="ProdCatalog">
				</entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<decorator-screen name="FindScreenDecorator"
							location="component://common/widget/CommonScreens.xml">
							<decorator-section name="search-options">
								<include-form name="FindCatalog"
									location="component://delys/widget/logistics/LogisticsForms.xml"/>
							</decorator-section>
							<decorator-section name="search-results">
								<include-form name="ResultListCatalog"
									location="component://delys/widget/logistics/LogisticsForms.xml"/>
							</decorator-section>
						</decorator-screen>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="DelysEditCatalog">
		<section>
			<actions>
				<set field="tabButtonItem" value="ProductCatalog"/>
				<set field="selectedMenuItem" value="store"/>
				<set field="selectedSubMenuItem" value="Catalogs"/>
				<entity-one entity-name="ProdCatalog" value-field="prodCatalog">
					<field-map field-name="prodCatalogId" from-field="parameters.prodCatalogId"/>
				</entity-one>
				<set field="prodCatalogId" value="${parameters.prodCatalogId}"></set>
			</actions>
			<widgets>
				<section>
					<condition>
						<if-empty field="prodCatalog"/>
					</condition>
					<widgets>
						<decorator-screen name="DelysCommonDecorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<container>
									<link target="getListCatalogs" text="danh sach san pham"
										style="icon-plus-sign open-sans">
									</link>
									<label text="|"></label>
									<link target="FindCatalog" text="tim kiem" style="icon-search open-sans">
									</link>
								</container>
								<include-form name="DelysCreateProdCatalog"
									location="component://delys/widget/logistics/LogisticsForms.xml"/>
							</decorator-section>
						</decorator-screen>
					</widgets>
					<fail-widgets>
						<decorator-screen name="DelysCommonDecorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<include-menu name="DelysProdCatalogTabBar"
									location="component://delys/widget/DelysMenus.xml"/>
								<screenlet
									title="">
									<container>
										<link target="DelysEditCatalog" text="Them moi catalog"
											style="icon-plus-sign open-sans">
										</link>
										<link target="getListCatalogs" text="Danh sach catalog"
											style="icon-plus-sign open-sans">
										</link>
										<label text="|"></label>
										<link target="FindCatalog" text="Tim kiem" style="icon-search open-sans">
										</link>
									</container>
									<include-form name="DelysEditProdCatalog"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>
								</screenlet>
								<!-- <container> <link target="DelysEditCatalog" text="Them moi catalog" 
									style="icon-plus-sign open-sans"> </link> <link target="getListCatalogs" 
									text="Danh sach catalog" style="icon-plus-sign open-sans"> </link> <label 
									text="|"></label> <link target="FindCatalog" text="Tim kiem" style="icon-search 
									open-sans"> </link> </container> <include-form name="DelysEditProdCatalog" 
									location="component://delys/widget/logistics/LogisticsForms.xml"/> -->
							</decorator-section>
						</decorator-screen>

					</fail-widgets>
				</section>
			</widgets>
		</section>

	</screen>

	<screen name="FindCatalog">
		<section>
			<actions>
				<set field="tabButtonItem" value="EditProduct"/>
				<set field="selectedMenuItem" value="store"/>
				<set field="selectedSubMenuItem" value="Catalogs"/>
			</actions>
			<!-- <actions> <set field="titleProperty" value="PageTitleFindCatalog"/> 
				<set field="headerItem" value="catalogs"/> <set field="tabButtonItem" value="FindCatalog"/> 
				<set field="labelTitleProperty" value="ProductCatalog"/> <set field="navMenuName" 
				value="CatalogSubTabBar"/> <set field="navMenuLocation" value="component://product/widget/catalog/CatalogMenus.xml"/> 
				</actions> -->
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-form name="FindCatalog"
							location="component://delys/widget/logistics/LogisticsForms.xml"/>
						<include-form name="ResultListCatalog"
							location="component://delys/widget/logistics/LogisticsForms.xml"/>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="FindProductStoreRoles">
		<section>
			<actions>
				<set field="tabButtonItem" value="FindProductStoreRoles"/>
				<set field="navMenuName" value="CatalogNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="selectedMenuItem" value="store"/>
				<set field="selectedSubMenuItem" value="listStores"/>
				<set field="headerItem" value="store"/>

				<set field="parameters.fromDate" from-field="parameters.fromDate"
					type="Timestamp"/>
				<entity-one entity-name="ProductStoreRole" value-field="productStoreRole"
					auto-field-map="true"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="ProductStoreTabBar"
							location="component://delys/widget/DelysMenus.xml"/>
						<decorator-screen name="FindScreenDecorator"
							location="component://common/widget/CommonScreens.xml">
							<decorator-section name="search-options">
								<include-form name="FindProductStoreRole"
									location="component://delys/widget/logistics/LogisticsForms.xml"/>
							</decorator-section>
							<decorator-section name="search-results">
								<include-form name="ListProductStoreRole"
									location="component://delys/widget/logistics/LogisticsForms.xml"/>
							</decorator-section>
						</decorator-screen>
						<screenlet title="${uiLabelMap.PageTitleEditProductStoreRoles}">
							<include-form name="EditProductStoreRole"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>

					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="LookupPartyName">
		<section>
			<actions>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap"
					global="true"/>
				<set field="title" value="${uiLabelMap.PartyLookupPartyByName}"/>
				<set field="queryString" from-field="result.queryString"/>
				<set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer"
					default-value="0"/>
				<set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer"
					default-value="20"/>

				<!-- entries needed for lookup ajax auto completer -->
				<!-- required: entity to search in -->
				<set field="entityName" value="PartyNameView"/>

				<!-- required: fields to search a match -->
				<!-- the first element from searchFields is returned after user selection -->
				<!-- it might be hidden based on widget.autocompleter.displayReturnField 
					property in widget.properties -->
				<set field="searchFields"
					value="[partyId, firstName, middleName, lastName, groupName]"/>

				<!-- optional: fields to display in the given order, default is searchFields -->
				<set field="displayFields" value="[firstName, lastName, groupName]"/>

				<!-- optional: additional entity condition (named andCondition) added 
					to search query -->
				<script
					location="component://party/webapp/partymgr/WEB-INF/actions/party/StatusCondition.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="LookupDecorator"
					location="component://common/widget/CommonScreens.xml">
					<decorator-section name="search-options">
						<include-form name="lookupPartyName"
							location="component://delys/widget/logistics/LogisticsForms.xml"/>
					</decorator-section>
					<decorator-section name="search-results">
						<include-form name="listLookupPartyName"
							location="component://delys/widget/logistics/LogisticsForms.xml"/>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="TransferInventoryItem">
        <section>
            <actions>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="Physic"/>
				<!-- <set field="navMenuName" value="ViewPhysicalNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/> -->
                <script location="component://product/webapp/facility/WEB-INF/actions/inventory/TransferInventoryItem.groovy"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <entity-one entity-name="Facility" value-field="facility"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.PageTitleTransferInventoryItem}"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
                    	<container style="header smaller lighter blue">
                    		<label style="h3" text="${title}"></label>
                    	</container>
		                <container>
		                	<link target="XemKiem" text="${uiLabelMap.Back}" style="icon-back open-sans">
		                		<parameter param-name="facilityId" from-field="facilityId"/>
		                		<parameter param-name="physicalInventoryId" from-field="physicalInventoryId"/>
		                    </link>
		                </container>
                        <platform-specific>
                            <html><html-template location="component://product/webapp/facility/inventory/TransferInventoryItem.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="Target">
		<section>
			<actions><!-- 
				<set field="navMenuName" value="DetailDestroyNavMenu"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/> -->
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="Target"/>
				<!-- <set field="facilityId" value="${parameters.facilityId}"></set> 
					<set field="physicalInventoryId" from-field="${parameters.physicalInventoryId}"></set> -->
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/checkQuantity.js"
					global="true"/>
				<entity-condition list="viewDestroy" entity-name="OrderHeader"><!-- 
						<condition-expr field-name="orderId" from-field="parameters.orderId"/> -->
					<condition-expr field-name="orderTypeId"
						value="${parameters.orderTypeId}"/>
				</entity-condition>
				<set field="orderId" from-field="parameters.orderId"/>
				<!-- <set field="orderName" value="${parameters.orderName}"/> -->
			</actions>


			<widgets>
				<section>
					<condition>
						<not>
							<if-empty field="orderId"/>
						</not>
					</condition>
					<actions>
						<set field="selectedMenuItem" value="facility"/>
						<set field="selectedSubMenuItem" value="LapHuy"/>
					</actions>
					<widgets>
						<decorator-screen name="DelysCommonDecorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<decorator-screen name="FindScreenDecorator"
									location="component://common/widget/CommonScreens.xml">
									<decorator-section name="search-results">
										<screenlet title="${uiLabelMap.Detail}">
											<include-form name="ViewDestroy"
												location="component://delys/widget/logistics/LogisticsForms.xml"/>
										</screenlet>
									</decorator-section>

								</decorator-screen>
							</decorator-section>
						</decorator-screen>
					</widgets>
					<fail-widgets>
						<decorator-screen name="DelysCommonDecorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<screenlet title="${uiLabelMap.Detail}">
									<include-form name="ViewDestroy"
										location="component://delys/widget/logistics/LogisticsForms.xml"/>
								</screenlet>

							</decorator-section>
						</decorator-screen>

					</fail-widgets>
				</section>
			</widgets>
		</section>
    </screen>
	
<!-- ================================================END PHYSICAL DATNV ======================================-->    
    <screen name="ListPurchaseAgreements">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="PurchaseAgreement"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <entity-condition list="listPurchaseAgreements" entity-name="Agreement">
                	<condition-expr field-name="agreementTypeId" operator="equals" value="PURCHASE_AGREEMENT"/>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
             			<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.PurchaseAgreement}">
                        <include-form name="ListPurchaseAgreements"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    <screen name="DetailAgreementPurchaseOrder">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="PurchaseAgreement"/>
                <set field="agreementId" from-field="parameters.agreementId"/>
                <entity-condition list="listPurchaseOrders" entity-name="AgreementAndOrderHeader">
                	<condition-list>
                		<condition-expr field-name="agreementId" operator="equals" from-field="agreementId"/>
                		<condition-expr field-name="orderTypeId" operator="equals" value="PURCHASE_ORDER"/>
                	</condition-list>
                </entity-condition>
                <entity-one entity-name="Agreement" value-field="agreement">
    				<field-map field-name="agreementId" from-field="agreementId"/>
    			</entity-one>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
             			<screenlet title="${uiLabelMap.AgreementInfo}">
                       	<include-form name="DetailAgreementPurchaseOrder"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     </screenlet>
                     <screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.PurchaseOrder}">
                     	<include-form name="ListPurchaseOrder"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    <screen name="ListShipmentCost">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="ShipmentCost"/>
                <set field="shipmentId" from-field="parameters.shipmentId"/>
                <entity-condition list="listShipmentCosts" entity-name="ShipmentRouteSegment">
                	<condition-expr field-name="shipmentId" operator="equals" from-field="shipmentId"/>
                </entity-condition>
                <entity-one value-field="shipment" entity-name="Shipment">
                	<field-map field-name="shipmentId" from-field="parameters.shipmentId"/>
                </entity-one>
                <set field="shipmentTypeId" from-field="shipment.shipmentTypeId"/>
            </actions>
            <widgets>
            	<section>
				 			<widgets>
				       			 <section>
									   <actions>
										    <set field="tabBarName" value="DelysShipmentTabBar" global="true" />
										    <set field="tabBarLocation"
										     value="component://delys/widget/DelysMenus.xml"
										     global="true" />
									   </actions>
									   <widgets>
										    <section>
											     <actions>
											      <set field="printTabBar" value="true" />
											     </actions>
											     <widgets>
											     	<container>
											     	</container>
												 </widgets>
											</section>
									   </widgets>                                    
				        		</section>                                
							 </widgets>            
						</section>
            
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
<!--                     	<include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/> -->
                    	<screenlet title="${uiLabelMap.GeneralReport} ${uiLabelMap.ShipmentCost} ${uiLabelMap.CommonOf} ${uiLabelMap.Shipment} ${shipmentId}">
                       		<include-form name="GeneralShipmentCostInfo" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     	</screenlet>
             			<screenlet title="${uiLabelMap.CommonDetail}">
                       		<include-form name="ListShipmentCost" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                     	</screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
       </section>
    </screen>
    <screen name="ListAllDeliveries">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="delivery"/>
                <set field="selectedSubMenuItem" value="DeliveryNote"/>
                <set field="selectedMenuItem" value="accApprovement"/>
                <set field="navMenuName" value="FindDeliveryTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="titleProperty" value="ListDelivery"/>
				<set field="deliveryTypeId" from-field="parameters.deliveryTypeId"/>
    		</actions>
    		<widgets>
    			<section>
    				<condition>
    					<if-compare operator="equals" value="DELIVERY_SALES" field="deliveryTypeId"/>
    				</condition>
    				<actions>
    					<set field="selectedSubMenuItem" value="DeliveryNote"/>
    				</actions>
    				<widgets>
    					<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
		                    <decorator-section name="body">
		                    	<platform-specific><html><html-template location="component://delys/webapp/delys/accounting/appr/listDelivery.ftl" /></html></platform-specific>
		    				</decorator-section>
		    			</decorator-screen>
    				</widgets>
    				<fail-widgets>
    					<section>
		    				<condition>
		    					<if-compare operator="equals" value="DELIVERY_TRANSFER" field="deliveryTypeId"/>
		    				</condition>
		    				<actions>
		    					<set field="selectedSubMenuItem" value="TransferNote"/>
		    					<set field="statusId" value="DLV_CREATED"/>
		    				</actions>
		    				<widgets>
		    					<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
				                    <decorator-section name="body">
				                    	<platform-specific><html><html-template location="component://delys/webapp/delys/accounting/appr/listDelivery.ftl" /></html></platform-specific>
				    				</decorator-section>
				    			</decorator-screen>
		    				</widgets>
		    			</section>
    				</fail-widgets>
    			</section>
    			
    		</widgets>
    	</section>
    </screen>
    <screen name="ListDeliveryByReqs">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="delivery"/>
                <set field="selectedSubMenuItem" value="DeliveryByRequirement"/>
    			<entity-condition list="listAllDeliveries" entity-name="Delivery">
    				<condition-expr field-name="orderId" operator="equals" value="null"/>
    			</entity-condition>
    		</actions>
    		<widgets>
    			 <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
		    			<screenlet title="${uiLabelMap.ListDelivery}">
		    				<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="ListAllDeliveries"/>
		    			</screenlet>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="ListDeliveryByOrders">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="delivery"/>
                <set field="selectedSubMenuItem" value="DeliveryByOrder"/>
    			<entity-condition list="listAllDeliveries" entity-name="Delivery">
    			</entity-condition>
    		</actions>
    		<widgets>
    			 <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
		    			<screenlet title="${uiLabelMap.ListDelivery}">
		    				<include-form location="component://delys/widget/logistics/LogisticsForms.xml" name="ListAllDeliveries"/>
		    			</screenlet>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="ListReturnOrders">
    	<section>
	    	<actions>
	    		<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="ReturnOrders"/>
    			<entity-condition list="listReturnOrders" entity-name="OrderHeader">
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.ReturnOrder}">
							<container>
								<link target="searchReturnOrders" text="${uiLabelMap.CommonSearch}" style="icon-search">
								</link>
 	                       	</container>
							<include-form name="ListReturnOrders" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="EditReturn">
    	<section>
	    	<actions>
	    		<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="Returns"/>
                <set field="tabButtonItem" value="ReturnInfo"/>
                <set field="returnId" from-field="parameters.returnId"/>
                <entity-one value-field="returnHeader" entity-name="ReturnHeader"/>
                <set field="returnStatusId" from-field="returnHeader.statusId"/>
                <set field="layoutSettings.javaScripts[+0]" value="/ordermgr/images/js/return.js" global="true"/>
                <property-to-field field="defaultCurrencyUomId" resource="general" property="currency.uom.id.default" default="VND"/>
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/return/ReturnHeader.groovy"/>
                
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="ReturnTabBar"/>
						<screenlet title="${uiLabelMap.CommonEdit} ${uiLabelMap.OrderOrderReturns}">
							<container>
    	                       <link target="editReturn" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
    	                       </link>
	                         </container>
							<include-form name="EditReturn" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="ReturnItems">
    	<section>
	    	<actions>
	    		<set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="Returns"/>
                <set field="tabButtonItem" value="ReturnItems"/>
                <set field="returnId" from-field="parameters.returnId"/>
                <entity-condition list="listReturnItems" entity-name="ReturnItem">
                	 <condition-expr field-name="returnId" from-field="returnId"/>
                </entity-condition>
                <entity-one value-field="returnHeader" entity-name="ReturnHeader"/>
                <set field="returnStatusId" from-field="returnHeader.statusId"/>
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/return/ReturnItems.groovy"/>
                <set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/changeFromAction.js" global="true"/>
                <set field="formAction" value="deleteReturnItem"/>
                <set field="notOrderComponent" value="Y"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="ReturnTabBar"/>
						<screenlet title="${uiLabelMap.OrderOrderReturn} ${returnId}">
							<platform-specific>
	                           	<html>
	                               	<html-template location="component://order/webapp/ordermgr/return/returnItems.ftl"/>
	                            </html>
	                        </platform-specific>
                        </screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="SelectCreateOrderFrom">
    	<section>
    		<actions>
	    		<set field="selectedMenuItem" value="orders"/>
	            <set field="selectedSubMenuItem" value="ChangeDateOrders"/>
	  			<set field="orderId" from-field="parameters.orderId"/>
	  			<set field="requirementId" from-field="parameters.requirementId"/>
  			</actions>
  			<widgets>
  				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.ChoseTypeOfInput}">
							<container>
							<link target="getListChangeDateOrders" text="${uiLabelMap.CommonList}" style="icon-plus-sign icon-tasks"></link>
							<label text="|"></label>
							<link target="selectCreateOrderFrom" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans"></link>
 	                       	</container>
							<include-form name="SelectCreateOrderFrom"
								location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
  			</widgets>
    	</section>
    </screen>
    <screen name="ReceiveReturn">
        <section>
            <actions>
                <set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="Returns"/>
                <set field="tabButtonItem" value="ReturnItems"/>
                <set field="returnId" from-field="parameters.returnId"/>
                <entity-one value-field="returnHeader" entity-name="ReturnHeader"/>
                <set field="returnStatusId" from-field="returnHeader.statusId"/>
                <set field="shipmentId" from-field="parameters.shipmentId"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/returns/ReceiveReturn.groovy"/>
                <set field="notOrderComponent" value="Y"/>
            </actions>
            <widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="ReturnTabBar"/>
							<platform-specific>
	                           	<html>
	                               	<html-template location="component://product/webapp/facility/returns/receiveReturn.ftl"/>
	                            </html>
	                        </platform-specific>
					</decorator-section>
				</decorator-screen>                            
            </widgets>
        </section>
    </screen>
    <screen name="ReturnShipments">
        <section>
            <actions>
                <set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="Returns"/>
                <set field="tabButtonItem" value="ReturnShipment"/>
                <set field="returnId" from-field="parameters.returnId"/>
                <entity-one value-field="returnHeader" entity-name="ReturnHeader"/>
                <set field="returnStatusId" from-field="returnHeader.statusId"/>
                <entity-condition list="listShipment" entity-name="Shipment">
                	<condition-expr field-name="primaryReturnId" from-field="returnId"/>
                </entity-condition>
            </actions>
            <widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="ReturnTabBar"/>
					<screenlet title="${uiLabelMap.Shipment}">
						<include-form name="ListShipment" location="component://delys/widget/logistics/LogisticsForms.xml"/>
					</screenlet>
					</decorator-section>
				</decorator-screen>                            
            </widgets>
        </section>
    </screen>
    <screen name="ReturnInvoices">
        <section>
            <actions>
                <set field="selectedMenuItem" value="orders"/>
                <set field="selectedSubMenuItem" value="Returns"/>
                <set field="tabButtonItem" value="ReturnInvoice"/>
                <set field="returnId" from-field="parameters.returnId"/>
                <entity-one value-field="returnHeader" entity-name="ReturnHeader"/>
                <set field="returnStatusId" from-field="returnHeader.statusId"/>
                <entity-condition list="listReturnInvoices" entity-name="ReturnItemBilling">
                	<condition-expr field-name="returnId" from-field="returnId"/>
                </entity-condition>
            </actions>
            <widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="ReturnTabBar"/>
					<screenlet title="${uiLabelMap.Shipment}">
						<include-form name="ReturnInvoices" location="component://delys/widget/logistics/LogisticsForms.xml"/>
					</screenlet>
					</decorator-section>
				</decorator-screen>                            
            </widgets>
        </section>
    </screen>
    <screen name="SelectFacilityToReceive">
        <section>
            <actions>
                <set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="ReceiveFromShipment"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listProductStores" value="${listProductStores}"/>
   				<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilitiesOwner.groovy"/>
    			<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics_store_facility.js" global="true"/>
                <set field="listFacilities" from-field="listFacilities"/>
            </actions>
            <widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.CommonSelect} ${uiLabelMap.facility}">
							<include-form name="SelectFacilityToReceive" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>                            
            </widgets>
        </section>
    </screen>
    <screen name="IncomingShipments">
        <section>
            <actions>
                <set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="ReceiveFromShipment"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <entity-condition list="listShipment" entity-name="Shipment">
                	<condition-list combine="and">
                		<condition-expr field-name="destinationFacilityId" from-field="facilityId"/>
                		<condition-list combine="or">
                			<condition-expr field-name="shipmentTypeId" operator="equals" value="PURCHASE_SHIPMENT"/>
                			<condition-expr field-name="shipmentTypeId" operator="equals" value="TRANSFER"/>
                			<condition-expr field-name="shipmentTypeId" operator="equals" value="TRANS_INTERNAL"/>
                		</condition-list>
                		<condition-expr field-name="statusId" operator="equals" value="SHIPMENT_SHIPPED"/>
                	</condition-list>
                </entity-condition>
            </actions>
            <widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.Shipment} ${uiLabelMap.CommonTo} ${uiLabelMap.facility} ${facilityId}">
						<container>
							<link target="selectFacilityToReceive" text="${uiLabelMap.CommonBack}" style="icon-arrow-left"></link>
						</container>
						<include-form name="ListShipmentToReceives" location="component://delys/widget/logistics/LogisticsForms.xml"/>
					</screenlet>
					</decorator-section>
				</decorator-screen>                            
            </widgets>
        </section>
    </screen>
    <screen name="PurchaseOrderToRecives">
        <section>
            <actions>
                <set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="ReceiveFromOrder"/>
                <set field="tabButtonItem" value="ReceiveFromPO"/>
                <entity-condition list="listPurchaseOrders" entity-name="OrderHeader">
                	<condition-list>
                		<condition-expr field-name="orderTypeId" value="PURCHASE_ORDER"/>
                		<condition-expr field-name="statusId" value="ORDER_APPROVED"/>
                	</condition-list>
                </entity-condition>
            </actions>
            <widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu location="component://delys/widget/DelysMenus.xml" name="ReceiveFromOrderTabBar"/>
					<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.OrderOrder}">
						<include-form name="PurchaseOrderToRecives" location="component://delys/widget/logistics/LogisticsForms.xml"/>
					</screenlet>
					</decorator-section>
				</decorator-screen>                            
            </widgets>
        </section>
    </screen>
    <screen name="PrepareOrderToReceive">
        <section>
            <actions>
                <set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="ReceiveFromOrder"/>
                <set field="tabButtonItem" value="ReceiveFromPO"/>
                <set field="purchaseOrderId" from-field="parameters.purchaseOrderId"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/inventory/ReceiveInventory.groovy"/>
            </actions>
            <widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu location="component://delys/widget/DelysMenus.xml" name="ReceiveFromOrderTabBar"/>
					<screenlet title="${uiLabelMap.CommonDetail} ${uiLabelMap.OrderOrder}">
						<platform-specific>
                            <html><html-template location="component://product/webapp/facility/inventory/receiveInventory.ftl"/></html>
                        </platform-specific>
					</screenlet>
					</decorator-section>
				</decorator-screen>                            
            </widgets>
        </section>
    </screen>
    <screen name="OrderFromShipment">
        <section>
            <actions>
                <set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="ReceiveFromShipment"/>
                <set field="shipmentId" from-field="parameters.shipmentId"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <entity-condition list="listOrderShipments" entity-name="OrderShipment">
                	<condition-expr field-name="shipmentId" from-field="shipmentId"/>
                </entity-condition>
            </actions>
            <widgets>
				<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.OrderOrder} ${uiLabelMap.CommonFrom} ${uiLabelMap.Shipment} ${shipmentId}">
							<container>
								<link target="getIncomingShipments" text="${uiLabelMap.CommonList} ${uiLabelMap.Shipment}" style="icon-tasks">
									<parameter param-name="facilityId" from-field="facilityId"/>
								</link>
							</container>
							<include-form name="OrderFromShipment" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>                            
            </widgets>
        </section>
    </screen>
    <screen name="SalesOrderToDelivery">
    	<section>
	    	<actions>
	    		<set field="selectedMenuItem" value="delivery"/>
                <set field="selectedSubMenuItem" value="DeliveryByOrder"/>
                <set field="tabButtonItem" value="SalesOrder"/>
    			<entity-condition list="listOrders" entity-name="OrderHeader">
    				<condition-list>
    					<condition-expr field-name="orderTypeId" operator="equals" value="SALES_ORDER"/>
    					<condition-expr field-name="statusId" operator="equals" value="ORDER_APPROVED"/>
    				</condition-list>
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu location="component://delys/widget/DelysMenus.xml" name="DeliveryOrderTabBar"/>
						<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.OrderOrder}">
							<include-form name="ListOrderToDelivery" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="DetailOrderToDelivery">
    	<section>
	    	<actions>
	    		<set field="orderId" from-field="parameters.orderId"/>
	    		<set field="selectedMenuItem" value="delivery"/>
                <set field="selectedSubMenuItem" value="DeliveryByOrder"/>
                <set field="tabButtonItem" value="${tabButtonItem}"/>
                <set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true"/>
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
				<script
					location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/changeFromAction.js" global="true"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://delys/widget/DelysMenus.xml" name="DeliveryOrderTabBar"/>
						<include-screen name="orderHeader" location="component://order/widget/ordermgr/OrderViewScreens.xml"/>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="MarketingOrderToDelivery">
    	<section>
	    	<actions>
	    		<set field="selectedMenuItem" value="delivery"/>
                <set field="selectedSubMenuItem" value="DeliveryByOrder"/>
                <set field="tabButtonItem" value="MarketingOrder"/>
    			<entity-condition list="listOrders" entity-name="OrderHeader">
    				<condition-list>
    					<condition-expr field-name="salesMethodChannelEnumId" operator="equals" value="MKT_METHOD_CHANNEL"/>
    					<condition-expr field-name="statusId" operator="equals" value="ORDER_APPROVED"/>
    				</condition-list>
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu location="component://delys/widget/DelysMenus.xml" name="DeliveryOrderTabBar"/>
						<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.OrderOrder}">
							<include-form name="ListOrderToDelivery" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="ChangeDateOrderToDelivery">
    	<section>
	    	<actions>
	    		<set field="selectedMenuItem" value="delivery"/>
                <set field="selectedSubMenuItem" value="DeliveryByOrder"/>
                <set field="tabButtonItem" value="ChangeDateOrder"/>
    			<entity-condition list="listOrders" entity-name="OrderHeader">
    				<condition-list>
    					<condition-expr field-name="salesMethodChannelEnumId" operator="equals" value="LOG_CHANGE_DATE"/>
    					<condition-expr field-name="statusId" operator="equals" value="ORDER_APPROVED"/>
    				</condition-list>
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu location="component://delys/widget/DelysMenus.xml" name="DeliveryOrderTabBar"/>
						<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.OrderOrder}">
							<include-form name="ListOrderToDelivery" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="InternalSalesOrderToDelivery">
    	<section>
	    	<actions>
	    		<set field="selectedMenuItem" value="delivery"/>
                <set field="selectedSubMenuItem" value="DeliveryByOrder"/>
                <set field="tabButtonItem" value="InternalSalesOrder"/>
    			<entity-condition list="listOrders" entity-name="OrderHeader">
    				<condition-list>
    					<condition-expr field-name="orderTypeId" operator="equals" value="INTERNAL_SALES_ORDER"/>
    					<condition-expr field-name="statusId" operator="equals" value="ORDER_APPROVED"/>
    				</condition-list>
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu location="component://delys/widget/DelysMenus.xml" name="DeliveryOrderTabBar"/>
						<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.OrderOrder}">
							<include-form name="ListOrderToDelivery" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="TransferOrderToDelivery">
    	<section>
	    	<actions>
	    		<set field="selectedMenuItem" value="delivery"/>
                <set field="selectedSubMenuItem" value="DeliveryByOrder"/>
                <set field="tabButtonItem" value="TransferOrder"/>
    			<entity-condition list="listOrders" entity-name="OrderHeader">
    				<condition-list>
    					<condition-expr field-name="orderTypeId" operator="equals" value="TRANSFER_ORDER"/>
    					<condition-expr field-name="statusId" operator="equals" value="ORDER_APPROVED"/>
    				</condition-list>
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu location="component://delys/widget/DelysMenus.xml" name="DeliveryOrderTabBar"/>
						<screenlet title="${uiLabelMap.CommonList} ${uiLabelMap.OrderOrder}">
							<include-form name="ListOrderToDelivery" location="component://delys/widget/logistics/LogisticsForms.xml"/>
						</screenlet>
					</decorator-section>
				</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    <screen name="FacilityLocation">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItem" value="FacilityLocation"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/facility/FindFacilityLocation.groovy"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <entity-one entity-name="Facility" value-field="facility"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.PageTitleFindFacilityLocation}"/>
            </actions>
            <widgets>
            <decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu location="component://delys/widget/DelysMenus.xml" name="FacilityTabBar"/>
                        <platform-specific>
                             <html><html-template location="component://product/webapp/facility/facility/FindFacilityLocation.ftl"/></html>
                         </platform-specific>
					</decorator-section>
				</decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="PrintDeliveryNote">
    	<section>
    		<actions>
    			<property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
    			<property-map resource="DelysUiLabels" map-name="uiLabelMap" global="true"/>
    			<set field="deliveryId" from-field="parameters.deliveryId"></set>
    			<entity-condition entity-name="DeliveryItem" list="listItems">
    				<condition-expr field-name="deliveryId" from-field="deliveryId"/>
    			</entity-condition>
    			<entity-one entity-name="Delivery" value-field="delivery"></entity-one>
    			<set field="defaultFontFamily" value="Arial" />
    			<set field="orderId" from-field="parameters.orderId"></set>
    			<entity-condition entity-name="OrderItem" list="listItems">
    				<condition-expr field-name="orderId" from-field="orderId"/>
    			</entity-condition>
    		</actions>
    		<widgets>
   				<platform-specific>
                 	<xsl-fo><html-template location="component://delys/webapp/delys/logistics/reports/deliveryNote.fo.ftl"/></xsl-fo>
               	</platform-specific>
    		</widgets>
    	</section>
    </screen>

    <screen name="PrepareCreateNewShipment">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
    		</actions>
    		<widgets>
    			 <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
		    			<screenlet title="${uiLabelMap.CommonSelect} ${uiLabelMap.ShipmentType}">
	    					<container>
								<link target="ListShipment" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
	 	                       	</link>
	 	                       	<label text="|"></label>
	 	                       	<link target="prepareCreateNewShipment" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
	 	                       	</link>
 	                       	</container>
		    				<include-form name="SelectShipmentType" location="component://delys/widget/logistics/LogisticsForms.xml"/>
		    			</screenlet>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <!-- BEGIN EDIT BY DATNV -->
    
    <screen name="getCompanytargets">
    	<section>
    		<condition>
    			<if-compare operator="equals" value="COMPANY" field="parameters.targetTypeId"/>
    		</condition>
    		<actions>
    			<set field="selectedMenuItem" value="vendorTarget"/>
                <set field="selectedSubMenuItem" value="CompanyTarget"/>
    			<set field="targetHeaderName" value="${parameters.targetHeaderName}"/>
    			<set field="ofYear" value="${parameters.ofYear}"/>
    			<set field="createBy" value="${parameters.createBy}"/>
    			<set field="createDate" value="${parameters.createDate}"/>
    			<set field="targetTypeId" value="${parameters.targetTypeId}"/>
    			<set field="targetHeaderId" value="${parameters.newSequenceId}"/>
    			<entity-condition list="targetCompany" entity-name="Product">
    				<select-field field-name="productId"/>
    				<select-field field-name="primaryProductCategoryId"/>
    				<order-by field-name="primaryProductCategoryId"/>
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
		    			<screenlet title="${uiLabelMap.createTargetHeader}">
	    					<container>
								<link target="ShowTargetCompany" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
	 	                       		<parameter param-name="targetTypeId" from-field="targetTypeId"/>
	 	                       	</link>
	 	                       	<label text="|"></label>
	 	                       	<link target="CreateTargetCompanyHeader" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
	 	                       		<parameter param-name="targetTypeId" from-field="targetTypeId"/>
	 	                       	</link>
 	                       	</container>
		    				<include-form name="TargetCompany" location="component://delys/widget/logistics/LogisticsForms.xml"/>
		    			</screenlet>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
    		<fail-widgets>
    			<section>
    				<actions>
    			<set field="selectedMenuItem" value="vendorTarget"/>
                <set field="selectedSubMenuItem" value="VendorTarget"/>
    			<set field="targetHeaderName" value="${parameters.targetHeaderName}"/>
    			<set field="ofYear" value="${parameters.ofYear}"/>
    			<set field="createBy" value="${parameters.createBy}"/>
    			<set field="createDate" value="${parameters.createDate}"/>
    			<set field="targetTypeId" value="${parameters.targetTypeId}"/>
    			<set field="targetHeaderId" value="${parameters.newSequenceId}"/>
    			<entity-condition list="targetCompany" entity-name="Product">
    				<select-field field-name="productId"/>
    				<select-field field-name="primaryProductCategoryId"/>
    				<order-by field-name="primaryProductCategoryId"/>
    			</entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
		    			<screenlet title="${uiLabelMap.createTargetHeader}">
	    					<container>
								<link target="ShowTargetCompany" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
	 	                       		<parameter param-name="targetTypeId" from-field="targetTypeId"/>
	 	                       	</link>
	 	                       	<label text="|"></label>
	 	                       	<link target="CreateTargetCompanyHeader" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans">
	 	                       		<parameter param-name="targetTypeId" from-field="targetTypeId"/>
	 	                       	</link>
 	                       	</container>
		    				<include-form name="TargetCompany" location="component://delys/widget/logistics/LogisticsForms.xml"/>
		    			</screenlet>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
    			</section>
    		</fail-widgets>
    	</section>
    </screen>
    
    <screen name="EditTargetCompany">
    	<section>
    		<condition>
    			<if-compare operator="equals" value="COMPANY" field="parameters.targetTypeId"/>
    		</condition>
    		<actions>
    			<set field="selectedMenuItem" value="vendorTarget"/>
                <set field="selectedSubMenuItem" value="CompanyTarget"/>
                <set field="targetTypeId" value="${parameters.targetTypeId}"/>
    			<set field="titleProperty" value="TargetCompanyDetails"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
		    			<platform-specific>
								<html>
									<html-template location="component://delys/webapp/delys/logistics/editTargetCompany.ftl"/>
								</html>
						</platform-specific>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
    		<fail-widgets>
    			<section>
    				<actions>
    					<set field="selectedMenuItem" value="vendorTarget"/>
               			<set field="selectedSubMenuItem" value="VendorTarget"/>
             		   	<set field="targetTypeId" value="${parameters.targetTypeId}"/>
    					<set field="titleProperty" value="TargetCompanyDetails"/>
    				</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<screenlet>
		    				<platform-specific>
								<html>
									<html-template location="component://delys/webapp/delys/logistics/editTargetCompany.ftl"/>
								</html>
							</platform-specific>
		    			</screenlet>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
    			</section>
    		</fail-widgets>
    	</section>
    </screen>
    <screen name="ShowTargetCompany">
    	<section>
    		<condition>
    			<if-compare operator="equals" value="COMPANY" field="parameters.targetTypeId"/>
    		</condition>
    		<actions>
   			<set field="selectedMenuItem" value="vendorTarget"/>
               <set field="selectedSubMenuItem" value="CompanyTarget"/>
               <entity-condition list="listTargetCompany" entity-name="TargetHeader">
               	<condition-list>
               		<condition-expr field-name="targetTypeId" value="${parameters.targetTypeId}"/>
               		<condition-expr field-name="ofYear" operator="not-equals" value=""/>
               	</condition-list>
               	<order-by field-name="-ofYear"/>
               </entity-condition>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
		    			<screenlet navigation-menu-name="menuForShowTargetCompanyCOMPANY">
			                <include-menu location="component://delys/widget/DelysMenus.xml" name="menuForShowTargetCompanyCOMPANY"/>
<!-- 	    					<container> -->
<!-- 	 	                       	<link target="CreateTargetCompanyHeader" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans"> -->
<!-- 	 	                       		<parameter param-name="targetTypeId" value="COMPANY"/> -->
<!-- 	 	                       	</link> -->
<!--  	                       	</container> -->
		    				<include-form name="ShowTargetCompany" location="component://delys/widget/logistics/LogisticsForms.xml"/>
		    				<platform-specific>
								<html>
									<html-template location="component://delys/webapp/delys/logistics/targetCompany.ftl"/>
								</html>
							</platform-specific>
		    			</screenlet>
    				</decorator-section>
    			</decorator-screen>
    			
    		</widgets>
    		<fail-widgets>
    			<section>
    				<actions>
    					<set field="selectedMenuItem" value="vendorTarget"/>
                		<set field="selectedSubMenuItem" value="VendorTarget"/>
                		<entity-condition list="listTargetCompany" entity-name="TargetHeader">
                			<condition-list>
                				<condition-expr field-name="targetTypeId" value="${parameters.targetTypeId}"/>
                				<condition-expr field-name="ofYear" operator="not-equals" value=""/>
                			</condition-list>
                			<order-by field-name="-ofYear"/>
              		 	 </entity-condition>
              		 	 <set field="titleProperty" value="ListTargetCompany"/>
    				</actions>
    				<widgets>
    					<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    	<decorator-section name="body">
                    	<screenlet>
<!-- 		    			<screenlet title="${uiLabelMap.ListTargetCompany}"  navigation-menu-name="menuForShowTargetCompany"> -->
<!-- 			                <include-menu location="component://delys/widget/DelysMenus.xml" name="menuForShowTargetCompany"/> -->
<!-- 	    					<container> -->
<!-- 	 	                       	<link target="CreateTargetCompanyHeader" text="${uiLabelMap.CommonCreateNew}" style="icon-plus-sign open-sans"> -->
<!-- 	 	                       		<parameter param-name="targetTypeId" value="VENDOR"/> -->
<!-- 	 	                       	</link> -->
<!--  	                       	</container> -->
<!-- 		    				<include-form name="ShowTargetCompany" location="component://delys/widget/logistics/LogisticsForms.xml"/> -->
		    				<platform-specific>
								<html>
									<html-template location="component://delys/webapp/delys/logistics/targetCompany.ftl"/>
								</html>
							</platform-specific>
		    			</screenlet>
    				</decorator-section>
    			</decorator-screen>
    				</widgets>
    			</section>
    		</fail-widgets>
    	</section>
    </screen>
    <screen name="ShowTargetCompanyVENDOR">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="vendorTarget"/>
                <set field="selectedSubMenuItem" value="VendorTarget"/>
                <set field="titleProperty" value="ListTargetCompany"/>
    		</actions>
    		<widgets>
    		<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                  	<decorator-section name="body">
                    	<screenlet>
                    		<platform-specific>
								<html>
									<html-template location="component://delys/webapp/delys/logistics/targetCompany.ftl"/>
								</html>
							</platform-specific>
                    	</screenlet>
                    </decorator-section>
			</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="ShowTargetCompanyCOMPANY">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="vendorTarget"/>
                <set field="selectedSubMenuItem" value="CompanyTarget"/>
                <set field="titleProperty" value="ListTargetCompany"/>
    		</actions>
    		<widgets>
    		<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                  	<decorator-section name="body">
                    	<screenlet>
                    		<platform-specific>
								<html>
									<html-template location="component://delys/webapp/delys/logistics/targetCompany.ftl"/>
								</html>
							</platform-specific>
                    	</screenlet>
                    </decorator-section>
			</decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="CreateTargetCompanyHeader">
    	<section>
    		<condition>
    			<if-compare operator="equals" value="COMPANY" field="parameters.targetTypeId"/>
    		</condition>
    		<actions>
    			<set field="selectedMenuItem" value="vendorTarget"/>
                <set field="selectedSubMenuItem" value="CompanyTarget"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
		    			<screenlet title="${uiLabelMap.createTargetHeader}">
	    					<container>
								<link target="ShowTargetCompany" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
									<parameter param-name="targetTypeId" value="COMPANY"/>
	 	                       	</link>
	 	                       	
 	                       	</container>
		    				<include-form name="CreateTargetCompanyHeader" location="component://delys/widget/logistics/LogisticsForms.xml"/>
		    			</screenlet>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
    		<fail-widgets>
    			<section>
    				<actions>
    					<set field="selectedMenuItem" value="vendorTarget"/>
                		<set field="selectedSubMenuItem" value="VendorTarget"/>
    				</actions>
    		
    			<widgets>
    			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
		    			<screenlet title="${uiLabelMap.createTargetHeader}">
	    					<container>
								<link target="ShowTargetCompany" text="${uiLabelMap.CommonList}" style="icon-tasks icon-tasks">
									<parameter param-name="targetTypeId" value="VENDOR"/>
	 	                       	</link>
 	                       	</container>
		    				<include-form name="CreateTargetCompanyHeader" location="component://delys/widget/logistics/LogisticsForms.xml"/>
		    			</screenlet>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
    		</section>
    		</fail-widgets>
    	</section>
    </screen>
    
    <screen name="FindImportPlanFollowSalesForcast">
        <section>
            <actions>
            	<!-- <set field="selectedMenuItem" value="statementAndPolicy"/>
            	<set field="selectedSubMenuItem" value="salesForecastListAdvance" /> -->
            	<script location="component://delys/webapp/delys/WEB-INF/actions/delys/navigator/nav_salesForecastView.groovy"/>
                <set field="titleProperty" value="PageTitleFindSalesForecast"/>
                <set field="headerItem" value="Forecast"/>
                <set field="selectedMenuItem" value="importPlan"/>
                <set field="selectedSubMenuItem" value="ImportPlan"/>
				<!-- <set field="selectedSubMenuItem" value="salesForecastList" />
				<set field="navMenuName" value="SearchSalesForecastSubTabBar" />
				<set field="navMenuLocation" value="component://delys/widget/sales/SalesMenus.xml" /> -->
				<script location="component://delys/webapp/delys/WEB-INF/actions/delys/sales/GetListCustomTimePeriodByForecast.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="search-options">
                                <include-form name="FindChooseCustomTimePeriod" location="component://delys/widget/sales/SalesForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                                <include-form name="FindCustomTimePeriodInImportPlan" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <!-- START EDIT BY HUNGNC -->
    <screen name="EditFacilityGeo">
        <section>
            <actions>
    			<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItemSub" value="FacilityGeoLocation"/>
    			<set field="facilityId" from-field="parameters.facilityId"/>
    			<entity-one entity-name="Facility" value-field="facility"/>
                <get-related-one relation-name="GeoPoint" to-value-field="geoPoint" value-field="facility"/>
                <get-related-one relation-name="ElevationUom" to-value-field="uom" value-field="geoPoint"/>
                <set field="geoPoints[+0].lat" from-field="geoPoint.latitude"/>
                <set field="geoPoints[0].lon" from-field="geoPoint.longitude"/>
                <set field="geoChart.dataSourceId" from-field="geoPoint.dataSourceId"/>
                <set field="geoChart.width" value="600px"/>
                <set field="geoChart.height" value="500px"/>
                <set field="geoChart.points" from-field="geoPoints"/>           
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <!-- <set field="title" value="${uiLabelMap.PageTitleFacilityGeoLocation} - ${facility.facilityName}"/> -->
    		</actions>
            <widgets>
            	<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                  </section>
                <decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.ProductEditFacilityGeoLocation}" navigation-menu-name="menuForEditFacility">
                        	<include-menu location="component://delys/widget/DelysMenus.xml" name="menuForEditFacility"/>
                            <include-form name="EditFacilityGeoPoint" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                        </screenlet>
                        <include-screen name="geoChart" location="component://common/widget/CommonScreens.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
       
    </screen>  
    
    
    <screen name="FindLocationFacility">
        <section>
            <actions>
    			<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItemSub" value="FindLocationFacility"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <entity-one value-field="facility" entity-name="Facility">
                	<field-map field-name="facilityId" from-field="parameters.facilityId"/>
                </entity-one>
                <entity-condition list="listUom" entity-name="Uom">
                	<condition-expr field-name="uomTypeId" operator="equals" value="PRODUCT_PACKING"/>
                </entity-condition>
                <set field="titleProperty" value="ManagerLocationProducts"/>
                <set field="listIt" from-field="listIt"/>
    		</actions>
            <widgets>
            	<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                  </section>
                <decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.commonFacilityDecoratorLocation}">
                    <decorator-section name="body">
                     <container id="statusWarehouse"></container>
                    <container id="container"></container>
                            	<screenlet title="${uiLabelMap.ManagerLocationProducts} [${facilityId}]" navigation-menu-name="locationFacilitySubTabBar">
                        			<include-menu location="component://product/widget/facility/FacilityMenus.xml" name="locationFacilitySubTabBar"/>
									<!-- <platform-specific>
			                        	<html><html-template location="component://delys/webapp/delys/logistics/facility/ListLocationInFacility2.ftl"/></html>
			                        </platform-specific> -->
			                   		<platform-specific>
<!-- 			                        	<html><html-template location="component://delys/webapp/delys/logistics/facility/ListLocationInFacility.ftl"/></html> -->
											<html><html-template location="component://delys/webapp/delys/logistics/facility/locationFacility.ftl"/></html>
			                        </platform-specific>
                            	</screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="locationFacility">
        <section>
            <actions>
    			<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItemSub" value="FindLocationFacility"/>
                <set field="facilityId" value="tuanminh"/>
    		</actions>
            <widgets>
                <decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.commonFacilityDecoratorLocation}">
                    <decorator-section name="body">
                    <container id="statusWarehouse"></container>
                    <container id="container"></container>
                            	<screenlet title="${uiLabelMap.ProductLocations}" navigation-menu-name="locationFacilitySubTabBar">
                        			<include-menu location="component://product/widget/facility/FacilityMenus.xml" name="locationFacilitySubTabBar"/>
			                   		<platform-specific>
			                        	<html><html-template location="component://delys/webapp/delys/logistics/facility/locationFacility.ftl"/></html>
			                        </platform-specific>
                            	</screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    
    <screen name="EditLocationFacility">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItemSub" value="EditLocationFacility"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/facility/EditFacilityLocation.groovy"/>
                <entity-one entity-name="Facility" value-field="facility"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.PageTitleNewFacilityLocation}"/>
            </actions>
            <widgets>
            	<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                  </section>
                <section>
                    <condition>
                        <not><if-empty field="locationSeqId"/></not>
                    </condition>
                    <actions>
                        <set field="title" value="${uiLabelMap.PageTitleEditFacilityLocation}"/>
                    </actions>
                    <widgets/>
                </section>
                <decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<!-- <include-menu location="component://delys/widget/DelysMenus.xml" name="FacilityTabBar"/> -->
                        <platform-specific>
                            <html><html-template location="component://delys/webapp/delys/logistics/facility/EditLocationFacility.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="InventoryItemDetailByFacilityId">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItemSub" value="FindLocationFacility"/>
                <set field="locationId" from-field="parameters.locationId"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <set field="description" from-field="parameters.description"/>
				<set field="titleProperty" value="DSInventoryItemDetail"/>
                <!-- <entity-condition entity-name="FindInventoryItemByLocationSeqId" list="listInventoryItem">
                	<condition-expr field-name="locationId" from-field="locationId"/>
    			</entity-condition>  -->
    			<entity-condition list="listUom" entity-name="Uom">
                	<condition-expr field-name="uomTypeId" operator="equals" value="PRODUCT_PACKING"/>
                </entity-condition>
            </actions>
            <widgets>
            	<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                  </section>
                <decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.commonFacilityDecoratorLocation}">
                    <decorator-section name="body">
                        <section>
                            <widgets>
<!--                                 <screenlet  navigation-menu-name="InventoryDetailsByLocationSeqID"> -->
<!-- 		                            <include-menu name="InventoryDetailsByLocationSeqID" location="component://delys/widget/DelysMenus.xml"/> -->
		                        	<platform-specific>
		                            	<html><html-template location="component://delys/webapp/delys/logistics/facility/StockLocationByInventoryItemId.ftl"/></html>
		                       		</platform-specific>
<!-- 		                        </screenlet> -->
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="StockMoveFacility">
        <section>
            <actions>
    			<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItem" value="StockMoveFacility"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <set field="locationSeqId" from-field="parameters.locationSeqId"/>
                <set field="titleProperty" value="ProductQuickStockMove"/>
                <entity-condition list="listUom" entity-name="Uom">
                	<condition-expr field-name="uomTypeId" operator="equals" value="PRODUCT_PACKING"/>
                </entity-condition>
            </actions>
            <widgets>
            	<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                  </section>
                <decorator-screen name="LogisticsFacilityCommonDecorator" location="${parameters.commonFacilityDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.StockProductIdForLocationInFacility} ${locationSeqId} ${uiLabelMap.DSInFacility} ${facilityId}">
                    		<!-- <platform-specific>
                            	<html><html-template location="component://delys/webapp/delys/logistics/facility/PickMoveStockByFacilityId.ftl"/></html>
                        	</platform-specific> -->
                        	<platform-specific>
                            	<html><html-template location="component://delys/webapp/delys/logistics/facility/StockProductFromLocationToLocation.ftl"/></html>
                        	</platform-specific>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
       
    </screen> 
    
    <screen name="LookupInventoryItemLocation">
        <section>
            <condition>
                <if-service-permission service-name="facilityGenericPermission" main-action="VIEW"/>
            </condition>
            <actions>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="title" value="${uiLabelMap.PageTitleLookupFacility}"/>
                <set field="queryString" from-field="result.queryString"/>
                <set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="20"/>
                <set field="entityName" value="FacilityLocation"/>
                <set field="searchFields" value="[locationSeqId, facilityId, locationTypeEnumId]"/>                 
            </actions>
            <widgets>
                <decorator-screen name="LookupDecorator" location="component://common/widget/CommonScreens.xml">
                    <decorator-section name="search-options">
                        <include-form name="lookupInventoryItemLocation" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                    </decorator-section>
                    <decorator-section name="search-results">
                        <include-form name="listLookupInventoryItemLocation" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="LookupProductInventoryItemLocation">
        <section>
            <condition>
                <if-service-permission service-name="facilityGenericPermission" main-action="VIEW"/>
            </condition>
            <actions>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="ProductErrorUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="title" value="${uiLabelMap.ProductListFacilityLocation}"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <set field="productId" from-field="parameters.productId"/>
                
                <!-- <service service-name="findProductInventoryItemLocation">
                    <field-map field-name="facilityId"/>
                    <field-map field-name="productId"/>
                </service> -->
                <entity-condition list="locationList" entity-name="InventoryItemLocationAndInvemtoryItem">
                	<condition-list>
                		<condition-expr field-name="ProductId" from-field="productId"/>
                		<condition-expr field-name="FacilityId" from-field="facilityId"/>
                	</condition-list>
                </entity-condition>
            </actions>
            <widgets>
            	
                <section>
                    <condition>
                        <not><if-empty field="locationList"/></not>
                    </condition>
                    <widgets>
                        <decorator-screen name="LookupDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="search-results">
                                <include-form name="ListProductInventoryItemLocation" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                            </decorator-section>
                        </decorator-screen>
                    </widgets>
                    <fail-widgets>
                        <decorator-screen name="LookupDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="search-results">
                                <label style="h3" text="${uiLabelMap.ProductNotInAnyLocation}"/>
                            </decorator-section>
                        </decorator-screen>
                    </fail-widgets>
                </section>
            </widgets>
            <fail-widgets>
                <label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}</label>
            </fail-widgets>
        </section>
    </screen>
    
    
    
    <screen name="ReportTemplate">
    	<section>
    		<actions>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="defaultFontFamily" value="Arial" />
			</actions>
    		<widgets>
    			<platform-specific>
					<xsl-fo>
						<html-template
							location="component://delys/webapp/delys/logistics/facility/reportTemplate.fo.ftl"/> 
					</xsl-fo>
				</platform-specific>
    		</widgets>
    	</section>
    </screen>
    
    <screen name="PrintListInventoryItemsByLocationSeqId">
    	<section>
    		<actions>
    			<property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
    			<property-map resource="DelysUiLabels" map-name="uiLabelMap" global="true"/>
    			<property-map resource="DelysSalesUiLabels" map-name="uiLabelMap" global="true"/>
    			<property-map resource="DelysAdminUiLabels" map-name="uiLabelMap" global="true"/>
    			<set field="facilityId" from-field="parameters.facilityId"/>
                <set field="locationSeqId" from-field="parameters.locationSeqId"/>
    			<entity-condition list="listItems" entity-name="FindInventoryItemByLocationSeqId">
    				<condition-list>
    					<condition-expr field-name="FacilityID" from-field="facilityId"/>
                		<condition-expr field-name="LocationSeqID" from-field="locationSeqId"/>
                	</condition-list>
    			</entity-condition>
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getInventoryItemsByLocationSeqId.groovy"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="ReportTemplate">
                    <decorator-section name="topLeft">
                    	<section>
                            <widgets>
                                <platform-specific>
								     <xsl-fo><html-template location="component://delys/webapp/delys/logistics/facility/InventoryItemTopleft.fo.ftl"/></xsl-fo>
								</platform-specific>
                            </widgets>
                        </section>
                    </decorator-section>
                    <decorator-section name="topRight">
                    	<section>
                            <widgets>
                                <platform-specific>
								     <xsl-fo><html-template location="component://delys/webapp/delys/logistics/facility/InventoryItemTopright.fo.ftl"/></xsl-fo>
								</platform-specific>
                            </widgets>
                        </section>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <platform-specific>
								     <xsl-fo><html-template location="component://delys/webapp/delys/logistics/facility/PrintInventoryItemDetails.fo.ftl"/></xsl-fo>
								</platform-specific>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
    		</widgets>
    	</section>
    </screen>
    
    <!-- <screen name="InventoryItemDetailPhysical">
        <section>
            <actions>
                     
                     
                <set field="physicalInventoryId" value="${parameters.physicalInventoryId}"/>
				<set field="selectedMenuItem" value="facility"/>
				<set field="selectedSubMenuItem" value="Physic"/>
                     
                <set field="facilityId" from-field="parameters.facilityId"/>
                <set field="locationSeqId" from-field="parameters.locationSeqId"/>
                <entity-condition entity-name="ListInventoryItemForPhysical" list="listInventoryItem">
                 	<condition-list>
                 		<condition-expr field-name="FacilityID" from-field="facilityId"/>
	    				<condition-expr field-name="LocationSeqID" from-field="locationSeqId"/>
                 	</condition-list>
    			</entity-condition> 
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
							<decorator-section name="search-options">
								<screenlet title="${uiLabelMap.DSInventoryItemDetail} ${facilityId}" navigation-menu-name="InventoryDetailsByLocationSeqID">
		                            <include-menu name="InventoryDetailsByLocationSeqID" location="component://delys/widget/DelysMenus.xml"/>
		                            <platform-specific>
		                            	<html><html-template location="component://delys/webapp/delys/logistics/facility/InventoryItemDetailByLocation.ftl"/></html>
		                       		</platform-specific>
		                        </screenlet>
							</decorator-section>
						</decorator-screen>
					</decorator-section>
				</decorator-screen>
            </widgets>
        </section>
    </screen> -->
    
    <screen name="PrintListFacilityPhysicalInventory">
    	<section>
    		<actions>
    			<property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
    			<property-map resource="DelysUiLabels" map-name="uiLabelMap" global="true"/>
    			<property-map resource="DelysSalesUiLabels" map-name="uiLabelMap" global="true"/>
    			<property-map resource="DelysAdminUiLabels" map-name="uiLabelMap" global="true"/>
    			<set field="facilityId" from-field="parameters.facilityId"/>
                <set field="locationSeqId" from-field="parameters.locationSeqId"/>
    			<entity-condition list="listItems" entity-name="ListInventoryItemForPhysical">
    				<condition-list>
                 		<condition-expr field-name="facilityId" from-field="facilityId"/>
                 		<condition-expr field-name="locationSeqId" operator="not-equals" from-field="nullField" />
                 	</condition-list>
                 	<order-by field-name="locationSeqId"/>
    			</entity-condition>
    			
    			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getInventoryItemsByLocationSeqId.groovy"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="ReportTemplate">
                    <decorator-section name="topLeft">
                    	<section>
                            <widgets>
                                <platform-specific>
								     <xsl-fo><html-template location="component://delys/webapp/delys/logistics/facility/InventoryItemTopleft.fo.ftl"/></xsl-fo>
								</platform-specific>
                            </widgets>
                        </section>
                    </decorator-section>
                    <decorator-section name="topRight">
                    	<section>
                            <widgets>
                                <platform-specific>
								     <xsl-fo><html-template location="component://delys/webapp/delys/logistics/facility/InventoryItemTopright.fo.ftl"/></xsl-fo>
								</platform-specific>
                            </widgets>
                        </section>
                    </decorator-section>
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <platform-specific>
								     <xsl-fo><html-template location="component://delys/webapp/delys/logistics/facility/PrintListFacilityPhysicalInventory.fo.ftl"/></xsl-fo>
								</platform-specific>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
    		</widgets>
    	</section>
    </screen>
    
    <screen name="ListLocationFacility">
    	<section>
    		<actions>
    			<set field="selectedMenuItem" value="facilitySetting"/>
                <set field="selectedSubMenuItem" value="LocationFacility"/>
                <set field="titleProperty" value="LocationTypeInFacility"/>
    		</actions>
    		<widgets>
	    		<section>
	    			<widgets>
	    				<decorator-screen name="DelysCommonDecorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<screenlet title="${uiLabelMap.LocationTypeInFacility}" navigation-menu-name="locatiionFacilityTypeSubTabbar">
									<include-menu location="component://delys/widget/DelysMenus.xml" name="locatiionFacilityTypeSubTabbar"/>
									<platform-specific>
	                            		<html><html-template location="component://delys/webapp/delys/logistics/facility/ListLocationFacility.ftl"/></html>
	                        		</platform-specific>
	                        	</screenlet>	
		                    </decorator-section>
						</decorator-screen>
	    			</widgets>
	    		</section>
    		</widgets>
    	</section>
    </screen>
    
    <screen name="LableItemByFacility">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
            	<property-map resource="DelysUiLabels" map-name="uiLabelMap" global="true"/>
            	<property-map resource="DelysSalesUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItem" value="LableItem"/>
                
                <set field="facilityId" from-field="parameters.facilityId"/>
			</actions>
			<widgets>
				<section>
                	<actions>
					    <set field="tabBarName" value="FacilityTabBar" global="true" />
					    <set field="tabBarLocation"
					     value="component://delys/widget/DelysMenus.xml"
					     global="true" />
				    </actions>
				    <widgets>
				    	<section>
				    		 <actions>
						      <set field="printTabBar" value="true" />
						      <set field="titleProperty" value="${uiLabelMap.LogManagementLableItem}"/>
						     </actions>
						     <widgets>
						     	<container></container>
						     </widgets>
				    	</section>
				    </widgets>
                  </section>
				<decorator-screen name="LogisticsFacilityCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet>
							<platform-specific>
								<html><html-template location="component://delys/webapp/delys/logistics/facility/listLableItemByFacility.ftl"/></html>
							</platform-specific>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
       </section>
    </screen>
    
    <screen name="ListLabelItemRequirement">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="LabelItem"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/checkFaciltyRole.groovy"/>
                <set field="permission" from-field="NoPermisson"/>
                <set field="titleProperty" value="LogListLabelPurchaseRequirementTitle"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
             	<property-map resource="DelysSalesUiLabels" map-name="uiLabelMap" global="true"/>
    			<property-map map-name="uiLabelMap" resource="SecurityUiLabels" global="true"/>
    			<set field="tabButtonItem" value="ListLabelItemRequirement"/>
            	<set field="tabBarName" value="LogLabelItemTabBar" global="true" />
			    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
			     <set field="printTabBar" value="true"/>
            </actions>
            <widgets>
            	<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                   		<screenlet>
	                    	<platform-specific>
								<html><html-template location="component://delys/webapp/delys/logistics/facility/listLabelItemRequirement.ftl"/></html>
							</platform-specific>
                   		</screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="ListLabelItemInFacility">
        <section>
            <actions>
            	<set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="LabelItem"/>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/checkFaciltyRole.groovy"/>
                <set field="permission" from-field="NoPermisson"/>
                <set field="titleProperty" value="LogListLabelItemInFacility"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
             	<property-map resource="DelysSalesUiLabels" map-name="uiLabelMap" global="true"/>
    			<property-map map-name="uiLabelMap" resource="SecurityUiLabels" global="true"/>
    			<set field="tabButtonItem" value="ListLabelItemInFacility"/>
            	<set field="tabBarName" value="LogLabelItemTabBar" global="true" />
			    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
			    <set field="printTabBar" value="true"/>
            </actions>
            <widgets>
            	<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                   		<screenlet>
	                    	<platform-specific>
								<html><html-template location="component://delys/webapp/delys/logistics/label/listLabelItemInFacility.ftl"/></html>
							</platform-specific>
                   		</screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <!-- END EDIT BY HUNGNC -->
    
    <!-- END EDIT BY DATNV -->
    
    <screen name="EditReceipt">
    	<section>
	    	<actions>
	    		<set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="ImportProduct"/>
                <set field="receiptId" from-field="parameters.receiptId"/>
                <entity-one entity-name="Receipt" value-field="receipt">
                	<field-map field-name="receiptId" from-field="receiptId"></field-map>
                </entity-one>
                <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getStoresOwner.groovy"/>
    			<set field="listProductStores" value="${listProductStores}"/>
   				<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getFacilitiesOwner.groovy"/>
    			<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/select_facility.js" global="true"/>
                <set field="listFacilities" from-field="listFacilities"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <screenlet title="${uiLabelMap.Receipt} ${receiptId}">
		    				<include-form name="EditReceipt" location="component://delys/widget/logistics/LogisticsForms.xml"/>
		    			</screenlet>
    				</decorator-section>
    			</decorator-screen>
    		</widgets>
   		</section>
    </screen>
    
    <screen name="ListDeliveryProposals">
		<section>
			<actions>
				<set field="selectedMenuItem" value="Requirements" />
				<set field="selectedSubMenuItem" value="SalesRequirement" />
				<set field="titleProperty" value="DAPageTitleListDeliveryProposalItems" />
				<entity-condition list="deliveryReqList" entity-name="Requirement">
					<condition-expr field-name="requirementTypeId" value="DELIVERY_SALES_REQ"/>
					<order-by field-name="-requiredByDate"/>
					<order-by field-name="-requirementStartDate"/>
				</entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="${uiLabelMap[titleProperty]}">
							<platform-specific><html><html-template location="component://delys/webapp/delys/sales/order/deliveryReqList.ftl"/></html></platform-specific>
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
    <screen name="PrepareReceiveInventory">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleAddItemsFromOrder"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="OrderItem"/>
				<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics/update_shipment.js" global="true"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/inventory/ReceiveInventory.groovy"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <entity-one entity-name="Facility" value-field="facility"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.ProductReceiveInventory}"/>
                <set field="layoutSettings.javaScripts[+0]" value="/ordermgr/images/js/ConvertUom.js" global="true"/>              
                <entity-condition entity-name="VarianceReason" list="VarianceReasonList">                    
                </entity-condition>                
            </actions>
            <widgets>
                <decorator-screen name="DelysCommonShipmentDecorator">
                    <decorator-section name="body">
                    	<screenlet title="${title}" navigation-menu-name="EditFacilityGroupsSubTabBar">
                        	<include-menu location="component://product/widget/facility/FacilityMenus.xml" name="EditFacilityGroupsSubTabBar"/>
                        <platform-specific>
                            <html><html-template location="component://product/webapp/facility/inventory/receiveInventory.ftl"/></html>
                        </platform-specific>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="ListReceiptByShipment">
        <section>
            <actions>
                <set field="titleProperty" value="ProductEditShipment"/>
                <set field="selectedMenuItem" value="facilityShipment"/>
                <set field="selectedSubMenuItem" value="Shipment"/>
                <set field="tabButtonItem" value="Receipt"/>
                <set field="shipmentId" from-field="parameters.shipmentId"/>
                <entity-one value-field="shipment" entity-name="Shipment"></entity-one>
                <set field="shipmentTypeId"  from-field="shipment.shipmentTypeId"/>
                <entity-condition list="listReceipts" entity-name="Receipt">
                	<condition-expr field-name="shipmentId" from-field="shipmentId"/>
                </entity-condition>
            </actions>
            <widgets>
            	<section>
				 			<widgets>
				       			 <section>
									   <actions>
										    <set field="tabBarName" value="DelysShipmentTabBar" global="true" />
										    <set field="tabBarLocation"
										     value="component://delys/widget/DelysMenus.xml"
										     global="true" />
									   </actions>
									   <widgets>
										    <section>
											     <actions>
											      <set field="printTabBar" value="true" />
											     </actions>
											     <widgets>
											     	<container>
											     	</container>
												 </widgets>
											</section>
									   </widgets>                                    
				        		</section>                                
							 </widgets>            
						</section>
            
       			<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                  <decorator-section name="body">
<!--                   <include-menu location="component://delys/widget/DelysMenus.xml" name="DelysShipmentTabBar"/> -->
                  <screenlet title="${uiLabelMap.Receipt} ${uiLabelMap.CommonOf} ${uiLabelMap.Shipment} ${shipmentId}">
                      <include-form name="ListReceipts" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                  </screenlet>
                  </decorator-section>
              </decorator-screen>
       		</widgets>
        </section>
    </screen>
   	<screen name="OutgoingTransferRequirements">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItem" value="TransferProduct"/>
                <set field="reqTypeId" value="TRANSFER_REQ"/>
                <set field="facilityId" value="${parameters.facilityId}"/>
                <set field="navMenuName" value="FindRequirementTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="titleProperty" value="${uiLabelMap.ListOutgoingTransferRequirements}"/>
				<set field="tabBarName" value="FacilityTabBar" global="true" />
			    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                   		<screenlet title="${uiLabelMap.OutgoingTransferReq}">
                          	<include-form name="OutgoingTransferRequirements" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                        </screenlet>
    				</decorator-section>
    			</decorator-screen>
			</widgets>
       </section>
    </screen>
  	<screen name="IncomingTransferRequirements">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="EditFacility"/>
                <set field="tabButtonItem" value="TransferProduct"/>
                <set field="reqTypeId" value="TRANSFER_REQ"/>
                <set field="facilityId" value="${parameters.facilityId}"/>
                <set field="navMenuName" value="FindRequirementTabBar"/>
				<set field="navMenuLocation" value="component://delys/widget/DelysMenus.xml"/>
				<set field="targetFormSearch" value="getIncomingTransferReqs"/>
				<set field="titleProperty" value="${uiLabelMap.ListIncomingTransferRequirements}"/>
				<set field="tabBarName" value="FacilityTabBar" global="true" />
			    <set field="tabBarLocation" value="component://delys/widget/DelysMenus.xml" global="true" />
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<screenlet title="${uiLabelMap.IncomingTransferReq}">
                           	<include-form name="IncomingTransferRequirements" location="component://delys/widget/logistics/LogisticsForms.xml"/>
                        </screenlet>
    				</decorator-section>
    			</decorator-screen>
			</widgets>
       </section>
    </screen>
    <screen name="EditTransferRequirement">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="Requirements"/>
                <set field="selectedSubMenuItem" value="TransferRequirement"/>
                <set field="requirementId" from-field="parameters.requirementId"/>
                <entity-one value-field="requirement" entity-name="Requirement">
                </entity-one>
                <entity-one entity-name="RequirementFacility" value-field="reqFacility">
        			<field-map field-name="requirementId" value="${requirement.requirementId}"/>
        		</entity-one>
                <entity-condition entity-name="RequirementRole" list="listRequestor">
	        		<condition-list>
	        			<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
	        			<condition-expr field-name="roleTypeId" value="OWNER"/>
	       			</condition-list>
       				<order-by field-name="-fromDate"/>
        		</entity-condition>
        		<entity-condition entity-name="RequirementRole" list="listReceivers">
        		<condition-list>
        			<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
        			<condition-expr field-name="roleTypeId" value="RECEIVER"/>
        		</condition-list>
        		<order-by field-name="-fromDate"/>
        		</entity-condition>
        		<entity-condition entity-name="RequirementRole" list="listCustomer">
	        		<condition-list>
	        			<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
	        			<condition-expr field-name="roleTypeId" value="CUSTOMER"/>
	       			</condition-list>
       				<order-by field-name="-fromDate"/>
        		</entity-condition>
    			<set field="layoutSettings.javaScripts[+0]" value="/delys/images/js/logistics.js" global="true"/>
    			<entity-condition list="listRequirementItems" entity-name="RequirementItem">
    				<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
    			</entity-condition>
    			<set field="facilityId" from-field="parameters.facilityId"/>
    			<set field="statusId" value="${requirement.statusId}"/>
    			<set field="requirementTypeId" from-field="requirement.requirementTypeId"/>
			</actions>
			<widgets>
			<section>
				<condition>
						<if-compare operator="equals" value="REQ_PROPOSED" field="statusId"/>
				</condition>
				<widgets>
					<section>
						<condition>
							<if-compare operator="equals" value="${facilityId}" field="reqFacility.facilityIdTo"/>
						</condition>
						<widgets>
							<decorator-screen name="DelysCommonDecorator"
								location="${parameters.mainDecoratorLocation}">
								<decorator-section name="body">
									<screenlet title="${uiLabelMap.EditRequirement}">
										<include-form name="ViewRequirement" location="component://delys/widget/logistics/LogisticsForms.xml"/>
									</screenlet>
									<section>
										<condition>
											<not>
												<if-empty field="parameters.requirementId"/>
											</not>
										</condition>
										<widgets>
											<screenlet title="${uiLabelMap.ProductListProduct}">
												<include-form name="ListRequirementItems" location="component://delys/widget/logistics/LogisticsForms.xml"/>
											</screenlet>							
										</widgets>
									</section>
								</decorator-section>
							</decorator-screen>
						</widgets>
						<fail-widgets>
							<decorator-screen name="DelysCommonDecorator"
								location="${parameters.mainDecoratorLocation}">
								<decorator-section name="body">
									<screenlet title="${uiLabelMap.EditRequirement}">
										<include-form name="EditTransferRequirement" location="component://delys/widget/logistics/LogisticsForms.xml"/>
									</screenlet>
									<section>
										<condition>
											<not>
												<if-empty field="parameters.requirementId"/>
											</not>
										</condition>
										<widgets>
											<screenlet title="${uiLabelMap.ProductListProduct}">
												<include-form name="ListRequirementItems" location="component://delys/widget/logistics/LogisticsForms.xml"/>
											</screenlet>							
										</widgets>
									</section>
								</decorator-section>
							</decorator-screen>
						</fail-widgets>
					</section>
				</widgets>
				<fail-widgets>
					<section>
						<condition>
							<if-compare operator="equals" value="REQ_CREATED" field="statusId"/>
						</condition>
						<widgets>
							<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
								<decorator-section name="body">
									<screenlet title="${uiLabelMap.RequirementInfo}">
										<include-form name="EditTransferRequirement" location="component://delys/widget/logistics/LogisticsForms.xml"/>
									</screenlet>
									<screenlet title="${uiLabelMap.ProductListProduct}">
										<include-form name="ListRequirementItems" location="component://delys/widget/logistics/LogisticsForms.xml"/>
									</screenlet>
								</decorator-section>
							</decorator-screen>
						</widgets>
						<fail-widgets>
							<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
								<decorator-section name="body">
									<screenlet title="${uiLabelMap.RequirementInfo}">
										<include-form name="ViewRequirement" location="component://delys/widget/logistics/LogisticsForms.xml"/>
									</screenlet>
									<screenlet title="${uiLabelMap.ProductListProduct}">
										<include-form name="ListRequirementItemsCompleted" location="component://delys/widget/logistics/LogisticsForms.xml"/>
									</screenlet>
								</decorator-section>
							</decorator-screen>
						</fail-widgets>
					</section>
				</fail-widgets>
			</section>
			</widgets>
       </section>
    </screen>
    <screen name="ListTransferDelivery">
    	<section>
            <actions>
            	<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="selectedMenuItem" value="receiveProduct"/>
                <set field="selectedSubMenuItem" value="TransferProduct"/>
                <set field="titleProperty" value="TransferNote"/>
                <set field="statusId" value="DLV_EXPORTED"/>
                <entity-condition list="listStatus" entity-name="StatusItem">
					<condition-expr field-name="statusTypeId" value="AGREEMENT_STATUS"/>
				</entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="TransferCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<platform-specific>
							<html>
								<html-template location="component://delys/webapp/delys/logistics/delivery/listTransferDelivery.ftl"/>
							</html>
						</platform-specific>
    				</decorator-section>
    			</decorator-screen>
			</widgets>
       </section>
    </screen>
    <screen name="WarehouseAgreements">
    	<section>
            <actions>
                <set field="selectedMenuItem" value="facility"/>
                <set field="selectedSubMenuItem" value="WarehouseRentAgreement"/>
			</actions>
			<widgets>
				<decorator-screen name="DelysCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<platform-specific>
							<html>
								<html-template location="component://delys/webapp/delys/logistics/contract/listWarehouseRentAgreements.ftl"/>
							</html>
						</platform-specific>
    				</decorator-section>
    			</decorator-screen>
			</widgets>
       </section>
    </screen>
    
</screens>