<?xml version="1.0" encoding="UTF-8"?>
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">

	<form name="ListProductStoreFacility" type="list" list-name="listFacilities" target=""
            default-table-style="table table-striped dataTable table-hover table-bordered" odd-row-style="alternate-row">
        <field name="facilityId" title="${uiLabelMap.facilityId}">
       		<hyperlink target="editFacilityInfo" description="${facilityId}">
        		<parameter param-name="facilityId" value="${facilityId}"/>		
       		</hyperlink>
        </field>
        <field name="facilityName">
        	<display description="${facilityName}"></display>
        </field>
        <field name="facilityTypeId">
        	<display-entity entity-name="FacilityType" description="${description}"></display-entity>
        </field>
        <field name="parentFacilityId">
        	<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
        </field>
        <field name="ownerPartyId" title="${uiLabelMap.Owner}">
        	<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}" key-field-name="partyId">
            </display-entity>
        </field>
<!--         <field name="defaultInventoryItemTypeId" title="${uiLabelMap.CommonDefault} ${uiLabelMap.InventoryItemType}"> -->
<!--         	<display description="${defaultInventoryItemTypeId}"></display> -->
<!--         </field> -->
        <field name="primaryFacilityGroupId" title="${uiLabelMap.PrimaryFacilityGroup}">
        	<display description="${primaryFacilityGroupId}"></display>
        </field>
<!--         <field name="oldSquareFootage" title="${uiLabelMap.SquareFootage}"> -->
<!--         	<display description="${oldSquareFootage}"></display> -->
<!--         </field> -->
        <field name="facilitySize" title="${uiLabelMap.FacilitySize}">
        	<display description="${facilitySize}"></display>
        </field>
         <field name="facilitySizeUomId" title="${uiLabelMap.SizeUomId}">
        	<display-entity entity-name="Uom" description="${abbreviation}" key-field-name="uomId"></display-entity>
        </field>
<!--          <field name="defaultDayToShip"> -->
<!--         	<display description="${defaultDayToShip}"></display> -->
<!--         </field> -->
<!--          <field name="openedDate"> -->
<!--         	<display description="${openedDate}"></display> -->
<!--         </field> -->
<!--         <field name="closedDate"> -->
<!--         	<display description="${closedDate}"></display> -->
<!--         </field> -->
        <field name="description" title="${uiLabelMap.CommonDescription}">
        	<display description="${description}"></display>
        </field>
     </form>
     
    <form name="ListProductStores" list-name="listProductStores" odd-row-style="alternate-row" paginate-target="listProductStores" type="list" default-table-style="table table-striped dataTable table-hover table-bordered">
    	<field name="productStoreId" title="${uiLabelMap.productStore}"><hyperlink target="getDetailStore" description="${productStoreId}">
    		<parameter param-name="productStoreId" from-field="productStoreId"/>
    	</hyperlink></field>
    	<field name="storeName"><display/> </field>
    	<field name="companyName"><display/> </field>
    	<field name="title"><display/> </field>
    	<field name="payToPartyId"><display/> </field>
    	<field name="inventoryFacilityId"><display/> </field>
    	<field name="defaultCurrencyUomId"><display/> </field>
    </form>
    <form name="EditProductStore" type="single" target="updateProductStore" title="" default-map-name="productStore" default-title-area-style="control-label"
        header-row-style="header-row" default-table-style="basic-table">
        <alt-target use-when="productStore==null" target="createProductStore"/>

        <auto-fields-service service-name="updateProductStore" map-name=""/>

        <field use-when="productStore!=null" name="productStoreId" tooltip="${uiLabelMap.ProductNotModificationRecreatingProductStore}"><display/></field>
        <field name="productStoreId"><hidden/></field>

        <field position="1" name="primaryStoreGroupId">
            <drop-down allow-empty="true">
                <entity-options entity-name="ProductStoreGroup" key-field-name="productStoreGroupId" description="${productStoreGroupName} [${productStoreGroupId}]">
                    <entity-order-by field-name="productStoreGroupName"/>
                </entity-options>
            </drop-down>
        </field>
        <field position="2" name="storeName" title="${uiLabelMap.ProductStoreName}" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><text size="30" maxlength="60"/></field>
        <field position="3" name="title" title="${uiLabelMap.ProductTitle}"><text size="30" maxlength="60"/></field>
        <field position="4" name="subtitle" title="${uiLabelMap.ProductSubTitle}"><text size="60" maxlength="250"/></field>
        <field position="5"	name="companyName"><text/></field>
        <field position="6"	name="isDemoStore">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field position="7"	name="visualThemeId">
            <drop-down allow-empty="true">
                <entity-options key-field-name="visualThemeId" description="${visualThemeId} - ${description}" entity-name="VisualTheme">
                    <entity-constraint name="visualThemeSetId" operator="equals" value="ECOMMERCE"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="payToPartyId"><lookup target-form-name="lookupPartyInfo"/></field>

        <field name="inventoryFacilityId">
            <drop-down allow-empty="true">
                <entity-options entity-name="Facility" key-field-name="facilityId" description="${facilityName} [${facilityId}]">
                    <entity-order-by field-name="facilityName"/>
                </entity-options>
            </drop-down>
        </field>
        <field use-when="productStore!=null&amp;&amp;productStore.getString(&quot;inventoryFacilityId&quot;)!=null" name="inventoryFacilityLink" title=" " widget-style="btn btn-mini btn-primary open-sans icon-edit">
            <hyperlink target="/facility/control/EditFacility" target-type="inter-app" description="${uiLabelMap.CommonEdit} ${uiLabelMap.ProductFacility} ${productStore.inventoryFacilityId}" also-hidden="false">
                <parameter param-name="facilityId" from-field="productStore.inventoryFacilityId"/>
            </hyperlink>
        </field>

        <field name="manualAuthIsCapture">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        
        <field position="1" name="prorateShipping">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field position="2" name="reqShipAddrForDigItems">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field position="3" name="selectPaymentTypePerItem">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field position="4" name="shipIfCaptureFails">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        
        <field name="prorateTaxes">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="viewCartOnAdd">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="autoSaveCart">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="autoApproveReviews">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="autoInvoiceDigitalItems">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        

        <field name="isImmediatelyFulfilled">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="checkInventory">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="requireInventory">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="reserveInventory">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="reserveOrderEnumId">
            <drop-down allow-empty="true">
                <entity-options entity-name="Enumeration" key-field-name="enumId" description="${description}">
                    <entity-constraint name="enumTypeId" value="INV_RES_ORDER"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="balanceResOnOrderCreation">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="showOutOfStockProducts">
            <drop-down allow-empty="false"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="oneInventoryFacility">
            <drop-down allow-empty="true" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="requirementMethodEnumId">
            <drop-down allow-empty="true">
                <entity-options entity-name="Enumeration" key-field-name="enumId" description="${description}">
                    <entity-constraint name="enumTypeId" value="PROD_REQ_METHOD"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>

        <!--
        <field name="useQuickAdd" title="${uiLabelMap.ProductUseQuickAdd}">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        -->
        <field name="defaultCurrencyUomId">
            <drop-down allow-empty="false" no-current-selected-key="${defaultOrganizationPartyCurrencyUomId}">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="defaultSalesChannelEnumId">
            <drop-down allow-empty="true">
                <entity-options key-field-name="enumId" description="${description}" entity-name="Enumeration">
                    <entity-constraint name="enumTypeId" operator="equals" value="ORDER_SALES_CHANNEL"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="allowPassword">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="retryFailedAuths">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="headerApprovedStatus">
            <drop-down no-current-selected-key="ORDER_APPROVED">
                <entity-options entity-name="StatusItem" key-field-name="statusId" description="${description} [${statusCode}]">
                    <entity-constraint name="statusTypeId" value="ORDER_STATUS"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="itemApprovedStatus">
            <drop-down no-current-selected-key="ITEM_APPROVED">
                <entity-options entity-name="StatusItem" key-field-name="statusId" description="${description} [${statusCode}]">
                    <entity-constraint name="statusTypeId" value="ORDER_ITEM_STATUS"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="digitalItemApprovedStatus">
            <drop-down no-current-selected-key="ITEM_APPROVED">
                <entity-options entity-name="StatusItem" key-field-name="statusId" description="${description} [${statusCode}]">
                    <entity-constraint name="statusTypeId" value="ORDER_ITEM_STATUS"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="headerDeclinedStatus">
            <drop-down no-current-selected-key="ORDER_REJECTED">
                <entity-options entity-name="StatusItem" key-field-name="statusId" description="${description} [${statusCode}]">
                    <entity-constraint name="statusTypeId" value="ORDER_STATUS"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="itemDeclinedStatus">
            <drop-down no-current-selected-key="ITEM_REJECTED">
                <entity-options entity-name="StatusItem" key-field-name="statusId" description="${description} [${statusCode}]">
                    <entity-constraint name="statusTypeId" value="ORDER_ITEM_STATUS"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="headerCancelStatus">
            <drop-down no-current-selected-key="ORDER_CANCELLED">
                <entity-options entity-name="StatusItem" key-field-name="statusId" description="${description} [${statusCode}]">
                    <entity-constraint name="statusTypeId" value="ORDER_STATUS"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="itemCancelStatus">
            <drop-down no-current-selected-key="ITEM_CANCELLED">
                <entity-options entity-name="StatusItem" key-field-name="statusId" description="${description} [${statusCode}]">
                    <entity-constraint name="statusTypeId" value="ORDER_ITEM_STATUS"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>

        <field name="storeCreditAccountEnumId">
            <drop-down allow-empty="false">
                <entity-options key-field-name="enumId" description="${description}" entity-name="Enumeration">
                    <entity-constraint name="enumTypeId" operator="equals" value="STR_CRDT_ACT"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="oldStyleSheet"><hidden/></field>
        <field name="managedByLot" title="${uiLabelMap.ProductManagedByLot}">
            <drop-down allow-empty="false" no-current-selected-key="N">
                <option key="Y" description="${uiLabelMap.CommonY}"/>
                <option key="N" description="${uiLabelMap.CommonN}"/>
            </drop-down>
        </field>
        <field name="oldHeaderLogo"><hidden/></field>
        <field name="oldHeaderMiddleBackground"><hidden/></field>
        <field name="oldHeaderRightBackground"><hidden/></field>
        <!--
        <field name="contentPathPrefix" tooltip="If specified will be prepended to image and other content paths. Should start with a slash but not end with one."><text size="60" maxlength="250"/></field>
        <field name="templatePathPrefix" tooltip="If specified will be prepended to template paths. Should start with a slash but not end with one."><text size="60" maxlength="250"/></field>
        -->
        <field name="explodeOrderItems">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="checkGcBalance">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="usePrimaryEmailUsername">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="requireCustomerRole">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="showCheckoutGiftOptions">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        
        <field name="showPricesWithVatTax">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="showTaxIsExempt">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="vatTaxAuthGeoId"><lookup target-form-name="LookupGeo"/></field>
        <field name="vatTaxAuthPartyId"><lookup target-form-name="lookupPartyInfo"/></field>
        <field name="prodSearchExcludeVariants">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>

        <field name="enableDigProdUpload">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="digProdUploadCategoryId"><lookup target-form-name="LookupProductCategory"/></field>
        <field name="enableAutoSuggestionList">
            <drop-down allow-empty="false" no-current-selected-key="N"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="autoOrderCcTryExp">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="autoOrderCcTryOtherCards">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="autoOrderCcTryLaterNsf">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="autoApproveInvoice">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="autoApproveOrder">
            <drop-down allow-empty="false" no-current-selected-key="Y"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        
        <field name="setOwnerUponIssuance">
            <drop-down allow-empty="true"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="reqReturnInventoryReceive">
            <drop-down allow-empty="true"><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="orderDecimalQuantity" tooltip="${uiLabelMap.ProductOrderDecimalQuantityExistsToOverride}">
            <drop-down allow-empty="true" ><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-small btn-primary"><submit image-location="icon-ok" button-type="button"/></field>
        <sort-order>
            <field-group style="no-widget-header span6 no-left-margin begin-group-group">
                <sort-field name="productStoreId"/>
                <sort-field name="primaryStoreGroupId"/>
                <sort-field name="storeName"/>
                <sort-field name="title"/>
                <sort-field name="subtitle"/>
                <sort-field name="companyName"/>
                <sort-field name="isDemoStore"/>
                <sort-field name="visualThemeId"/>
            </field-group>
            <field-group title="${uiLabelMap.CommonShipping}" collapsible="true" style="span6 olbius-extra end-group-group">
                <sort-field name="prorateShipping"/>
                <sort-field name="reqShipAddrForDigItems"/>
                <sort-field name="selectPaymentTypePerItem"/>
                <sort-field name="shipIfCaptureFails"/>
                <sort-field name="splitPayPrefPerShpGrp"/>
            </field-group>
            <field-group title="${uiLabelMap.CommonShoppingCart}" collapsible="true" initially-collapsed="true"  style="span6 no-left-margin begin-group-group">
                <sort-field name="viewCartOnAdd"/>
                <sort-field name="autoSaveCart"/>
                <sort-field name="addToCartReplaceUpsell"/>
                <sort-field name="addToCartRemoveIncompat"/>
                <sort-field name="showCheckoutGiftOptions"/>
                <sort-field name="prodSearchExcludeVariants"/>
                <sort-field name="orderDecimalQuantity"/>
            </field-group>
            <field-group title="${uiLabelMap.CommonInventory}" collapsible="true" initially-collapsed="true" style="span6 end-group-group">
                <sort-field name="inventoryFacilityId"/>
                <sort-field name="oneInventoryFacility"/>
                <sort-field name="isImmediatelyFulfilled"/>
                <sort-field name="checkInventory"/>
                <sort-field name="requireInventory"/>
                <sort-field name="requirementMethodEnumId"/>
                <sort-field name="reserveInventory"/>
                <sort-field name="reserveOrderEnumId"/>
                <sort-field name="balanceResOnOrderCreation"/>
                <sort-field name="showOutOfStockProducts"/>   
                <sort-field name="managedByLot"/>
            </field-group>
            <field-group title="${uiLabelMap.CommonPayments}" collapsible="true" initially-collapsed="true"  style="span6 no-left-margin begin-group-group">
                <sort-field name="payToPartyId"/>
                <sort-field name="storeCreditAccountEnumId"/>                
                <sort-field name="manualAuthIsCapture"/>
                <sort-field name="retryFailedAuths"/>
                <sort-field name="daysToCancelNonPay"/>
                <sort-field name="autoOrderCcTryExp"/>
                <sort-field name="autoOrderCcTryOtherCards"/>
                <sort-field name="autoOrderCcTryLaterNsf"/>
                <sort-field name="autoOrderCcTryLaterMax"/>
                <sort-field name="storeCreditValidDays"/>
                <sort-field name="setOwnerUponIssuance"/>
            </field-group>
            <field-group title="${uiLabelMap.CommonOrders}" collapsible="true" initially-collapsed="true" style="span6 end-group-group">
                <sort-field name="orderNumberPrefix"/>
                <sort-field name="defaultSalesChannelEnumId"/>
                <sort-field name="explodeOrderItems"/>
                <sort-field name="checkGcBalance"/>
                <sort-field name="autoInvoiceDigitalItems"/>
                <sort-field name="autoApproveInvoice"/>
                <sort-field name="autoApproveOrder"/>
                <sort-field name="reqReturnInventoryReceive"/>
            </field-group>
            <field-group title="${uiLabelMap.CommonLocalisation}" collapsible="true" initially-collapsed="true" style="span6 no-left-margin begin-group-group">
                <sort-field name="defaultLocaleString"/>
                <sort-field name="defaultCurrencyUomId"/>
            </field-group>
            <field-group title="${uiLabelMap.ProductOrdersStatus}" collapsible="true" initially-collapsed="true" style="span6 end-group-group">
                <sort-field name="headerApprovedStatus"/>
                <sort-field name="itemApprovedStatus"/>
                <sort-field name="digitalItemApprovedStatus"/>
                <sort-field name="headerDeclinedStatus"/>
                <sort-field name="itemDeclinedStatus"/>
                <sort-field name="headerCancelStatus"/>
                <sort-field name="itemCancelStatus"/>
            </field-group>
            <field-group title="${uiLabelMap.CommonMessages}" collapsible="true" initially-collapsed="true" style="span6 no-left-margin begin-group-group">
                <sort-field name="authDeclinedMessage"/>
                <sort-field name="authFraudMessage"/>
                <sort-field name="authErrorMessage"/>
            </field-group>
            <field-group title="${uiLabelMap.CommonTax}" collapsible="true" initially-collapsed="true" style="span6 end-group-group">
                <sort-field name="prorateTaxes"/>
                <sort-field name="showPricesWithVatTax"/>
                <sort-field name="showTaxIsExempt"/>
                <sort-field name="vatTaxAuthGeoId"/>
                <sort-field name="vatTaxAuthPartyId"/>
            </field-group>
            <field-group title="${uiLabelMap.CommonVisitors}" collapsible="true" initially-collapsed="true" style="span6 no-left-margin begin-group-group">
                <sort-field name="autoApproveReviews"/>
                <sort-field name="allowPassword"/>
                <sort-field name="defaultPassword"/>
                <sort-field name="usePrimaryEmailUsername"/>
                <sort-field name="requireCustomerRole"/>
                <sort-field name="enableAutoSuggestionList"/>
            </field-group>
            <field-group title="${uiLabelMap.CommonUpload}" collapsible="true" initially-collapsed="true" style="span6 end-group-group">
                <sort-field name="enableDigProdUpload"/>
                <sort-field name="digProdUploadCategoryId"/>
            </field-group>
            <field-group style="no-widget-header span12 no-left-margin align-center">
            	<sort-field name="submitButton"/>
            	<sort-field name="inventoryFacilityLink"/>
            	
            </field-group>
        </sort-order>
    </form>
    
    
    
    <form name="EditInventoryItem" type="single" target="updateInventoryItem" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <actions>
            <set field="inventoryItemTypeId" from-field="inventoryItem.inventoryItemTypeId"/>
            <set field="productId" from-field="inventoryItem.productId"/>
            <set field="facilityId" from-field="inventoryItem.facilityId"/>
            <set field="locationSeqId" from-field="inventoryItem.locationSeqId"/>
            <set field="statusId" from-field="inventoryItem.statusId"/>
            <entity-one entity-name="FacilityLocation" value-field="facilityLocation">
                <field-map field-name="locationSeqId" from-field="locationSeqId"/>
                <field-map field-name="facilityId" from-field="facilityId"/>
            </entity-one>
        </actions>
        <alt-target use-when="inventoryItemId==null" target="CreateInventoryItem"/>
        <auto-fields-service service-name="updateInventoryItem" map-name="inventoryItem"/>

        <!-- ignored fields -->
        <field name="oldAvailableToPromise"><ignored/></field>
        <field name="oldQuantityOnHand"><ignored/></field>

        <!-- custom formatted fields -->
        <field use-when="inventoryItem!=null" name="inventoryItemId" title="${uiLabelMap.InventoryItemId}"><display/></field>
        <field use-when="inventoryItem==null" name="inventoryItemId" position="1" title="${uiLabelMap.InventoryItemId}"><hidden/></field>
        <field name="inventoryItemTypeId" title="${uiLabelMap.InventoryItemType}">
            <hidden value="NON_SERIAL_INV_ITEM"/>
        </field>
        <field name="productId" required-field="true" title="${uiLabelMap.ProductProductId}" use-when="inventoryItem!=null">
            <display/>
        </field>
        <field name="productId" required-field="true" title="${uiLabelMap.ProductProductId}" use-when="inventoryItem == null">
            <lookup target-form-name="LookupProduct">
            </lookup>
        </field>
        <field name="containerId" title="${uiLabelMap.ContainerId}">
            <lookup target-form-name="LookupContainer">
            </lookup>
        </field>
        <field name="statusId" title="${uiLabelMap.Status}">
            <drop-down allow-empty="true">
                <entity-options entity-name="StatusItem" description="${description}" key-field-name="statusId">
                    <entity-constraint name="statusTypeId" operator="equals" value="INV_NON_SER_STTS"/>
                </entity-options>
                <entity-options entity-name="StatusItem" description="${description}" key-field-name="statusId">
                    <entity-constraint name="statusTypeId" operator="equals" value="INV_SERIALIZED_STTS"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="expireDate" title="${uiLabelMap.ProductExpireDate}" required-field="true">
        	<date-time/>
        </field>
        <field name="facilityId" title="${uiLabelMap.facility}" required-field="true">
            <drop-down allow-empty="false">
                <entity-options entity-name="Facility" description="${facilityName}" key-field-name="facilityId">
                    <entity-order-by field-name="facilityName"/>
                </entity-options>
            </drop-down>
        </field>
        
        <field name="fixedAssetId" title="${uiLabelMap.FixedAssetId}">
        	<lookup target-form-name="LookupFixedAsset">
            </lookup>
        </field>
        <field name="lotId" title="${uiLabelMap.ProductLotId}">
        	<lookup target-form-name="LookupProductLot">
            </lookup>
        </field>
        <field name="uomId" title="${uiLabelMap.ProductUomId}"><hidden/></field>
        <field name="binNumber" title="${uiLabelMap.ProductBinNumber}"><hidden/></field>
        <!-- <field name="binNumber" title="${uiLabelMap.ProductBinNumber}"><text/></field> -->
        <field name="locationSeqId" title="${uiLabelMap.ProductFacilityLocation}">
            <lookup target-form-name="LookupFacilityLocation">
                <sub-hyperlink use-when="locationSeqId!=null" target="EditFacilityLocation" link-style="btn btn-mini btn-info">
                <parameter param-name="facilityId"/>
                <parameter param-name="locationSeqId"/>
            </sub-hyperlink>
            </lookup>
        </field>
        <!-- <field name="locationSeqId" title="${uiLabelMap.ProductFacilityLocation}">
            <hidden/>
        </field> -->
        <field name="currencyUomId" title="${uiLabelMap.currencyUomId}">
            <drop-down allow-empty="true" no-current-selected-key="${defaultOrganizationPartyCurrencyUomId}">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="partyId">
            <hidden/>
        </field>
        <field name="ownerPartyId" title="${uiLabelMap.Owner}">
            <lookup target-form-name="lookupPartyInfo"/>
        </field>
        <field name="unitCost" title="${uiLabelMap.UnitCost}"><text/></field>

        <field name="accountingQuantityTotal" use-when="inventoryItem!=null">
            <hidden/>
        </field>
        <field name="accountingQuantityTotal" use-when="inventoryItem==null">
            <hidden/>
        </field>
        <field name="serialNumber" use-when="inventoryItem!=null">
            <display/>
        </field>
        <field name="serialNumber" use-when="inventoryItem==null">
            <hidden/>
        </field>
        <field name="QOH" use-when="inventoryItem!=null" title="${uiLabelMap.QOHTotal}">
            <display description="${inventoryItem.quantityOnHandTotal}"/>
        </field>
        <field name="QOH" use-when="inventoryItem==null" title="${uiLabelMap.QOHTotal}">
            <hidden/>
        </field>
		 <field name="ATP" use-when="inventoryItem!=null" title="${uiLabelMap.ATPTotal}">
            <display description="${inventoryItem.availableToPromiseTotal}"/>
        </field>
        <field name="ATP" use-when="inventoryItem==null" title="${uiLabelMap.ATPTotal}">
            <hidden/>
        </field>
        <field use-when="inventoryItem!=null" name="submit" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
        <field use-when="inventoryItem==null" name="submit" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
        <field name="softIdentifier"><hidden/></field>
        <field name="activationNumber"><hidden/></field>
        <field name="serialNumber"><hidden/></field>
        <field name="locationSeqId"><hidden/></field>
        <field name="quantity"><hidden/></field>
        <field name="activationValidThru"><hidden/></field>
        <field name="fixedAssetId"><hidden/></field>
        <field name="comments"><hidden/></field>
        <sort-order>
	        <field-group style="no-widget-header span6 no-left-margin">
        	 	<sort-field name="productId"/>
        	 	<sort-field name="inventoryItemId"/>
        	 	<sort-field name="QOH"/>
           		<sort-field name="ATP"/>
	            <sort-field name="facilityId" position="1"/>
	            <sort-field name="ownerPartyId" position="2"/>
	            <sort-field name="statusId" position="3"/>
	            <sort-field name="expireDate" position="4"/>
	        </field-group>
           <field-group style="span6 no-widget-header">
           		<sort-field name="containerId" position="1"/>
	            <sort-field name="binNumber" position="2"/>
	            <sort-field name="lotId" position="3"/>
	            <sort-field name="unitCost" position="4"/>
	            <sort-field name="currencyUomId" position="5"/>
	            <sort-field name="datetimeReceived" position="6"/>
	            <sort-field name="datetimeManufactured" position="7"/>
	            <sort-field name="locationSeqId" position="8"/>
	            <sort-field name="quantity" position="9"/>
           </field-group>
           <field-group style="no-widget-header span12 no-left-margin align-center">
           	<sort-field name="submit"/>
           </field-group>
        </sort-order>
    </form>
    <form name="InventoryItemReservations" type="list" target="" title="" list-name="inventoryItemReservations"
        header-row-style="header-row-2" odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable">
        <auto-fields-entity entity-name="OrderItemShipGrpInvRes" default-field-type="display"/>
        <field name="inventoryItemId"><hidden/></field>
        <field name="orderId"><display/>
        </field>
    </form>
    <form name="CreatePhysicalInventoryAndVariance" type="single" target="createPhysicalInventoryAndVariance" title=""
        default-table-style="basic-table">
        <auto-fields-service service-name="createPhysicalInventoryAndVariance"/>
        <field name="physicalInventoryId"><ignored/></field>
        <field name="physicalInventoryDate"><ignored/></field>
        <field name="partyId"><ignored/></field>
        <field name="generalComments"><ignored/></field>
        <field name="inventoryItemId" map-name="inventoryItem"><hidden/></field>
        <field name="varianceReasonId">
            <drop-down>
                <entity-options entity-name="VarianceReason" description="${description}">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="comments"/>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-primary btn-small"><submit button-type="button" image-location="icon-ok"/></field>
    </form>
    <form name="ViewPhysicalInventoryAndVariance" type="list" target="" title="" list-name="physicalInventoryAndVarianceDatas"
        header-row-style="header-row-2" odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable">
        <auto-fields-entity entity-name="PhysicalInventoryAndVariance" map-name="physicalInventoryAndVariance" default-field-type="display"/>
        <field name="inventoryItemId"><hidden/></field>
        <field name="partyId"><display description="${person.firstName} ${person.lastName} ${partyGroup.groupName} [${physicalInventoryAndVariance.partyId}]"/></field>
        <field name="varianceReasonId"><display description="${varianceReason.description}"/></field>
    </form>
    <form name="LookupContainer" target="LookupContainer" title="" type="single"
        header-row-style="header-row" default-table-style="table table-striped table-bordered table-hover dataTable">
        <field name="containerId" title="${uiLabelMap.ContainerId}"><text-find/></field>
        <field name="facilityId" title="${uiLabelMap.facility}"><text-find/></field>
        <field name="containerTypeId" title="${uiLabelMap.ContainerTypeId}">
            <drop-down allow-empty="true">
                <entity-options entity-name="ContainerType" description="${description}">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="listLookupContainer" list-name="listIt" title="" type="list" paginate-target="LookupContainer"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" view-size="20">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="Container"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="containerId" title="${uiLabelMap.ContainerId}" widget-style="btn btn-mini btn-info" sort-field="true">
            <hyperlink also-hidden="false" target-type="plain" description="${containerId}" target="javascript:set_value('${containerId}')"/>
        </field>
        <field name="facilityId" title="${uiLabelMap.facility}" sort-field="true"><display/></field>
        <field name="containerTypeId" title="${uiLabelMap.ContainerTypeId}" sort-field="true"><display/></field>
        <field name="description" title="${uiLabelMap.CommonDescription}" sort-field="true"><display/></field>
    </form>
    <form name="LookupProductLot" target="LookupProductLot" title="" type="single"
        header-row-style="header-row" default-table-style="table table-striped table-bordered table-hover dataTable">
        <field name="lotId" title="${uiLabelMap.ProductLotId}"><text-find/></field>
        <field name="creationDate" title="${uiLabelMap.CreationDate}"><date-find/></field>
        <field name="quantity" title="${uiLabelMap.Quantity}"><text/></field>
        <field name="expirationDate" title="${uiLabelMap.ExpirationDate}"><date-find/></field>
        <field name="noConditionFind"><hidden value="Y"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="listLookupProductLot" list-name="listIt" title="" type="list" paginate-target="LookupProductLot"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" view-size="20">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="Lot"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <auto-fields-entity entity-name="Lot" default-field-type="display"/>
        <field name="lotId" title="${uiLabelMap.ProductLotId}" widget-style="btn btn-mini btn-info" sort-field="true">
            <hyperlink also-hidden="false" target-type="plain" description="${lotId}" target="javascript:set_value('${lotId}')"/>
        </field>
        <field name="creationDate" title="${uiLabelMap.CreationDate}" sort-field="true"><display/></field>
        <field name="quantity" title="${uiLabelMap.Quantity}" sort-field="true"><display/></field>
        <field name="expirationDate" title="${uiLabelMap.ExpirationDate}" sort-field="true"><display/></field>
    </form>
    <form name="LookupFixedAsset" target="LookupFixedAsset" title="" type="single"
        header-row-style="header-row" default-table-style="table table-striped table-bordered table-hover dataTable">
        <field name="fixedAssetId" title="${uiLabelMap.FixedAssetId}"><text-find/></field>
        <field name="fixedAssetTypeId" title="${uiLabelMap.FixedAssetTypeId}"><date-find/></field>
        <field name="partyId" title="${uiLabelMap.PartyId}"><text/></field>
        <field name="fixedAssetName" title="${uiLabelMap.FixedAssetName}"><date-find/></field>
        <field name="noConditionFind"><hidden value="Y"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="listLookupFixedAsset" list-name="listIt" title="" type="list" paginate-target="LookupFixedAsset"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" view-size="20">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="FixedAsset"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
<!--         <auto-fields-entity entity-name="FixedAsset" default-field-type="display"/> -->
        <field name="fixedAssetId" title="${uiLabelMap.FixedAssetId}" widget-style="btn btn-mini btn-info">
            <hyperlink also-hidden="false" target-type="plain" description="${fixedAssetId}" target="javascript:set_value('${fixedAssetId}')"/>
        </field>
        <field name="fixedAssetTypeId" title="${uiLabelMap.FixedAssetTypeId}" ><display/></field>
        <field name="partyId" title="${uiLabelMap.PartyId}"><display/></field>
        <field name="fixedAssetName" title="${uiLabelMap.FixedAssetName}" ><display/></field>
    </form>
    <form name="Listproducts" list-name="listIt" title="" type="list" paginate-target="getListProducts"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" view-size="20">
		<actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="Product"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
		<field name="productId" title="${uiLabelMap.ProductProductId}">
            <hyperlink also-hidden="false" target-type="plain" description="${productId}" target="EditProduct">
            	<parameter param-name="productId" from-field="productId"/>
            </hyperlink>
        </field>
<!--         <field name="productTypeId" title="${uiLabelMap.ProductTypeId}"><display/></field> -->
<!--         <field name="facilityId" title="${uiLabelMap.facility}"> -->
<!--         	<display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName}"></display-entity> -->
<!--         </field> -->
<!--         <field name="internalName" title="${uiLabelMap.ProductProductName}"><display/></field> -->
        <field name="brandName" title="${uiLabelMap.BrandName}"><display/></field>
        <field name="productName" title="${uiLabelMap.ProductName}"><display/></field>
        <field name="description"><display/></field>
        <field name="quantityUomId" title="${uiLabelMap.QuantityUomId}">
        	<display-entity entity-name="Uom" key-field-name="uomId" description="${description}"></display-entity>
        </field>
<!--         <field name="quantityOnHandTotal"><display/></field> -->
		<field name="weight"><display/></field>
        <field name="weightUomId" title="${uiLabelMap.WeightUomId}">
        	<display-entity entity-name="Uom" key-field-name="uomId" description="${description}"></display-entity>
        </field>
        <field name="createdByUserLogin" title="${uiLabelMap.CreateBy}"><display/></field>
    </form>
    <form name="ListProductConfigPacking" list-name="listProductConfigPacking" title="" type="list" paginate-target="ListProductConfigPacking"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" view-size="20">
        <auto-fields-entity entity-name="ConfigPacking" default-field-type="display"/>
        <field name="createdStamp"><hidden/></field>
        <field name="productId" title="${uiLabelMap.ProductProductName}">
        	<hidden/>
        </field>
        <field name="uomFromId" title="${uiLabelMap.uomFromId}">
        	<display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity>
        </field>
        <field name="uomToId" title="${uiLabelMap.uomToId}">
        	<display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity>
        </field>
        <field name="fromDate" title="${uiLabelMap.AvailableFromDate}"><display/></field>
        <field name="thruDate" title="${uiLabelMap.ExpireDate}"><display/></field>
        <field name="quantityConvert" title="${uiLabelMap.QuantityConvert}"><display/></field>
        <field name="action" title="${uiLabelMap.DelysAction}">
            <hyperlink also-hidden="false" target-type="plain" description="${uiLabelMap.CommonEdit}" target="EditProductConfigPacking">
            	<parameter param-name="productId" from-field="productId"/>
            	<parameter param-name="uomFromId" from-field="uomFromId"/>
            	<parameter param-name="uomToId" from-field="uomToId"/>
            </hyperlink>
        </field>
    </form>
    <form name="DelysCreateProduct" type="single" target="createDelysProduct">
    	<actions>
    		<entity-condition entity-name="PartyRoleDetailAndPartyDetail" list="listSupplier">
    			<condition-expr field-name="roleTypeId" operator="equals" value="SUPPLIER"/>
    		</entity-condition>
    	</actions>
    	<field position="3" name="facilityId" title="${uiLabelMap.facility}">
    		<drop-down>
    			<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
   			</drop-down>
 		</field>
    	<field position="4" name="supplierId" title="${uiLabelMap.accSuppliers}">
    		<drop-down>
    			<list-options key-name="${partyId}" list-name="listSupplier" description="${groupName} ${firstName} ${middleName} ${lastName}"/> 
    		</drop-down> 
    	</field>
    	<field name="productId" title="${uiLabelMap.productId}" use-when="productId != null"><text maxlength="20"/> </field>
    	<field position="1" name="productName" title="${uiLabelMap.ProductName}" required-field="true"><text maxlength="20"/> </field>
    	<field position="5" name="quantityOnHandTotal"><text default-value="0"/> </field>
    	<field name="brandName" position="2" title="${uiLabelMap.BrandName}"><text/></field>
    	<field name="description" position="5" widget-style="withDescriptionTextArea"><textarea/></field>
    	<field position="2" name="productTypeId" title="${uiLabelMap.ProductProductType}">
            <drop-down no-current-selected-key="FINISHED_GOOD">
                <entity-options entity-name="ProductType" description="${description}"> <!-- [${productTypeId}] -->
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field position="3" name="productWeight" title="${uiLabelMap.ProductProductWeight}"><text size="10" maxlength="20" default-value="0"/></field>
        <field position="4" name="weightUomId" title="${uiLabelMap.ProductWeightUnit}">
            <drop-down allow-empty="true" no-current-selected-key="WT_g">
                <entity-options entity-name="Uom" key-field-name="uomId" description="${description} [${abbreviation}]">
                    <entity-constraint name="uomTypeId" value="WEIGHT_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field position="6" name="quantityUomId" title="${uiLabelMap.QuantityUomId}">
            <drop-down no-current-selected-key="DELYS_HOP">
                <entity-options key-field-name="uomId" description="${description}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="PRODUCT_PACKING"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field position="1" name="inventoryItemTypeId" title="${uiLabelMap.InventoryItemType}">
            <drop-down allow-empty="true" no-current-selected-key="GOOD_FOR_SALES">
                <entity-options key-field-name="inventoryItemTypeId" description="${description}" entity-name="InventoryItemType">
                    <entity-constraint name="inventoryItemTypeId" operator="not-equals" value="NON_SERIAL_INV_ITEM"/>
                    <entity-constraint name="inventoryItemTypeId" operator="not-equals" value="SERIALIZED_INV_ITEM"/>
                </entity-options>
            </drop-down>
        </field>
            <field name="submitButton" title="${uiLabelMap.ProductCreateProduct}" widget-style="btn btn-primary btn-small" tooltip-style="tooltipob"><submit image-location="icon-ok" button-type="button"/></field>
        <sort-order>
        	
        	<field-group style="no-widget-header span6 no-left-margin begin-group-group">
        		<sort-field name="productId"/>
        		<sort-field name="productName"/>
        		<sort-field name="brandName"/>
        		<sort-field name="facilityId"/>
        		<sort-field name="supplierId"/>
        		<sort-field name="quantityOnHandTotal"/>
                <sort-field name="quantityUomId"/>
        	</field-group>
        	<field-group style="no-widget-header span4 end-group-group" >
                <sort-field name="inventoryItemTypeId"/>
                <sort-field name="productTypeId"/>
                <sort-field name="productWeight"/>
                <sort-field name="weightUomId"/>
                <sort-field name="description"/>
            </field-group>
            
            <field-group style="no-widget-header span12 no-left-margin align-center">
            	<sort-field name="submitButton"/>
            </field-group>
        </sort-order>
    </form>
    <form name="EditProduct" type="single" target="updateDelysProduct">
    	<actions>
    		<entity-condition entity-name="PartyRoleDetailAndPartyDetail" list="listSupplier">
    			<condition-expr field-name="roleTypeId" operator="equals" value="SUPPLIER"/>
    		</entity-condition>
    		<set field="productId" from-field="product.productId"/>
    		<set field="quantityUomId" from-field="product.quantityUomId"/>
    	</actions>
    	<auto-fields-service service-name="createDelysProduct" map-name="product"/>
    	<field position="1" name="facilityId" title="${uiLabelMap.facility}:" use-when="product == null">
    		<drop-down>
    			<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}:"/>
   			</drop-down>
 		</field>
 		<field name="facilityId" title="${uiLabelMap.facility}:" use-when="product != null">
    		<hidden/>
 		</field>
    	<field name="productId" title="${uiLabelMap.ProductId}:"><display/></field>
    	<field name="productName" required-field="true" title="${uiLabelMap.ProductName}:"><text /> </field>
    	<field name="brandName" title="${uiLabelMap.BrandName}:"><text/></field>
    	<field name="description">
    		<textarea visual-editor-enable="true"
				visual-editor-buttons="formatblock newline bold italic underline left center right number bullet 
 			indent outdent undo redo color hilite rule link image table clean html spellcheck" />
    	</field>
    	
<!--     	<field position="1" name="productTypeId" title="${uiLabelMap.ProductProductType}"> -->
<!--             <drop-down no-current-selected-key="FINISHED_GOOD"> -->
<!--                 <entity-options entity-name="ProductType" description="${description}"> -->
<!--                     <entity-order-by field-name="description"/> -->
<!--                 </entity-options> -->
<!--             </drop-down> -->
<!--         </field> -->
        <field name="productWeight" title="${uiLabelMap.ProductProductWeight}:"><text size="10" maxlength="20" default-value="0"/></field>
        <field name="weightUomId" title="${uiLabelMap.WeightUomId}:">
            <drop-down allow-empty="true" no-current-selected-key="WT_g">
                <entity-options entity-name="Uom" key-field-name="uomId" description="${description} [${abbreviation}]">
                    <entity-constraint name="uomTypeId" value="WEIGHT_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="quantityOnHandTotal"><hidden/></field>
        <field name="quantityUomId" title="${uiLabelMap.QuantityUomId}:" required-field="true" use-when="quantityUomId == null" position="1">
        	<drop-down no-current-selected-key="${product.quantityUomId}:" allow-empty="true">
                <entity-options key-field-name="uomId" description="${description}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="PRODUCT_PACKING"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="quantityUomId" title="${uiLabelMap.QuantityUomId}:" required-field="true" use-when="quantityUomId != null" position="1">
        	<drop-down no-current-selected-key="${product.quantityUomId}">
                <entity-options key-field-name="uomId" description="${description}" entity-name="Uom">
                    <entity-constraint name="uomId" operator="equals" value="${product.quantityUomId}"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="inventoryItemTypeId"><hidden/></field>
        <field name="supplierId" title="${uiLabelMap.Supplier}:" required-field="false">
        	<display default-value="${supplierId}"></display>
<!--         	<display-entity key-field-name="partyId" entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}"> -->
<!--             </display-entity> -->
        </field>
        <field name="productTypeId"><hidden/></field>
        <field name="submitButton" title="${uiLabelMap.ProductUpdateProduct}" widget-style="btn btn-primary btn-small" tooltip-style="tooltipob"><submit image-location="icon-ok" button-type="button"/></field>
            
       <field name="lastUpdatedByText" title="${uiLabelMap.ProductLastModifiedBy}:">
            <display description="[${product.lastModifiedByUserLogin}] ${uiLabelMap.CommonOn} ${product.lastModifiedDate}" also-hidden="false"/>
        </field>
        <field name="createdByText" title="${uiLabelMap.CommonCreatedBy}:">
            <display description="[${product.createdByUserLogin}] ${uiLabelMap.CommonOn} ${product.createdDate}" also-hidden="false"/>
        </field>
        <sort-order>
        	<field-group style="no-widget-header span6 no-left-margin begin-group-group">
        		<sort-field name="productId"/>
        		<sort-field name="supplierId"/>
        		<sort-field name="productName" position="1"/>
        		<sort-field name="brandName" position="2"/>
        		<sort-field name="lastUpdatedByText" position="3"/>
        		
        	</field-group>
        	<field-group style="no-widget-header span4 end-group-group" >
        		<sort-field name="quantityUomId"/>
<!--                 <sort-field name="productTypeId" position="2"/> -->
                <sort-field name="productWeight" position="2"/>
                <sort-field name="weightUomId" position="3"/>
                
                <sort-field name="createdByText" position="5"/>
            </field-group>
            <field-group style="no-widget-header span12 no-left-margin">
            	<sort-field name="description"/>
            </field-group>
            <field-group style="no-widget-header span12 no-left-margin align-center">
            	<sort-field name="submitButton"/>
            </field-group>
            
        </sort-order>
    </form>
    
    <form name="ViewProduct" type="single" target="">
    	<actions>
    		<entity-condition entity-name="PartyRoleDetailAndPartyDetail" list="listSupplier">
    			<condition-expr field-name="roleTypeId" operator="equals" value="SUPPLIER"/>
    		</entity-condition>
    		<set field="productId" from-field="product.productId"/>
    		<set field="quantityUomId" from-field="product.quantityUomId"/>
    	</actions>
    	<auto-fields-service service-name="createDelysProduct" map-name="product"/>
    	<field position="1" name="facilityId" title="${uiLabelMap.facility}:" use-when="product == null">
    		<display></display>
 		</field>
 		<field name="facilityId" title="${uiLabelMap.facility}:" use-when="product != null">
    		<hidden/>
 		</field>
    	<field name="productId" title="${uiLabelMap.ProductId}:"><display/></field>
    	<field name="productName" required-field="true" title="${uiLabelMap.ProductName}:"><display /> </field>
    	<field name="brandName" title="${uiLabelMap.BrandName}:"><display/></field>
    	<field name="description">
    		<display></display>
    	</field>
    	
<!--     	<field position="1" name="productTypeId" title="${uiLabelMap.ProductProductType}"> -->
<!--             <drop-down no-current-selected-key="FINISHED_GOOD"> -->
<!--                 <entity-options entity-name="ProductType" description="${description}"> -->
<!--                     <entity-order-by field-name="description"/> -->
<!--                 </entity-options> -->
<!--             </drop-down> -->
<!--         </field> -->
        <field name="productWeight" title="${uiLabelMap.ProductProductWeight}:"><display/></field>
        <field name="weightUomId" title="${uiLabelMap.WeightUomId}:">
            <display></display>
        </field>
        <field name="quantityOnHandTotal"><hidden/></field>
        <field name="quantityUomId" title="${uiLabelMap.QuantityUomId}:" required-field="true" use-when="quantityUomId == null" position="1">
        	<display></display>
        </field>
        <field name="quantityUomId" title="${uiLabelMap.QuantityUomId}:" required-field="true" use-when="quantityUomId != null" position="1">
        	<display></display>
        </field>
        <field name="inventoryItemTypeId"><hidden/></field>
        <field name="supplierId" title="${uiLabelMap.Supplier}:" required-field="false">
        	<display default-value="${supplierId}"></display>
<!--         	<display-entity key-field-name="partyId" entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}"> -->
<!--             </display-entity> -->
        </field>
        <field name="productTypeId"><hidden/></field>
            
       <field name="lastUpdatedByText" title="${uiLabelMap.ProductLastModifiedBy}:">
            <display description="[${product.lastModifiedByUserLogin}] ${uiLabelMap.CommonOn} ${product.lastModifiedDate}" also-hidden="false"/>
        </field>
        <field name="createdByText" title="${uiLabelMap.CommonCreatedBy}:">
            <display description="[${product.createdByUserLogin}] ${uiLabelMap.CommonOn} ${product.createdDate}" also-hidden="false"/>
        </field>
        <sort-order>
        	<field-group style="no-widget-header span6 no-left-margin begin-group-group">
        		<sort-field name="productId"/>
        		<sort-field name="supplierId"/>
        		<sort-field name="productName" position="1"/>
        		<sort-field name="brandName" position="2"/>
        		<sort-field name="lastUpdatedByText" position="3"/>
        		
        	</field-group>
        	<field-group style="no-widget-header span4 end-group-group" >
        		<sort-field name="quantityUomId"/>
<!--                 <sort-field name="productTypeId" position="2"/> -->
                <sort-field name="productWeight" position="2"/>
                <sort-field name="weightUomId" position="3"/>
                
                <sort-field name="createdByText" position="5"/>
            </field-group>
            <field-group style="no-widget-header span12 no-left-margin">
            	<sort-field name="description"/>
            </field-group>
            
        </sort-order>
    </form>
    <form name="EditProductConfigPacking" type="single" target="UpdateProductConfigPacking">
    	<actions>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getListQuantityUom.groovy"/>
    		<set field="listUoms" value="${listUoms}" type="List"/>
    		<set field="listPrUoms" value="${listPrUoms}" type="List"/>
    	</actions>
    	<auto-fields-entity entity-name="ConfigPacking" map-name="productConfigPacking"/>
    	<field name="productId"><hidden/></field>
    	<field name="quantityUomId"><hidden value="${product.quantityUomId}"/></field>
    	<field name="lastUpdatedStamp"><hidden/></field>
    	<field name="lastUpdatedTxStamp"><hidden/></field>
    	<field name="createdStamp"><hidden/></field>
    	<field name="createdTxStamp"><hidden/></field>
    	
    	<field name="fromDate" title="${uiLabelMap.AvailableFromDate}"><date-time default-value="${groovy: org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/></field>
    	<field name="thruDate" title="${uiLabelMap.ExpireDate}"><date-time/></field>
    	<field position="1" name="uomFromId" title="${uiLabelMap.uomFromId}" use-when="productConfigPacking == null &amp;&amp; !listPrUoms.isEmpty()">
            <drop-down allow-empty="false">
               	<list-options key-name="uomId" list-name="listPrUoms" description="${description}"/>
           	</drop-down>
        </field>
        <field name="uomFromId" title="${uiLabelMap.uomFromId}" use-when="productConfigPacking == null &amp;&amp; listPrUoms.isEmpty()">
        	<hyperlink target="createNewUomPacking" description="${uiLabelMap.CommonCreateNew}">
        		<parameter param-name="productId" from-field="productId"/>
        	</hyperlink>
        </field>
        <field name="uomFromId" title="${uiLabelMap.uomFromId}" use-when="productConfigPacking != null"><display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity>
        </field>
        <field position="1" name="uomToId" title="${uiLabelMap.uomToId}" use-when="productConfigPacking == null &amp;&amp; listPrUoms.isEmpty()">
            <drop-down allow-empty="false" no-current-selected-key="${product.quantityUomId}">
                <list-options key-name="uomId" list-name="listUoms" description="${description}"/>
            </drop-down>
        </field>
        <field position="2" name="uomToId" title="${uiLabelMap.uomToId}" use-when="productConfigPacking == null &amp;&amp; !listPrUoms.isEmpty()">
            <drop-down allow-empty="false" no-current-selected-key="${product.quantityUomId}">
                <list-options key-name="uomId" list-name="listUoms" description="${description}"/>
            </drop-down>
        </field>
        <field name="uomToId" title="${uiLabelMap.uomToId}" use-when="productConfigPacking == null &amp;&amp; isEmpty == null">
            <drop-down allow-empty="false" no-current-selected-key="${product.quantityUomId}">
                <list-options key-name="uomId" list-name="listUoms" description="${description}"/>
            </drop-down>
        </field>
        <field name="quantityConvertTmp"><hidden/></field>
        <field name="quantityConvert" title="${uiLabelMap.QuantityConvert}" required-field="true" use-when="productConfigPacking == null &amp;&amp; !listPrUoms.isEmpty()" position="3"><text/></field>
        <field name="quantityConvert" title="${uiLabelMap.QuantityConvert}" required-field="true" use-when="productConfigPacking == null &amp;&amp; listPrUoms.isEmpty()" position="2"><text/></field>
        <field name="quantityConvert" title="${uiLabelMap.QuantityConvert}" required-field="true" use-when="productConfigPacking != null"><text default-value="${productConfigPacking.quantityConvert}"/></field>
        <field name="uomToId" title="${uiLabelMap.uomToId}" use-when="productConfigPacking != null"><display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity>
        </field>
    	<field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-primary btn-small" tooltip-style="tooltipob" use-when="productConfigPacking != null"><submit image-location="icon-ok" button-type="button"/></field>
    	<field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-primary btn-small" tooltip-style="tooltipob" use-when="productConfigPacking == null"><submit image-location="icon-ok" button-type="button"/></field>
    	<sort-order>
        	<field-group style="no-widget-header span6 no-left-margin begin-group-group">
        		<sort-field name="uomFromId"/>
        		<sort-field name="uomToId"/>
        		<sort-field name="quantityConvert"/>
        	</field-group>
        	<field-group style="no-widget-header span6 end-group-group" >
                <sort-field name="description" position="1"/>
                <sort-field name="fromDate" position="2"/>
                <sort-field name="thruDate" position="3"/>
            </field-group>
            <field-group style="no-widget-header span12 no-left-margin align-center">
            	<sort-field name="submitButton"/>
            </field-group>
        </sort-order>
    </form>
    <form name="ListProductSuppliers" type="list" list-name="listSuppliers" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<actions>
    	</actions>
    	<field name="productId" title="${uiLabelMap.productId}"><display></display></field>
    	<field name="partyId">
    		<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}">
            </display-entity>
    	</field> 
    	<field name="supplierProductId" title="${uiLabelMap.Supplier}"><display/></field>
    	<field name="supplierProductName"><display/></field>
    	<field name="availableFromDate"><display/></field>
    	<field name="availableThruDate"><display/></field>
    	<field name="minimumOrderQuantity"><display/></field>
    	<field name="orderQtyIncrements"><display/></field>
    	<field name="agreementId"><display/></field>
    	<field name="lastPrice"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="currencyUomId"><display/></field>
    	<field name="shippingPrice"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="Edit" title="${uiLabelMap.CommonEdit}">
    		<hyperlink target="editSupplierProduct" description="${uiLabelMap.CommonEdit}">
                <parameter param-name="productId"/>
                <parameter param-name="partyId"/>
                <parameter param-name="currencyUomId"/>
                <parameter param-name="minimumOrderQuantity"/>
                <parameter param-name="availableFromDate"/>
    		</hyperlink>
    	</field>	
    	<field name="action" title="${uiLabelMap.CommonDelete}">
    		<hyperlink target="DeleteSupplierProduct" description="${uiLabelMap.CommonDelete}">
                <parameter param-name="productId"/>
                <parameter param-name="partyId"/>
                <parameter param-name="currencyUomId"/>
                <parameter param-name="minimumOrderQuantity"/>
                <parameter param-name="availableFromDate"/>
    		</hyperlink>
    	</field>	
    </form>
    <form name="EditProductSuppliers" type="single" target="updateSupplierProduct" default-map-name="supplierProduct">
<!--     	<auto-fields-entity entity-name="SupplierProduct" map-name="supplierProduct"/> -->
		<alt-target use-when="supplierProduct==null" target="createSupplierProduct"/>
        <auto-fields-service service-name="updateSupplierProduct" map-name=""/>
        <!-- productId, partyId, and availableFromDate, minimumOrderQuantity, currencyUomId are primary keys of SupplierProduct and should not be updatable, so we use use-when to change the behavior of the form
        if there is a SupplierProduct value available.  productId is always hidden (assuming it exists) so this is not an issue -->
        <field name="productId"><hidden value="${productId}"/></field>
        <field name="partyId" title="${uiLabelMap.ProductSupplier}" use-when="supplierProduct!=null">
            <display-entity entity-name="PartyNameView" description="${firstName} ${middleName} ${lastName} ${groupName}"/>
        </field>
        <field name="partyId" title="${uiLabelMap.ProductSupplier}" use-when="supplierProduct==null" position="1">
            <drop-down allow-empty="false">
                <entity-options entity-name="PartyRoleAndPartyDetail" description="${groupName} ${firstName} ${lastName} [${partyId}]">
                    <entity-constraint name="roleTypeId" value="SUPPLIER"/>
                    <entity-order-by field-name="groupName"/>
                    <entity-order-by field-name="firstName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="availableFromDate" use-when="supplierProduct==null" position="2" title="${uiLabelMap.AvailableFromDate}" required-field="true">
            <date-time default-value="${groovy: org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
        </field>
        <field name="availableFromDate" use-when="supplierProduct!=null" title="${uiLabelMap.AvailableFromDate}">
            <display/>
        </field>
        <field name="availableThruDate" use-when="supplierProduct == null" position="3" title="${uiLabelMap.AvailableThruDate}">
            <date-time/>
        </field>
        <field name="availableThruDate" use-when="supplierProduct != null &amp;&amp; supplierProduct.get(&quot;availableThruDate&quot;) ==null" position="3" title="${uiLabelMap.AvailableThruDate}">
            <date-time/>
        </field>
        <field name="availableThruDate" use-when="supplierProduct != null &amp;&amp; supplierProduct.get(&quot;availableThruDate&quot;) !=null" position="1">
            <display/>
        </field>
        <field name="minimumOrderQuantity" use-when="supplierProduct==null" position="4" required-field="true">
            <text default-value="0" size="5"/>
        </field>
        <field name="minimumOrderQuantity" use-when="supplierProduct!=null" position="2">
            <display/>
        </field>
        <field name="agreementId" use-when="supplierProduct == null" title="${uiLabelMap.AgreementId}" position="5">
<!--             <drop-down> -->
<!--             	<entity-options description="${contractName}" entity-name="ShippingContract" > -->
<!--             	</entity-options> -->
<!--             </drop-down> -->
			<text/>
        </field>
        <field name="agreementId" use-when="supplierProduct != null &amp;&amp; supplierProduct.get(&quot;agreementId&quot;) == null" title="${uiLabelMap.AgreementId}" position="4">
            <text/>
        </field>
        <field name="agreementId" use-when="supplierProduct != null &amp;&amp; supplierProduct.get(&quot;agreementId&quot;) != null" position="3" title="${uiLabelMap.AgreementId}">
            <display/>
        </field>
        <field name="currencyUomId" title="${uiLabelMap.ProductCurrencyUomId}" use-when="supplierProduct==null" position="1">
            <drop-down allow-empty="false" no-current-selected-key="${defaultOrganizationPartyCurrencyUomId}">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="currencyUomId" title="${uiLabelMap.ProductCurrencyUomId}" use-when="supplierProduct!=null">
            <display-entity entity-name="Uom" key-field-name="uomId"/>
        </field>
        <field name="quantityUomId" title="${uiLabelMap.ProductQuantityUomId}">
            <drop-down allow-empty="true">
                <entity-options entity-name="UomAndType" key-field-name="uomId" description="${typeDescription}: ${description} (${abbreviation})">
                    <entity-constraint name="uomTypeId" operator="not-equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="typeDescription"/>
                    <entity-order-by field-name="uomId"/>
                </entity-options>
            </drop-down>
        </field>
		<field name="comments" title="${uiLabelMap.description}"></field>
        <field name="standardLeadTimeDays"><hidden/></field>
        <field name="quantityUomId"><hidden/></field>
        <field name="unitsIncluded"><hidden/></field>
        <field name="agreementItemSeqId"><hidden/></field>
        <field use-when="supplierProduct == null" name="submitButton" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-small btn-primary"><submit image-location="icon-ok" button-type="button"/></field>
        <field use-when="supplierProduct != null" name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-small btn-primary"><submit image-location="icon-ok" button-type="button"/></field>
        <field name="supplierPrefOrderId"><hidden/>
<!--             <drop-down allow-empty="true" no-current-selected-key="10_MAIN_SUPPL"> -->
<!--                 <entity-options entity-name="SupplierPrefOrder" key-field-name="supplierPrefOrderId" description="${description}"> -->
<!--                     <entity-order-by field-name="supplierPrefOrderId"/> -->
<!--                 </entity-options> -->
<!--             </drop-down> -->
        </field>
        <field name="supplierRatingTypeId"><hidden/>
<!--             <drop-down allow-empty="true"> -->
<!--                 <entity-options entity-name="SupplierRatingType" key-field-name="supplierRatingTypeId" description="${description}"> -->
<!--                     <entity-order-by field-name="description"/> -->
<!--                 </entity-options> -->
<!--             </drop-down> -->
        </field>
        <field name="canDropShip" title="${uiLabelMap.ProductSupplierCanDropShip}"><hidden/>
<!--             <drop-down allow-empty="false" no-current-selected-key="N"> -->
<!--                 <option key="Y" description="${uiLabelMap.CommonY}"/> -->
<!--                 <option key="N" description="${uiLabelMap.CommonN}"/> -->
<!--             </drop-down> -->
        </field>
        <field name="lastPrice" required-field="true"><text default-value="${supplierProduct.lastPrice}"/></field>
        <field name="supplierProductId" required-field="true" position="5" use-when="supplierProduct == null" ><text/></field>
        <field name="supplierProductId" required-field="true" position="4" use-when="supplierProduct != null" ><display/></field>
        <field name="orderQtyIncrements"><hidden/></field>
    	<sort-order>
    		<field-group style="no-widget-header no-left-margin span6">
    			<sort-field name="productId"/>
    			<sort-field name="partyId"/>
    			<sort-field name="availableFromDate"/>
    			<sort-field name="availableThruDate"/>
    			<sort-field name="agreementId"/>
    			<sort-field name="supplierProductId"/>
    			<sort-field name="minimumOrderQuantity"/>
<!--     			<sort-field name="supplierPrefOrderId"/> -->
<!--     			<sort-field name="supplierRatingTypeId"/> -->
<!--     			<sort-field name="quantityUomId"/> -->
<!--     			<sort-field name="unitsIncluded"/> -->
    		</field-group>
    		<field-group style="no-widget-header span6">
<!--     			<sort-field name="standardLeadTimeDays"/> -->
<!--     			<sort-field name="orderQtyIncrements" position="1"/> -->
    			
<!--     			<sort-field name="agreementItemSeqId"/> -->
				<sort-field name="currencyUomId"/>
    			<sort-field name="lastPrice" position="2"/>
    			<sort-field name="shippingPrice" position="3"/>
    			<sort-field name="supplierProductName" position="4"/>
<!--     			<sort-field name="canDropShip"/> -->
    			<sort-field name="comments" position="6"/>
    		</field-group>
    		  <field-group style="no-widget-header span12 no-left-margin align-center">
            	<sort-field name="submitButton"/>
            </field-group>
    	</sort-order>
    </form>
    <form name="ListDelivery" type="multi" target="deliveredDelivery" list-name="listDelivery" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<row-actions>
    		<entity-one entity-name="OrderHeader" value-field="OH">
    			<field-map field-name="orderId" value="${orderId}"/>
    		</entity-one>
    	</row-actions>
    	<field name="deliveryId" title="${uiLabelMap.DeliveryId}">
    		<hyperlink target="EditDelivery" description="${deliveryId}">
    			<parameter param-name="deliveryId" from-field="deliveryId"/>
    			<parameter param-name="orderId" from-field="orderId"/>
                <parameter param-name="partyId" from-field="partyId"/>
    		</hyperlink>
    	</field>
    	<field name="statusId" title="${uiLabelMap.Status}">
    		<display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity>
    	</field>
    	<field name="newStatusId"><hidden value="DLV_DELIVERED"/></field>
    	<field name="partyId" title="${uiLabelMap.Receiver}">
    		<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}">
            </display-entity>
       	</field>
       	<field name="contactMechId" title="${uiLabelMap.address}">
    		<display-entity entity-name="PostalAddress" description="${address1}" key-field-name="contactMechId"> 
   			</display-entity>
   		</field>
    	<field name="orderId" title="${uiLabelMap.OrderId}"><display/></field>
    	<field name="shipmentId" title="${uiLabelMap.ShipmentId}"><hidden/></field>
    	<field name="productStoreId" title="${uiLabelMap.productStore}"><display-entity entity-name="ProductStore" key-field-name="productStoreId" description="${storeName}"></display-entity></field>
    	<field name="originFacilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName}"></display-entity></field>
    	<field name="orderItemTypeId" title="${uiLabelMap.DeliveryReason}">
			<display-entity entity-name="OrderItemType" description="${description}" key-field-name="orderItemTypeId">
			</display-entity>    	
    	</field>
    	<field name="orderDate" title="${uiLabelMap.OrderDate}"><display default-value="${OH.orderDate}"></display></field>
    	<field name="createDate" title="${uiLabelMap.createDate}"><display/></field>
    	<field name="deliveryDate" title="${uiLabelMap.deliveryDate}"><display/></field>
    	<field name="totalAmount"><display currency="${OH.currencyUom}" type="currency"/></field>
    	<field name="no" title="${uiLabelMap.noNumber}"><display/></field>
    	
    	<field name="Detail" title="${uiLabelMap.CommonDetail}">
    		<hyperlink target="getDetailDelivery" description="${uiLabelMap.CommonDetail}">
                <parameter param-name="deliveryId" from-field="deliveryId"/>
                <parameter param-name="orderId" from-field="orderId"/>
                <parameter param-name="partyId" from-field="partyId"/>
    		</hyperlink>
    	</field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check all-checked="true" /></field>
        <field name="deliveredButton" title="${uiLabelMap.Delivered}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>	
    </form>
    <form name="EditDelivery" type="single" target="updateDelivery" default-map-name="delivery">
		<actions>
			<entity-condition entity-name="OrderShipment" list="listOrders">
				<condition-expr field-name="shipmentId" from-field="shipmentId"/>
			</entity-condition>
            <script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getOrderToCreateDelivery.groovy"/>
			<set field="listOrdersToAdd" value="${listOrders}" type="List"/>
			<set field="listOrderItemTypes" value="${listOrderItemTypes}" type="List"/>
		</actions>
		<alt-target use-when="orderId == null" target="prepareCreateDelivery"/>
		<field name="shipmentId"><hidden value="${shipmentId}"/></field>
		<field name="deliveryId" use-when="delivery != null" title="${uiLabelMap.DeliveryId}"><display/></field>
		<field name="deliveryId" use-when="delivery == null"><hidden/></field>
    	<field name="productStoreId" use-when="orderId != null" title="${uiLabelMap.productStore}">
    		<drop-down no-current-selected-key="${orderHeader.productStoreId}">
    			<entity-options description="${storeName}" entity-name="ProductStore">
    				<entity-constraint name="productStoreId" operator="equals" value="${orderHeader.productStoreId}"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="originFacilityId" use-when="orderId != null" title="${uiLabelMap.facility}">
    		<drop-down no-current-selected-key="${orderHeader.originFacilityId}">
    			<entity-options description="${facilityName}" entity-name="Facility" key-field-name="facilityId">
    				<entity-constraint name="facilityId" operator="equals" value="${orderHeader.originFacilityId}"/>
    			</entity-options>
    		</drop-down>	
		</field>
    	<field name="partyId" title="${uiLabelMap.Receiver}" use-when="orderId != null">
    		<drop-down allow-empty="false" current="selected">
    			<entity-options description="${firstName} ${middleName} ${lastName} ${groupName} ${groupNameLocal} [${partyId}]" entity-name="OrderRoleAndPartyNameView" key-field-name="partyId">
    				<entity-constraint name="orderId" operator="equals" value="${orderId}"/>
    				<entity-constraint name="roleTypeId" operator="equals" value="BILL_TO_CUSTOMER"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="contactMechId" title="${uiLabelMap.customerAddress}" use-when="orderId != null">
        	<drop-down>
       			<entity-options description="${address1}" entity-name="OrderContacMechPostalAddress" key-field-name="contactMechId">
        			<entity-constraint name="orderId" operator="equals" value="${orderId}"/>
        		</entity-options>
        	</drop-down>
        </field>
    	<field name="orderItemTypeId" title="${uiLabelMap.DeliveryReason}" use-when="delivery != null &amp;&amp; orderId != null">
    		<drop-down>
    			<entity-options description="${description}" entity-name="OrderItemType" key-field-name="orderItemTypeId">
    				<entity-constraint name="orderItemTypeId" operator="equals" value="${delivery.orderItemTypeId}"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="orderItemTypeId" title="${uiLabelMap.DeliveryReason}" use-when="delivery == null &amp;&amp; orderId != null" tooltip="">
    		<drop-down>
    			<entity-options description="${description}" entity-name="OrderItemType" key-field-name="orderItemTypeId">
    				<entity-constraint name="orderItemTypeId" operator="in" env-name="listOrderItemTypes"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="totalAmount" use-when="delivery != null"><display currency="${orderHeader.currencyUom}" type="currency"/></field>
    	
    	<field name="currencyUomId" use-when="orderId != null" title="${uiLabelMap.currencyUomId}">
    		<hidden value="${orderHeader.currencyUom}"/>
    	</field>
    	<field name="orderId" title="${uiLabelMap.OrderId}"><display default-value="${orderHeader.orderId}"></display></field>
    	<field name="orderId" title="${uiLabelMap.OrderId}" use-when="orderId == null">
    		<drop-down allow-empty="false">
    			<list-options key-name="orderId" list-name="listOrdersToAdd" description="${orderId}"/>
    		</drop-down>
    	</field>
    	<field name="statusId" title="${uiLabelMap.statusId}" use-when="delivery != null" position="7">
    		<drop-down no-current-selected-key="${delivery.statusId}">
    			<entity-options description="${description}" entity-name="StatusItem">
    				<entity-constraint name="statusTypeId" operator="equals" value="DELIVERY_STATUS"/>
    				<entity-order-by field-name="description"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="statusId" title="${uiLabelMap.statusId}" use-when="delivery == null">
    		<hidden value="DLV_CREATED"/>
    	</field>
    	<field name="orderDateDisplay" title="${uiLabelMap.OrderDate}" use-when="orderId != null"><display default-value="${orderHeader.orderDate}"></display></field>
    	<field name="createDate" title="${uiLabelMap.createDate}" use-when="orderId != null"><date-time default-value="${groovy: org.ofbiz.base.util.UtilDateTime.nowTimestamp()}" type="timestamp"/></field>
    	<field name="deliveryDate" title="${uiLabelMap.deliveryDate}" use-when="orderId != null" required-field="true"><date-time default-value="${delivery.deliveryDate}"/></field>
    	<field use-when="delivery == null" name="submitButton" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-small btn-primary"><submit image-location="icon-ok" button-type="button"/></field>
        <field use-when="delivery != null" name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-small btn-primary"><submit image-location="icon-ok" button-type="button"/></field>
        <field name="no" title="${uiLabelMap.noNumber}" use-when="orderId != null"><text default-value="${delivery.no}"/></field>
    	<sort-order>
    		<field-group style="no-widget-header span6 no-left-margin begin-group-group">
    			<sort-field name="deliveryId"/>
    			<sort-field name="orderId"/>
    			<sort-field name="orderDateDisplay"/>
        		<sort-field name="totalAmount"/>
        		<sort-field name="currencyUomId"/>
        		<sort-field name="orderItemTypeId" position="1"/>
        		<sort-field name="partyId" position="2"/>
        		<sort-field name="contactMechId" position="3"/>
        	</field-group>
        	<field-group style="no-widget-header span6 end-group-group">
				<sort-field name="statusId" position="1"/>
        		<sort-field name="productStoreId" position="2"/>
        		<sort-field name="originFacilityId" position="3"/>
				<sort-field name="createDate" position="4"/>
        		<sort-field name="deliveryDate" position="5"/>
        		<sort-field name="no" position="6"/>
        		
        	</field-group>
        	<field-group style="no-widget-header span12 no-left-margin align-center">
        		<sort-field name="submitButton"/>
        	</field-group>
   		</sort-order>
    </form>
    <form name="DetailDeliveryInfo" type="single" list-name="listContacts">
    	<actions>
    		<entity-one entity-name="PostalAddress" value-field="address">
    			<field-map field-name="contactMechId" value="${delivery.contactMechId}"/>
    		</entity-one>
    		<entity-one entity-name="ProductStore" value-field="productStore">
    			<field-map field-name="productStoreId" value="${delivery.productStoreId}"/>
    		</entity-one>
    		<entity-one entity-name="Facility" value-field="facility">
    			<field-map field-name="facilityId" value="${delivery.originFacilityId}"/>
    		</entity-one>
    	</actions>
    	<field name="partyId" title="${uiLabelMap.Receiver}"><display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}">
            </display-entity>
        </field>
        <field name="contactMechId" title="${uiLabelMap.customerAddress}"><display default-value="${address.address1}"/></field>
       	<field name="shipmentId" title="${uiLabelMap.ShipmentId}" use-when="shipmentId != null"><display/></field>
       	<field name="deliveryId" title="${uiLabelMap.DeliveryId}"><display/></field>
        <field name="no" title="${uiLabelMap.noNumber}"><display default-value="${delivery.no}"/></field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}" use-when="requirementId != null"><hidden/></field>
        <field name="orderDate" title="${uiLabelMap.OrderDate}" use-when="orderId != null"><display default-value="${delivery.orderDate}"/></field>
        <field name="deliveryDate" title="${uiLabelMap.deliveryDate}"><display default-value="${delivery.deliveryDate}"/></field>
        <field name="productStoreId" title="${uiLabelMap.productStore}"><display default-value="${productStore.storeName}"/></field>
        <field name="facilityId" title="${uiLabelMap.facility}"><display default-value="${facility.facilityName}"/></field>
        <field name="orderId" title="${uiLabelMap.OrderId}" use-when="orderId != null"><display/></field>
        <field name="requirementId" title="${uiLabelMap.RequirementId}" use-when="requirementId != null"><hidden/></field>
        <field name="totalPriceVAT" title="${uiLabelMap.totalPrice}"><display type="currency" currency="${currencyUomId}"/></field>
        <field name="totalOrderAmount" title="${uiLabelMap.totalAmount} ${uiLabelMap.afterVAT}"><display type="currency" currency="${currencyUomId}"/></field>
        <field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
        	<display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity>
        </field>
        <sort-order>
   			<field-group style="no-widget-header no-left-margin span6">
   				<sort-field name="deliveryId"/>
   				<sort-field name="orderId"/>
   				<sort-field name="no"/>
   				<sort-field name="partyId"/>
   				<sort-field name="contactMechId"/>
				<sort-field name="shipmentId"/>
   				<sort-field name="requirementStartDate"/>	
   			</field-group>
   			<field-group style="no-widget-header span6">
   				<sort-field name="orderDate"/>
   				<sort-field name="deliveryDate"/>
   				<sort-field name="productStoreId"/>
   				<sort-field name="facilityId"/>
   				<sort-field name="totalOrderAmount"/>
   				<sort-field name="totalPriceVAT"/>
   				<sort-field name="currencyUomId"/>
   				<sort-field name="statusId"/>
   			</field-group>
   			</sort-order>
    </form>
    <form name="OrderDetails" type="list" list-name="listItems" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<actions>
    	</actions>
    	<row-actions>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/CaculateItemAmount.groovy"/>
    		<set field="totalPrice" value="${totalAmount}"/>
    	</row-actions>
    	<field name="orderId" title="${uiLabelMap.OrderId}"><hidden/></field>
    	<field name="orderItemSeqId"><hidden/></field>
    	<field name="productId" title="${uiLabelMap.ProductProductId}"><display/></field>
    	<field name="prodCatalogId"><display/></field>
    	<field name="productCategoryId"><hidden/></field>
    	<field name="orderItemTypeId" title="${uiLabelMap.OrderItemType}"><display-entity entity-name="OrderItemType" description="${description}"></display-entity></field>
    	<field name="quantity"><display/></field>
    	<field name="quantityUomId"><display/></field>
    	<field name="shipBeforeDate"><hidden/></field>
    	<field name="shipAfterDate"><hidden/></field>
    	<field name="unitPrice" title="${uiLabelMap.unitPrice} ${uiLabelMap.beforeVAT}"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="unitPriceVAT" title="${uiLabelMap.unitPrice} ${uiLabelMap.afterVAT}"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="diffPrice" title="${uiLabelMap.diffPrice}"><display default-value="${diffPrice}" type="currency" currency="${currencyUomId}"/></field>
    	<field name="totalPrice" title="${uiLabelMap.totalPrice}"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="taxPercentage"><display/></field>
    	<field name="totalPriceVAT" title="${uiLabelMap.totalPrice} ${uiLabelMap.afterVAT}"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="currencyUomId"><display/></field>
    	<field name="comments" title="${uiLabelMap.comment}"><display/></field>
    </form>
    <form name="ListProductPrice" type="list" default-map-name="listProductPrice" list-name="listProductPrice" default-table-style="table table-striped table-bordered table-hover dataTable">
<!--     	<auto-fields-service service-name="updateProductPrice" map-name="listProductPrice"/> -->
    	<field name="productId"><hidden/></field>
        <field name="productPriceTypeId" title="${uiLabelMap.ProductPriceType}"><display-entity entity-name="ProductPriceType"/></field>
        <field name="productPricePurposeId" title="${uiLabelMap.CommonPurpose}"><display-entity entity-name="ProductPricePurpose"/></field>
        <field name="currencyUomId" title="${uiLabelMap.ProductCurrency}" ><display-entity entity-name="Uom" key-field-name="uomId" description="${description} [${uomId}]"/></field>
        <field name="productStoreGroupId" title="${uiLabelMap.ProductProductStoreGroup}"><display-entity entity-name="ProductStoreGroup" description="${productStoreGroupName}"/></field>
        <field name="fromDate" title="${uiLabelMap.CommonFromDateTime}"><display/></field>

    </form>
    <form name="UpdateProductPrice" type="list" target="createProductPrice" title="" list-name="productPrices"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable">
        <alt-target use-when="productPrice != null" target="updateProductPrice"/>
        <auto-fields-service service-name="updateProductPrice" map-name="productPrice"/>
        <field name="productId"><hidden/></field>
        <field name="productPriceTypeId" title="${uiLabelMap.ProductPriceType}"><display-entity entity-name="ProductPriceType"/></field>
        <field name="productPricePurposeId" title="${uiLabelMap.CommonPurpose}"><display-entity entity-name="ProductPricePurpose"/></field>
        <field name="currencyUomId" title="${uiLabelMap.ProductCurrency}" ><display-entity entity-name="Uom" key-field-name="uomId" description="${description} [${uomId}]"/></field>
        <field name="productStoreGroupId" title="${uiLabelMap.ProductProductStoreGroup}"><display-entity entity-name="ProductStoreGroup" description="${productStoreGroupName}"/></field>
        <field name="fromDate" title="${uiLabelMap.CommonFromDateTime}"><display/></field>

        <field name="termUomId">
            <drop-down allow-empty="true">
                <entity-options entity-name="UomAndType" key-field-name="uomId" description="${typeDescription}: ${description} (${abbreviation})">
                    <entity-constraint name="uomTypeId" operator="not-equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="typeDescription"/>
                    <entity-order-by field-name="uomId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="customPriceCalcService">
            <drop-down allow-empty="true">
                <entity-options entity-name="CustomMethod" key-field-name="customMethodId" description="${description}">
                    <entity-constraint name="customMethodTypeId" operator="equals" value="PRICE_FORMULA"/>
                </entity-options>
            </drop-down>
        </field>

        <field name="lastUpdatedByText" title="${uiLabelMap.ProductLastModifiedBy}:">
            <display description="[${lastModifiedByUserLogin}] ${uiLabelMap.CommonOn} ${lastModifiedDate}" also-hidden="false"/>
        </field>

        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-primary btn-mini"><submit image-location="icon-edit" button-type="button"/></field>

<!--         <field name="viewHistoryLink" title=""> -->
<!--             <hyperlink target="ProductPriceHistory" description="${uiLabelMap.ProductHistory}" also-hidden="false"> -->
<!--                 <parameter param-name="productId"/> -->
<!--                 <parameter param-name="productPriceTypeId"/> -->
<!--                 <parameter param-name="fromDate"/> -->
<!--             </hyperlink> -->
<!--         </field> -->

<!-- 		<field name="Edit" title="${uiLabelMap.CommonEdit}"> -->
<!--             <hyperlink target="EditProductPrice" description="${uiLabelMap.CommonEdit}" also-hidden="false"> -->
<!--                 <parameter param-name="productId"/> -->
<!--                 <parameter param-name="productPriceTypeId"/> -->
<!--                 <parameter param-name="productPricePurposeId"/> -->
<!--                 <parameter param-name="currencyUomId"/> -->
<!--                 <parameter param-name="productStoreGroupId"/> -->
<!--                 <parameter param-name="fromDate"/> -->
<!--             </hyperlink> -->
<!--         </field> -->
        <field name="deleteLink" title="">
            <hyperlink target="deleteProductPrice" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="productId"/><parameter param-name="productPriceTypeId"/><parameter param-name="productPricePurposeId"/>
                <parameter param-name="currencyUomId"/><parameter param-name="productStoreGroupId"/><parameter param-name="fromDate"/>
            </hyperlink>
        </field>
    </form>
    <form name="EditProductPrice" type="single" target="updateProductPrice" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <auto-fields-entity entity-name="ProductPrice" map-name="productPrice"></auto-fields-entity>
        <field name="productId"><hidden/></field>
        <field name="productPriceTypeId" title="${uiLabelMap.ProductPriceType}hioa">
            <drop-down allow-empty="false" no-current-selected-key="DEFAULT_PRICE">
                <entity-options entity-name="ProductPriceType" description="${description}">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="productPricePurposeId" title="${uiLabelMap.CommonPurpose}">
            <drop-down allow-empty="false" no-current-selected-key="PURCHASE">
                <entity-options entity-name="ProductPricePurpose" description="${description}">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="currencyUomId" title="${uiLabelMap.ProductCurrencyUomId}">
            <drop-down allow-empty="false" no-current-selected-key="${defaultOrganizationPartyCurrencyUomId}">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="productStoreGroupId" title="${uiLabelMap.ProductProductStoreGroupId}">
            <drop-down allow-empty="false" no-current-selected-key="_NA_">
                <entity-options entity-name="ProductStoreGroup" description="${productStoreGroupName}">
                    <entity-order-by field-name="productStoreGroupName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="termUomId">
            <drop-down allow-empty="true">
                <entity-options entity-name="UomAndType" key-field-name="uomId" description="${typeDescription}: ${description} (${abbreviation})">
                    <entity-constraint name="uomTypeId" operator="not-equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="typeDescription"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="customPriceCalcService">
            <drop-down allow-empty="true">
                <entity-options entity-name="CustomMethod" key-field-name="customMethodId" description="${description}">
                    <entity-constraint name="customMethodTypeId" operator="equals" value="PRICE_FORMULA"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonEdit}" widget-style="btn btn-primary btn-small" use-when="productPrice != null"><submit image-location="icon-ok" button-type="button"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-primary btn-small" use-when="productPrice == null"><submit image-location="icon-ok" button-type="button"/></field>
   		<field name="priceWithTax"><hidden/></field>
   		<field name="taxAuthCombinedId"><hidden/></field>
   		<field name="createdDate"><hidden/></field>
   		<field name="createdByUserLogin"><hidden/></field>
   		<field name="lastModifiedDate"><hidden/></field>
   		<field name="lastModifiedByUserLogin"><hidden/></field>
   		<field name="priceWithoutTax"><hidden/></field>
   		<sort-order>
   			<field-group style="no-widget-header no-left-margin span6">
   				<sort-field name="productId"/>
   				<sort-field name="productPriceTypeId"/>
   				<sort-field name="productPricePurposeId"/>
   				<sort-field name="currencyUomId"/>
   				<sort-field name="productStoreGroupId"/>
   				<sort-field name="fromDate"/>
   				<sort-field name="thruDate"/>
   				<sort-field name="price"/>
   			</field-group>
   			<field-group style="no-widget-header span6">
   				<sort-field name="termUomId"/>
   				<sort-field name="customPriceCalcService"/>
   				<sort-field name="taxPercentage"/>
   				<sort-field name="taxAuthPartyId"/>
   				<sort-field name="taxAuthGeoId"/>
   				<sort-field name="taxInPrice"/>
   				<sort-field name="taxAmount"/>
   			</field-group>
   			<field-group style="no-widget-header span12 no-left-margin align-center">
   				<sort-field name="submitButton"/>
   			</field-group>
   		</sort-order>
    </form>
    <form name="ListVehicles" type="list" list-name="listIt" paginate-target=""  default-map-name="" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="Vehicle"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
    	<field name="vehicleId" title="${uiLabelMap.vehicleId}">
    		<hyperlink target="EditVehicles" description="${vehicleId}">
    			<parameter param-name="vehicleId"/>
    			<parameter param-name="shipmentMethodTypeId"/>
    		</hyperlink>
   		</field>
   		<field name="vehicleName" title="${uiLabelMap.vehicleName}"><display></display></field>
   		<field name="partyCarrierId" title="${uiLabelMap.Owner}">
   			<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName} [${partyCarrierId}]" key-field-name="partyId">
            </display-entity>
   		</field>
   		<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="VehicleStatus" description="${description}" key-field-name="statusId"></display-entity></field>
   		<field name="shipmentMethodTypeId"><display-entity entity-name="ShipmentMethodType" description="${description}" key-field-name="shipmentMethodTypeId"></display-entity></field>
   		<field name="lengthUomId" title="${uiLabelMap.LengthUom}">
			<display-entity entity-name="Uom" description="${abbreviation} - ${description}" key-field-name="uomId"></display-entity>
		</field>
   		<field name="unitCost" title="${uiLabelMap.UnitCostVehicle}"><display type="currency" currency="${currencyUomId}"/></field>
   		<field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><display/></field>
   		<field name="maxWeight" title="${uiLabelMap.maxWeight}"><display/></field>
   		<field name="minWeight" title="${uiLabelMap.minWeight}"><display/></field>
   		<field name="weightUomId" title="${uiLabelMap.weightUom}">
			<display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity>
		</field>
   		<field name="fromDate"><display/></field>
   		<field name="thruDate"><display/></field>
   		<field name="description"><display/></field>
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}">
            <hyperlink target="deleteVehicle" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="vehicleId"/>
                <parameter param-name="shipmentMethodTypeId"/>
            </hyperlink>
        </field>
    </form>
    <form name="EditVehicles" type="single" target="updateVehicles">
    	<auto-fields-entity entity-name="Vehicle" map-name="Vehicle"/>
    	<field name="vehicleId" use-when="Vehicle != null"><display/></field>
    	<field name="vehicleId" use-when="Vehicle == null"><hidden/></field>
    	<field name="shipmentMethodTypeId">
    		<drop-down no-current-selected-key="${Vehicle.shipmentMethodTypeId}">
    			<entity-options description="${description}" entity-name="ShipmentMethodType" key-field-name="shipmentMethodTypeId"></entity-options>
    		</drop-down>
    	</field>
    	<field name="partyCarrierId">
    		<hidden value="delysvehicle"/>
    	</field>
    	<field name="vehicleName" required-field="true" title="${uiLabelMap.vehicleName}"><text/></field>
    	<field name="maxWeight" title="${uiLabelMap.maxWeight}"><text/></field>
    	<field name="minWeight" title="${uiLabelMap.minWeight}"><text/></field>
    	<field name="unitCost" title="${uiLabelMap.UnitCostVehicle}"><text/></field>
    	<field name="statusId" title="${uiLabelMap.Status}">
    		<drop-down no-current-selected-key="${Vehicle.statusId}">
    			<entity-options description="${description}" entity-name="VehicleStatus"></entity-options>
    		</drop-down>
    	</field>
    	<field name="weightUomId" title="${uiLabelMap.weightUom}">
    		<drop-down no-current-selected-key="${Vehicle.uomId}">
    			<entity-options description="${description}" entity-name="Uom" key-field-name="uomId">
    				<entity-constraint name="uomTypeId" operator="equals" value="WEIGHT_MEASURE"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="lengthUomId" title="${uiLabelMap.LengthUom}">
    		<drop-down no-current-selected-key="${Vehicle.uomId}">
    			<entity-options description="${abbreviation} - ${description}" entity-name="Uom" key-field-name="uomId">
    				<entity-constraint name="uomTypeId" operator="equals" value="LENGTH_MEASURE"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="currencyUomId" title="${uiLabelMap.currencyUomId}">
    		<drop-down no-current-selected-key="${Vehicle.currencyUomId}">
    			<entity-options description="${description}" entity-name="Uom" key-field-name="uomId">
    				<entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="fromDate"><date-time/></field>
    	<field name="thruDate"><date-time/></field>
    	<field name="description"><text/></field>
    	<field name="submitButton" title="${uiLabelMap.CommonEdit}" widget-style="btn btn-primary btn-small" use-when="Vehicle != null"><submit image-location="icon-ok" button-type="button"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-primary btn-small" use-when="Vehicle == null"><submit image-location="icon-ok" button-type="button"/></field>
        <sort-order>
        	<field-group style="no-widget-header no-left-margin span6">
        		<sort-field name="vehicleId"/>
        		<sort-field name="vehicleName" position="1"/>
        		<sort-field name="shipmentMethodTypeId" position="2"/>
        		<sort-field name="statusId" position="3"/>
        		<sort-field name="lengthUomId" position="4"/>
        		<sort-field name="unitCost" position="5"/>
        		<sort-field name="currencyUomId" position="6"/>
        	</field-group>
        	<field-group style="no-widget-header span6 end-group-group">
        		<sort-field name="weightUomId" position="1"/>
        		<sort-field name="maxWeight" position="2"/>
        		<sort-field name="minWeight" position="3"/>
        		<sort-field name="fromDate" position="4"/>
        		<sort-field name="thruDate" position="5"/>
        		<sort-field name="description" position="6"/>
        	</field-group>
        	<field-group style="no-widget-header span12 no-left-margin align-center">
        		<sort-field name="submitButton"/>
        	</field-group>
        </sort-order>
    </form>
    <form name="ListShippingContract" type="list" list-name="listIt" paginate-target=""  default-map-name="" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="ShippingContract"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
    	<field name="contractId" title="${uiLabelMap.contractId}">
    		<hyperlink target="EditShippingContract" description="${contractId}">
    			<parameter param-name="contractId"/>
    		</hyperlink>
   		</field>
   		<field name="contractName" title="${uiLabelMap.contractName}"><display></display></field>
   		<field name="toPartyId" title="${uiLabelMap.toParty}">
 			<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}" key-field-name="partyId">
            </display-entity>
		</field>
   		<field name="toPartyGroupId" title="${uiLabelMap.toPartyGroup}">
   			<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName} [${partyId}]" key-field-name="partyId">
            </display-entity>
   		</field>
   		<field name="toContactMechPhoneId" title="${uiLabelMap.toContactMechPhone}"><display/></field>
   		<field name="toContactMechFaxId" title="${uiLabelMap.toContactMechFax}"><display/></field>
   		<field name="toGeoId" title="${uiLabelMap.toGeo}"><display/></field>
   		<field name="toFinAccountId" title="${uiLabelMap.toFinAccount}"><display/></field>
   		<field name="toTaxCodeId" title="${uiLabelMap.taxCode}"><display/></field>
   		<field name="createdDate" title="${uiLabelMap.createdDate}"><display/></field>
   		<field name="fromDate" title="${uiLabelMap.fromDate}"><display/></field>
   		<field name="thruDate" title="${uiLabelMap.thruDate}"><display/></field>
   		<field name="description"><display/></field>
   		<field name="statusId" title="${uiLabelMap.Status}">
   			<display-entity entity-name="ContractStatus" description="${description}" key-field-name="statusId">
   			</display-entity>
   		</field>
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}">
            <hyperlink target="DeleteShippingContract" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="contractId"/>
            </hyperlink>
        </field>
    </form>
    <form name="EditShippingContract" type="single" target="UpdateShippingContract">
    	<actions>
    		<entity-one entity-name="FinAccount" value-field="fromFinAccount">
    			<field-map field-name="finAccountId" value="${shippingContract.fromFinContractId}"/>
    		</entity-one>
    		<entity-one entity-name="FinAccount" value-field="toFinAccount">
    			<field-map field-name="finAccountId" value="${shippingContract.toFinContractId}"/>
    		</entity-one>
    	</actions>
    	<auto-fields-entity entity-name="ShippingContract" map-name="shippingContract"/>
    	<field name="A" title="${uiLabelMap.SlideA}"><display/></field>
    	<field name="B" title="${uiLabelMap.SlideB}"><display/></field>
    	<field name="contractId" use-when="shippingContract != null" title="${uiLabelMap.contractId}"><display/></field>
    	<field name="contractId" use-when="shippingContract == null" title="${uiLabelMap.contractId}"><ignored/></field>
    	
    	<field name="contractName" title="${uiLabelMap.contractName}" required-field="true"><text/></field>
   		<field name="fromPartyId" title="${uiLabelMap.fromParty}">
   			<lookup target-form-name="lookupPartyInfo"></lookup>
   		</field>
   		<field name="newFromParty" title="${uiLabelMap.orCreateNew}" widget-style="margin-bottom10">
<!--   			<on-field-event-update-area area-target="" event-type="change" area-id=""> -->
	   			<text></text>
<!-- 	   			<text></text> -->
<!--    			</on-field-event-update-area> -->
   		</field>
   		<field name="newToParty" title="${uiLabelMap.orCreateNew}">
   			<text></text>
   		</field>
   		<field name="newFromPartyGroup" title="${uiLabelMap.orCreateNew}">
   			<text></text>
   		</field>
   		<field name="newToPartyGroup" title="${uiLabelMap.orCreateNew}">
   			<text></text>
   		</field>
   		<field name="toPartyId" title="${uiLabelMap.toParty}">
   			<lookup target-form-name="lookupPartyInfo"></lookup>
   		</field>
   		<field name="fromPartyGroupId" title="${uiLabelMap.fromPartyGroup}">
   			<lookup target-form-name="lookupPartyInfo" default-value="company"></lookup>
   		</field>
   		<field name="toPartyGroupId" title="${uiLabelMap.toPartyGroup}">
   			<lookup target-form-name="lookupPartyInfo"></lookup>
   		</field>
   		<field name="fromContactMechPhoneId" title="${uiLabelMap.fromContactMechPhone}"><text/></field>
   		<field name="toContactMechPhoneId" title="${uiLabelMap.toContactMechPhone}"><text/></field>
   		<field name="fromContactMechFaxId" title="${uiLabelMap.fromContactMechFax}"><text/></field>
   		<field name="toContactMechFaxId" title="${uiLabelMap.toContactMechFax}"><text/></field>
   		<field name="fromGeoId" title="${uiLabelMap.fromGeo}">
   			<drop-down>
   				<entity-options description="${geoName}" entity-name="Geo" key-field-name="geoId">
   				</entity-options>
   			</drop-down>
   		</field>
   		<field name="toGeoId" title="${uiLabelMap.toGeo}">
   			<drop-down>
   				<entity-options description="${geoName}" entity-name="Geo" key-field-name="geoId">
   				</entity-options>
   			</drop-down>
   		</field>
   		<field name="fromFinAccountId" title="${uiLabelMap.fromFinAccount}"><text/></field>
   		<field name="fromFinAccountTypeId" title="${uiLabelMap.fromFinAccountTypeId}">
   			<drop-down no-current-selected-key="${fromFinAccount.finAccountTypeId}">
   				<entity-options description="${description}" entity-name="FinAccountType" key-field-name="finAccountTypeId">
				</entity-options>
   			</drop-down>
   		</field>
   		<field name="toFinAccountId" title="${uiLabelMap.toFinAccount}"><text/></field>
   		<field name="toFinAccountTypeId" title="${uiLabelMap.toFinAccountTypeId}">
   			<drop-down no-current-selected-key="${toFinAccount.finAccountTypeId}">
   				<entity-options description="${description}" entity-name="FinAccountType" key-field-name="finAccountTypeId">
				</entity-options>
   			</drop-down>
   		</field>
   		<field name="fromTaxCodeId" title="${uiLabelMap.taxCode}"><text/></field>
   		<field name="toTaxCodeId" title="${uiLabelMap.taxCode}"><text/></field>
   		<field name="createdDate" title="${uiLabelMap.createdDate}"><date-time/></field>
   		<field name="fromDate" title="${uiLabelMap.fromDate}"><date-time/></field>
   		<field name="thruDate" title="${uiLabelMap.thruDate}"><date-time/></field>
   		<field name="statusId" title="${uiLabelMap.Status}">
   			<drop-down no-current-selected-key="${shippingContract.statusId}">
   				<entity-options description="${description}" entity-name="ContractStatus">
   				</entity-options>
   			</drop-down>
   		</field>
    	<field name="description"><textarea/></field>
    	<field name="submitButton" title="${uiLabelMap.CommonEdit}" widget-style="btn btn-primary btn-small" use-when="shippingContract != null"><submit image-location="icon-ok" button-type="button"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-primary btn-small" use-when="shippingContract == null"><submit image-location="icon-ok" button-type="button"/></field>
        <sort-order>
        	<field-group style="no-widget-header no-left-margin span6 height50">
        		<sort-field name="contractName"/>
        	</field-group>
        	<field-group style="no-widget-header span6 end-group-group height50">
        		<sort-field name="contractId"/>
        	</field-group>
        	<field-group style="no-widget-header no-left-margin span6 align-center begin-group-group">
        		<sort-field name="A"/>
       		</field-group>
       		<field-group style="no-widget-header span6 end-group-group align-center">
       			<sort-field name="B"/>
       		</field-group>
        	<field-group style="no-widget-header no-left-margin span6">
        		<sort-field name="fromPartyGroupId" position="1"/>
        		<sort-field name="newFromPartyGroup" position="2"/>
        		<sort-field name="fromPartyId" position="3"/>
        		<sort-field name="newFromParty" position="4"/>
        		<sort-field name="fromContactMechPhoneId" position="5"/>
        		<sort-field name="fromContactMechFaxId" position="6"/>
        		<sort-field name="fromGeoId" position="7"/>
        		<sort-field name="fromTaxCodeId" position="8"/>
        		<sort-field name="fromFinAccountId" position="9"/>
        		<sort-field name="fromFinAccountTypeId" position="10"/>
        	</field-group>
        	<field-group style="no-widget-header span6 end-group-group">
        		<sort-field name="toPartyGroupId" position="1"/>
        		<sort-field name="newToPartyGroup" position="2"/>
        		<sort-field name="toPartyId" position="3"/>
        		<sort-field name="newToParty" position="4"/>
        		<sort-field name="toContactMechPhoneId" position="5"/>
        		<sort-field name="toContactMechFaxId" position="6"/>
        		<sort-field name="toGeoId" position="7"/>
        		<sort-field name="toTaxCodeId" position="8"/>
        		<sort-field name="toFinAccountId" position="9"/>
        		<sort-field name="toFinAccountTypeId" position="10"/>
        	</field-group>
        	<field-group style="no-widget-header no-left-margin span6 margin-top30">
        		<sort-field name="createdDate" position="1"/>
        		<sort-field name="fromDate" position="2"/>
        		<sort-field name="thruDate" position="3"/>
        	</field-group>
        	<field-group style="no-widget-header span6 end-group-group margin-top30">
        		<sort-field name="statusId" position="4"/>
        		<sort-field name="description" position="5"/>
        	</field-group>
        	<field-group style="no-widget-header span12 no-left-margin align-center">
        		<sort-field name="submitButton"/>
        	</field-group>
        </sort-order>
    </form>
    <form name="ListShipment" target="" type="list" list-name="listShipment" default-table-style="table table-striped dataTable table-hover table-bordered">
     	<row-actions>
     		<entity-one entity-name="Shipment" value-field="shipment">
     			<field-map field-name="shipmentId" from-field="shipmentId"/>
     		</entity-one>
     		<service service-name="getTotalShipmentItem" result-map="mapResult"></service>
     		<set field="totalWeight" value="${mapResult.totalWeight}"/>
     	</row-actions>
     	<field name="shipmentId" title="${uiLabelMap.ShipmentId}">
			<hyperlink target="editShipmentInfo" description="${shipmentId}">
				<parameter param-name="shipmentId" from-field="shipmentId"/>
				<parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/>
			</hyperlink>
		</field>
     	<field name="shipmentTypeId" title="${uiLabelMap.ShipmentType}"><display-entity entity-name="ShipmentType" description="${description}"></display-entity></field>
     	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"></display-entity></field>
     	<field name="primaryOrderId" title="${uiLabelMap.OrderId}"><display/></field>
     	<field name="estimatedReadyDate"><display/></field>
     	<field name="estimatedShipDate"><display/></field>
     	<field name="estimatedArrivalDate" title="${uiLabelMap.EstimatedArrivalDate}"><display/></field>
<!--      	<field name="latestCancelDate"><display/></field> -->
     	<field name="estimatedShipCost" title="${uiLabelMap.EstimatedShipCost}"><display type="currency" currency="${currencyUomId}"/></field>
     	<field name="originFacilityId" title="${uiLabelMap.FacilityFrom}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
		</field>
     	<field name="destinationFacilityId" title="${uiLabelMap.FacilityTo}">
     		<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
     	</field>
     	<field name="originContactMechId" title="${uiLabelMap.OriginContactMech}">
     		<hyperlink target="getDetailContactMech" description="${originContactMechId}">
     			<parameter param-name="contactMechId" from-field="originContactMechId"/>
	     	</hyperlink>
     	</field>
     	<field name="destinationContactMechId" title="${uiLabelMap.DestinationContactMech}">
     		<hyperlink target="getDetailContactMech" description="${destinationContactMechId}">
     			<parameter param-name="contactMechId" from-field="destinationContactMechId"/>
	     	</hyperlink>
     	</field>
     	<field name="vehicleId" title="${uiLabelMap.Vehicles}">
     		<display-entity entity-name="Vehicle" description="${vehicleName}" key-field-name="vehicleId"></display-entity>
     	</field>
     	<field name="totalWeight" title="${uiLabelMap.ShipmentTotalWeight}"><display/></field>
     	<field name="defaultWeightUomId" title="${uiLabelMap.DefaultWeightUom}"><display-entity entity-name="Uom" description="${abbreviation}" key-field-name="uomId"/></field>
<!--      	<field name="partyIdFrom"><display/></field> -->
<!--      	<field name="partyIdTo"><display/></field> -->
     	<field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="btn btn-mini btn-danger icon-trash open-sans">
            <hyperlink target="DeleteShipment" description=" ">
                <parameter param-name="shipmentId"/>
            </hyperlink>
        </field>
     </form>
     <form name="ListShipmentToReceives" target="" type="list" list-name="listShipment" default-table-style="table table-striped dataTable table-hover table-bordered">
     	<row-actions>
     		<entity-one entity-name="Shipment" value-field="shipment">
     			<field-map field-name="shipmentId" from-field="shipmentId"/>
     		</entity-one>
     		<service service-name="getTotalShipmentItem" result-map="mapResult"></service>
     		<set field="totalWeight" value="${mapResult.totalWeight}"/>
     	</row-actions>
     	<field name="shipmentId" title="${uiLabelMap.ShipmentId}">
			<hyperlink target="getOrderFromShipment" description="${shipmentId}">
				<parameter param-name="shipmentId" from-field="shipmentId"/>
				<parameter param-name="facilityId" from-field="facilityId"/>
			</hyperlink>
		</field>
     	<field name="shipmentTypeId" title="${uiLabelMap.ShipmentType}"><display-entity entity-name="ShipmentType" description="${description}"></display-entity></field>
     	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"></display-entity></field>
     	<field name="primaryOrderId" title="${uiLabelMap.OrderId}"><display/></field>
     	<field name="estimatedReadyDate"><display/></field>
     	<field name="estimatedShipDate"><display/></field>
     	<field name="estimatedArrivalDate" title="${uiLabelMap.EstimatedArrivalDate}"><display/></field>
     	<field name="estimatedShipCost" title="${uiLabelMap.EstimatedShipCost}"><display type="currency" currency="${currencyUomId}"/></field>
     	<field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><display/></field>
     	<field name="originFacilityId" title="${uiLabelMap.FacilityFrom}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
		</field>
     	<field name="destinationFacilityId" title="${uiLabelMap.FacilityTo}">
     		<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
     	</field>
     	<field name="originContactMechId" title="${uiLabelMap.OriginContactMech}">
     		<hyperlink target="getDetailContactMech" description="${originContactMechId}">
     			<parameter param-name="contactMechId" from-field="originContactMechId"/>
	     	</hyperlink>
     	</field>
     	<field name="destinationContactMechId" title="${uiLabelMap.DestinationContactMech}">
     		<hyperlink target="getDetailContactMech" description="${destinationContactMechId}">
     			<parameter param-name="contactMechId" from-field="destinationContactMechId"/>
	     	</hyperlink>
     	</field>
     	<field name="vehicleId" title="${uiLabelMap.Vehicles}">
     		<display-entity entity-name="Vehicle" description="${vehicleName}" key-field-name="vehicleId"></display-entity>
     	</field>
     	<field name="totalWeight" title="${uiLabelMap.ShipmentTotalWeight}"><display/></field>
     	<field name="defaultWeightUomId" title="${uiLabelMap.DefaultWeightUom}"><display-entity entity-name="Uom" description="${description} - ${abbreviation}" key-field-name="uomId"/></field>
     </form>
     
     <form name="DelysEditShipment" type="single" target="DelysUpdateShipment" title="" default-map-name="shipmentTmp" header-row-style="header-row" default-table-style="basic-table">
        <actions>
			<set field="statusId" value="${shipmentTmp.statusId}"/>
			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getShipmentType.groovy"/>
		</actions>
		<alt-target use-when="shipment==null" target="createNewShipment"/>
<!--         <alt-target use-when="shipment==null&amp;&amp;shipmentTypeId==null" target="editShipment"/> -->
<!--         <alt-target use-when="shipment==null&amp;&amp;shipmentTypeId!=null&amp;&amp;shipmentTypeId.equals(&quot;PURCHASE_RETURN&quot;)" target="createShipmentAndItemsForVendorReturn"/> -->
        <auto-fields-entity entity-name="Shipment" map-name="shipment"/>
        <field name="originFacilityId"><hidden/></field>
        <field use-when="shipmentTmp!=null" name="shipmentId" title="${uiLabelMap.ShipmentId}"><display/></field>
		<field name="shipmentId" use-when="shipmentTmp==null" title="${uiLabelMap.ShipmentId}"><hidden/></field>
		<field name="parentTypeId"><hidden value="${shipmentTypeId}"/></field>
        <field name="shipmentTypeId" title="${uiLabelMap.ProductShipmentTypeId}" required-field="true">
        	<drop-down>
        		<list-options key-name="shipmentTypeId" list-name="listShipmentTypes" description="${description}"/>
        	</drop-down>
        </field>
        <field name="orderTypeId"><hidden value=""/></field>
        <field name="orderStatusId"><hidden value="ORDER_APPROVED"/></field>
        <field use-when="orderId==null" name="primaryOrderId" title="${uiLabelMap.ProductPrimaryOrderId}"><lookup target-form-name="LookupOrderHeaderShorten" target-parameter="orderTypeId, orderStatusId"/></field>
        <field use-when="orderId!=null" name="primaryOrderId" title="${uiLabelMap.ProductPrimaryOrderId}"><lookup target-form-name="LookupOrderHeaderShorten" target-parameter="orderTypeId, orderStatusId" default-value="${orderId}"/></field>
<!-- 		<field use-when="orderId!=null" name="primaryOrderId" title="${uiLabelMap.ProductPrimaryOrderId}"><hidden/></field> -->
        <field name="primaryReturnId" title="${uiLabelMap.ProductPrimaryReturnId}"><hidden/></field>
        <field name="primaryShipGroupSeqId" title="${uiLabelMap.ProductPrimaryShipGroupSeqId}"><hidden/></field>
        <field name="picklistBinId" title="${uiLabelMap.picklistBinId}"><hidden/></field>
        <field name="estimatedReadyDate" title="${uiLabelMap.EstimatedReadyDate}"><date-time/></field>
        <field name="estimatedShipDate" title="${uiLabelMap.EstimatedShipDate}"><date-time/></field>
		<field name="statusId" title="${uiLabelMap.Status}" use-when="shipmentTmp==null || statusId == null">
            <hidden value="SHIPMENT_INPUT"/>
        </field>
        <field name="statusId" title="${uiLabelMap.Status}" use-when="shipmentTmp != null &amp;&amp; statusId != null">
            <drop-down allow-empty="false" current="first-in-list" current-description="${currentStatus.description}">
                <entity-options entity-name="StatusValidChangeToDetail" key-field-name="statusIdTo" description="${transitionName} (${description})">
                    <entity-constraint name="statusId" value="${shipment.statusId}"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
<!--         <field use-when="productStoreId!=null" name="originFacilityId" title="${uiLabelMap.ProductOriginFacility} [${shipment.primaryOrderId}]"> -->
<!--             <drop-down allow-empty="true" current="first-in-list"> -->
<!--                 <entity-options entity-name="ProductStoreFacilityByOrder" key-field-name="facilityId" description="${facilityName} [${facilityId}]"> -->
<!--                     <entity-constraint name="orderId" value="${orderHeader.orderId}"/> -->
<!--                     <entity-order-by field-name="facilityName"/> -->
<!--                 </entity-options> -->
<!--             </drop-down> -->
<!--         </field> -->
        <field name="originFacilityId" title="${uiLabelMap.FacilityFrom}" use-when="shipment != null">
            <drop-down allow-empty="false" no-current-selected-key="${shipment.originFacilityId}">
                <entity-options entity-name="Facility" key-field-name="facilityId" description="${facilityName} [${facilityId}]">
                	
                    <entity-order-by field-name="facilityName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="originFacilityId" title="${uiLabelMap.FacilityFrom}" use-when="shipment == null">
            <drop-down allow-empty="true">
                <entity-options entity-name="Facility" key-field-name="facilityId" description="${facilityName} [${facilityId}]">
                    <entity-order-by field-name="facilityName"/>
                </entity-options>
            </drop-down>
        </field>
<!-- 		<field name="originFacilityId" title="${uiLabelMap.FacilityFrom}" use-when="!&quot;TRANSFER&quot;.equals(shipmentTypeId)"><hidden/></field> -->
        <field name="destinationFacilityId" title="${uiLabelMap.FacilityTo}">
            <drop-down allow-empty="true" current="first-in-list">
                <entity-options entity-name="Facility" key-field-name="facilityId" description="${facilityName} [${facilityId}]">
                    <entity-order-by field-name="facilityName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="estimatedShipWorkEffId" title="${uiLabelMap.ProductEstimatedShipWorkEffId}" widget-style="btn btn-mini btn-info"><hidden/>
<!--             <hyperlink target="/workeffort/control/WorkEffortSummary" also-hidden="false" description="${shipment.estimatedShipWorkEffId}" target-type="inter-app"> -->
<!--                 <parameter param-name="workEffortId" from-field="shipment.estimatedShipWorkEffId"/> -->
<!--             </hyperlink> -->
        </field>
        <field name="estimatedArrivalDate" title="${uiLabelMap.EstimatedArrivalDate}"><date-time/></field>
        <field name="estimatedArrivalWorkEffId" title="${uiLabelMap.ProductEstimatedArrivalWorkEffId}" widget-style="btn btn-mini btn-info"><hidden/>
<!--             <hyperlink target="/workeffort/control/WorkEffortSummary" also-hidden="false" description="${shipment.estimatedArrivalWorkEffId}" target-type="inter-app"> -->
<!--                 <parameter param-name="workEffortId" from-field="shipment.estimatedArrivalWorkEffId"/> -->
<!--             </hyperlink> -->
        </field>
        <field name="latestCancelDate" title="${uiLabelMap.ProductLatestCancelDate}"><hidden/></field>
        <field name="estimatedShipCost" title="${uiLabelMap.EstimatedShipCost}"><text/></field>
        <field name="currencyUomId" title="${uiLabelMap.ProductCurrencyUomId}">
            <drop-down allow-empty="true" no-current-selected-key="VND">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="defaultWeightUomId" title="${uiLabelMap.DefaultWeightUom}">
            <drop-down allow-empty="false" no-current-selected-key="${shipmentTmp.defaultWeightUomId}">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="WEIGHT_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="handlingInstructions" title="${uiLabelMap.ProductHandlingInstructions}"><hidden/></field>

        <field name="originContactMechId" title="${uiLabelMap.ProductOriginPostalAddressId}"
                tooltip="${uiLabelMap.CommonTo}: ${originPostalAddress.toName}, ${uiLabelMap.CommonAttn}: ${originPostalAddress.attnName}, ${originPostalAddress.address1}, ${originPostalAddress.address2}, ${originPostalAddress.city}, ${originPostalAddress.stateProvinceGeoId}, ${originPostalAddress.postalCode}, ${originPostalAddress.countryGeoId}">
        <hidden/>
        </field>
        <field name="destinationContactMechId" title="${uiLabelMap.ProductDestinationPostalAddressId}"
                tooltip="${uiLabelMap.CommonTo}: ${destinationPostalAddress.toName}, ${uiLabelMap.CommonAttn}: ${destinationPostalAddress.attnName}, ${destinationPostalAddress.address1}, ${destinationPostalAddress.address2}, ${destinationPostalAddress.city}, ${destinationPostalAddress.stateProvinceGeoId}, ${destinationPostalAddress.postalCode}, ${destinationPostalAddress.countryGeoId}">
        <hidden/>
        </field>
        <field name="originTelecomNumberId" title="${uiLabelMap.ProductOriginPhoneNumberId}"
                tooltip="${originTelecomNumber.countryCode}  ${originTelecomNumber.areaCode} ${originTelecomNumber.contactNumber}">
        <hidden/>
        </field>
        <field name="destinationTelecomNumberId" title="${uiLabelMap.ProductDestinationPhoneNumberId}"
                tooltip="${destinationTelecomNumber.countryCode}  ${destinationTelecomNumber.areaCode} ${destinationTelecomNumber.contactNumber}">
        <hidden/>
        </field>
        <field name="partyIdTo" title="${uiLabelMap.ProductToParty}"><hidden/></field>
        <field name="partyIdFrom" title="${uiLabelMap.ProductFromParty}"><hidden/></field> 
		
		<field name="addtlShippingChargeDesc" title="${uiLabelMap.ProductAdditionalShippingCharge}"><hidden/></field>
        <field name="additionalShippingCharge" title="${uiLabelMap.ProductAdditionalShippingCharge}"><hidden/></field>

        <field use-when="shipment!=null" name="createdDate" title="${uiLabelMap.ProductCreatedDate}"><display also-hidden="false" description="${shipment.createdDate}"/></field>
        <field use-when="shipment == null" name="createdDate" title="${uiLabelMap.ProductCreatedDate}"><ignored/></field>
        <field use-when="shipment!=null" name="createdByUserLogin" title="${uiLabelMap.CreatedBy}"><display also-hidden="false" description="${shipment.createdByUserLogin}"/></field>
        <field use-when="shipment==null" name="createdByUserLogin" title="${uiLabelMap.CreatedBy}"><ignored/></field>
        <field use-when="shipment!=null" name="lastModifiedDate" title="${uiLabelMap.ProductLastModifiedDate}"><display also-hidden="false" description="${shipment.lastModifiedDate}"/></field>
        <field use-when="shipment==null" name="lastModifiedDate" title="${uiLabelMap.ProductLastModifiedDate}"><ignored/></field>
        <field use-when="shipment!=null" name="lastModifiedByUserLogin" title="${uiLabelMap.LastModifiedBy}"><display also-hidden="false" description="${shipment.lastModifiedByUserLogin}"/></field>
        <field use-when="shipment==null" name="lastModifiedByUserLogin" title="${uiLabelMap.LastModifiedBy}"><ignored/></field>

        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-primary btn-small" use-when="shipment != null &amp;&amp; !&quot;SHIPMENT_DELIVERED&quot;.equals(statusId)"><submit button-type="button" image-location="icon-ok"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonCreateNew}" widget-style="btn btn-primary btn-small" use-when="shipment == null &amp;&amp; !&quot;SHIPMENT_DELIVERED&quot;.equals(statusId)"><submit button-type="button" image-location="icon-ok"/></field>
        
        <sort-order>
        	<field-group style="no-widget-header no-left-margin span6">
        		<sort-field name="shipmentId"/>
        		<sort-field name="shipmentTypeId"/>
        		<sort-field name="primaryOrderId"/>
    			<sort-field name="originFacilityId"/>
	        	<sort-field name="destinationFacilityId"/>
	        	<sort-field name="statusId"/>
	        	
        	</field-group>
        	<field-group style="no-widget-header span6 end-group-group">
        		<sort-field name="estimatedReadyDate"/>
	        	<sort-field name="estimatedShipDate"/>
	        	<sort-field name="estimatedArrivalDate"/>
<!-- 	        	<sort-field name="latestCancelDate" position="4"/> -->
        		<sort-field name="estimatedShipCost"/>
        		<sort-field name="currencyUomId"/>
        		<sort-field name="defaultWeightUomId"/>
        	</field-group>
        	
        	<field-group style="no-widget-header no-left-margin span6">
	        	<sort-field name="createdDate"/>
	        	<sort-field name="createdByUserLogin"/>
        	</field-group>
        	<field-group style="no-widget-header span6 end-group-group">
        		<sort-field name="lastModifiedDate"/>
	        	<sort-field name="lastModifiedByUserLogin"/>
        	</field-group>
        	<field-group style="no-widget-header no-left-margin span12 align-center">
        		<sort-field name="submitButton"/>
        	</field-group>
        </sort-order>
    </form>
    <form name="ListShipmentItem" target="" type="list" list-name="listShipmentItems" default-table-style="table table-striped dataTable table-hover table-bordered" default-map-name="">
    	<actions></actions>
<!--     	<field name="shipmentId"><hyperlink target="editShipment" description="${shipmentId}"><parameter param-name="shipmentId" from-field="shipmentId"/></hyperlink></field> -->
<!--     	<field name="shipmentItemSeqId"><display></display></field> -->
<!--     	<field name="productId" title="${uiLabelMap.ProductProduct}"><display-entity entity-name="Product" description="${productName}" key-field-name="productId"></display-entity></field> -->
<!--     	<field name="quantity"><display/></field> -->
<!--     	<field name="shipmentContentDescription"><display/></field> -->
    	<field name="shipmentItemSeqId" title="${uiLabelMap.ShipmentItemSeqId}"><display/></field>
        <field name="orderId" title="${uiLabelMap.OrderId}"><display/></field>
        <field name="orderItemSeqId" title="${uiLabelMap.orderItemSeqId}"><display/></field>
        <field name="shipGroupSeqId"><display/></field>
        <field name="productId" title="${uiLabelMap.ProductProductId}"><display/></field>
        <!-- quantity planned in this shipment -->
        <field name="quantity" title="${uiLabelMap.ProductQuantity}"><display default-value="${0}"/></field>
        <!-- quantity issued in this shipment -->
        <field name="issuedQuantity" title="${uiLabelMap.IssuedQuantity}"><display default-value="${0}"/></field>
        <!-- total ordered quantity -->
        <field name="totOrderedQuantity" title="${uiLabelMap.TotalOrderedQuantity}" ><display default-value="${0}"/></field>
        <!-- total reserver quantity -->
        <field name="reservedQuantity" title="${uiLabelMap.ReservedQuantity}"><display default-value="${0}"/></field>
        <!-- total not available quantity -->
        <field name="notAvailableQuantity" title="${uiLabelMap.NotAvailableQuantity}"><display default-value="${0}"/></field>
        <!-- total issued quantity -->
        <field name="totIssuedQuantity" title="${uiLabelMap.TotalIssuedQuantity}"><display default-value="${0}"/></field>
        <!-- total planned quantity not issued -->
        <field name="totPlannedQuantity" title="${uiLabelMap.ProductTotPlannedQuantity}" ><display default-value="${0}"/></field>
        <!-- planned weight -->
        <field name="weight" title="${uiLabelMap.ProductWeight}"><display/></field>
        <field name="weightUom" title="${uiLabelMap.CommonUom}"><display/></field>
        <!-- planned volume -->
<!--         <field name="volume" title="${uiLabelMap.CommonVolume}"><display/></field> -->
<!--         <field name="volumeUom" title="${uiLabelMap.CommonUom}"><display/></field> -->
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" use-when="!&quot;SHIPMENT_DELIVERED&quot;.equals(shipmentStatus)">
            <hyperlink target="removeOrderShipmentFromShipment" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="shipmentId"/>
                <parameter param-name="shipmentItemSeqId"/>
                <parameter param-name="orderId"/>
                <parameter param-name="orderItemSeqId"/>
                <parameter param-name="shipGroupSeqId"/>
            </hyperlink>
        </field>
    </form>
    <form name="ListShipmentOrder" type="multi" target="removeOrderInShipment" list-name="listShipmentOrders" default-table-style="table table-striped dataTable table-hover table-bordered" default-map-name="" use-row-submit="true">
    	<field name="shipmentId" title="${uiLabelMap.ShipmentId}"><hidden/></field>
    	<field name="orderId" title="${uiLabelMap.OrderId}">
    		<hyperlink target="DetailDelivery" description="${orderId}">
    			<parameter param-name="orderId"/>
    			<parameter param-name="shipmentId"/>
    		</hyperlink>
    	</field>
    	<field name="orderItemSeqId" title="${uiLabelMap.orderItemSeqId}"><display/></field>
    	<field name="shipGroupSeqId"><display/></field>
    	<field name="shipmentItemSeqId" title="${uiLabelMap.ShipmentItemSeqId}"><display/></field>
    	<field name="quantity"><display/></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"><check all-checked="false"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonDelete}" use-when="!listShipmentOrders.isEmpty()" widget-style="btn btn-small btn-danger">
            <submit button-type="button" image-location="icon-trash"/>
        </field>
    </form>
    <form name="AddOrderToShipment" type="single" target="AddOrderToShipment">
    	<actions>
    	</actions>
    	<field name="orderTypeId"><hidden/></field>
    	<field name="statusId"><hidden/></field>
    	<field name="action"><hidden value="true"/></field>
    	<field name="shipmentId" title="${uiLabelMap.ShipmentId}"><display default-value="${shipmentId}"/></field>
    	<field name="orderId" position="1" title="${uiLabelMap.order}"><lookup target-form-name="LookupOrderHeaderShorten" target-parameter="orderTypeId, statusId"></lookup></field>
    	<field name="submitButton" position="2" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-primary btn-small"><submit button-type="button" image-location="icon-ok"/></field>
    </form>
    <form name="ListItemAddToShipmentPlan" type="multi" target="AddItemToShipmentPlan" title="" list-name="addToShipmentPlanRows"
        odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
        <field name="shipmentId"><hidden/></field>
        <field name="orderId"><hidden/></field>
        <field name="orderItemSeqId"><hidden/></field>
        <field name="orderId" title="${uiLabelMap.ProductOrderId}"><display/></field>
        <field name="orderItemSeqId" title="${uiLabelMap.orderItemSeqId}"><display/></field>
        <field name="shipGroupSeqId"><display/></field>
        <field name="productId" title="${uiLabelMap.ProductProductId}"><display/></field>
        <!-- ordered quantity -->
        <field name="orderedQuantity" title="${uiLabelMap.ProductOrderedQuantity}"><display/></field>
        <!-- planned quantity not issued -->
        <field name="plannedQuantity" title="${uiLabelMap.PlannedQuantity}"><display/></field>
        <!-- issued quantity -->
        <field name="issuedQuantity" title="${uiLabelMap.ProductIssuedQuantity}"><display/></field>
        <!-- planned weight -->
        <field name="weight" title="${uiLabelMap.ProductWeight} / ${uiLabelMap.ProductProduct}"><display/></field>
        <field name="weightUom" title="${uiLabelMap.CommonUom}"><display/></field>
        <!-- quantity for plan -->
        <field name="quantity" title="${uiLabelMap.ProductQuantity}" separate-column="true" widget-style="width80pc"><text default-value="${quantity}"/></field>
        <!-- planned volume -->
<!--         <field name="volume" title="${uiLabelMap.CommonVolume}"><display/></field> -->
<!--         <field name="volumeUom" title="${uiLabelMap.CommonUom}"><display/></field> -->
		<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="quantity &gt; 0" separate-column="true"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-small btn-primary" use-when="checkQuantity == true">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
    <form name="ListChangeDateOrders" type="multi" target="approvedChangeDateOrders" title="" list-name="listIt"
        odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
        <actions>
        	<set field="requestParameters.salesMethodChannelEnumId" value="LOG_CHANGE_DATE"/>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="OrderHeader"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
        	<entity-condition entity-name="OrderRole" list="listCustomers">
        		<condition-list>
	        		<condition-expr field-name="orderId" operator="equals" from-field="orderId"/>
        			<condition-expr field-name="roleTypeId" operator="equals" value="PLACING_CUSTOMER"/>
        		</condition-list>
        	</entity-condition>
        	<entity-one entity-name="PartyNameView" value-field="partyNameView">
        		<field-map field-name="partyId" value="${listCustomers[0].partyId}"/>
        	</entity-one>
        </row-actions>
        <field name="orderId" title="${uiLabelMap.OrderId}">
        	<hyperlink target="getDetailChangeDateOrder" description="${orderId}">
        		<parameter param-name="orderId" from-field="orderId"/>
        	</hyperlink>
       	</field>
        <field name="orderName" title="${uiLabelMap.OrderName}"><display/></field>
        <field name="orderDate" title="${uiLabelMap.OrderDate}"><display/></field>
        <field name="partyId" title="${uiLabelMap.PartyEmplId}">
        	<display default-value="${listCustomers[0].partyId}"></display>
        </field>
        <field name="partyName" title="${uiLabelMap.PartyEmplName}">
        	<display default-value="${partyNameView.firstName} ${partyNameView.middleName} ${partyNameView.lastName} ${partyNameView.groupName}"/>
        </field>
        <field name="productStoreId" title="${uiLabelMap.productStore}"><display-entity entity-name="ProductStore" description="${storeName}" key-field-name="productStoreId"></display-entity></field>
        <field name="originFacilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity></field>
        <field name="entryDate"><display/></field>
        <field name="priority"><display/></field>
        <field name="currencyUom"><display/></field>
        <field name="remainingSubTotal"><display/></field>
        <field name="grandTotal"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
		<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;ORDER_COMPLETED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_CANCELLED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_REJECTED&quot;)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="TotalOrderItems" target="" type="single" default-map-name="">
    	<actions>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getOrderGeneralInfo.groovy"/>
    		<set field="itemsSubTotal" value="${orderItemsSubTotal}"/>
    		<set field="totalShippingAndHandling" value="${orderShippingTotal}"/>
    		<set field="totalSalesTax" value="${orderTaxTotal}"/>
    		<set field="orderAdjustmentTotal" value="${orderAdjustmentTotal}"/>
    		<set field="totalDue" value="${orderGrandTotal}"/>
    		<set field="currencyUomId" value="${currencyUomId}"/>
    	</actions>
    	<field name="itemsSubTotal" title="${uiLabelMap.ItemSubTotal}"><display currency="${currencyUomId}" type="currency"/></field>
    	<field name="totalShippingAndHandling" title="${uiLabelMap.TotalShippingAndHandling}"><display currency="${currencyUomId}" type="currency"/></field>
		<field name="totalSalesTax" title="${uiLabelMap.TotalSalesTax}"><display currency="${currencyUomId}" type="currency"/></field>
		<field name="orderAdjustmentTotal" title="${uiLabelMap.AdjustmentAmount}"><display currency="${currencyUomId}" type="currency"/></field>
		<field name="totalDue" title="${uiLabelMap.TotalDue}"><display currency="${currencyUomId}" type="currency"/></field>    
    </form>
    <form name="ListOrderItems" type="list" default-table-style="table-bordered table table-striped table-hover dataTable" list-name="listOrderItems">
    	<row-actions>
    		<set field="orderId" from-field="orderId"/>
    		<set field="orderItemSeqId" from-field="orderItemSeqId"/>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getOrderItemAdjustment.groovy"/>
    		<set field="subTotal" value="${groovy: return unitPrice.multiply(quantity)}"/>
    		<set field="currencyUomId" value="${currency}"/>
    	</row-actions>
    	<field name="productId" title="${uiLabelMap.ProductProductId}"><display/></field>
    	<field name="quantity" title="${uiLabelMap.quantity}"><display/></field>
    	<field name="unitPrice" title="${uiLabelMap.unitPrice}"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="itemDescription" title="${uiLabelMap.CommonDescription}"><display/></field>
    	<field name="adjustment" title="${uiLabelMap.AdjustmentAmount}"><display default-value="${orderAdjustment}"/></field>
    	<field name="subTotal" title="${uiLabelMap.SubTotal}"><display currency="${currencyUomId}" type="currency"/></field>
    	<field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><display/></field>
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"/></field>
    </form>
    
    <form name="ListTransferRequirements" type="multi" list-name="listIt" target="approvedTransferRequirement" use-row-submit="true" paginate-target="ApprovedTransferRequirement" default-table-style="table-bordered table table-striped table-hover dataTable">
        <actions>
        	<set field="requestParameters.requirementTypeId" value="TRANSFER_REQ"/>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="RequirementAndFacility"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
            <entity-condition entity-name="RequirementRole" list="listReqOwner">
				<condition-list>
					<condition-expr field-name="requirementId" from-field="requirementId"/>
					<condition-expr field-name="roleTypeId" value="OWNER"/>
				</condition-list>
				<order-by field-name="-fromDate"/>
			</entity-condition> 
			<entity-one entity-name="PartyNameView" value-field="party">
				<field-map field-name="partyId" value="${listReqOwner[0].partyId}"/>
			</entity-one>
        </row-actions>
        <field name="requirementId" widget-style="open-sans" title="${uiLabelMap.requirementId}">
            <hyperlink description="${requirementId} [${uiLabelMap.CommonDetail}]" target="editTransferRequirement">
                <parameter param-name="requirementId" from-field="requirementId"/>
                <parameter param-name="requirementTypeId" from-field="requirementTypeId"/>
            </hyperlink>
        </field>
        <field name="requirementTypeId" title="${uiLabelMap.RequirementType}">
            <hidden/>
        </field>
        <field name="partyIdFrom" title="${uiLabelMap.Requestor}"><display default-value="${party.firstName} ${party.middleName} ${party.lastName} ${party.groupName} [${listReqOwner[0].partyId}]"/></field>
		<field name="facilityIdFrom" title="${uiLabelMap.FacilityFrom}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
		</field>
        <field name="facilityIdTo" title="${uiLabelMap.FacilityTo}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>     	
        </field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;REQ_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;REQ_ORDERED&quot;)"><check/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary" action="">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="ListChangeDateRequirements" type="multi" target="approvedChangeDateRequirement" use-row-submit="true" list-name="listIt" default-table-style="table-bordered table table-striped table-hover dataTable">
        <actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="Requirement"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
            <set field="lookupProductId" value="${groovy: productId == null? '_NA_' : productId}" type="String"/>
            <set field="lookupFacilityId" value="${groovy: facilityId == null? '_NA_' : facilityId}" type="String"/>
            <service service-name="getInventoryAvailableByFacility" result-map="resultQoh">
                <field-map field-name="productId" from-field="lookupProductId"/>
                <field-map field-name="facilityId" from-field="lookupFacilityId"/>
            </service>
            <service service-name="getProductInventoryAvailable" result-map="resultQohTotal">
                <field-map field-name="productId" from-field="lookupProductId"/>
            </service>
            <set field="facilityQuantityOnHandTotal" from-field="resultQoh.quantityOnHandTotal"/>
            <set field="quantityOnHandTotal" from-field="resultQohTotal.quantityOnHandTotal"/>
            <set field="reqTypeId" from-field="reqTypeId"/>
			<entity-condition entity-name="RequirementRole" list="listCustomer">
				<condition-list>
					<condition-expr field-name="requirementId" from-field="requirementId"/>
					<condition-expr field-name="roleTypeId" value="CUSTOMER"/>
				</condition-list>
				<order-by field-name="-fromDate"/>
			</entity-condition>
			<entity-condition entity-name="RequirementRole" list="listReqOwner">
				<condition-list>
					<condition-expr field-name="requirementId" from-field="requirementId"/>
					<condition-expr field-name="roleTypeId" value="OWNER"/>
				</condition-list>
				<order-by field-name="-fromDate"/>
			</entity-condition>    
			<entity-one entity-name="PartyNameView" value-field="party">
				<field-map field-name="partyId" value="${listReqOwner[0].partyId}"/>
			</entity-one>
			<entity-one entity-name="PartyNameView" value-field="partyCust">
				<field-map field-name="partyId" value="${listCustomer[0].partyId}"/>
			</entity-one>       
        </row-actions>
        <field name="requirementId" widget-style="open-sans" title="${uiLabelMap.requirementId}">
            <hyperlink description="${requirementId}" target="EditRequirement">
                <parameter param-name="requirementId" from-field="requirementId"/>
                <parameter param-name="requirementTypeId" from-field="requirementTypeId"/>
            </hyperlink>
        </field>
        
        <field name="requirementTypeId" title="${uiLabelMap.RequirementType}">
            <hidden/>
        </field>
        <field name="partyIdFrom" title="${uiLabelMap.Requestor}"><display default-value="${party.firstName} ${party.middleName} ${party.lastName} ${party.groupName}"/></field>
        <field name="partyIdTo" title="${uiLabelMap.Customer}"><display default-value="${partyCust.firstName} ${partyCust.middleName} ${partyCust.lastName} ${partyCust.groupName}"/></field>
		<field name="facilityId" title="${uiLabelMap.FacilityFrom}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
		</field>
        <field name="productId" title="${uiLabelMap.Product}">
            <display-entity entity-name="Product" key-field-name="productId" description="${productId} - ${internalName}"/>
        </field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;REQ_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;REQ_ORDERED&quot;)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="ListGiftRequirements" type="multi" list-name="listIt" use-row-submit="true" target="approvedGiftRequirement" default-table-style="table-bordered table table-striped table-hover dataTable">
        <actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="Requirement"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
            <set field="lookupProductId" value="${groovy: productId == null? '_NA_' : productId}" type="String"/>
            <set field="lookupFacilityId" value="${groovy: facilityId == null? '_NA_' : facilityId}" type="String"/>
            <service service-name="getInventoryAvailableByFacility" result-map="resultQoh">
                <field-map field-name="productId" from-field="lookupProductId"/>
                <field-map field-name="facilityId" from-field="lookupFacilityId"/>
            </service>
            <service service-name="getProductInventoryAvailable" result-map="resultQohTotal">
                <field-map field-name="productId" from-field="lookupProductId"/>
            </service>
            <set field="facilityQuantityOnHandTotal" from-field="resultQoh.quantityOnHandTotal"/>
            <set field="quantityOnHandTotal" from-field="resultQohTotal.quantityOnHandTotal"/>
            <set field="reqTypeId" from-field="reqTypeId"/>
			<entity-condition entity-name="RequirementRole" list="listReceiver">
				<condition-list>
					<condition-expr field-name="requirementId" from-field="requirementId"/>
					<condition-expr field-name="roleTypeId" value="RECEIVER"/>
				</condition-list>
				<order-by field-name="-fromDate"/>
			</entity-condition>
			<entity-condition entity-name="RequirementRole" list="listReqOwner">
				<condition-list>
					<condition-expr field-name="requirementId" from-field="requirementId"/>
					<condition-expr field-name="roleTypeId" value="OWNER"/>
				</condition-list>
				<order-by field-name="-fromDate"/>
			</entity-condition>    
			<entity-one entity-name="PartyNameView" value-field="party">
				<field-map field-name="partyId" value="${listReqOwner[0].partyId}"/>
			</entity-one>
			<entity-one entity-name="PartyNameView" value-field="partyRecever">
				<field-map field-name="partyId" value="${listReceiver[0].partyId}"/>
			</entity-one>          
        </row-actions>
        <field name="requirementId" widget-style="open-sans" title="${uiLabelMap.requirementId}">
            <hyperlink description="${requirementId}" target="EditRequirement">
                <parameter param-name="requirementId" from-field="requirementId"/>
                <parameter param-name="requirementTypeId" from-field="requirementTypeId"/>
            </hyperlink>
        </field>
        
        <field name="requirementTypeId" title="${uiLabelMap.RequirementType}">
            <hidden/>
        </field>
        <field name="partyIdFrom" title="${uiLabelMap.Requestor}"><display default-value="${party.firstName} ${party.middleName} ${party.lastName} ${party.groupName}"/></field>
        <field name="partyIdTo" title="${uiLabelMap.Receiver}"><display default-value="${partyRecever.firstName} ${partyRecever.middleName} ${partyRecever.lastName} ${partyRecever.groupName}"/></field>
		<field name="facilityId" title="${uiLabelMap.FacilityFrom}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
		</field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;REQ_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;REQ_ORDERED&quot;)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="ListMarketingRequirements" type="multi" list-name="listIt" use-row-submit="true" target="approvedMarketingRequirement" default-table-style="table-bordered table table-striped table-hover dataTable">
       	<actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="Requirement"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
            <set field="lookupProductId" value="${groovy: productId == null? '_NA_' : productId}" type="String"/>
            <set field="lookupFacilityId" value="${groovy: facilityId == null? '_NA_' : facilityId}" type="String"/>
            <service service-name="getInventoryAvailableByFacility" result-map="resultQoh">
                <field-map field-name="productId" from-field="lookupProductId"/>
                <field-map field-name="facilityId" from-field="lookupFacilityId"/>
            </service>
            <service service-name="getProductInventoryAvailable" result-map="resultQohTotal">
                <field-map field-name="productId" from-field="lookupProductId"/>
            </service>
            <set field="facilityQuantityOnHandTotal" from-field="resultQoh.quantityOnHandTotal"/>
            <set field="quantityOnHandTotal" from-field="resultQohTotal.quantityOnHandTotal"/>
            <set field="reqTypeId" from-field="reqTypeId"/>
			<entity-condition entity-name="RequirementRole" list="listReqOwner">
				<condition-list>
					<condition-expr field-name="requirementId" from-field="requirementId"/>
					<condition-expr field-name="roleTypeId" value="OWNER"/>
				</condition-list>
				<order-by field-name="-fromDate"/>
			</entity-condition>           
			<entity-one entity-name="PartyNameView" value-field="party">
				<field-map field-name="partyId" value="${listReqOwner[0].partyId}"/>
			</entity-one>
        </row-actions>
        <field name="requirementId" widget-style="open-sans" title="${uiLabelMap.requirementId}">
            <hyperlink description="${requirementId}" target="EditRequirement">
                <parameter param-name="requirementId" from-field="requirementId"/>
                <parameter param-name="requirementTypeId" from-field="requirementTypeId"/>
            </hyperlink>
        </field>
        
        <field name="requirementTypeId" title="${uiLabelMap.RequirementType}">
            <hidden/>
        </field>
        <field name="partyIdFrom" title="${uiLabelMap.Requestor}"><display default-value="${party.firstName} ${party.middleName} ${party.lastName} ${party.groupName}"/></field>
		<field name="facilityId" title="${uiLabelMap.FacilityFrom}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
		</field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;REQ_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;REQ_ORDERED&quot;)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="ListInternalSalesRequirements" type="multi" use-row-submit="true" list-name="listIt" target="approvedInternalSalesRequirement" default-table-style="table-bordered table table-striped table-hover dataTable">
        <actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="Requirement"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
            <set field="lookupProductId" value="${groovy: productId == null? '_NA_' : productId}" type="String"/>
            <set field="lookupFacilityId" value="${groovy: facilityId == null? '_NA_' : facilityId}" type="String"/>
            <service service-name="getInventoryAvailableByFacility" result-map="resultQoh">
                <field-map field-name="productId" from-field="lookupProductId"/>
                <field-map field-name="facilityId" from-field="lookupFacilityId"/>
            </service>
            <service service-name="getProductInventoryAvailable" result-map="resultQohTotal">
                <field-map field-name="productId" from-field="lookupProductId"/>
            </service>
            <set field="facilityQuantityOnHandTotal" from-field="resultQoh.quantityOnHandTotal"/>
            <set field="quantityOnHandTotal" from-field="resultQohTotal.quantityOnHandTotal"/>
            <set field="reqTypeId" from-field="reqTypeId"/>
			<entity-condition entity-name="RequirementRole" list="listReqOwner">
				<condition-list>
					<condition-expr field-name="requirementId" from-field="requirementId"/>
					<condition-expr field-name="roleTypeId" value="OWNER"/>
				</condition-list>
				<order-by field-name="-fromDate"/>
			</entity-condition>
			<entity-one entity-name="PartyNameView" value-field="party">
				<field-map field-name="partyId" value="${listReqOwner[0].partyId}"/>
			</entity-one>
        </row-actions>
        <field name="requirementId" widget-style="open-sans" title="${uiLabelMap.requirementId}">
            <hyperlink description="${requirementId}" target="EditRequirement">
                <parameter param-name="requirementId" from-field="requirementId"/>
                <parameter param-name="requirementTypeId" from-field="requirementTypeId"/>
            </hyperlink>
        </field>
        
        <field name="requirementTypeId" title="${uiLabelMap.RequirementType}">
            <hidden/>
        </field>
        <field name="partyIdFrom" title="${uiLabelMap.Requestor}"><display default-value="${party.firstName} ${party.middleName} ${party.lastName} ${party.groupName}"/></field>
		<field name="facilityId" title="${uiLabelMap.FacilityFrom}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
		</field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;REQ_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;REQ_ORDERED&quot;)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="ListSalesRequirements" type="multi" list-name="listIt" use-row-submit="true" target="approvedSalesRequirement" default-table-style="table-bordered table table-striped table-hover dataTable">
        <actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="Requirement"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
            <set field="lookupProductId" value="${groovy: productId == null? '_NA_' : productId}" type="String"/>
            <set field="lookupFacilityId" value="${groovy: facilityId == null? '_NA_' : facilityId}" type="String"/>
            <service service-name="getInventoryAvailableByFacility" result-map="resultQoh">
                <field-map field-name="productId" from-field="lookupProductId"/>
                <field-map field-name="facilityId" from-field="lookupFacilityId"/>
            </service>
            <service service-name="getProductInventoryAvailable" result-map="resultQohTotal">
                <field-map field-name="productId" from-field="lookupProductId"/>
            </service>
            <set field="facilityQuantityOnHandTotal" from-field="resultQoh.quantityOnHandTotal"/>
            <set field="quantityOnHandTotal" from-field="resultQohTotal.quantityOnHandTotal"/>
            <set field="reqTypeId" from-field="reqTypeId"/>
			<entity-condition entity-name="RequirementRole" list="listReqOwner">
				<condition-list>
					<condition-expr field-name="requirementId" from-field="requirementId"/>
					<condition-expr field-name="roleTypeId" value="OWNER"/>
				</condition-list>
				<order-by field-name="-fromDate"/>
			</entity-condition>
			<entity-one entity-name="PartyNameView" value-field="party">
				<field-map field-name="partyId" value="${listReqOwner[0].partyId}"/>
			</entity-one>
        </row-actions>
        <field name="requirementId" widget-style="open-sans" title="${uiLabelMap.requirementId}">
            <hyperlink description="${requirementId}" target="EditRequirement">
                <parameter param-name="requirementId" from-field="requirementId"/>
                <parameter param-name="requirementTypeId" from-field="requirementTypeId"/>
            </hyperlink>
        </field>
        
        <field name="requirementTypeId" title="${uiLabelMap.RequirementType}">
            <hidden/>
        </field>
        <field name="partyIdFrom" title="${uiLabelMap.Requestor}"><display default-value="${party.firstName} ${party.middleName} ${party.lastName} ${party.groupName}"/></field>
		<field name="facilityId" title="${uiLabelMap.FacilityFrom}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
		</field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><display/></field>
        <field name="quantity" title="${uiLabelMap.CommonQuantity}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;REQ_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;REQ_ORDERED&quot;)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
<!--         <field name="submitButton" title="${uiLabelMap.CommonDelete}" widget-style="btn btn-small btn-danger"> -->
<!--             <submit button-type="button" image-location="icon-trash"/> -->
<!--         </field> -->
    </form>
    
    <form name="ViewRequirement" type="single" target="updateRequirement" title="" default-map-name="requirement"
        header-row-style="header-row" default-table-style="basic-table">
         <actions>
        	<set field="requirementType" from-field="requirementTypeId"/>
        	<entity-condition entity-name="RequirementRole" list="listRequestor">
        		<condition-list>
        			<condition-expr field-name="requirementId" value="${requirement.requirementId}"/>
        			<condition-expr field-name="roleTypeId" value="OWNER" operator="equals"/>
        		</condition-list>
        		<order-by field-name="-fromDate"/>
        	</entity-condition>
        	<entity-one entity-name="PartyNameView" value-field="party">
        		<field-map field-name="partyId" value="${listRequestor[0].partyId}"/>
        	</entity-one>
        	<set field="facilityIdTo" value="${reqFacility.facilityIdTo}"/>
        </actions>
        <field name="requirementId" title="${uiLabelMap.requirementId}"><display/></field>
        <field name="requirementTypeId" title="${uiLabelMap.RequirementType}">
            <display-entity entity-name="RequirementType" description="${description}"></display-entity>
        </field>
        <field name="statusId" title="${uiLabelMap.Status}">
            <display-entity entity-name="StatusItem" description="${description}"/>
        </field>
        <field name="description"><display/></field>
        <field name="productStoreId" title="${uiLabelMap.productStore}">
            <display-entity entity-name="ProductStore" description="${storeName}" key-field-name="productStoreId"/>
        </field>
        <field name="productStoreIdTo" title="${uiLabelMap.ProductStoreTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;)">
            <display default-value="${reqFacility.productStoreIdTo}"/>
        </field>
        <field name="facilityId" title="${uiLabelMap.facility}">
            <display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"/>
        </field>
        <field name="fixedAssetId" title="${uiLabelMap.fixedAsset}">
        	<hidden/>
        </field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}">
        	<display/>
        </field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}">
			<display/>
		</field>
        <field name="requestor" title="${uiLabelMap.Requestor}">
        	<display default-value="${party.firstName} ${party.middleName} ${party.lastName} ${party.groupName} [${party.partyId}]">
            </display>
        </field>
        <field name="facilityIdTo" title="${uiLabelMap.FacilityTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;)" required-field="true">
        	<display default-value="${facilityIdTo}"/>
        </field>
        <field name="receiverParty" title="${uiLabelMap.Receiver}" use-when="requirementType.equals(&quot;GIFT_REQ&quot;)">
        	<display/>
        </field>
        <field name="customerParty" title="${uiLabelMap.Customer}" use-when="requirementType.equals(&quot;CHANGE_DATE_REQ&quot;) || requirementType.equals(&quot;SALES_REQ&quot;)" required-field="true">
        	<display/>
        </field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary center" use-when="requirement != null &amp;&amp; statusId.equals(&quot;REQ_PROPOSED&quot;)">
            <submit button-type="button" image-location="icon-ok"></submit>
        </field>
        <field name="submitButton" title="${uiLabelMap.CreateDelivery}" widget-style="btn btn-small btn-primary center" use-when="requirement != null &amp;&amp; requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; statusId.equals(&quot;REQ_APPROVED&quot;)">
            <submit button-type="button" image-location="icon-edit"></submit>
        </field>
        <sort-order>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="requirementId"/>
        		<sort-field name="requirementTypeId"/>
        		<sort-field name="requestor"/>
        		<sort-field name="customerParty"/>
        		<sort-field name="productStoreId"/>
        		<sort-field name="facilityId"/>
        		<sort-field name="productStoreIdTo"/>
        		<sort-field name="facilityTo"/>
        		<sort-field name="receiverParty"/>
        	</field-group>
        	<field-group style="span6 no-widget-header end-group-group">
        		<sort-field name="requirementStartDate"/>
        		<sort-field name="requiredByDate"/>
        		<sort-field name="estimatedBudget"/>
        		<sort-field name="reason"/>
        		<sort-field name="statusId"/>
        		<sort-field name="description"/>
        		<sort-field name="fixedAssetId"/>
        	</field-group>
        </sort-order>
    </form>
    <form name="EditRequirement" type="single" target="updateRequirement" title="" default-map-name="requirement"
        header-row-style="header-row" default-table-style="basic-table">
        <actions>
        	<set field="requirementType" from-field="requirementTypeId"/>
        	<entity-one entity-name="RequirementFacility" value-field="requirementFacility">
        		<field-map field-name="requirementId" from-field="requirementId"/>
        	</entity-one>
        	<entity-condition entity-name="Facility" list="listFacilities">
        	</entity-condition>
        	<entity-condition entity-name="ProductStore" list="listProductStores"></entity-condition>
        	<entity-one entity-name="PartyNameView" value-field="requestor">
        		<field-map field-name="partyId" value="${listRequestor[0].partyId}"/>
        	</entity-one>
        	<set field="originContactMechId" from-field="RequirementFacility.originContactMechId"/>
        	<!-- <entity-condition entity-name="FindAmountLimitIntenalPurchaseLimit"></entity-condition> -->
        </actions>
        <alt-target use-when="requirement==null" target="createRequirement"/>
        <auto-fields-service service-name="updateRequirement" default-field-type="edit"/>
        <field name="contactMechId"><hidden/></field>
        <field id-name="originContactMechId" name="originContactMechId" use-when="!requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null">
        	<drop-down no-current-selected-key="${requirement.contactMechId}">
        		<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
        	</drop-down>
        </field>
        <field id-name="originContactMechId" name="originContactMechId" use-when="!requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null">
        	<drop-down>
        		<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
        	</drop-down>
        </field>
        <field id-name="facilityIdFrom" name="facilityIdFrom"><hidden value="${requirementFacility.facilityIdFrom}"/></field>
        <field id-name="facilityIdTo" name="facilityIdTo"><hidden value="${requirementFacility.facilityIdTo}"/></field>
        <field id-name="requirementId" name="requirementId" title="${uiLabelMap.requirementId}" use-when="requirement != null"><display/></field>
        <field name="requirementId" title="${uiLabelMap.requirementId}" use-when="requirement == null" id-name="requirementId"><hidden/></field>
        <field id-name="requirementTypeId" name="requirementTypeId" title="${uiLabelMap.RequirementType}">
            <hidden/>
        </field>
        <field name="statusId" title="${uiLabelMap.Status}" use-when="requirement != null">
            <drop-down allow-empty="false" no-current-selected-key="${requirement.statusId}">
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" value="REQUIREMENT_STATUS"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="statusId" title="${uiLabelMap.Status}" use-when="requirement == null"><hidden value="REQ_CREATED"/></field>
        <field name="description"><textarea/></field>
        <field id-name="productStoreId" name="productStoreId" title="${uiLabelMap.productStore}" use-when="!requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement != null">
            <drop-down allow-empty="false" no-current-selected-key="${requirement.productStoreId}">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field id-name="productStoreId" name="productStoreId" title="${uiLabelMap.productStore}" use-when="!requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null">
            <drop-down allow-empty="false">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field id-name="productStoreId" name="productStoreId" title="${uiLabelMap.ProductStoreFrom}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement != null">
            <drop-down allow-empty="false" no-current-selected-key="${requirementFacility.productStoreIdFrom}">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field name="productStoreId" title="${uiLabelMap.ProductStoreFrom}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null">
            <drop-down allow-empty="false">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field id-name="facilityId" name="facilityId" title="${uiLabelMap.facility}" use-when="!requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null">
            <drop-down allow-empty="false" no-current-selected-key="${requirement.facilityId}">
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
        <field id-name="facilityId" name="facilityId" title="${uiLabelMap.facility}" use-when="!requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement != null">
            <drop-down allow-empty="false" no-current-selected-key="${requirement.facilityId}">
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
        <field id-name="facilityId" name="facilityId" title="${uiLabelMap.FacilityFrom}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null &amp;&amp; requirementFacility == null">
            <drop-down allow-empty="false">
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
        <field id-name="facilityId" name="facilityId" title="${uiLabelMap.FacilityFrom}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement != null &amp;&amp; requirementFacility == null">
            <drop-down allow-empty="true">
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
        <field id-name="facilityId" name="facilityId" title="${uiLabelMap.FacilityFrom}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirementFacility != null">
            <drop-down allow-empty="false" no-current-selected-key="${requirementFacility.facilityIdFrom}">
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
        <field id-name="originContactMechId" name="originContactMechId" title="${uiLabelMap.OriginContactMech}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirementFacility != null">
        	<drop-down no-current-selected-key="${requirementFacility.originContactMechId}">
        		<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
        	</drop-down>
        </field>
        <field id-name="originContactMechId" name="originContactMechId" title="${uiLabelMap.OriginContactMech}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirementFacility == null">
        	<drop-down>
        		<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
        	</drop-down>
        </field>
        <field id-name="originContactMechId" name="originContactMechId" title="${uiLabelMap.OriginContactMech}" use-when="!requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement != null">
        	<drop-down no-current-selected-key="${requirement.contactMechId}">
        		<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
        	</drop-down>
        </field>
        <field id-name="originContactMechId" name="originContactMechId" title="${uiLabelMap.OriginContactMech}" use-when="!requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null">
        	<drop-down>
        		<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
        	</drop-down>
        </field>
        <field id-name="productStoreIdTo" name="productStoreIdTo" title="${uiLabelMap.ProductStoreTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirementFacility != null">
            <drop-down allow-empty="false" no-current-selected-key="${requirementFacility.productStoreIdTo}">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field id-name="productStoreIdTo" name="productStoreIdTo" title="${uiLabelMap.ProductStoreTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null &amp;&amp; requirementFacility == null">
            <drop-down allow-empty="false">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field id-name="productStoreIdTo" name="productStoreIdTo" title="${uiLabelMap.ProductStoreTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement != null &amp;&amp; requirementFacility == null">
            <drop-down allow-empty="true">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field id-name="facilityTo" name="facilityTo" title="${uiLabelMap.FacilityTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirementFacility != null" required-field="true">
        	<drop-down no-current-selected-key="${requirementFacility.facilityIdTo}">
        		<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
        	</drop-down>
        </field>
        <field id-name="facilityTo" name="facilityTo" title="${uiLabelMap.FacilityTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null &amp;&amp; requirementFacility == null" required-field="true">
        	<drop-down>
        		<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
        	</drop-down>
        </field>
        <field id-name="facilityTo" name="facilityTo" title="${uiLabelMap.FacilityTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement != null &amp;&amp; requirementFacility == null" required-field="true">
        	<drop-down allow-empty="true">
        		<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
        	</drop-down>
        </field>
        <field id-name="facilityTo" name="facilityTo" use-when="!requirementType.equals(&quot;TRANSFER_REQ&quot;)"><hidden/></field>
        <field id-name="destContactMechId" name="destContactMechId" title="${uiLabelMap.DestinationContactMech}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;)">
        	<drop-down no-current-selected-key="">
        		<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
        	</drop-down>
        </field>
        <field id-name="curDestContactMechId" name="curDestContactMechId" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;)"><hidden value="${requirementFacility.destContactMechId}"/></field>
        <field id-name="curOriginContactMechId" name="curOriginContactMechId" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;)"><hidden value="${requirementFacility.originContactMechId}"/></field>
        <field id-name="curOriginContactMechId" name="curOriginContactMechId" use-when="!requirementType.equals(&quot;TRANSFER_REQ&quot;)"><hidden value="${requirement.contactMechId}"/></field>
        <field name="fixedAssetId" title="${uiLabelMap.fixedAsset}" use-when="&quot;MARKETING_REQ&quot;.equals(requirementType)"><lookup target-form-name="LookupFixedAsset"/></field>
        <field name="fixedAssetId" title="${uiLabelMap.fixedAsset}" use-when="!&quot;MARKETING_REQ&quot;.equals(requirementType)"><hidden/></field>
        <field name="custRequestId" map-name="parameters"><hidden/></field>
        <field name="custRequestItemSeqId" map-name="parameters"><hidden/></field>
        <field name="submitButton" title="${uiLabelMap.ProductAddProduct}" widget-style="btn btn-small btn-primary center" use-when="requirement == null">
            <submit button-type="button" image-location="icon-arrow-right icon-on-right"/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-small btn-primary center" use-when="requirement != null">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><date-time/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><date-time default-value="${groovy: org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/></field>
        <field name="useCase"><hidden/></field>
        <field name="deliverableId"><hidden/></field>
        <field name="requestor" title="${uiLabelMap.Requestor}" use-when="requirement == null" required-field="true">
        	<lookup target-form-name="lookupPartyInfo"></lookup>
        </field>
        
        <field name="requestor" use-when="requirement != null"><hidden value="${listRequestor[0].partyId}"/></field>
        <field name="requestorDisplay" title="${uiLabelMap.Requestor}" use-when="requirement != null">
        	<display default-value="${requestor.firstName} ${requestor.middleName} ${requestor.lastName} ${requestor.groupName} [${listRequestor[0].partyId}]"/>
        </field>
        <field name="requestorDisplay" title="${uiLabelMap.Requestor}" use-when="requirement == null">
        	<hidden/>
        </field>
        <field name="receiverParty" title="${uiLabelMap.Receiver}" use-when="requirementType.equals(&quot;GIFT_REQ&quot;) &amp;&amp; requirement == null">
        	<lookup target-form-name="lookupPartyInfo" default-value="${listReceivers[0].partyId}"></lookup>
        </field>
        <field name="receiverParty" title="${uiLabelMap.Receiver}" use-when="requirementType.equals(&quot;GIFT_REQ&quot;) &amp;&amp; requirement != null">
        	<display default-value="${listReceivers[0].partyId}"/>
        </field>
        <field name="customerParty" title="${uiLabelMap.Customer}" use-when="requirementType.equals(&quot;CHANGE_DATE_REQ&quot;) || requirementType.equals(&quot;SALES_REQ&quot;)" required-field="true">
        	<lookup target-form-name="lookupPartyInfo" default-value="${listCustomer[0].partyId}"></lookup>
        </field>
        <field name="customerParty" title="${uiLabelMap.Customer}" use-when="!requirementType.equals(&quot;CHANGE_DATE_REQ&quot;) &amp;&amp; !requirementType.equals(&quot;SALES_REQ&quot;)" required-field="true">
        	<hidden/>
        </field>
		<field name="quantity"><hidden/></field>
		<field name="uomId"><hidden/></field>
		<field name="currencyUomId">
			<drop-down no-current-selected-key="VND">
   				<entity-options description="${abbreviation}" entity-name="Uom" key-field-name="uomId">
   					<entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
  				</entity-options>
			</drop-down>
		</field>
		<field name="productId"><hidden/></field>
        <sort-order>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="requestor"/>
        		<sort-field name="requirementId"/>
        		<sort-field name="requirementTypeId"/>
        		<sort-field name="requestorDisplay"/>
        		<sort-field name="receiverParty"/>
        		<sort-field name="productStoreId"/>
        		<sort-field name="facilityId"/>
        		<sort-field name="originContactMechId"/>
        		<sort-field name="productStoreIdTo"/>
        		<sort-field name="facilityTo"/>
        		<sort-field name="destContactMechId"/>
        		<sort-field name="customerParty"/>
        		<sort-field name="fixedAssetId"/>
        	</field-group>
        	<field-group style="span6 no-widget-header end-group-group">
        		<sort-field name="requiredByDate"/>
        		<sort-field name="requirementStartDate"/>
        		<sort-field name="estimatedBudget"/>
        		<sort-field name="currencyUomId"/>
        		<sort-field name="reason"/>
        		<sort-field name="statusId"/>
        		<sort-field name="description"/>
        	</field-group>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="submitButtonUpdate" position="1"/>
        	</field-group>
        </sort-order>
    </form>
    <form name="EditTransferOrder" type="single" target="updateTransferOrder">
    	<actions>
    	</actions>
    	<field name="requirementTypeId"><hidden value="TRANSFER_REQ"/></field>
    	<field name="requirementId" title="${uiLabelMap.Requirement}" required-field="true">
	    	<lookup target-form-name="lookupRequirement" target-parameter="requirementTypeId"></lookup>
	    	</field>
   		<field name="orderName" id-name="orderId" title="${uiLabelMap.OrderName}"><text/></field>
   		<field name="uomId" title="${uiLabelMap.currencyUomId}">
   			<drop-down no-current-selected-key="VND">
   				<entity-options description="${abbreviation}" entity-name="Uom">
   					<entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
  				</entity-options>
   			</drop-down>
   		</field>
   		<field name="is_gift"><hidden value="false"/></field>
   		<field name="may_split"><hidden value="false"/></field>
   		<field name="shipping_method"><hidden value="Default"/></field>
<!--    		<field name="shipping_contact_mech_id"></field> -->
   		<field name="submitButton" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-small btn-primary"><submit button-type="button" image-location="icon-ok"/></field>
    </form>
    <form name="EditInternalSalesOrder" type="single" target="updateInternalSalesOrder">
    	<actions>
    	</actions>
    	<field name="requirementTypeId"><hidden value="INTERNAL_SALES_REQ"/></field>
    	<field name="salesMethodChannelEnumId"><hidden value="LOG_SALES_INTERNAL"/></field>
    	<field name="requirementId" title="${uiLabelMap.Requirement}" required-field="true">
	    	<lookup target-form-name="lookupRequirement" target-parameter="requirementTypeId"></lookup>
	    	</field>
   		<field name="orderName" id-name="orderId" title="${uiLabelMap.OrderName}"><text/></field>
   		<field name="uomId" title="${uiLabelMap.currencyUomId}">
   			<drop-down no-current-selected-key="VND">
   				<entity-options description="${abbreviation}" entity-name="Uom">
   					<entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
  				</entity-options>
   			</drop-down>
   		</field>
   		<field name="submitButton" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-small btn-primary"><submit button-type="button" image-location="icon-ok"/></field>
    </form>
    <form name="EditMarketingOrder" type="single" target="updateMarketingOrder">
    	<actions>
    	</actions>
    	<field name="requirementTypeId"><hidden value="MARKETING_REQ"/></field>
    	<field name="salesMethodChannelEnumId"><hidden value="MKT_SAMPLING"/></field>
    	<field name="requirementId" title="${uiLabelMap.Requirement}" required-field="true">
    		<lookup target-form-name="lookupRequirement" target-parameter="requirementTypeId"></lookup>
   		</field>
   		<field name="orderName" id-name="orderId" title="${uiLabelMap.OrderName}"><text/></field>
   		<field name="uomId" title="${uiLabelMap.currencyUomId}">
   			<drop-down no-current-selected-key="VND">
   				<entity-options description="${abbreviation}" entity-name="Uom">
   					<entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
  				</entity-options>
   			</drop-down>
   		</field>
   		<field name="submitButton" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-small btn-primary"><submit button-type="button" image-location="icon-ok"/></field>
    </form>
    <form name="EditChangeDateOrder" type="single" target="updateChangeDateOrder">
    	<actions>
    		<set field="requirementTypeId" value="CHANGE_DATE_REQ"/>
    	</actions>
    	<field name="requirementTypeId"><hidden value="CHANGE_DATE_REQ"/></field>
    	<field name="salesMethodChannelEnumId"><hidden value="LOG_CHANGE_DATE"/></field>
    	<field name="requirementId" title="${uiLabelMap.CommonFrom} ${uiLabelMap.Requirement}" required-field="true" use-when="&quot;FR_REQUIREMENT&quot;.equals(reasonTypeId)">
    		<lookup target-form-name="lookupRequirement" target-parameter="requirementTypeId"></lookup>
   		</field>
   		<field name="returnHeaderTypeId"><hidden value="CUSTOMER_RETURN"/></field>
   		<field name="statusId"><hidden value="RETURN_ACCEPTED"/></field>
   		<field name="productStoreId" title="${uiLabelMap.productStore}" use-when="&quot;FR_RETURN&quot;.equals(reasonTypeId)">
            <drop-down allow-empty="false" no-current-selected-key="${requirement.productStoreId}">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
		<field name="facilityId" title="${uiLabelMap.facility}" use-when="&quot;FR_RETURN&quot;.equals(reasonTypeId)">
			<drop-down>
				<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
			</drop-down>
		</field>
   		<field name="returnId" title="${uiLabelMap.CommonFrom} ${uiLabelMap.OrderOrderReturns}" required-field="true" use-when="&quot;FR_RETURN&quot;.equals(reasonTypeId)">
    		<lookup target-form-name="lookupReturn" target-parameter="returnHeaderTypeId, statusId, facilityId"></lookup>
   		</field>
   		<field name="orderName" id-name="orderId" title="${uiLabelMap.OrderName}" required-field="true"><text/></field>
   		<field name="uomId" title="${uiLabelMap.currencyUomId}">
   			<drop-down no-current-selected-key="VND">
   				<entity-options description="${abbreviation}" entity-name="Uom">
   					<entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
  				</entity-options>
   			</drop-down>
   		</field>
   		<field name="submitButton" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-small btn-primary"><submit button-type="button" image-location="icon-ok"/></field>
   		<sort-order>
   			<field-group style="no-left-margin no-widget-header span6 begin-group-group">
   				<sort-field name="productStoreId" position="1"/>
   				<sort-field name="facilityId" position="2"/>
   				<sort-field name="returnId" position="3"/>
   				<sort-field name="requirementId" position="3"/>
   				<sort-field name="orderName" position="4"/>
   				<sort-field name="uomId" position="5"/>
   				<sort-field name="submitButton"/>
   			</field-group>
   		</sort-order>
    </form>
    <form name="LookupRequirement" type="single" target="lookupRequirement">
    	<field name="requirementId" title="${uiLabelMap.Requirement}"><text-find/></field>
    	<field name="requirementTypeId">
    		<hidden value="${parameters.parm0}"/>
   		</field>
<!--     	<field name="partyId" title="${uiLabelMap.Requestor}"><text-find/></field> -->
    	<field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><date-find/></field>
    	<field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><date-find/></field>
    	<field name="statusId" title="${uiLabelMap.Status}">
            <drop-down allow-empty="false" no-current-selected-key="REQ_APPROVED">
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" value="REQUIREMENT_STATUS"/>
                    <entity-constraint name="statusId" operator="not-equals" value="REQ_PROPOSED"/>
                    <entity-constraint name="statusId" operator="not-equals" value="REQ_REJECTED"/>
                    <entity-constraint name="statusId" operator="not-equals" value="REQ_ORDERED"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-small btn-primary"><submit button-type="button"/></field>
    </form>
    <form name="ListLookupRequirement" list-name="listIt" title="" type="list"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" paginate-target="LookupOrderHeaderAndShipInfo">
        <actions>
<!--         	<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/LookupRequirement.groovy"/> -->
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="Requirement"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <row-actions>
        	<entity-condition entity-name="RequirementRole" list="listReqOwner">
				<condition-list>
					<condition-expr field-name="requirementId" from-field="requirementId"/>
					<condition-expr field-name="roleTypeId" value="OWNER"/>
				</condition-list>
				<order-by field-name="-fromDate"/>
			</entity-condition>
			<entity-one entity-name="PartyNameView" value-field="requestor">
        		<field-map field-name="partyId" value="${listReqOwner[0].partyId}"/>
        	</entity-one>			
        </row-actions>
    	<field name="requirementId" title="${uiLabelMap.Requirement}">
    		<hyperlink also-hidden="false" target-type="plain" description="${requirementId}" target="javascript:set_value('${requirementId}')">
    		</hyperlink>
    	</field>
    	<field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
    	<field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><display/></field>
    	<field name="facilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity></field>
    	<field name="partyIdFrom" title="${uiLabelMap.Requestor}"><display default-value="${requestor.firstName} ${requestor.middleName} ${requestor.lastName} ${requestor.groupName}"/></field>
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
    </form>
    <form name="ListReceiveRequirementItems" target="approveReceiveRequirementItems" type="multi" list-name="listRequirementItems" use-row-submit="true" default-table-style="table table-striped table-bordered table-hover dataTable" odd-row-style="alternate-row">
		<row-actions>
			<entity-one entity-name="Product" value-field="product"></entity-one>    		
    	</row-actions>
		<field name="productId" title="${uiLabelMap.ProductProduct}" use-when="!(&quot;REQ_ITEM_APPROVED&quot;).equals(statusId)">
    		<hyperlink target="editRequirementItem" description="${product.productName}">
    			<parameter param-name="requirementId" from-field="requirementId"/>
    			<parameter param-name="reqItemSeqId" from-field="reqItemSeqId"/>
    			<parameter param-name="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
    			<parameter param-name="requirementTypeId" from-field="requirementTypeId"/>
    		</hyperlink>
    	</field>
    	<field name="productId" title="${uiLabelMap.ProductProduct}" use-when="(&quot;REQ_ITEM_APPROVED&quot;).equals(statusId)">
    		<display-entity entity-name="Product" description="${productName}"></display-entity>
    	</field>
    	<field name="selectedSubMenuItem"><hidden value="${selectedSubMenuItem}"/></field>
    	<field name="requirementTypeId"><hidden value="${parameters.requirementTypeId}"/></field>
    	<field name="prodCatalogId" title="${uiLabelMap.ProductCatalog}"><display-entity entity-name="ProdCatalog" description="${catalogName}" key-field-name="prodCatalogId"></display-entity></field>
    	<field name="prodCategoryId" title="${uiLabelMap.ProductCategory}"><display-entity entity-name="ProductCategory" description="${categoryName}" key-field-name="productCategoryId"></display-entity></field>
    	<field name="reqItemSeqId" title="${uiLabelMap.reqItemSeqId}"><display/></field>
    	<field name="quantity" title="${uiLabelMap.Quantity}"><display/></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}"><display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity></field>
    	<field name="unitCost" title="${uiLabelMap.UnitCost}"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><display/></field>
		<field name="expireDate" title="${uiLabelMap.ExpirationDate}"><display/></field>
    	<field name="createDate" title="${uiLabelMap.createDate}"><display/></field>
    	<field name="receiveDate" title="${uiLabelMap.ReceiveDate}"><display/></field>
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
    	<field name="requirementId"><hidden value="${requirementId}"/></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"  use-when="!(&quot;REQ_ITEM_APPROVED&quot;).equals(statusId) &amp;&amp; !(&quot;REQ_ITEM_RECEIVED&quot;).equals(statusId)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary" use-when="!listRequirementItems.isEmpty() &amp;&amp; !(&quot;REQ_COMPLETED&quot;).equals(requirement.get(&quot;statusId&quot;)) &amp;&amp; !(&quot;REQ_APPROVED&quot;).equals(requirement.get(&quot;statusId&quot;))">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
     <form name="ListReceiveRequirementItemsCompleted" target="receiveItems" type="multi" list-name="listRequirementItems" use-row-submit="true" default-table-style="table table-striped table-bordered table-hover dataTable" odd-row-style="alternate-row">
    	<row-actions>
			<entity-one entity-name="Product" value-field="product"></entity-one>    		
    	</row-actions>
    	<field name="productId" title="${uiLabelMap.ProductProduct}" use-when="!(&quot;REQ_ITEM_APPROVED&quot;).equals(statusId) &amp;&amp; !(&quot;REQ_ITEM_RECEIVED&quot;).equals(statusId)" tooltip="${uiLabelMap.CommonEdit}">
    		<hyperlink target="editRequirementItem" description="${product.productName}">
    			<parameter param-name="requirementId" from-field="requirementId"/>
    			<parameter param-name="reqItemSeqId" from-field="reqItemSeqId"/>
    			<parameter param-name="requirementTypeId" from-field="requirementTypeId"/>
    			<parameter param-name="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
    		</hyperlink>
    	</field>
    	<field name="productId" title="${uiLabelMap.ProductProduct}" use-when="(&quot;REQ_ITEM_APPROVED&quot;).equals(statusId) || (&quot;REQ_ITEM_RECEIVED&quot;).equals(statusId)">
    		<display-entity entity-name="Product" description="${productName}"></display-entity>
    	</field>
    	<field name="prodCatalogId" title="${uiLabelMap.ProductCatalog}"><display-entity entity-name="ProdCatalog" description="${catalogName}" key-field-name="prodCatalogId"></display-entity></field>
    	<field name="prodCategoryId" title="${uiLabelMap.ProductCategory}"><display-entity entity-name="ProductCategory" description="${categoryName}" key-field-name="productCategoryId"></display-entity></field>
    	<field name="reqItemSeqId" title="${uiLabelMap.reqItemSeqId}"><display/></field>
    	<field name="quantity" title="${uiLabelMap.Quantity}"><display/></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}"><display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity></field>
    	<field name="unitCost" title="${uiLabelMap.UnitCost}"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><display/></field>
		<field name="expireDate" title="${uiLabelMap.ExpirationDate}"><display/></field>
    	<field name="createDate" title="${uiLabelMap.createDate}"><display/></field>
    	<field name="receiveDate" title="${uiLabelMap.ReceiveDate}"><display/></field>
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
    	<field name="requirementId"><hidden value="${requirementId}"/></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="(&quot;REQ_ITEM_APPROVED&quot;).equals(statusId) &amp;&amp; (&quot;REQ_APPROVED&quot;).equals(requirement.get(&quot;statusId&quot;))"><check all-checked="true"/></field>
    	<field name="submitButton" title="${uiLabelMap.ReceiveProduct}" widget-style="btn btn-small btn-primary" use-when="!listReqItemsApprovedOrReceiveds.isEmpty() &amp;&amp; (&quot;REQ_APPROVED&quot;).equals(requirement.get(&quot;statusId&quot;))">
            <submit button-type="button" image-location="icon-cloud-download"/>
        </field>
    </form>
    <form name="ListRequirementItems" target="deleteRequirementItems" type="multi" list-name="listRequirementItems" use-row-submit="true" default-table-style="table table-striped table-bordered table-hover dataTable" odd-row-style="alternate-row">
    	<field name="productId" title="${uiLabelMap.ProductProduct}"><display-entity entity-name="Product" description="${productName}" key-field-name="productId"></display-entity></field>
    	<field name="prodCatalogId" title="${uiLabelMap.ProductCatalog}"><display-entity entity-name="ProdCatalog" description="${catalogName}" key-field-name="prodCatalogId"></display-entity></field>
    	<field name="prodCategoryId" title="${uiLabelMap.ProductCategory}"><display-entity entity-name="ProductCategory" description="${categoryName}" key-field-name="productCategoryId"></display-entity></field>
    	<field name="reqItemSeqId" title="${uiLabelMap.reqItemSeqId}"><display/></field>
    	<field name="quantity" title="${uiLabelMap.Quantity}"><display/></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}"><display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity></field>
		<field name="expireDate" title="${uiLabelMap.ExpirationDate}"><display/></field>
    	<field name="createDate" title="${uiLabelMap.createDate}"><display/></field>
    	<field name="shipBeforeDate"><display/></field>
    	<field name="shipAfterDate"><display/></field>
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
    	<field name="requirementId"><hidden value="${requirementId}"/></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonDelete}" widget-style="btn btn-small btn-danger" use-when="!listRequirementItems.isEmpty()">
            <submit button-type="button" image-location="icon-trash"/>
        </field>
    </form>
    <form name="ListReceiveRequirementItemAfterAdds" target="deleteReceiveRequirementItemAfterAdd" type="multi" list-name="listRequirementItems" use-row-submit="true" default-table-style="table table-striped table-bordered table-hover dataTable" odd-row-style="alternate-row">
    	<field name="productId" title="${uiLabelMap.ProductProduct}">
    		<display-entity entity-name="Product" description="${productName}"></display-entity>
    	</field>
    	<field name="prodCatalogId" title="${uiLabelMap.ProductCatalog}"><display-entity entity-name="ProdCatalog" description="${catalogName}" key-field-name="prodCatalogId"></display-entity></field>
    	<field name="prodCategoryId" title="${uiLabelMap.ProductCategory}"><display-entity entity-name="ProductCategory" description="${categoryName}" key-field-name="productCategoryId"></display-entity></field>
    	<field name="reqItemSeqId" title="${uiLabelMap.reqItemSeqId}"><display/></field>
    	<field name="quantity" title="${uiLabelMap.Quantity}"><display/></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}"><display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity></field>
    	<field name="unitCost" title="${uiLabelMap.UnitCost}"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity></field>
		<field name="expireDate" title="${uiLabelMap.ExpirationDate}"><display/></field>
		<field name="receiveDate" title="${uiLabelMap.ReceiveDate}"><display/></field>
    	<field name="createDate" title="${uiLabelMap.createDate}"><display/></field>	
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
    	<field name="requirementId"><hidden value="${requirementId}"/></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!&quot;REQ_ITEM_RECEIVED&quot;.equals(statusId)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonDelete}" widget-style="btn btn-small btn-danger" use-when="!listRequirementItems.isEmpty()">
            <submit button-type="button" image-location="icon-trash"/>
        </field>
    </form>
    <form name="ListRequirementItemAfterAdds" target="deleteRequirementItemAfterAdd" type="multi" list-name="listRequirementItems" use-row-submit="true" default-table-style="table table-striped table-bordered table-hover dataTable" odd-row-style="alternate-row">
    	<field name="productId" title="${uiLabelMap.ProductProduct}"><display-entity entity-name="Product" description="${productName}" key-field-name="productId"></display-entity></field>
    	<field name="prodCatalogId" title="${uiLabelMap.ProductCatalog}"><display-entity entity-name="ProdCatalog" description="${catalogName}" key-field-name="prodCatalogId"></display-entity></field>
    	<field name="prodCategoryId" title="${uiLabelMap.ProductCategory}"><display-entity entity-name="ProductCategory" description="${categoryName}" key-field-name="productCategoryId"></display-entity></field>
    	<field name="reqItemSeqId" title="${uiLabelMap.reqItemSeqId}"><display/></field>
    	<field name="quantity" title="${uiLabelMap.Quantity}"><display/></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}"><display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity></field>
		<field name="expireDate" title="${uiLabelMap.ExpirationDate}"><display/></field>
    	<field name="createDate" title="${uiLabelMap.createDate}"><display/></field>	
    	<field name="shipBeforeDate"><display/></field>
    	<field name="shipAfterDate"><display/></field>
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
    	<field name="requirementId"><hidden value="${requirementId}"/></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonDelete}" widget-style="btn btn-small btn-danger" use-when="!listRequirementItems.isEmpty()">
            <submit button-type="button" image-location="icon-trash"/>
        </field>
    </form>
    <form name="ListRequirementItemsCompleted" target="" type="list" list-name="listRequirementItems" default-table-style="table table-striped table-bordered table-hover dataTable" odd-row-style="alternate-row">
    	<field name="productId" title="${uiLabelMap.ProductProduct}"><display-entity entity-name="Product" description="${productName}" key-field-name="productId"></display-entity></field>
    	<field name="prodCatalogId" title="${uiLabelMap.ProductCatalog}"><display-entity entity-name="ProdCatalog" description="${catalogName}" key-field-name="prodCatalogId"></display-entity></field>
    	<field name="prodCategoryId" title="${uiLabelMap.ProductCategory}"><display-entity entity-name="ProductCategory" description="${categoryName}" key-field-name="productCategoryId"></display-entity></field>
    	<field name="reqItemSeqId" title="${uiLabelMap.reqItemSeqId}"><display/></field>
    	<field name="quantity"><display/></field>
    	<field name="quantityUomId"><display-entity entity-name="Uom" description="${description}" key-field-name="uomId"></display-entity></field>
<!--     	<field name="inventoryItemId"><display/></field> -->
    	<field name="createDate"><display/></field>
    	<field name="shipBeforeDate"><display/></field>
    	<field name="shipAfterDate"><display/></field>
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
    </form>
    <form name="LookupRequirementProduct" type="single" target="lookupRequirementProduct" default-entity-name="RequirementItem">
    	<alt-target use-when="(&quot;RECEIVE_PRODUCT_REQ&quot;).equals(requirementTypeId)" target="lookupReceiveRequirementProduct"/>
    	<field name="prodCatalogId" title="${uiLabelMap.ProductCatalog}">
	    	<drop-down allow-empty="true">
	    		<list-options key-name="prodCatalogId" list-name="listCatalogs" description="${catalogName}"/>
	    	</drop-down>
   		</field>
   		<field name="prodCategoryId" title="${uiLabelMap.ProductCategory}">
	    	<drop-down allow-empty="true">
	    		<list-options key-name="productCategoryId" list-name="listCategories" description="${categoryName}"/>
	    	</drop-down>
   		</field>
   		<field name="selectedSubMenuItem" use-when="(&quot;RECEIVE_PRODUCT_REQ&quot;).equals(requirementTypeId)"><hidden value="${parameters.selectedSubMenuItem}"/></field>
   		<field name="requirementTypeId"><hidden value="${requirementTypeId}"/></field>
   		<field name="requirementId"><hidden value="${requirementId}"/></field>
   		<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-small btn-primary"><submit button-type="button" image-location="icon-search"/></field>
   		<sort-order>
   			<field-group style="no-left-margin no-widget-header span6 begin-group-group">
   				<sort-field name="prodCatalogId" position="1"/>
   				<sort-field name="prodCategoryId" position="2"/>
   				<sort-field name="submitButton" position="3"/>
   			</field-group>
   			<field-group style="span6 no-widget-header end-group-group">
   				
   			</field-group>
   		</sort-order>
    </form>
    <form name="ListLookupRequirementProduct" odd-row-style="alternate-row" target="addProductToRequirement" separate-columns="true" default-entity-name="Product" default-table-style="table table-striped table-bordered table-hover dataTable" type="multi" list-name="listProducts" use-row-submit="true">
    	<row-actions>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getPackingUom.groovy"/>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getCatalogCategoryByProduct.groovy"/>
    		<set field="listProductQuantityUom" value="${listProductQuantityUom}" type="List"/>
    		<set field="listCatalogs" value="${listCatalogs}" type="List"/>
    		<set field="listCategories" value="${listCategories}" type="List"/>
    		<entity-one entity-name="Requirement" value-field="requirement">
    			<field-map field-name="requirementId" from-field="parameters.requirementId"/>
    		</entity-one>
    	</row-actions>
    	<field name="productId"><display/></field>
    	<field name="requirementId"><hidden value="${requirementId}"/></field>
    	<field name="requirementTypeId"><hidden value="${requirement.requirementTypeId}"/></field>
    	<field name="currencyUomId"><hidden value="${requirement.currencyUomId}"/></field>
    	<field name="prodCatalogId"><hidden/></field>
    	<field name="prodCatalogId" widget-style="width150px" title="${uiLabelMap.ProductCatalog}">
    		<drop-down allow-empty="false">
    			<list-options key-name="prodCatalogId" list-name="listCatalogs" description="${catalogName}"/>
    		</drop-down>
    	</field>
    	<field name="prodCategoryId"><hidden/></field>
    	<field name="prodCategoryId" title="${uiLabelMap.ProductCategory}" widget-style="width150px">
    		<drop-down allow-empty="false">
    			<list-options key-name="productCategoryId" list-name="listCategories" description="${categoryName}"/>
    		</drop-down>
    	</field>
    	<field name="quantity" widget-style="width80pc"><text default-value="0"></text></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}" widget-style="width80pc">
        	<drop-down allow-empty="false">
        		<list-options key-name="uomId" list-name="listProductQuantityUom" description="${description}"/>
        	</drop-down>
        </field>
        <field name="expireDate" title="${uiLabelMap.ProductExpireDate}" widget-style="width80pc"><date-time/></field>
        <field name="shipBeforeDate" title="${uiLabelMap.shipBeforeDate}"><hidden/></field>
        <field name="shipAfterDate" title="${uiLabelMap.shipAfterDate}"><hidden/></field>
        <field name="statusId" title="${uiLabelMap.Status}" widget-style="width80pc">
        	<drop-down>
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" operator="equals" value="REQ_ITEM_STATUS"/>
        		</entity-options>
        	</drop-down>
       	</field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" use-when="!listProducts.isEmpty()" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-plus"/>
        </field>
    </form>
    <form name="ListLookupReceiveRequirementProduct" odd-row-style="alternate-row" target="addProductToReceiveRequirement" separate-columns="true" default-entity-name="Product" default-table-style="table table-striped table-bordered table-hover dataTable" type="multi" list-name="listProducts" use-row-submit="true">
    	<row-actions>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getPackingUom.groovy"/>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getCatalogCategoryByProduct.groovy"/>
    		<set field="listProductQuantityUom" value="${listProductQuantityUom}" type="List"/>
    		<set field="listCatalogs" value="${listCatalogs}" type="List"/>
    		<set field="listCategories" value="${listCategories}" type="List"/>
    		<entity-one entity-name="Requirement" value-field="requirement">
    			<field-map field-name="requirementId" from-field="parameters.requirementId"/>
    		</entity-one>
    	</row-actions>
    	<field name="productId" title="${uiLabelMap.productId}"><display/></field>
    	<field name="productName" title="${uiLabelMap.ProductName}"><display-entity entity-name="Product" description="${productName}" key-field-name="productId"></display-entity></field>
    	<field name="requirementId"><hidden value="${requirementId}"/></field>
    	<field name="requirementTypeId"><hidden value="${requirement.requirementTypeId}"/></field>
    	<field name="prodCatalogId" widget-style="width150px" title="${uiLabelMap.ProductCatalog}">
    		<drop-down allow-empty="false">
    			<list-options key-name="prodCatalogId" list-name="listCatalogs" description="${catalogName}"/>
    		</drop-down>
    	</field>
    	<field name="prodCategoryId" title="${uiLabelMap.ProductCategory}" widget-style="width150px">
    		<drop-down allow-empty="false">
    			<list-options key-name="productCategoryId" list-name="listCategories" description="${categoryName}"/>
    		</drop-down>
    	</field>
    	<field name="quantity" widget-style="width80pc"><text default-value="0"></text></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}" widget-style="width80pc">
        	<drop-down allow-empty="false">
        		<list-options key-name="uomId" list-name="listProductQuantityUom" description="${description}"/>
        	</drop-down>
        </field>
        <field name="currencyUomId" title="${uiLabelMap.currencyUomId}" widget-style="width80pc">
            <drop-down no-current-selected-key="${defaultOrganizationPartyCurrencyUomId}">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="unitCost" title="${uiLabelMap.UnitCost}" widget-style="width80pc"><text default-value="0"/></field>
        <field name="expireDate" title="${uiLabelMap.ProductExpireDate}" widget-style="width150px"><date-time/></field>
        <field name="receiveDate" title="${uiLabelMap.ReceiveDate}" widget-style="width150px"><date-time/></field>
        <field name="statusId" title="${uiLabelMap.Status}" widget-style="width80pc">
        	<drop-down no-current-selected-key="REQ_ITEM_CREATED">
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" operator="equals" value="REQ_ITEM_STATUS"/>
        		</entity-options>
        	</drop-down>
       	</field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-plus"/>
        </field>
    </form>
    <form name="EditUomPacking" type="single" target="updateUomPacking">
    	<field name="productId"><hidden value="${productId}"/></field>
    	<field name="uomTypeId"><hidden value="PRODUCT_PACKING"/></field>
    	<field name="description" title="${uiLabelMap.CommonDescription}" required-field="true"><text/></field>
    	<field name="abbreviation" title="${uiLabelMap.Abbreviation}"><text/></field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
        <sort-order>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="uomId" position="1"/>
        		<sort-field name="description" position="2"/>
        	</field-group>
        	<field-group style="span6 no-widget-header end-group-group">
        		<sort-field name="abbreviation"/>
        	</field-group>
        	 <field-group style="no-widget-header span12 no-left-margin align-center">
            	<sort-field name="submitButton"/>
            </field-group>
        </sort-order>
    </form>
    <form name="ListReceiveRequirements" target="receiveRequirements" type="multi" default-table-style="table table-striped table-bordered table-hover dataTable" list-name="listReceiveRequirements" use-row-submit="true">
    	<row-actions>
    		<entity-condition entity-name="OrderRequirement" list="listOrder">
    			<condition-expr field-name="requirementId" from-field="requirementId"/>
    		</entity-condition>
    	</row-actions>
    	<field name="requirementId" title="${uiLabelMap.Requirement}" use-when="(&quot;RECEIVE_PRODUCT_REQ&quot;).equals(requirementTypeId)">
    		<hyperlink target="editReceiveRequirement" description="${requirementId}">
    			<parameter param-name="requirementId" from-field="requirementId"/>
    			<parameter param-name="requirementTypeId" from-field="requirementTypeId"/>
    			<parameter param-name="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
    		</hyperlink>
    	</field>
    	<field name="requirementId" title="${uiLabelMap.Requirement}" use-when="(&quot;RECEIVE_ORDER_REQ&quot;).equals(requirementTypeId)">
    		<hyperlink target="editReceiveRequirementFromPO" description="${requirementId}">
    			<parameter param-name="requirementId" from-field="requirementId"/>
    			<parameter param-name="requirementTypeId" from-field="requirementTypeId"/>
    			<parameter param-name="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
    		</hyperlink>
    	</field>
    	<field name="requirementTypeId" title="${uiLabelMap.RequirementType}"><display-entity entity-name="RequirementType" description="${description}"></display-entity></field>
    	<field name="orderId" use-when="(&quot;RECEIVE_ORDER_REQ&quot;).equals(requirementTypeId)" title="${uiLabelMap.OrderId}">
    		<display default-value="${listOrders[0].orderId}"></display>
    	</field>
    	<field name="productStoreId" title="${uiLabelMap.productStore}">
    		<display-entity entity-name="ProductStore" description="${storeName}"></display-entity>
    	</field>
    	<field name="facilityId" title="${uiLabelMap.facility}">
    		<display-entity entity-name="Facility" description="${facilityName}"></display-entity>
    	</field>
    	<field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><display/></field>
    	<field name="statusId" title="${uiLabelMap.Status}">
    		<display-entity entity-name="StatusItem" description="${description}"></display-entity>
    	</field>
    	<field name="description"><display/></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="(&quot;REQ_APPROVED&quot;).equals(statusId)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.ReceiveProduct}" widget-style="btn btn-small btn-primary" use-when="!listReceiveRequirements.isEmpty()">
            <submit button-type="button" image-location="icon-cloud-download"/>
        </field>
    </form>
    <form name="EditReceiveRequirement" type="single" default-entity-name="Requirement" target="updateReceiveRequirement">
    	<alt-target use-when="requirement == null" target="createReceiveRequirement"/>
        <field name="requirementId" title="${uiLabelMap.requirementId}" use-when="requirement != null"><display/></field>
        <field name="requirementId" title="${uiLabelMap.requirementId}" use-when="requirement == null"><hidden/></field>
        <field name="statusId" position="5" title="${uiLabelMap.Status}">
            <drop-down allow-empty="false" no-current-selected-key="${requirement.statusId}">
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" value="REQUIREMENT_STATUS"/>
                    <entity-constraint name="statusId" operator="not-equals" value="REQ_ORDERED"/>
                    <entity-constraint name="statusId" operator="not-equals" value="REQ_COMPLETED"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="description" position="6"><text/></field>
        <field name="requirementTypeId" use-when="requirementTypeId == null" title="${uiLabelMap.RequirementType}">
        	<drop-down>
        		<entity-options description="${description}" entity-name="RequirementType">
        			<entity-constraint name="requirementTypeId" operator="in" env-name="listRequirementTypeId"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="requirementTypeId" position="2" use-when="requirementTypeId != null" title="${uiLabelMap.RequirementType}"><display-entity entity-name="RequirementType" description="${description}"></display-entity></field>
        <field name="requirementTypeId" use-when="requirement != null &amp;&amp; requirementTypeId != null" title="${uiLabelMap.RequirementType}"><display-entity entity-name="RequirementType" description="${description}"></display-entity></field>
        <field name="productStoreId" title="${uiLabelMap.productStore}">
            <drop-down allow-empty="false" no-current-selected-key="${requirement.productStoreId}">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
		<field name="facilityId" title="${uiLabelMap.facility}">
			<drop-down>
				<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
			</drop-down>
		</field>
		<field name="originContactMechId" title="${uiLabelMap.OriginContactMech}">
        	<drop-down no-current-selected-key="${requirement.contactMechId}">
        		<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
        	</drop-down>
        </field>
   		<field name="currencyUomId" title="${uiLabelMap.ProductCurrencyUomId}">
            <drop-down allow-empty="true" no-current-selected-key="${defaultOrganizationPartyCurrencyUomId}">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
		<field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><date-time/></field>
        <field name="requiredByDate" title="${uiLabelMap.ReceiveDate}"><date-time/></field>
        <field name="requestor" title="${uiLabelMap.Requestor}" use-when="listRequestor == null">
        	<lookup target-form-name="lookupPartyInfo"></lookup>
        </field>
        <field name="requestor" title="${uiLabelMap.Requestor}" use-when="listRequestor != null" required-field="true">
        	<lookup target-form-name="lookupPartyInfo" default-value="${listRequestor[0].partyId}"></lookup>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-small btn-primary center" use-when="(requirement != null) &amp;&amp; !(&quot;REQ_COMPLETED&quot;).equals(requirement.get(&quot;statusId&quot;))">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
        <field name="submitButton" title="${uiLabelMap.ProductAddProduct}" widget-style="btn btn-small btn-primary center" use-when="(requirement == null)">
            <submit button-type="button" image-location="icon-arrow-right icon-on-right"/>
        </field>
        <sort-order>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="requirementId"/>
        		<sort-field name="requirementTypeId"/>
        		<sort-field name="productStoreId" position="1"/>
        		<sort-field name="facilityId" position="2"/>
        		<sort-field name="originContactMechId" position="3"/>
        		<sort-field name="currencyUomId" position="4"/>
        	</field-group>
        	<field-group style="span6 no-widget-header end-group-group">
        		<sort-field name="requestor" position="1"/>
        		<sort-field name="requirementStartDate" position="2"/>
        		<sort-field name="requiredByDate" position="3"/>
        		<sort-field name="reason" position="4"/>
        		<sort-field name="statusId" position="5"/>
        		<sort-field name="description" position="6"/>
        	</field-group>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="submitButtonUpdate" position="1"/>
        	</field-group>
        </sort-order>
    </form>
    <form name="EditReceiveRequirementFromPO" type="single" default-entity-name="Requirement" target="updateReceiveRequirementFromPO">
    	<actions>
    		<entity-one entity-name="OrderHeader" value-field="orderHeader">
    			<field-map field-name="orderId" from-field="parameters.orderId"/>
    		</entity-one>
    		<entity-condition entity-name="OrderRequirement" list="listOrders">
    			<condition-expr field-name="requirementId" from-field="parameters.requirementId"/>
    		</entity-condition>
    	</actions>
    	<alt-target use-when="requirement == null" target="createNewReceiveRequirementsFromPO"/>
        <field name="requirementId" title="${uiLabelMap.requirementId}" use-when="requirement != null"><display/></field>
        <field name="requirementId" title="${uiLabelMap.requirementId}" use-when="requirement == null"><hidden/></field>
        <field name="statusId" position="5" title="${uiLabelMap.Status}" use-when="requirement != null">
            <drop-down allow-empty="false" no-current-selected-key="${requirement.statusId}">
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" value="REQUIREMENT_STATUS"/>
                    <entity-constraint name="statusId" operator="not-equals" value="REQ_ORDERED"/>
                    <entity-constraint name="statusId" operator="not-equals" value="REQ_COMPLETED"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="selectedSubMenuItem"><hidden value="${selectedSubMenuItem}"/></field>
        <field name="orderId" position="3" title="${uiLabelMap.OrderId}" use-when="requirement != null"><lookup target-form-name="lookupPurchaseOrderShorten" default-value="${listOrders[0].orderId}"></lookup></field>
        <field name="orderId" position="1" title="${uiLabelMap.OrderId}" use-when="requirement == null"><lookup target-form-name="lookupPurchaseOrderShorten" default-value="${listOrders[0].orderId}"></lookup></field>
        <field name="description" position="6" use-when="requirement != null"><text default-value="${requirement.description}"/></field>
        <field name="requirementTypeId" position="2" use-when="requirementTypeId != null" title="${uiLabelMap.RequirementType}"><display-entity entity-name="RequirementType" description="${description}"></display-entity></field>
        <field name="requirementTypeId" use-when="requirement != null &amp;&amp; requirementTypeId != null" title="${uiLabelMap.RequirementType}"><display-entity entity-name="RequirementType" description="${description}"></display-entity></field>
        <field name="productStoreId" title="${uiLabelMap.productStore}" use-when="requirement != null">
            <drop-down allow-empty="true" no-current-selected-key="${requirement.productStoreId}">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
		<field name="facilityId" title="${uiLabelMap.facility}" use-when="requirement != null">
			<drop-down allow-empty="true" no-current-selected-key="${requirement.facilityId}">
				<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
			</drop-down>
		</field>
		<field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><date-time default-value="${requirement.requirementStartDate}"/></field>
        <field name="requiredByDate" title="${uiLabelMap.ReceiveDate}" use-when="requirement != null"><date-time default-value="${requirement.requiredByDate}"/></field>
        <field name="requestor" title="${uiLabelMap.Requestor}" use-when="listRequestor == null">
        	<lookup target-form-name="lookupPartyInfo"></lookup>
        </field>
        <field name="requestor" title="${uiLabelMap.Requestor}" use-when="listRequestor != null" required-field="true">
        	<lookup target-form-name="lookupPartyInfo" default-value="${listRequestor[0].partyId}"></lookup>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-small btn-primary center" use-when="(requirement != null) &amp;&amp; !(&quot;REQ_COMPLETED&quot;).equals(requirement.get(&quot;statusId&quot;))">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonCreateNew}" widget-style="btn btn-small btn-primary center" use-when="(requirement == null)">
            <submit button-type="button" image-location="icon-arrow-right icon-on-right"/>
        </field>
        <sort-order>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="requirementId"/>
        		<sort-field name="requirementTypeId"/>
        		<sort-field name="productStoreId" position="1"/>
        		<sort-field name="facilityId" position="2"/>
        		<sort-field name="orderId"/>
        	</field-group>
        	<field-group style="span6 no-widget-header end-group-group">
        		<sort-field name="requestor" position="1"/>
        		<sort-field name="requirementStartDate" position="2"/>
        		<sort-field name="requiredByDate" position="3"/>
        		<sort-field name="reason" position="4"/>
        		<sort-field name="statusId" position="5"/>
        		<sort-field name="description" position="6"/>
        	</field-group>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="submitButtonUpdate" position="1"/>
        	</field-group>
        </sort-order>
    </form>
    <form name="ShowReceiveRequirementCompleted" type="single" default-entity-name="Requirement" target="">
    	<actions>
    		<set field="facilityId" from-field="requirement.facilityId"/>
    		<set field="productStoreId" from-field="requirement.productStoreId"/>
    		<set field="uomId" from-field="requirement.currencyUomId"/>
    		<set field="partyId" value="${listRequestor[0].partyId}"/>
    	</actions>
        <field name="requirementId" title="${uiLabelMap.requirementId}" use-when="requirement != null"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
            <display-entity entity-name="StatusItem" description="${description}"></display-entity>
        </field>
        <field name="description"><display/></field>
        <field name="requirementTypeId" title="${uiLabelMap.RequirementType}"><display-entity entity-name="RequirementType" description="${description}"></display-entity></field>
        <field name="productStoreId" title="${uiLabelMap.productStore}">
            <display-entity entity-name="ProductStore" description="${storeName}"></display-entity>
        </field>
		<field name="facilityId" title="${uiLabelMap.facility}">
			<display-entity entity-name="Facility" description="${facilityName}"></display-entity>
		</field>
		<field name="contactMechId" title="${uiLabelMap.OriginContactMech}">
			<display-entity entity-name="PostalAddress" description="${address1}"></display-entity>
		</field>
   		<field name="uomId" title="${uiLabelMap.ProductCurrencyUomId}">
        	<display-entity entity-name="Uom" description="${uomId} - ${description}" key-field-name="uomId"></display-entity>
        </field>
		<field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
        <field name="requiredByDate" title="${uiLabelMap.ReceiveDate}"><display/></field>
        <field name="partyId" title="${uiLabelMap.Requestor}">
        	<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}"/>
        </field>
        <sort-order>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="requirementId"/>
        		<sort-field name="requirementTypeId"/>
        		<sort-field name="productStoreId"/>
        		<sort-field name="facilityId"/>
        		<sort-field name="contactMechId"/>
        		<sort-field name="uomId"/>
        	</field-group>
        	<field-group style="span6 no-widget-header end-group-group">
        		<sort-field name="partyId"/>
        		<sort-field name="requirementStartDate"/>
        		<sort-field name="requiredByDate"/>
        		<sort-field name="reason"/>
        		<sort-field name="statusId"/>
        		<sort-field name="description"/>
        	</field-group>
        </sort-order>
    </form>
    <form name="EditRequirementItem" target="updateRequirementItem" type="single" default-entity-name="RequirementItem">
    	<actions>
    		<entity-one entity-name="RequirementItem" value-field="reqItem">
    			<field-map field-name="requirementId" from-field="parameters.requirementId"/>
    			<field-map field-name="reqItemSeqId" from-field="parameters.reqItemSeqId"/>
    		</entity-one>
    		<set field="productId" from-field="reqItem.productId"/>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getPackingUom.groovy"/>
    		<set field="listProductQuantityUom" value="${listProductQuantityUom}" type="List"/>
    	</actions>
    	<field name="productId" title="${uiLabelMap.Product}"><display-entity entity-name="Product" description="${productName}"></display-entity></field>
    	<field name="requirementId" title="${uiLabelMap.Requirement}"><display default-value="${parameters.requirementId}"/></field>
    	<field name="reqItemSeqId" title="${uiLabelMap.reqItemSeqId}"><display default-value="${parameters.reqItemSeqId}"/></field>
    	<field name="requirementTypeId"><hidden value="${parameters.requirementTypeId}"/></field>
    	<field name="selectedSubMenuItem"><hidden value="${parameters.selectedSubMenuItem}"/></field>
    	<field name="quantity"><text default-value="${reqItem.quantity}"></text></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}">
        	<drop-down allow-empty="false" no-current-selected-key="${reqItem.quantityUomId}">
        		<list-options key-name="uomId" list-name="listProductQuantityUom" description="${description}"/>
        	</drop-down>
        </field>
        <field name="currencyUomId" title="${uiLabelMap.currencyUomId}">
            <drop-down no-current-selected-key="${reqItem.currencyUomId}">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="unitCost" title="${uiLabelMap.UnitCost}"><text default-value="${reqItem.unitCost}"/></field>
        <field name="expireDate" title="${uiLabelMap.ProductExpireDate}"><date-time default-value="${reqItem.expireDate}"/></field>
        <field name="receiveDate" title="${uiLabelMap.ReceiveDate}"><date-time default-value="${reqItem.receiveDate}"/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
        	<drop-down no-current-selected-key="${reqItem.statusId}">
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" operator="equals" value="REQ_ITEM_STATUS"/>
        		</entity-options>
        	</drop-down>
       	</field>
       	 <field name="submitButton" title="${uiLabelMap.CommonUpdate} ${uiLabelMap.CommonAnd} ${uiLabelMap.CommonBack}" widget-style="btn btn-small btn-primary center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
       	<sort-order>
       		<field-group style="no-left-margin no-widget-header span6 begin-group-group">
       			<sort-field name="requirementId"/>
       			<sort-field name="reqItemSeqId"/>
       			<sort-field name="productId"/>
       			<sort-field name="quantityUomId" position="1"/>
       			<sort-field name="quantity" position="2"/>
       		</field-group>
       		<field-group style="span6 no-widget-header end-group-group">
       			<sort-field name="currencyUomId" position="1"/>
       			<sort-field name="unitCost" position="2"/>
       			<sort-field name="expireDate" position="3"/>
       			<sort-field name="receiveDate" position="4"/>
       			<sort-field name="statusId" position="5"/>
       		</field-group>
       		<field-group style="no-left-margin no-widget-header span12 begin-group-group">
        		<sort-field name="submitButton"/>
        	</field-group>
       	</sort-order>
    </form>
    <form name="LookupPurchaseOrderShorten" target="lookupPurchaseOrderShorten" title="" type="single"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="orderHeaderId" title="${uiLabelMap.OrderId}"><text-find/></field>
        <field name="orderTypeId" title="${uiLabelMap.OrderType}">
            <hidden value="PURCHASE_ORDER"/>
        </field>
        <field name="orderName" title="${uiLabelMap.OrderName}"><text-find/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
            <hidden value="ORDER_APPROVED"/>
        </field>
        <field name="productStoreId" id-name="productStoreLookupId" title="${uiLabelMap.productStore}">
            <drop-down allow-empty="true">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
		<field name="facilityId" id-name="facilityLookupId" title="${uiLabelMap.facility}">
			<drop-down allow-empty="true">
				<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
			</drop-down>
		</field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonSearch}" widget-style="btn btn-small btn-info"><submit button-type="button"/></field>
        <sort-order>
        	<field-group style="no-widget-header span12 no-left-margin">
        		<sort-field name="orderHeaderId"/>
        		<sort-field name="orderName"/>
        	</field-group>
        	<field-group style="no-widget-header span6 no-left-margin begin-group-group">
        		<sort-field name="orderTypeId"/>
        		<sort-field name="productStoreId"/>
        	</field-group>
        	<field-group style="no-widget-header span6 end-group-group">
        		<sort-field name="originFacilityId"/>
        		<sort-field name="statusId"/>
        	</field-group>
        </sort-order>
    </form>
    <form name="ListLookupPurchaseOrderShorten" title="" type="list" list-name="listIt"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" paginate-target="LookupOrderHeaderShorten">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeader"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="orderId" title="${uiLabelMap.OrderId}">
            <hyperlink target-type="plain" also-hidden="true" description="${orderId}" target="javascript:set_value('${orderId}');"/>
        </field>
        <field name="orderTypeId" title="${uiLabelMap.OrderType}"><display-entity entity-name="OrderType" also-hidden="true"/></field>
        <field name="orderName" title="${uiLabelMap.OrderName}"><display/></field>
        <field name="originFacilityId" title="${uiLabelMap.facility}"><display/></field>
        <field name="productStoreId" title="${uiLabelMap.productStore}"><display/></field>
        <field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"> <display-entity entity-name="StatusItem" description="${description}"></display-entity></field>
    </form>
    <form name="ListItemReceivedDetail" type="list" target="" list-name="listOrderItemToReceives" default-table-style="table table-striped table-bordered table-hover dataTable" use-row-submit="true">
		<actions>
			<entity-one entity-name="OrderHeader" value-field="order">
				<field-map field-name="orderId" from-field="parameters.orderId"/>
			</entity-one>
			<set field="currencyUom" from-field="order.currencyUom"/>
		</actions>
    	<row-actions>
    		<entity-one entity-name="OrderItem" value-field="item">
    			<field-map field-name="orderId" from-field="parameters.orderId"/>
    		</entity-one>
    		<entity-condition entity-name="ShipmentReceipt" list="listShipmentReceipts">
    			<condition-list>
	    			<condition-expr field-name="orderId" from-field="parameters.orderId"/>
	    			<condition-expr field-name="orderItemSeqId" from-field="orderItemSeqId"/>
    			</condition-list>
    		</entity-condition>
    		<set field="statusId" from-field="statusId"/>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getQuantityDisplay.groovy"/>
    	</row-actions>
    	<field name="orderItemSeqId" title="${uiLabelMap.orderItemSeqId}"><display/></field>
    	<field name="productId" title="${uiLabelMap.ProductProduct}"><display/></field>
    	<field name="inventoryItemTypeId"><hidden value="NON_SERIAL_INV_ITEM"/></field>
    	<field name="expireDate" title="${uiLabelMap.ProductExpireDate}"><display default-value="${item.expireDate}"/></field>
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"></display-entity></field>
    	<field name="unitPrice" title="${uiLabelMap.UnitCost}">
    		<display type="currency" currency="${currencyUom}"/>
   		</field>
    	<field name="quantityOrderedDis" title="${uiLabelMap.QuantityOrdered}"><display default-value="${quantityOrdered}"/></field>
    	<field name="quantityAccepted" title="${uiLabelMap.QuantityReceived}"><display default-value="${quantityAccepted}"/></field>
    	<field name="quantityRejectedDis" title="${uiLabelMap.QuantityRejected}"><display default-value="${quantityRejected}"/></field>
    	<field name="quantityCanReceive" title="${uiLabelMap.QuantityCanReceive}" widget-style="width80pc" separate-column="true"><display default-value="${quantityCanReceive}" type="text"/></field>
    </form>
    <form name="ListOrderItemToReceive" type="multi" target="addInventoryItem" list-name="listOrderItemToReceives" default-table-style="table table-striped table-bordered table-hover dataTable" use-row-submit="true">
		<actions>
			<entity-one entity-name="OrderHeader" value-field="order">
				<field-map field-name="orderId" from-field="parameters.orderId"/>
			</entity-one>
			<set field="orderCurrencyUomId" from-field="order.currencyUom"/>
			<entity-one entity-name="Facility" value-field="facility">
				<field-map field-name="facilityId" from-field="parameters.facilityId"/>
			</entity-one>
			<set field="ownerPartyId" from-field="facility.ownerPartyId"/>
		</actions>
    	<row-actions>
    		<entity-one entity-name="InventoryItem" value-field="invItem">
    			<field-map field-name="inventoryItemId" value="${item.fromInventoryItemId}"/>
    		</entity-one>
    		<entity-condition entity-name="ShipmentReceipt" list="listShipmentReceipts">
    			<condition-list>
	    			<condition-expr field-name="orderId" from-field="parameters.orderId"/>
	    			<condition-expr field-name="orderItemSeqId" from-field="orderItemSeqId"/>
    			</condition-list>
    		</entity-condition>
    		<entity-one entity-name="Product" value-field="product"><field-map field-name="productId" from-field="productId"></field-map></entity-one>
    		<set field="quantityUomId" value="${product.quantityUomId}"></set>
    	</row-actions>
    	<field name="requirementId"><hidden value="${parameters.requirementId}"/></field>
    	<field name="orderId"><hidden value="${parameters.orderId}"/></field>
    	<field name="ownerPartyId"><hidden value="${ownerPartyId}"/></field>
    	<field name="priorityOrderId"><hidden value="${orderId}"/></field>
    	<field name="priorityOrderItemSeqId"><hidden value="${orderItemSeqId}"/></field>
    	<field name="quantityOrdered"><hidden value="${quantity}"/></field>
    	<field name="facilityId"><hidden value="${parameters.facilityId}"/></field>
    	<field name="orderItemSeqId" title="${uiLabelMap.orderItemSeqId}"><display/></field>
    	<field name="productId" title="${uiLabelMap.ProductProduct}"><display/></field>
    	<field name="inventoryItemTypeId"><hidden value="NON_SERIAL_INV_ITEM"/></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}"><display-entity description="${description}" entity-name="Uom" key-field-name="uomId"/></field>
    	<field name="expireDate" title="${uiLabelMap.ProductExpireDate}"><display default-value="${invItem.expireDate}"/></field>
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"></display-entity></field>
    	<field name="unitPrice" title="${uiLabelMap.UnitCost}">
    		<display type="currency" currency="${orderCurrencyUomId}"/>
   		</field>
   		<field name="orderCurrencyUomId"><hidden value="${orderCurrencyUomId}"/></field>
   		<field name="currencyUomId"><hidden value="${currencyUomId}"/></field>
   		<field name="orderCurrencyUnitPrice"><hidden value="${unitPrice}"/></field>
    	<field name="quantityOrderedDis" title="${uiLabelMap.QuantityOrdered}"><display default-value="${quantity}"/></field>
    	<field name="quantityAccepted" title="${uiLabelMap.QuantityAccepted}" widget-style="width80pc"  separate-column="true"><text default-value="${quantity}"/></field>
    	<field name="quantityRejected" title="${uiLabelMap.QuantityReject}" widget-style="width80pc" separate-column="true"><text default-value="0"/></field>
    	<field name="rejectionId" title="${uiLabelMap.RejectReason}" widget-style="width80pc" separate-column="true">
    		<drop-down allow-empty="true" no-current-selected-key="{rejectionId}">
    			<entity-options description="${description}" entity-name="RejectionReason" key-field-name="rejectionId"></entity-options>
    		</drop-down>
    	</field>
    	<field name="quantityExcess"><hidden value="0"/></field>
    	<field name="quantityQualityAssurance"><hidden value="0"/></field>
    	<field name="lotId" title="${uiLabelMap.ProductLotId}" widget-style="width80pc" separate-column="true"><text/></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="&quot;ITEM_APPROVED&quot;.equals(statusId)" separate-column="true"><check all-checked="true"/></field>
        <field name="receivedButton" title="${uiLabelMap.ReceiveProduct}" widget-style="btn btn-small btn-primary" use-when="!listOrderItemToReceives.isEmpty()">
            <submit button-type="button" image-location="icon-cloud-download"/>
        </field>
    </form>
    <form name="ListReceiveRequirementsFromPO" target="quickReceiveRequirementFromPO" type="multi" default-table-style="table table-striped table-bordered table-hover dataTable" list-name="listReceiveRequirements" use-row-submit="true">
    	<row-actions>
    		<entity-condition entity-name="OrderRequirement" list="listOrders">
    			<condition-expr field-name="requirementId" from-field="requirementId"/>
    		</entity-condition>
    	</row-actions>
    	<alt-target use-when="!listApprovableRequirements.isEmpty() &amp;&amp; listReceivableRequirements.isEmpty()" target="approveRequirementFromPO"/>
    	<field name="requirementId" title="${uiLabelMap.Requirement}">
    		<hyperlink target="editReceiveRequirementFromPO" description="${requirementId}">
    			<parameter param-name="requirementId" from-field="requirementId"/>
    			<parameter param-name="requirementTypeId" from-field="requirementTypeId"/>
    			<parameter param-name="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
    		</hyperlink>
    	</field>
    	<field name="requirementTypeId" title="${uiLabelMap.RequirementType}"><display-entity entity-name="RequirementType" description="${description}"></display-entity></field>
    	<field name="order" title="${uiLabelMap.OrderId}">
    		<display default-value="${listOrders[0].orderName} [${listOrders[0].orderId}]"></display>
    	</field>
    	<field name="orderId"><hidden value="${listOrders[0].orderId}"/></field>
    	<field name="selectedSubMenuItem"><hidden value="${selectedSubMenuItem}"/></field>
    	<field name="productStoreId" title="${uiLabelMap.productStore}">
    		<display-entity entity-name="ProductStore" description="${storeName}"></display-entity>
    	</field>
    	<field name="facilityId" title="${uiLabelMap.facility}">
    		<display-entity entity-name="Facility" description="${facilityName}"></display-entity>
    	</field>
    	<field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
        <field name="requiredByDate" title="${uiLabelMap.ReceiveDate}"><display/></field>
    	<field name="statusId" title="${uiLabelMap.Status}">
    		<display-entity entity-name="StatusItem" description="${description}"></display-entity>
    	</field>
    	<field name="description"><display/></field>
    	<field name="receive" title="${uiLabelMap.ReceiveProduct}" use-when="!(&quot;REQ_COMPLETED&quot;).equals(statusId) &amp;&amp; (&quot;REQ_APPROVED&quot;).equals(statusId)">
    		<hyperlink target="getListOrderItemToReceive" description="${uiLabelMap.ReceiveProduct}">
    			<parameter param-name="requirementId" from-field="requirementId"/>
    			<parameter param-name="facilityId" from-field="facilityId"/>
    			<parameter param-name="orderId" value="${listOrders[0].orderId}"/>
    			<parameter param-name="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
    		</hyperlink>
    	</field>
    	<field name="receive" title="${uiLabelMap.ReceiveProduct}" use-when="(&quot;REQ_COMPLETED&quot;).equals(statusId)">
    		<hyperlink target="detailReceiveInventoryFrommPO" description="${uiLabelMap.CommonDetail}">
    			<parameter param-name="requirementId" from-field="requirementId"/>
    			<parameter param-name="orderId" value="${listOrders[0].orderId}"/>
    			<parameter param-name="selectedSubMenuItem" from-field="selectedSubMenuItem"/>
    			<parameter param-name="facilityId" from-field="facilityId"/>
    		</hyperlink>
    	</field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!(&quot;REQ_COMPLETED&quot;).equals(statusId) &amp;&amp; !(&quot;REQ_APPROVED&quot;).equals(statusId) &amp;&amp; listReceivableRequirements.isEmpty()"><check all-checked="true"/></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!(&quot;REQ_COMPLETED&quot;).equals(statusId) &amp;&amp; (&quot;REQ_APPROVED&quot;).equals(statusId) &amp;&amp; !listReceivableRequirements.isEmpty()"><check all-checked="true"/></field>
        <field name="receivedButton" title="${uiLabelMap.QuickReceive}" widget-style="btn btn-small btn-primary" use-when="!listReceivableRequirements.isEmpty()">
            <submit button-type="button" image-location="icon-cloud-download"/>
        </field>
        <field name="approvedButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary" use-when="!listApprovableRequirements.isEmpty() &amp;&amp; listReceivableRequirements.isEmpty()">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="ShipmentReports" type="list" list-name="listShipments" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<row-actions>
    		<entity-one entity-name="Shipment" value-field="shipment">
     			<field-map field-name="shipmentId" from-field="shipmentId"/>
     		</entity-one>
     		<service service-name="getTotalShipmentItem" result-map="mapResult"></service>
     		<set field="totalWeight" value="${mapResult.totalWeight}"/>
     	</row-actions>
    	<field name="shipmentId" title="${uiLabelMap.ShipmentId}"><display/></field>
    	<field name="shipmentTypeId" title="${uiLabelMap.ShipmentType}"><display-entity entity-name="ShipmentType" description="${description}"></display-entity></field>
     	<field name="primaryOrderId" title="${uiLabelMap.OrderId}"><display/></field>
     	<field name="estimatedReadyDate"><display/></field>
     	<field name="estimatedShipDate"><display/></field>
     	<field name="estimatedArrivalDate" title="${uiLabelMap.EstimatedArrivalDate}"><display/></field>
<!--      	<field name="latestCancelDate"><display/></field> -->
     	<field name="estimatedShipCost" title="${uiLabelMap.EstimatedShipCost}"><display type="currency" currency="${currencyUomId}"/></field>
     	<field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><display/></field>
     	<field name="originFacilityId" title="${uiLabelMap.FacilityFrom}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
		</field>
     	<field name="destinationFacilityId" title="${uiLabelMap.FacilityTo}">
     		<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
     	</field>
     	<field name="originContactMechId" title="${uiLabelMap.OriginContactMech}">
     		<display-entity entity-name="PostalAddress" description="${address1}" key-field-name="contactMechId"></display-entity>
     	</field>
     	<field name="destinationContactMechId" title="${uiLabelMap.DestinationContactMech}">
     		<display-entity entity-name="PostalAddress" description="${address1}" key-field-name="contactMechId"></display-entity>
     	</field>
     	<field name="vehicleId" title="${uiLabelMap.Vehicles}">
     		<display-entity entity-name="Vehicle" description="${vehicleName}" key-field-name="vehicleId"></display-entity>
     	</field>
     	<field name="totalWeight" title="${uiLabelMap.ShipmentTotalWeight}"><display/></field>
     	<field name="defaultWeightUomId" title="${uiLabelMap.DefaultWeightUom}"><display-entity entity-name="Uom" description="${description} - ${abbreviation}" key-field-name="uomId"/></field>
     	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"></display-entity></field>
    </form>
    <form name="InventoryReports" type="list" list-name="listItems" paginate-target="filterInventoryItems" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<row-actions>
    		<entity-one entity-name="Product" value-field="product">
    			<field-map field-name="productId" from-field="productId"/>
    		</entity-one>
    	</row-actions>
    	<field name="inventoryItemId" title="${uiLabelMap.InventoryItemId}"><display/></field>
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"></display-entity> </field>
    	<field name="datetimeReceived" title="${uiLabelMap.DatetimeReceived}"><display/></field>
    	<field name="expireDate" title="${uiLabelMap.ProductExpireDate}"><display/></field>
    	<field name="productId" title="${uiLabelMap.ProductProduct}"><display/></field>
    	<field name="internalName" title="${uiLabelMap.ProductProductName}"><display default-value="${product.productName}"/></field>
    	<field name="lotId" title="${uiLabelMap.ProductLotId}"><display/></field>
    	<field name="binNumber" title="${uiLabelMap.ProductBinNum}"><display/></field>
    	<field name="containerId" title="${uiLabelMap.ContainerId}"><display/></field>
    	<field name="unitCost" title="${uiLabelMap.UnitCost}"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><display></display></field>
    	<field name="locationSeqId" title="${uiLabelMap.ProductLocationSeqId}"><display/></field>
    	<field name="quantityOnHandTotal" title="${uiLabelMap.FormFieldTitle_quantityOnHandTotal}"><display/></field>
    	<field name="availableToPromiseTotal" title="${uiLabelMap.FormFieldTitle_availableToPromiseTotal}"><display/></field>
    </form>
    <form name="OrderReports" type="list" list-name="listOrders" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<field name="orderId"><display/></field>
    </form>
    <form name="ReceiveReports" type="list" list-name="listReceives" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<field name="requirementId" title="${uiLabelMap.Requirement}"><display/></field>
    	
    </form>
    <form name="ShipmentCostDetails" type="list" list-name="listDeliveries" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<field name="shipmentId"><display/></field>
    </form>
    <form name="SearchInventoryItemsParams" type="single" target="filterInventoryItems" header-row-style="header-row" default-table-style="basic-table">
        <actions>
        	<set field="partyId" value=""/>
        </actions>
        <field name="productStoreId" title="${uiLabelMap.productStore}" position="1">
    		<drop-down>
    			<list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
    		</drop-down>
    	</field>
        <field name="facilityId" title="${uiLabelMap.facility}" position="2">
            <drop-down allow-empty="false">
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
        <field name="productId" title="${uiLabelMap.ProductProductId}" position="3"><text-find/></field>
        <field name="internalName" title="${uiLabelMap.ProductProductName}" position="4"><text-find/></field>
        <field name="inventoryItemId" title="${uiLabelMap.InventoryItemId}" position="5"><text-find/></field>
        <field name="datetimeReceived" title="${uiLabelMap.DatetimeReceived}" position="6"><date-find/></field>
        <field name="containerId" title="${uiLabelMap.ContainerId}" position="7"><text-find/></field>
        <field name="lotId" title="${uiLabelMap.ProductLotId}" position="8"><text-find/></field>
        <field name="serialNumber" position="9"><text-find/></field>
        <field name="statusId" title="${uiLabelMap.Status}" position="11">
	        <drop-down allow-empty="true">
    	        <entity-options entity-name="StatusItem" description="${description}" key-field-name="statusId">
        	        <entity-constraint name="statusTypeId" operator="equals" value="INV_NON_SER_STTS"/>
            	</entity-options>
            	<entity-options entity-name="StatusItem" description="${description}" key-field-name="statusId">
                	<entity-constraint name="statusTypeId" operator="equals" value="INV_SERIALIZED_STTS"/>
            	</entity-options>
        	</drop-down>
        </field>
        <field name="submitButton" widget-style="btn btn-small btn-primary" title="${uiLabelMap.CommonFind}" event="onclick" action="javascript:var field=document.SearchInventoryItemsParams.softIdentifier;var tmp=field.value;if (tmp.substring(0, 2) == '0x') {tmp=parseInt(tmp, 16)};if (!isNaN(tmp)) {field.value=tmp};return true;">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="SearchReceiveParams" type="single" target="searchReceivedProducts" header-row-style="header-row" default-table-style="basic-table">
        <actions>
        	<set field="partyId" value=""/>
        </actions>
        <field name="facilityId" title="${uiLabelMap.facility}" position="2">
            <drop-down>
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
		<field name="productId" title="${uiLabelMap.ProductProductId}" position="3"><text-find/></field>
        <field name="internalName" title="${uiLabelMap.ProductProductName}" position="4"><text-find/></field>
		<field name="datetimeReceived" position="5" title="${uiLabelMap.DatetimeReceived}"><date-find/></field>
        <field name="submitButton" widget-style="btn btn-small btn-primary" title="${uiLabelMap.CommonFind}" event="onclick" action="javascript:var field=document.SearchInventoryItemsParams.softIdentifier;var tmp=field.value;if (tmp.substring(0, 2) == '0x') {tmp=parseInt(tmp, 16)};if (!isNaN(tmp)) {field.value=tmp};return true;">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="ListGroupFacilities" target="deleteGroupFacility" type="multi" list-name="listIt" view-size="10" default-table-style="table table-striped table-bordered table-hover dataTable" use-row-submit="true">
    	<actions>
    		<service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="FacilityGroup"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
    	</actions>
    	<field name="facilityGroupId" title="${uiLabelMap.GroupId}" use-when="!facilityGroupId.equals(&quot;_NA_&quot;)">
    		<hyperlink target="editGroupFacility" description="${facilityGroupId}">
    			<parameter param-name="facilityGroupId"/>
    		</hyperlink>
    	</field>
    	<field name="facilityGroupId" title="${uiLabelMap.GroupId}" use-when="facilityGroupId.equals(&quot;_NA_&quot;)">
    		<display/>
    	</field>
    	<field name="facilityGroupTypeId" title="${uiLabelMap.GroupType}"><display-entity entity-name="FacilityGroupType" description="${description}"/></field>
    	<field name="facilityGroupName" title="${uiLabelMap.GroupName}"><display/></field>
    	<field name="description" title="${uiLabelMap.CommonDescription}"><display/> </field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!(&quot;_NA_&quot;).equals(facilityGroupId)"><check all-checked="true"/></field>
        <field name="deleteButton" title="${uiLabelMap.CommonDelete}" widget-style="btn btn-small btn-danger">
            <submit button-type="button" image-location="icon-trash"/>
        </field>
    </form>
    <form name="EditGroupFacility" target="updateGroupFacility" type="single" list-name="" default-table-style="basic-table">
    	<alt-target use-when="facilityGroup == null" target="createGroupFacility"/>
    	<field name="facilityGroupId" use-when="facilityGroup != null"><display/></field>
    	<field name="facilityGroupName" title="${uiLabelMap.GroupName}" position="1"><text default-value="${facilityGroup.facilityGroupName}"/></field>
    	<field name="facilityGroupTypeId" title="${uiLabelMap.GroupType}" position="3">
    		<drop-down allow-empty="false" no-current-selected-key="${facilityGroup.facilityGroupTypeId}">
    			<entity-options description="${description}" entity-name="FacilityGroupType"></entity-options>	
    		</drop-down>
  		</field>
    	<field name="description" title="${uiLabelMap.CommonDescription}" position="4"><text default-value="${facilityGroup.description}"/></field>
   	 	<field name="createButton" widget-style="btn btn-small btn-primary" title="${uiLabelMap.CommonCreateNew}" position="5" use-when="facilityGroup == null">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
        <field name="updateButton" widget-style="btn btn-small btn-primary" title="${uiLabelMap.CommonUpdate}" position="5" use-when="facilityGroup != null">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="SearchFacilityGroupParams" target="searchFacilityGroup" type="single" list-name="" default-table-style="basic-table">
    	<field name="facilityGroupId" position="1" title="${uiLabelMap.GroupId}"><text-find/></field>
    	<field name="facilityGroupName" title="${uiLabelMap.GroupName}" position="2"><text-find/></field>
    	<field name="facilityGroupTypeId" title="${uiLabelMap.GroupType}" position="3">
    		<drop-down allow-empty="true">
    			<entity-options description="${description}" entity-name="FacilityGroupType"></entity-options>	
    		</drop-down>
  		</field>
    	<field name="description" title="${uiLabelMap.CommonDescription}" position="4"><text-find/></field>
        <field name="submitButton" widget-style="btn btn-small btn-primary" title="${uiLabelMap.CommonSearch}">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="AddFacilityGroupMember" type="single" target="addFacilityGroupMember" header-row-style="header-row" default-table-style="basic-table">
 		<field name="facilityGroupId"><hidden/></field>
        <field name="facilityId" position="1">
            <drop-down allow-empty="false">
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
        <field name="fromDate" position="2"><date-time/></field>
        <field name="thruDate" position="3"><date-time/></field>
        <field name="sequenceNum" position="4"><text/></field>
        <field name="submitButton" position="5" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-primary btn-small"><submit image-location="icon-ok" button-type="button"/></field></form>
    <form name="UpdateFacilityGroupRoles" type="list" target="removePartyRoleFacilityGroup" title="" list-name="facilityRoles"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="table table-hover table-striped table-bordered dataTable">
        <auto-fields-service service-name="removePartyFromFacilityGroup"/>
        <field name="facilityGroupId"><hidden value="${facilityGroupId}"/></field>
        <field name="partyId">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
            </display-entity>
        </field>
        <field name="roleTypeId">
            <display-entity entity-name="RoleType" key-field-name="roleTypeId" description="${description}"/>
        </field>
        <field name="deleteLink" title=" " widget-style="btn btn-mini open-sans icon-remove btn-danger btn-position">
            <hyperlink target="removePartyRoleFacilityGroup" description="${uiLabelMap.CommonRemove}" also-hidden="false">
                <parameter param-name="facilityGroupId"/>
                <parameter param-name="partyId"/>
                <parameter param-name="roleTypeId"/>
            </hyperlink>
        </field>
    </form>
    <form name="UpdateFacilityGroupMembers" type="list" target="updateFacilityGroupMember" title="" list-name="facilityGroupMembers"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="table table-hover table-striped table-bordered dataTable">
        <auto-fields-service service-name="updateFacilityToGroup"/>
        <field name="facilityGroupId"><hidden value="${facilityGroupId}"/></field>
        <field name="facilityId">
            <display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName}">
            </display-entity>
        </field>
        <field name="fromDate"><display/></field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-primary btn-small"><submit image-location="icon-ok" button-type="button"/></field>
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="btn btn-mini btn-danger open-sans icon-remove btn-position">
            <hyperlink target="removeFacilityGroupMember" description="${uiLabelMap.CommonRemove}" also-hidden="false">
                <parameter param-name="facilityGroupId"/>
                <parameter param-name="facilityId"/>
                <parameter param-name="fromDate"/>
            </hyperlink>
        </field>
    </form>
        <form name="AddFacilityGroupRole" target="addPartyRoleToFacilityGroup" title="" type="single"
        header-row-style="header-row" default-table-style="basic-table">
        <auto-fields-service service-name="addPartyToFacilityGroup"/>
        <field name="facilityGroupId"><hidden/></field>
        <field name="partyId" position="1"><lookup target-form-name="lookupPartyInfo"/></field>
        <field name="roleTypeId" position="2">
            <drop-down>
                <entity-options entity-name="RoleType" description="${description} [${roleTypeId}]">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="submitButton" position="3" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-primary btn-small"><submit image-location="icon-ok" button-type="button"/></field>
    </form>
    <form name="EditFacilityInfo" target="updateFacility" type="single" default-entity-name="Facility">
    	<actions>
    		<entity-one entity-name="FacilityType" value-field="facilityType">
    			<field-map field-name="facilityTypeId" from-field="facility.facilityTypeId"></field-map>
    		</entity-one>
    		<entity-one entity-name="FacilityGroup" value-field="facilityGroup">
    			<field-map field-name="facilityGroupId" from-field="facility.primaryFacilityGroupId"></field-map>
    		</entity-one>
    		<entity-one entity-name="Facility" value-field="parentFacilty">
    			<field-map field-name="facilityId" from-field="facility.parentFacilityId"></field-map>
    		</entity-one>
    		<entity-one entity-name="Uom" value-field="uom">
    			<field-map field-name="uomId" from-field="facility.facilitySizeUomId"></field-map>
    		</entity-one>
    	</actions>
    	<field name="facilityId" title="${uiLabelMap.FacilityId}" use-when="facility != null"><display/></field>
    	<field name="facilityId" title="${uiLabelMap.FacilityId}" use-when="facility == null"><hidden/></field>
    	<field name="openedDate" title="${uiLabelMap.openedDate}" use-when="facility != null"><hidden/></field>
    	<field name="facilityName" title="${uiLabelMap.FacilityName}" use-when="hasUpdatePermission == true"><text default-value="${facility.facilityName}"></text></field>
    	<field name="facilityName" title="${uiLabelMap.FacilityName}" use-when="hasUpdatePermission == false"><display description="${facility.facilityName}"></display></field>
    	
    	<field name="facilityTypeId" title="${uiLabelMap.ProductFacilityType}" use-when="hasUpdatePermission == true">
    		<drop-down allow-empty="false" no-current-selected-key="${facility.facilityTypeId}">
    			<entity-options description="${description}" entity-name="FacilityType"></entity-options>
    		</drop-down>
    	</field>
    	<field name="facilityTypeId" title="${uiLabelMap.ProductFacilityType}" use-when="hasUpdatePermission == false"><display description="${facilityType.description}"></display></field>
    	<field name="primaryFacilityGroupId" title="${uiLabelMap.GroupFacility}" use-when="hasUpdatePermission == true">
    		<drop-down allow-empty="true" no-current-selected-key="${listGroups[0].facilityGroupId}">
    			<entity-options description="${facilityGroupName}" entity-name="FacilityGroup" key-field-name="facilityGroupId">
    				<entity-constraint name="facilityGroupId" operator="not-equals" value="_NA_"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="primaryFacilityGroupId" title="${uiLabelMap.GroupFacility}" use-when="hasUpdatePermission == false"><display description="${facilityGroup.description}"></display></field>
    	<field name="defaultInventoryItemTypeId"><hidden value="NON_SERIAL_INV_ITEM"/></field>
    	<field name="parentFacilityId" title="${uiLabelMap.ParentFacility}" use-when="hasUpdatePermission == true">
    		<drop-down no-current-selected-key="${facility.parentFacilityId}" allow-empty="true">
    			<entity-options description="${facilityName}" entity-name="Facility" key-field-name="facilityId"></entity-options>
    		</drop-down>
    	</field>
    	<field name="parentFacilityId" title="${uiLabelMap.ParentFacility}" use-when="hasUpdatePermission == false"><display description="${parentFacilty.facilityName}[${parentFacilty.facilityId}]"></display></field>
    	<field name="ownerPartyId" title="${uiLabelMap.Owner}" required-field="true" use-when="hasUpdatePermission == true">
    		<lookup target-form-name="lookupPartyInfo" default-value="company"></lookup>
    	</field>
    	<field name="ownerPartyId" title="${uiLabelMap.Owner}" use-when="hasUpdatePermission == false"><display description="${facility.ownerPartyId}"></display></field>
    	<field name="managerPartyId" title="${uiLabelMap.Manager}" use-when="facility == null">
    		<lookup target-form-name="lookupPartyInfo"></lookup>
    	</field>
    	<field name="managerPartyId" title="${uiLabelMap.Manager}" use-when="hasUpdatePermission == false"><display description="${facility.managerPartyId}"></display></field>
    	<field name="facilitySize" title="${uiLabelMap.SquareFootage}" use-when="hasUpdatePermission == true"><text default-value="${facility.facilitySize}"></text></field>
    	<field name="facilitySizeUomId" title="${uiLabelMap.facilitySizeUomId}" use-when="hasUpdatePermission == true">
    		<drop-down no-current-selected-key="${facility.facilitySizeUomId}" allow-empty="false">
    			<entity-options description="${description}" entity-name="Uom" key-field-name="uomId">
    				<entity-constraint name="uomTypeId" value="AREA_MEASURE" operator="equals"></entity-constraint>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="facilitySize" title="${uiLabelMap.SquareFootage}" use-when="hasUpdatePermission == false"><display description="${facility.facilitySize} [${uom.description}]"></display></field>
    	<field name="description" title="${uiLabelMap.CommonDescription}" use-when="hasUpdatePermission == true">
    		<textarea visual-editor-enable="true" default-value="${facility.description}"
				visual-editor-buttons="formatblock newline bold italic underline left center right number bullet indent outdent undo redo color hilite rule link image table clean html spellcheck" />
		</field>
		<field name="description" title="${uiLabelMap.CommonDescription}" use-when="hasUpdatePermission == false"><display description="${facility.description}"></display></field>
    	<field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="btn btn-primary btn-small" use-when="hasUpdatePermission == true"><submit image-location="icon-ok" button-type="button"/></field>
    	<sort-order>
    		<field-group style="no-widget-header span6 no-left-margin begin-group-group">
    			<sort-field name="facilityId"/>
    			<sort-field name="openedDate"/>
    			<sort-field name="facilityName" position="1"/>
    			<sort-field name="facilityTypeId" position="2"/>
    			<sort-field name="facilitySize" position="3"/>
				<sort-field name="facilitySizeUomId" position="4"/>    			
    		</field-group>
    		<field-group style="no-widget-header span6 no-left-margin end-group-group">
    			<sort-field name="ownerPartyId" position="1"/>
    			<sort-field name="managerPartyId" position="2"/>
    			<sort-field name="parentFacilityId" position="3"/>
    			<sort-field name="primaryFacilityGroupId" position="4"/>
    		</field-group>
    		<field-group style="no-widget-header span10 no-left-margin align-right">
            	<sort-field name="description" position="1"/>
            </field-group>
    		<field-group style="no-widget-header span12 align-center">
            	<sort-field name="submitButton" position="1"/>
            </field-group>
    	</sort-order>
    </form>
    <form name="AddFacilityPartyRole" type="single" default-entity-name="FacilityParty" target="addPartyToFacility" default-table-style="basic-table">
    	<field name="partyId" title="${uiLabelMap.PartyParty}"><lookup target-form-name="lookupPartyInfo"></lookup></field>
    	<field name="roleTypeId" title="${uiLabelMap.Roles}">
    		<drop-down>
    			<entity-options description="${description}" entity-name="RoleType"></entity-options>
    		</drop-down>
    	</field>
    	<field name="facilityId"><hidden value="${facilityId}"/></field>
    	<field name="fromDate"><date-time/></field>
    	<field name="thruDate"><date-time/></field>
    	<field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-primary btn-small"><submit image-location="icon-plus" button-type="button"/></field>
    	<sort-order>
    		<field-group style="no-widget-header span6 no-left-margin begin-group-group">
    			<sort-field name="partyId" position="1"/>
    			<sort-field name="roleTypeId" position="2"/>
    		</field-group>
    		<field-group style="no-widget-header span6 no-left-margin end-group-group">
    			<sort-field name="fromDate" position="1"/>
    			<sort-field name="thruDate" position="2"/>
    		</field-group>
    		<field-group style="no-widget-header span12 no-left-margin align-center">
            	<sort-field name="submitButton" position="1"/>
            </field-group>
    	</sort-order>
    </form>
    <form name="ListFacilityPartyRoles" target="deleteFacilityPartyRole" odd-row-style="alternate-row" type="multi" default-table-style="table table-striped table-bordered table-hover dataTable" list-name="listFacilityPartyRoles" default-entity-name="FacilityParty" use-row-submit="true">
    	<field name="facilityId"><hidden value="${facilityId}"/></field>
    	<field name="partyId" title="${uiLabelMap.PartyParty}">
    		<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName} [${partyId}]">
            </display-entity>
    	</field>
    	<field name="roleTypeId" title="${uiLabelMap.Roles}">
    		<display-entity entity-name="RoleType" description="${description}"></display-entity>
    	</field>
    	<field name="fromDate"><display/></field>
    	<field name="thruDate"><display/></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"><check all-checked="true"/></field>
        <field name="deleteButton" title="${uiLabelMap.CommonDelete}" widget-style="btn btn-small btn-danger" use-when="!listFacilityPartyRoles.isEmpty()">
            <submit button-type="button" image-location="icon-trash"/>
        </field>
    </form>
    <form name="ListTransferOrders" type="multi" target="approvedTransferOrders" title="" list-name="listIt"
        odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
        <actions>
        	<set field="requestParameters.orderTypeId" value="TRANSFER_ORDER"/>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="OrderHeader"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
        	<entity-condition entity-name="OrderRole" list="listCustomers">
        		<condition-list>
	        		<condition-expr field-name="orderId" operator="equals" from-field="orderId"/>
        			<condition-expr field-name="roleTypeId" operator="equals" value="PLACING_CUSTOMER"/>
        		</condition-list>
        	</entity-condition>
        	<entity-one entity-name="PartyNameView" value-field="partyNameView">
        		<field-map field-name="partyId" value="${listCustomers[0].partyId}"/>
        	</entity-one>
        </row-actions>
        <field name="orderId" title="${uiLabelMap.OrderId}">
        	<hyperlink target="getDetailTransferOrder" description="${orderId}">
        		<parameter param-name="orderId" from-field="orderId"/>
        	</hyperlink>
       	</field>
        <field name="orderName" title="${uiLabelMap.OrderName}"><display/></field>
        <field name="orderDate" title="${uiLabelMap.OrderDate}"><display/></field>
        <field name="partyId" title="${uiLabelMap.PartyEmplId}">
        	<display default-value="${listCustomers[0].partyId}"></display>
        </field>
        <field name="partyName" title="${uiLabelMap.PartyEmplName}">
        	<display default-value="${partyNameView.firstName} ${partyNameView.middleName} ${partyNameView.lastName} ${partyNameView.groupName}"/>
        </field>
        <field name="productStoreId" title="${uiLabelMap.productStore}"><display-entity entity-name="ProductStore" description="${storeName}" key-field-name="productStoreId"></display-entity></field>
        <field name="originFacilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity></field>
        <field name="entryDate"><display/></field>
        <field name="priority"><display/></field>
        <field name="currencyUom"><display/></field>
        <field name="remainingSubTotal"><display/></field>
        <field name="grandTotal"><display/></field>
        <field name="statusId"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
		<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;ORDER_COMPLETED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_CANCELLED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_REJECTED&quot;)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="ListShipmentPackages" type="multi" target="updateShipmentPackages" title="" list-name="listShipmentPackages"
        odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
        <row-actions>
        </row-actions>
        <field name="shipmentId" title="${uiLabelMap.ShipmentId}"><display/></field>
        <field name="shipmentItemSeqId" title="${uiLabelMap.ShipmentItemSeqId}"><display/></field>
        <field name="shipmentPackageSeqId" title="${uiLabelMap.ShipmentPackageSeqId}"><display/></field>
        <field name="quantity" title="${uiLabelMap.ProductQuantity}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
		<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonDelete}" widget-style="btn btn-small btn-danger" use-when="!listShipmentPackages.isEmpty()">
            <submit button-type="button" image-location="icon-trash"/>
        </field>
    </form>
     <form name="ListShipmentSegments" type="list" target="updateShipmentSegments" title="" list-name="listShipmentRouteSegments"
        odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" separate-columns="true">
        <row-actions>
        </row-actions>
        <field name="shipmentId" title="${uiLabelMap.ShipmentId}"><display/></field>
        <field name="shipmentRouteSegmentId" title="${uiLabelMap.ProductRouteSegment}">
        	<hyperlink target="getDetailShipmentRouteSegment" description="${shipmentRouteSegmentId} [${uiLabelMap.CommonDetail}]">
        		<parameter param-name="shipmentId" from-field="shipmentId"/>
        		<parameter param-name="shipmentRouteSegmentId" from-field="shipmentRouteSegmentId"/>
        	</hyperlink>
        </field>
        <field name="originFacilityId" title="${uiLabelMap.FacilityFrom}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"/></field>
        <field name="destFacilityId" title="${uiLabelMap.FacilityTo}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"/></field>
        <field name="shipmentMethodTypeId" title="${uiLabelMap.shipmentMethodTypeId}"><display-entity entity-name="ShipmentMethodType" description="${description}"></display-entity></field>
        <field name="vehicleId" title="${uiLabelMap.Vehicles}"><display-entity entity-name="Vehicle" description="${vehicleName}"></display-entity></field>
        <field name="actualCost"><display currency="${currencyUomId}" type="currency"/></field>
        <field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><display/></field>
    </form>
    <form name="EditShipmentRouteSegment" type="single" default-entity-name="ShipmentRouteSegment" target="createNewShipmentRouteSegment">
    	<actions>
    		<entity-one entity-name="Shipment" value-field="shipment">
    			<field-map field-name="shipmentId" from-field="shipmentId"/>
    		</entity-one>
    		<set field="actualCost" value="${routeSegment.actualCost}"/>
    	</actions>
    	<alt-target use-when="routeSegment != null" target="updateShipmentRouteSegmentInfo"/>
    	<field name="updatedByUserLoginId"><hidden value="${updatedByUserLoginId}"/></field>
    	<field name="shipmentId" title="${uiLabelMap.ShipmentId}"><display/></field>
    	<field name="shipmentRouteSegmentId" title="${uiLabelMap.ProductRouteSegment}" use-when="routeSegment != null"><display/></field>
    	<field name="originFacilityId" title="${uiLabelMap.FacilityFrom}" position="1">
    		<drop-down no-current-selected-key="${routeSegment.originFacilityId}">
<!--     			<list-options key-name="facilityId" list-name="listOriginFacilities" description="${facilityName}"/> -->
				<entity-options description="${facilityName}" entity-name="Facility" key-field-name="facilityId"></entity-options>
    		</drop-down>
    	</field>
    	<field name="originContactMechId" title="${uiLabelMap.OriginContactMech}" position="2">
    		<drop-down no-current-selected-key="${routeSegment.originContactMechId}" allow-empty="false" current="first-in-list">
    			<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
    		</drop-down>
    	</field>
    	<field name="destFacilityId" title="${uiLabelMap.FacilityTo}" position="3">
			<drop-down no-current-selected-key="${routeSegment.destFacilityId}" allow-empty="true">
<!--     			<list-options key-name="facilityId" list-name="listDestFacilities" description="${facilityName}"/> -->
				<entity-options description="${facilityName}" entity-name="Facility" key-field-name="facilityId"></entity-options>
    		</drop-down>
		</field>
    	<field name="destContactMechId" title="${uiLabelMap.DestinationContactMech}" position="4">
    		<drop-down no-current-selected-key="${routeSegment.destContactMechId}" allow-empty="true" current="first-in-list">
    			<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
    		</drop-down>
    	</field>
    	<field name="shipmentMethodTypeId" title="${uiLabelMap.shipmentMethodTypeId}" position="5">
    		<drop-down no-current-selected-key="${routeSegment.shipmentMethodTypeId}">
    			<entity-options description="${description} [${shipmentMethodTypeId}]" entity-name="ShipmentMethodType"></entity-options>
    		</drop-down>
    	</field>
    	<field name="vehicleId" title="${uiLabelMap.Vehicles}" position="6">
    		<drop-down no-current-selected-key="${routeSegment.vehicleId}">
    			<list-options key-name="vehicleId" list-name="listVehicles" description="${vehicleName}"/>
    		</drop-down>
    	</field>
    	<field name="actualTransportCost" title="${uiLabelMap.TransportCost}" position="1"><text default-value="${routeSegment.actualTransportCost}"/></field>
    	<field name="actualServiceCost" title="${uiLabelMap.ServiceCost}" position="2"><text default-value="${routeSegment.actualServiceCost}"/></field>
    	<field name="actualOtherCost" title="${uiLabelMap.OtherCost}" position="3"><text default-value="${routeSegment.actualOtherCost}"/></field>
    	<field name="actualCost" title="${uiLabelMap.TotalCost}" use-when="routeSegment != null"><display type="currency" currency="${shipment.currencyUomId}"/></field>
    	<field name="actualCost" title="${uiLabelMap.TotalCost}" use-when="routeSegment == null"><hidden/></field>
    	<field name="currencyUomId" title="${uiLabelMap.currencyUomId}"><hidden value="${shipment.currencyUomId}"/></field>
    	<field name="currencyUomDisplay" title="${uiLabelMap.currencyUomId}" position="4"><display default-value="${shipment.currencyUomId}"/></field>
   	 	<field name="actualStartDate" title="${uiLabelMap.StartDate}" position="3"><date-time default-value="${routeSegment.actualStartDate}"/></field>
      	<field name="actualArrivalDate" title="${uiLabelMap.ArrivalDate}" position="4"><date-time default-value="${routeSegment.actualArrivalDate}"/></field>
      	<field name="estimatedStartDate" title="${uiLabelMap.Estimated} ${uiLabelMap.StartDate}" position="1"><date-time default-value="${routeSegment.estimatedStartDate}"/></field>
   	 	<field name="estimatedArrivalDate" title="${uiLabelMap.Estimated} ${uiLabelMap.ArrivalDate}" position="2"><date-time default-value="${routeSegment.estimatedArrivalDate}"/></field>
   	 	<field name="trackingIdNumber" title="${uiLabelMap.TrackingIdNumber}" position="5"><text default-value="${routeSegment.trackingIdNumber}"/></field>
   	 	<field name="updatedByUserLoginId" title="${uiLabelMap.LastModifiedBy}" use-when="routeSegment == null"><hidden/></field>
   	 	<field name="lastUpdatedDate" title="${uiLabelMap.LastUpdatedDate}" use-when="routeSegment == null"><hidden/></field>
   	 	<field name="updatedByUserLoginId" title="${uiLabelMap.LastModifiedBy}" position="6" use-when="routeSegment != null"><display/></field>
   	 	<field name="lastUpdatedDate" title="${uiLabelMap.LastUpdatedDate}" use-when="routeSegment != null"><display/></field>
   	 	<!-- edit to track status or carrier service -->
<!--    	 	<field name="carrierServiceStatusId" title="${uiLabelMap.CarrierServiceStatus}" position="7"> -->
<!--    	 		<drop-down no-current-selected-key="${routeSegment.carrierServiceStatusId}"> -->
<!--    	 			<entity-options description="${description}" entity-name="StatusItem" key-field-name="statusId"> -->
<!--    	 				<entity-constraint name="statusTypeId" operator="equals" value="SERVICE_STATUS"/> -->
<!--    	 			</entity-options> -->
<!--    	 		</drop-down> -->
<!--    	 	</field> -->
<!--       	<field name="carrierDeliveryZone" title="" position="8"><text default-value="${routeSegment.carrierDeliveryZone}"/></field> -->
<!--       	<field name="carrierRestrictionCodes" title="" position="9"><text default-value="${routeSegment.carrierRestrictionCodes}"/></field> -->
<!--       	<field name="carrierRestrictionDesc" title="" position="10"><text default-value="${routeSegment.carrierRestrictionDesc}"/></field> -->
		<field name="submitButton" position="2" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-primary btn-small" use-when="routeSegment == null"><submit button-type="button" image-location="icon-ok"/></field>
		<field name="submitButton" position="2" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-primary btn-small" use-when="routeSegment != null"><submit button-type="button" image-location="icon-ok"/></field>
   	 	<sort-order>
   	 		<field-group style="no-widget-header span6 no-left-margin begin-group-group">
   	 			<sort-field name="shipmentId"/>
   	 			<sort-field name="shipmentRouteSegmentId"/>
   	 			<sort-field name="originFacilityId"/>
   	 			<sort-field name="originContactMechId"/>
   	 			<sort-field name="destFacilityId"/>
   	 			<sort-field name="destContactMechId"/>
   	 			<sort-field name="shipmentMethodTypeId"/>
   	 			<sort-field name="vehicleId"/>
   	 			<sort-field name="carrierServiceStatusId"/>
   	 			<sort-field name="carrierDeliveryZone"/>
   	 			<sort-field name="carrierRestrictionCodes"/>
   	 			<sort-field name="carrierRestrictionDesc"/>
   	 		</field-group>
   	 		<field-group style="no-widget-header span6 no-left-margin end-group-group">
   	 			<sort-field name="actualTransportCost"/>
   	 			<sort-field name="actualServiceCost"/>
   	 			<sort-field name="actualOtherCost"/>
   	 			<sort-field name="currencyUomDisplay"/>
   	 			<sort-field name="actualCost"/>
   	 			<sort-field name="estimatedStartDate"/>
   	 			<sort-field name="estimatedArrivalDate"/>
   	 			<sort-field name="actualStartDate"/>
   	 			<sort-field name="actualArrivalDate"/>
   	 			<sort-field name="trackingIdNumber"/>
   	 		</field-group>
   	 		<field-group style="no-widget-header span12 no-left-margin align-center">
        		<sort-field name="submitButton"/>
        	</field-group>
        	<field-group style="no-widget-header span6 no-left-margin begin-group-group">
        		<sort-field name="updatedByUserLoginId"/>
        	</field-group>
        	<field-group style="no-widget-header span6 no-left-margin end-group-group">
        		<sort-field name="lastUpdatedDate"/>
        	</field-group>
   	 	</sort-order>
    </form>
    <form name="ListShipmentMethodByContract" target="deleteShipmentMethodFromContract" type="multi" list-name="listShipmentMethodByContract" default-entity-name="CarrierShipmentMethod" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
    	<field name="shipmentMethodTypeId" title="${uiLabelMap.shipmentMethodTypeId}">
    		<display/>
    	</field>
    	<field name="description" title="${uiLabelMap.Description}"><display/></field>
    	<field name="carrierPartyId"><hidden value="${shippingContract.toPartyGroupId}"/></field>
    	<field name="contractId"><hidden value="${shippingContract.contractId}"/></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonDelete}" widget-style="btn btn-small btn-danger" use-when="!listShipmentMethodByContract.isEmpty()">
            <submit button-type="button" image-location="icon-trash"/>
        </field>
    </form>
    <form name="AddShipmentMethod" type="single" target="addShipmentMethodToContract">
    	<actions>
    	</actions>
    	<field name="contractId"><hidden/></field>
    	<field name="carrierPartyId"><hidden/></field>
    	<field name="shipmentMethodTypeId" position="1" title="${uiLabelMap.shipmentMethodTypeId}">
    		<drop-down>
    			<entity-options description="${description}" entity-name="ShipmentMethodType"></entity-options>
    		</drop-down>
    	</field>
    	<field name="submitButton" position="2" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-primary btn-small"><submit button-type="button" image-location="icon-ok"/></field>
    </form>
    <form name="EditVehicleForContract" type="single" target="updateVehicleForContract">
    	<auto-fields-entity entity-name="Vehicle" map-name="Vehicle"/>
    	<field name="vehicleId" use-when="Vehicle != null"><display/></field>
    	<field name="vehicleId" use-when="Vehicle == null"><hidden/></field>
    	<field name="shipmentMethodTypeId">
    		<drop-down no-current-selected-key="${Vehicle.shipmentMethodTypeId}">
    			<entity-options description="${shipmentMethodTypeId}" entity-name="CarrierShipmentMethod" key-field-name="shipmentMethodTypeId">
    				<entity-constraint name="partyId" operator="equals" value="${carrierPartyId}"/>
    				<entity-constraint name="roleTypeId" operator="equals" value="CARRIER"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="partyCarrierId">
    		<hidden value="${carrierPartyId}"/>
    	</field>
    	<field name="contractId"><hidden value="${contractId}"/></field>
    	<field name="vehicleName" required-field="true" title="${uiLabelMap.vehicleName}"><text/></field>
    	<field name="maxWeight" title="${uiLabelMap.maxWeight}"><text/></field>
    	<field name="minWeight" title="${uiLabelMap.minWeight}"><text/></field>
    	<field name="unitCost" title="${uiLabelMap.UnitCostVehicle}"><text/></field>
    	<field name="statusId" title="${uiLabelMap.Status}">
    		<drop-down no-current-selected-key="${Vehicle.statusId}">
    			<entity-options description="${description}" entity-name="VehicleStatus"></entity-options>
    		</drop-down>
    	</field>
    	<field name="weightUomId" title="${uiLabelMap.weightUom}">
    		<drop-down no-current-selected-key="${Vehicle.uomId}">
    			<entity-options description="${description}" entity-name="Uom" key-field-name="uomId">
    				<entity-constraint name="uomTypeId" operator="equals" value="WEIGHT_MEASURE"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="lengthUomId" title="${uiLabelMap.LengthUom}">
    		<drop-down no-current-selected-key="${Vehicle.uomId}">
    			<entity-options description="${abbreviation} - ${description}" entity-name="Uom" key-field-name="uomId">
    				<entity-constraint name="uomTypeId" operator="equals" value="LENGTH_MEASURE"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="currencyUomId" title="${uiLabelMap.currencyUomId}">
    		<drop-down no-current-selected-key="${Vehicle.currencyUomId}">
    			<entity-options description="${description}" entity-name="Uom" key-field-name="uomId">
    				<entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="fromDate"><date-time/></field>
    	<field name="thruDate"><date-time/></field>
    	<field name="description"><text/></field>
    	<field name="submitButton" title="${uiLabelMap.CommonEdit}" widget-style="btn btn-primary btn-small" use-when="Vehicle != null"><submit image-location="icon-ok" button-type="button"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-primary btn-small" use-when="Vehicle == null"><submit image-location="icon-ok" button-type="button"/></field>
        <sort-order>
        	<field-group style="no-widget-header no-left-margin span6">
        		<sort-field name="vehicleId"/>
        		<sort-field name="vehicleName" position="1"/>
        		<sort-field name="shipmentMethodTypeId" position="2"/>
        		<sort-field name="statusId" position="3"/>
        		<sort-field name="lengthUomId" position="4"/>
        		<sort-field name="unitCost" position="5"/>
        		<sort-field name="currencyUomId" position="6"/>
        	</field-group>
        	<field-group style="no-widget-header span6 end-group-group">
        		<sort-field name="weightUomId" position="1"/>
        		<sort-field name="maxWeight" position="2"/>
        		<sort-field name="minWeight" position="3"/>
        		<sort-field name="fromDate" position="4"/>
        		<sort-field name="thruDate" position="5"/>
        		<sort-field name="description" position="6"/>
        	</field-group>
        	<field-group style="no-widget-header span12 no-left-margin align-center">
        		<sort-field name="submitButton"/>
        	</field-group>
        </sort-order>
    </form>
    
    <!-- ==============================BEGIN PHYSICAL DAT ======================================================-->
    
    <form name="listLookupPartyName" type="list" list-name="listIt" paginate-target="LookupPartyName"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable">
        <actions>
            <set field="inputFields" from-field="parameters"/>
            <set field="orderBy" value="partyId"/>
            <set field="entityName" value="PartyNameView"/>
            <script location="component://party/webapp/partymgr/WEB-INF/actions/party/FindLookUp.groovy"/>
        </actions>
        <!--<auto-fields-entity entity-name="PartyNameView" default-field-type="display"/>-->
        <field name="partyId" title="${uiLabelMap.PartyPartyId}"  widget-style="btn btn-mini btn-info">
            <hyperlink also-hidden="false" target-type="plain" description="${partyId}" target="javascript:set_value('${partyId}')"/>
        </field>
        <field name="partyTypeId" title="${uiLabelMap.PartyTypeId}">
            <display-entity also-hidden="false" entity-name="PartyType" description="${description}"/>
        </field>
        <field name="firstName" title="${uiLabelMap.PartyFirstName}"><display/></field>
        <field name="lastName"  title="${uiLabelMap.PartyLastName}"><display/></field>
        <field name="groupName" title="${uiLabelMap.PartyGroupName}"><display/></field>
    </form>
    
    <form name="FindFacility10" type="single" target="FindPhysicalInventory">
        <field name="facilityId">
            <drop-down allow-empty="false">
                <entity-options description="${facilityName}" entity-name="Facility" key-field-name="facilityId"/>
            </drop-down>
        </field>
        <field name="selectButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-info btn-small"><submit button-type="button" image-location="icon-ok"/></field>
    </form>
    <form name="FindFacilityHuy" type="single" target="ViewHangChoHuy">
        <field name="facilityId">
            <drop-down allow-empty="false">
                <entity-options description="${facilityName}" entity-name="Facility" key-field-name="facilityId"/>
            </drop-down>
        </field>
        <field name="viewPhysical"><hidden/></field>
        <field name="selectButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-info btn-small"><submit button-type="button" image-location="icon-ok"/></field>
    </form>
    
    <form name="FindPhysicalInventory" type="single" target="FindPhysicalInventory" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <field name="facilityId"><hidden/></field>
        <field name="productId" position="1"><lookup target-form-name="LookupProduct"/></field>
        <field name="internalName" title="${uiLabelMap.ProductInternalName}">
            <text/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    
    <form name="Test" type="single" target="abc">
    	<field name="name" title="ten"><text></text>
    	</field>
    	<field name="tuoi" title="tuoi"><text></text></field>
    	<field name="ngheNghiep" title="Nghe nghiep"><text></text></field>
    	<field name="diaChi" title="Dia chi"><text></text></field>
    </form>
    
    <form name="ListTest" separate-columns="true" type="multi" list-name="a" default-table-style="table table-hover table-striped table-bordered dataTable" >
    	<actions>
    		<set field="name" from-field="parameters.name"/>
    	</actions>
    	<field name="name" title="ten">
    		<display></display>
    	</field>
    	<field name="tuoi" title="tuoi"><display></display></field>
    	<field name="ngheNghiep" title="Nghe nghiep"><display></display></field>
    	<field name="diaChi" title="Dia chi"><text></text></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check/></field>
    	<field name="submitButton" title="Submit" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
    <form name="PhysicalHeader" type="single">
    	
    	<field name="facilityId">
    		<display-entity entity-name="Facility" description="${facilityName}"></display-entity>
    	</field>
    	<field name="physicalInventoryId" title="${uiLabelMap.TimeCheck}">
			<display-entity entity-name="PhysicalInventory" description="${physicalInventoryDate}"></display-entity>
    	</field>
    	<!-- <field name="dateCheck" title="date Check"><date-time/></field> -->
    </form>
    
    <form name="ListPhysicalInv" type="multi" target="EditPhysicalInv" list-name="ListPhysicalInv" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true">
        <field name="inventoryItemId"><display></display></field>
        <field name="productId" title="${uiLabelMap.ProductId}">
        	<display-entity entity-name="Product" description="${productName}" key-field-name="productId" >
        	</display-entity>
        </field>
        <field name="facilityId"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId" ></display-entity></field>
        <field name="physicalInventoryId" title="${uiLabelMap.TimeCheck}"><display-entity entity-name="PhysicalInventory" description="${physicalInventoryDate}" key-field-name="physicalInventoryId" ></display-entity></field>
        <field name="varianceReasonId" title="${uiLabelMap.ReasonCancel}"><display-entity entity-name="VarianceReason" description="${description}" key-field-name="varianceReasonId" ></display-entity></field>
        <field name="expireDate" title="${uiLabelMap.ExpireDate2}" ><display></display></field>
        <!-- <field name="QOH"><display></display></field> -->
        <field name="QOHV" event="onchange" action="document.ListPhysicalInv._rowSubmit_o_${itemIndex}.checked = true;" title="${uiLabelMap.quantityCancel}" ><text></text></field>
       	<!-- <field name="Edit" title="${uiLabelMap.Edit}">
       	<hyperlink description="${uiLabelMap.Edit}" request-confirmation="true" target="EditPhysicalInv">
       		<parameter param-name="facilityId" from-field="facilityId"/>
       		<parameter param-name="physicalInventoryId" from-field="physicalInventoryId" />
       		<parameter param-name="productId" from-field="productId"/>
       		<parameter param-name="expireDate" from-field="expireDate"/>
       		<parameter param-name="QOHV" from-field="QOHV"/>
       		<parameter param-name="varianceReasonId" from-field="varianceReasonId"/>
       	</hyperlink>
       	</field> -->
       	
       	<field name="tranferToCancelFacility"  title="${uiLabelMap.tranferToCancelFacility2}"  widget-style="btn btn-info btn-mini icon-exchange">
       	<hyperlink  description="${uiLabelMap.tranferToCancelFacility}" target="TransferInventoryItem">
       		<parameter param-name="facilityId" from-field="facilityId"/>
       		<parameter param-name="inventoryItemId" from-field="inventoryItemId"/>
       		<parameter param-name="damagedStatus" value="INV_NS_DAMAGED"/>
       		<parameter param-name="xferQty" value="${QOHV}"/>
       		<parameter param-name="physicalInventoryId" from-field="physicalInventoryId" />
       	</hyperlink>
       	</field>
       	
       	<field name="delete" title="${uiLabelMap.Delete}"  widget-style="btn btn-info btn-mini icon-trash">
       	<hyperlink  description="${uiLabelMap.Delete}" request-confirmation="true" target="deleteKiem">
       		<parameter param-name="facilityId" from-field="facilityId"/>
       		<parameter param-name="physicalInventoryId" from-field="physicalInventoryId" />
       		<parameter param-name="productId" from-field="productId"/>
       		<parameter param-name="expireDate" from-field="expireDate"/>
       		<parameter param-name="QOHV" from-field="QOHV"/>
       		<parameter param-name="inventoryItemId" from-field="inventoryItemId"/>
       	</hyperlink></field>
       	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check/></field>
       	
        <field name="submitButton" title="Sửa" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
    <form name="ListPhysicalInvToView" type="list" target="" list-name="ListPhysicalInv" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true">
        <field name="inventoryItemId"><display></display></field>
        <field name="productId" title="${uiLabelMap.ProductId}">
        	<display-entity entity-name="Product" description="${productName}" key-field-name="productId" >
        	</display-entity>
        </field>
        <field name="facilityId"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId" ></display-entity></field>
        <field name="physicalInventoryId" title="${uiLabelMap.TimeCheck}"><display-entity entity-name="PhysicalInventory" description="${physicalInventoryDate}" key-field-name="physicalInventoryId" ></display-entity></field>
        <field name="varianceReasonId" title="${uiLabelMap.ReasonCancel}"><display-entity entity-name="VarianceReason" description="${description}" key-field-name="varianceReasonId" ></display-entity></field>
        <field name="expireDate" title="${uiLabelMap.ExpireDate2}" ><display></display></field>
        <field name="QOHV" title="${uiLabelMap.quantityCancel}" ><display></display></field>
    </form>
    
    <form name="PhysFacility" type="multi" list-name="ListPhysFacility" use-row-submit="true" paginate-target="PhysFacility"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true">
        <field name="facilityId"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId" ></display-entity></field>
        <field name="physicalInventoryId" >
        <hyperlink also-hidden="false" target-type="plain"
				description="${physicalInventoryId}" target="XemKiem">
        	<parameter param-name="facilityId" from-field="facilityId"/>
			<parameter param-name="physicalInventoryId" from-field="physicalInventoryId"/>
        </hyperlink>
        </field>
        <field name="physicalInventoryDate" title="Thời điểm kiểm kho"><display></display></field>
        <field name="partyId"><display></display></field>
       	<field name="Delete" title="${uiLabelMap.Delete}">
       	
       	<hyperlink description="${uiLabelMap.Delete}" request-confirmation="true" target="deletePhysFacility">
       		<parameter param-name="facilityId" from-field="facilityId"/>
       		<parameter param-name="physicalInventoryId" from-field="physicalInventoryId" />
       	</hyperlink></field>
    </form>
    <form name="PhysFacilityToView" type="multi" list-name="ListPhysFacility" use-row-submit="true" paginate-target="PhysFacility"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true">
        <field name="facilityId"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId" ></display-entity></field>
        <field name="physicalInventoryId" >
        <hyperlink also-hidden="false" target-type="plain"
				description="${physicalInventoryId}" target="XemKiem">
        	<parameter param-name="facilityId" from-field="facilityId"/>
			<parameter param-name="physicalInventoryId" from-field="physicalInventoryId"/>
			<parameter param-name="viewPhysical" value="1"/>
        </hyperlink>
        </field>
        <field name="physicalInventoryDate" title="Thời điểm kiểm kho"><display></display></field>
        <field name="partyId"><display></display></field>
    </form>
    
    
  <form name="FindProductInv" type="single" target="FindPhysicalInventory2" title="" default-title-area-style="control-label"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="physicalInventoryId"><display></display></field>
        <field name="facilityId"><display/></field>
        <field name="productId" title="${uiLabelMap.ProductProductId}"><text-find/></field>
        <field name="internalName" title="${uiLabelMap.ProductInternalName}"><text-find/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small open-sans">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>

	<form name="ListPhysicalInventory" type="multi" list-name="physicalInventory" target="createPhysicalVariances1" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true">
        
        <field name="physicalInventoryId"><display></display></field>
        <field name="facilityId"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId" ></display-entity></field>
        
       <field name="inventoryItemId" widget-style="btn btn-info btn-mini">
            <hyperlink description="${inventoryItemId}" target="editInventoryItemInfo">
                <parameter param-name="inventoryItemId"/>
            </hyperlink>
        </field>
        <field name="productId" widget-style="btn btn-info btn-mini">
        	<display-entity entity-name="Product" description="${productName}" key-field-name="productId" >
        		
        	</display-entity>
            
        </field>
       <field name="internalName"><display/></field>
       <!--  <field name="availableToPromiseTotal" title="${uiLabelMap.ProductItemATP}"><display/></field>
        <field name="quantityOnHandTotal" title="${uiLabelMap.ProductItemQOH}"><display/></field>
        <field name="productATP" title="${uiLabelMap.ProductProductATP}"><display/></field> -->
        <field name="expireDate" title="ExpireDate"><display></display></field>
        <field name="QOH" title="${uiLabelMap.ProductProductATP}"><display></display></field>
        <field name="personCheck" title="Person Check"><lookup target-form-name="lookupPartyInfo" /></field>
        <field name="dateCheck" title="Date Check"><date-time/></field>
        <field name="varianceReasonId">
            <drop-down allow-empty="false">
                <entity-options entity-name="VarianceReason" description="${description}"/>
            </drop-down>
        </field>
        <field name="quantityReason" title="Quantity Reason" event="onchange" action="document.ListPhysicalInventory._rowSubmit_o_${itemIndex}.checked = true; checkQuantity(quantityReason_o_${itemIndex}, QOH_o_${itemIndex});"><text size="6"/></field>
        <!-- <field name="quantityOnHandVar" title="${uiLabelMap.ProductProductQOHVar}" event="onchange" action="document.ListPhysicalInventory._rowSubmit_o_${itemIndex}.checked = true"><text size="6"/></field> -->
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check/></field>
        <field name="submitButton"  event="onclick" action="Stop();"  title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
    <form name="FindProductsToPhysical" target="FindPhysicalInventory" title="" type="single"
        header-row-style="header-row" default-table-style="table table-striped table-bordered table-hover dataTable">
        <field name="facilityId" title="${uiLabelMap.ProductLocationSeqId}" parameter-name="facilityId"><hidden/>
        </field>
        <field name="locationSeqId" title="${uiLabelMap.ProductLocationSeqId}"><text-find/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
 	<form name="ListProductsToPhysical" list-name="listIt" type="multi" target="createPhysicalVariances?facilityId=${parameters.facilityId}&amp;productId=${parameters.productId}&amp;internalName=${parameters.internalName}" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true">
        <actions>
            <set field="entityName" value="ListInventoryItemForPhysical"/>
            <set field="requestParameters.facilityId" from-field="facilityId"/>
            <set field="requestParameters.physicalInventoryId" from-field="physicalInventoryId"/>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" from-field="entityName"/>
                <field-map field-name="orderBy" from-field="parameters.sortField"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        
        
        <field name="inventoryItemId">
            <display></display>
        </field>
        <field name="productId">
	        <display></display>
        </field>
        <field name="internalName"><display/></field>
        <field name="expireDate" title="${uiLabelMap.ProductExpireDate}"><display/></field>
        <field name="quantityOnHand" title="${uiLabelMap.ProductItemATP}"><display/></field>
        <field name="availableToPromise" title="${uiLabelMap.ProductItemQOH}"><display/></field>
        <field name="QOH" title="${uiLabelMap.ProductProductATP}"><display/></field>
        <field name="ATP" title="${uiLabelMap.ProductProductQOH}"><display/></field>
        <field name="varianceReasonId">
            <drop-down allow-empty="false">
                <entity-options entity-name="VarianceReason" description="${description}"/>
            </drop-down>
        </field>
        <field name="availableToPromiseVar" title="${uiLabelMap.ProductProductATPVar}" event="onchange" action="document.ListPhysicalInventory._rowSubmit_o_${itemIndex}.checked = true; checkQuantity(availableToPromiseVar_o_${itemIndex}, quantityOnHand_o_${itemIndex});"><text size="6"/></field>
        <field name="quantityOnHandVar" title="${uiLabelMap.ProductProductQOHVar}" event="onchange" action="document.ListPhysicalInventory._rowSubmit_o_${itemIndex}.checked = true; checkQuantity(quantityOnHandVar_o_${itemIndex}, availableToPromise_o_${itemIndex});"><text size="6"/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"><check/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
    <form name="ListHangHuy" type="multi" list-name="listHangHuy" target="ListHangHuy" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true">
        <field name="orderId"><hidden/></field> 
        <field name="orderName"><hidden></hidden></field>
        <field name="productStoreId">
			<hidden/>
        </field>
        <field name="orderDate"><hidden/></field>
        <field name="orderTypeId"><hidden/></field>
        <field name="inventoryItemId" title="${uiLabelMap.InventoryItemId}"><display-entity entity-name="InventoryItem" description="${productId}" key-field-name="inventoryItemId" ></display-entity></field>
        <field name="productId" title="${uiLabelMap.ProductId}" >
        	<display-entity entity-name="Product" description="${productName}" key-field-name="productId" >
        	</display-entity>
        </field>
        <field name="facilityId" title="${uiLabelMap.FacilityId}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId" ></display-entity></field>
        <field name="physicalInventoryId" title="${uiLabelMap.TimeCheck}"><display-entity entity-name="PhysicalInventory" description="${physicalInventoryDate}" key-field-name="physicalInventoryId" ></display-entity></field>
        <field name="varianceReasonId"><display-entity entity-name="VarianceReason" description="${description}" key-field-name="varianceReasonId" ></display-entity></field>
        <field name="quantity"><display></display></field>
        <field name="quantityDestroy" event="onchange" action="document.ListHangHuy._rowSubmit_o_${itemIndex}.checked = true; checkQuantity(quantityDestroy_o_${itemIndex}, quantity_o_${itemIndex});" title="${uiLabelMap.quantityCancel}" ><text></text></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
    <form name="OrderHeaderDestroy" type="single" target="HangChoHuy">
        <field name="orderName" title="${uiLabelMap.OrderName}" required-field="true"><text></text></field>
        <field name="productStoreId" title="${uiLabelMap.ProductStoreId2}"  event="onchange" action="FindFacility(OrderHeaderDestroy_productStoreId);">
			<drop-down allow-empty="false">
				<entity-options description="${storeName}" entity-name="ProductStore" key-field-name="productStoreId" ></entity-options>
			</drop-down>
        </field>
        <field name="facilityId" title="${uiLabelMap.FacilityId}" >
			<drop-down allow-empty="false">
			<list-options key-name="" list-name="" />
				<entity-options description="${facilityName}" entity-name="Facility" key-field-name="facilityId">
				</entity-options>
			</drop-down>
		</field>
		<field name="orderDate"><date-time/></field>
		<field name="salesMethodChannelEnumId"><hidden value="LOG_DAMAGED_CANCEL"/></field>
		<field name="salesMethodChannelEnumId">
			<display description="${uiLabelMap.DamagedCancelOrder}"></display>
		</field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
    <form name="DetailOrderHeader" type="single">
    	<field name="orderId"><hidden/></field>
    	<field name="orderName" title="${uiLabelMap.OrderName}"><display></display></field>
        <field name="productStoreId" title="${uiLabelMap.ProductStoreId2}">
        	<display-entity entity-name="ProductStore" description="${storeName}" key-field-name="productStoreId">
        	</display-entity>
        </field>
        <field name="originFacilityId" title="${uiLabelMap.FacilityId}">
        	<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
        </field>
		<field name="orderDate" required-field="true"><display></display></field>
		<field name="orderTypeId">
			<display-entity entity-name="OrderType" description="${description}" key-field-name="orderTypeId"></display-entity>
		</field>
        <!-- <field name="submitButton" title="Sửa" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field> -->
    </form>
    
    <form name="DetailOrderItemDestroy" type="multi" list-name="detailOrderDestroy" target="UpdateDetailDestroy" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true">
        <field name="orderId"><hidden/></field> 
        <field name="orderName"><hidden/></field>
        <field name="orderItemSeqId"><hidden/></field>
        <field name="productStoreId">
			<hidden></hidden>
        </field>
        <field name="orderDate"><hidden></hidden></field>
        <field name="orderTypeId"><hidden></hidden></field>
        <field name="inventoryItemId" title="${uiLabelMap.InventoryItemId}"><display-entity entity-name="InventoryItem" description="${productId}" key-field-name="inventoryItemId" ></display-entity></field>
        <field name="productId" title="${uiLabelMap.ProductId}">
        	<display-entity entity-name="Product" description="${productName}" key-field-name="productId" >
        	</display-entity>
        </field>
        <!-- <field name="facilityId" title="${uiLabelMap.FacilityId}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId" ></display-entity></field>
        <field name="quantity"><display></display></field>
 -->        <field name="quantityDestroy" event="onchange" action="document.DetailOrderItemDestroy._rowSubmit_o_${itemIndex}.checked = true; checkQuantity(quantityDestroy_o_${itemIndex}, quantity_o_${itemIndex});" title="${uiLabelMap.quantity}" ><text></text></field>
        <field name="Delete" title="${uiLabelMap.Delete}">
       		<hyperlink description="${uiLabelMap.Delete}" request-confirmation="true" target="DeleteOrderItemDestroy">
       			<parameter param-name="orderId" from-field="orderId"/>
       			<parameter param-name="orderItemSeqId" from-field="orderItemSeqId" />
       		</hyperlink>
       	</field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check/></field>
        <field name="submitButton" title="Sửa" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
    <form name="ViewDestroy" type="multi" list-name="viewDestroy" target="" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true">
    	<field name="orderId" title="${uiLabelMap.OrderCancel}">
			<hyperlink target="ViewDetailDestroy" description="${orderId}">
				<parameter param-name="orderId" from-field="orderId"/>
				<parameter param-name="orderName" from-field="parameters.orderName"/>
				<parameter param-name="productStoreId" from-field="parameters.productStoreId"/>
				<parameter param-name="originFacilityId" from-field="parameters.originFacilityId"/>
				<parameter param-name="orderDate" from-field="parameters.orderDate"/>
				<parameter param-name="orderTypeId" from-field="parameters.orderTypeId"/>
				<parameter param-name="Approve" value="${parameters.Approve}"/>
			</hyperlink>
		</field>
    	<field name="orderName"><display></display></field>
        <field name="productStoreId" title="${uiLabelMap.ProductStoreId2}">
        	<display-entity entity-name="ProductStore" description="${storeName}" key-field-name="productStoreId">
        	</display-entity>
        </field>
        <field name="originFacilityId" title="${uiLabelMap.FacilityId}">
        	<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
        </field>
		<field name="orderDate" required-field="true"><display></display></field>
		<!-- <field name="orderTypeId">
			<display-entity entity-name="OrderType" description="${description}" key-field-name="orderTypeId"></display-entity>
		</field> -->
        <field name="submitButton" title="Sửa" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
    <form name="ApproveOrderItemDestroy" type="multi" list-name="detailApproveOrderDestroy" target="ApproveDestroy" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true">
        <field name="orderId"><hidden/></field> 
        <field name="orderName"><display></display></field>
        <field name="orderItemSeqId"><hidden/></field>
        <field name="productStoreId">
			<hidden></hidden>
        </field>
        <field name="orderDate"><hidden/></field>
        <field name="orderTypeId"><hidden/></field>
        <field name="fromInventoryItemId" title="${uiLabelMap.InventoryItemId}"><display-entity entity-name="InventoryItem" description="${productId}" key-field-name="inventoryItemId" ></display-entity></field>
        <field name="productId" title="${uiLabelMap.ProductId}">
        	<display-entity entity-name="Product" description="${productName}" key-field-name="productId" >
        	</display-entity>
        </field>
        <field name="facilityId"><hidden/></field>
	    <field name="quantity" title="${uiLabelMap.QuantityToCancel}" event="onchange" action="document.ApproveOrderItemDestroy._rowSubmit_o_${itemIndex}.checked = true; checkQuantity(quantityDestroy_o_${itemIndex}, quantity_o_${itemIndex});"><display></display></field>
        <field name="cancelQuantity" event="onchange" action="document.ApproveOrderItemDestroy._rowSubmit_o_${itemIndex}.checked = true; checkQuantity(cancelQuantity_o_${itemIndex}, quantity_o_${itemIndex});" title="${uiLabelMap.QuantityCancel}" ><text></text></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check all-checked="true"/></field>
        <field name="submitButton" title="Duyệt" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
	<form name="ListCatalogs" list-name="listCatalogs" title="" type="list"
		paginate-target="getListCatalogs" odd-row-style="alternate-row"
		default-table-style="table table-striped table-bordered table-hover dataTable"
		view-size="20">
		<!-- <auto-fields-entity entity-name="Product" default-field-type="display"/> -->
		<field name="prodCatalogId">
			<hyperlink also-hidden="false" target-type="plain"
				description="${prodCatalogId}" target="DelysEditCatalog">
				<parameter param-name="prodCatalogId" from-field="prodCatalogId" />
			</hyperlink>
		</field>
		<field name="catalogName">
			<display />
		</field>
		<field name="useQuickAdd">
			<display></display>
		</field>
		<field name="styleSheet">
			<display />
		</field>
		<field name="headerLogo">
			<display />
		</field>
		<field name="contentPathPrefix">
			<display />
		</field>
		<field name="templatePathPrefix">
			<display />
		</field>
	</form>

	<form name="DelysEditProdCatalog" list-name="" title="" type="single"
		target="updateProdCatalog" default-entity-name="ProdCatalog"
		default-map-name="catalog">
		<alt-target use-when="catalog == null" target="createProdCatalog" />
		<auto-fields-service service-name="updateProdCatalog" />
		<field name="prodCatalogId">
			<display></display>
		</field>
		<field name="catalogName">
			<text default-value="${prodCatalog.catalogName}" />
		</field>
		<field name="useQuickAdd">
			<drop-down allow-empty="false" no-current-selected-key="${prodCatalog.useQuickAdd}">
				<option key="Y" description="Yes" />
				<option key="N" description="No" />
			</drop-down>
		</field>
		<field name="styleSheet">
			<text default-value="${prodCatalog.styleSheet}"></text>
		</field>
		<field name="headerLogo">
			<text default-value="${prodCatalog.headerLogo}"></text>
		</field>
		<field name="contentPathPrefix">
			<drop-down allow-empty="false" no-current-selected-key="${prodCatalog.contentPathPrefix}">
				<option key="Y" description="Yes" />
				<option key="N" description="No" />
			</drop-down>
		</field>
		<field name="templatePathPrefix">
			<drop-down allow-empty="false" no-current-selected-key="Y">
				<option key="Y" description="Yes" />
				<option key="N" description="No" />
			</drop-down>
		</field>
		<field name="submitButton" title="${uicreateProdCatalogcreateProdCatalogcreateProdCatalogLabelMap.CommonUpdate}"
			widget-style="btn btn-primary btn-small margin-top-nav-10">
			<submit image-location="icon-edit" button-type="button" />
		</field>
	</form>
	<form name="DelysCreateProdCatalog" type="single" target="createProdCatalog">
		<auto-fields-service service-name="createProdCatalog"/>
		<field name="prodCatalogId"><text></text></field>
		<field name="catalogName">
			<text />
		</field>
		<field name="useQuickAdd">
			<drop-down allow-empty="false" no-current-selected-key="Y">
				<option key="Y" description="Yes" />
				<option key="N" description="No" />
			</drop-down>
		</field>
		<field name="styleSheet">
			<text></text>
		</field>
		<field name="headerLogo">
			<text></text>
		</field>
		<field name="contentPathPrefix">
			<drop-down allow-empty="false" no-current-selected-key="Y">
				<option key="Y" description="Yes" />
				<option key="N" description="No" />
			</drop-down>
		</field>
		<field name="templatePathPrefix">
			<drop-down allow-empty="false" no-current-selected-key="Y">
				<option key="Y" description="Yes" />
				<option key="N" description="No" />
			</drop-down>
		</field>
		<field name="submitButton" title="${uiLabelMap.CommonUpdate}"
			widget-style="btn btn-primary btn-small margin-top-nav-10">
			<submit image-location="icon-edit" button-type="button" />
		</field>
	</form>
	<form name="FindCatalog" type="single" target="FindCatalog">
		<field name="prodCatalogId"><text-find></text-find></field>
		<field name="catalogName"><text-find></text-find></field>
		<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
	</form>
	<form name="ResultListCatalog" list-name="listIt" type="list" paginate-target="FindCatalog" default-table-style="table table-striped table-bordered table-hover dataTable">
		<actions>
            <set field="entityName" value="ProdCatalog"/>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" from-field="entityName"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <field name="prodCatalogId" sort-field="true" header-link-style="btn btn-mini btn-primary" >
            <hyperlink also-hidden="false" description="${prodCatalogId}" target="DelysEditCatalog">
                <parameter param-name="prodCatalogId" from-field="prodCatalogId" />
            </hyperlink>
        </field>
        
        <!-- <field name="prodCatalogId" sort-field="true" >
            <hyperlink target="EditProdCatalog?prodCatalogId=${prodCatalogId}" description="${prodCatalogId}"></hyperlink>
        </field> -->
        <field name="catalogName" sort-field="true"><display/></field>
        <field name="useQuickAdd" title="${uiLabelMap.ProductUseQuickAdd}" sort-field="true"><display/></field>
	</form>
	
	<form name="FindProductStoreRole" type="single" target="FindProductStoreRoles" default-entity-name="ProductStoreRole">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="productStoreId" title="${uiLabelMap.ProductStoreId}"><hidden/></field>
        <field name="partyId" title="${uiLabelMap.PartyPartyId}"><lookup target-form-name="lookupPartyInfo"/></field>
        <field name="roleTypeId" title="${uiLabelMap.PartyRoleTypeId}">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="RoleType" key-field-name="roleTypeId"/>
            </drop-down>
        </field>
        <field name="fromDate" position="1"><date-time/></field>
        <field name="thruDate" position="2"><date-time/></field>
        <field name="sequenceNum"><text/></field>
        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-small btn-primary"><submit image-location="icon-ok" button-type="button"/></field>
    </form>
	
	<form name="FindProductStoreRole" type="single" target="FindProductStoreRoles" default-entity-name="ProductStoreRole">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="productStoreId" title="${uiLabelMap.ProductStoreId}"><hidden/></field>
        <field name="partyId" title="${uiLabelMap.PartyPartyId}"><lookup target-form-name="lookupPartyInfo"/></field>
        <field name="roleTypeId" title="${uiLabelMap.PartyRoleTypeId}">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="RoleType" key-field-name="roleTypeId"/>
            </drop-down>
        </field>
        <field name="fromDate" position="1"><date-time/></field>
        <field name="thruDate" position="2"><date-time/></field>
        <field name="sequenceNum"><text/></field>
        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-small btn-primary"><submit image-location="icon-ok" button-type="button"/></field>
    </form>
    <form name="EditProductStoreRole" type="single" target="storeUpdateRole" default-map-name="productStoreRole"
            header-row-style="header-row" default-table-style="basic-table">
        <alt-target use-when="productStoreRole==null" target="storeCreateRole"/>
        <field name="partyId" use-when="productStoreRole==null" title="${uiLabelMap.PartyPartyId}" tooltip="${uiLabelMap.CommonRequired}"><lookup target-form-name="lookupPartyInfo"/></field>
        <field name="partyId" use-when="productStoreRole!=null" title="${uiLabelMap.PartyPartyId}"><display/></field>
        <field name="productStoreId"><hidden/></field>
        <field name="roleTypeId" use-when="productStoreRole==null" title="${uiLabelMap.PartyRoleTypeId}" tooltip="${uiLabelMap.CommonRequired}">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="RoleType" key-field-name="roleTypeId"/>
            </drop-down>
        </field>
        <field name="roleTypeId" use-when="productStoreRole!=null" title="${uiLabelMap.PartyRoleTypeId}"><display-entity entity-name="RoleType"/></field>
        <field name="fromDate" use-when="productStoreRole==null" title="${uiLabelMap.CommonFromDate}"><date-time/></field>
        <field name="fromDate" use-when="productStoreRole!=null" title="${uiLabelMap.CommonFromDate}"><display/></field>
        <field name="thruDate"><date-time/></field>
        <field name="sequenceNum"><text/></field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" use-when="productStoreRole==null" widget-style="btn btn-small btn-primary">
            <submit image-location="icon-ok" button-type="button"/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" use-when="productStoreRole!=null" widget-style="btn btn-small btn-primary">
            <submit image-location="icon-ok" button-type="button"/>
        </field>
    </form>
    
     <form name="lookupPartyName" target="LookupPartyName" type="single"
        header-row-style="header-row" default-table-style="basic-table">
        <!-- <auto-fields-entity entity-name="PartyNameView" default-field-type="find"/> -->
        <field name="partyId" title="${uiLabelMap.PartyPartyId}"><text-find/></field>
        <field name="partyTypeId" title="${uiLabelMap.PartyTypeId}">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="PartyType"/>
            </drop-down>
        </field>
        <field name="firstName" title="${uiLabelMap.PartyFirstName}"><text-find/></field>
        <field name="lastName"  title="${uiLabelMap.PartyLastName}"><text-find/></field>
        <field name="groupName" title="${uiLabelMap.PartyGroupName}"><text-find/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-small btn-primary open-sans icon-search"><submit image-location="icon-search" button-type="button"/></field>
    </form>
	
	<form name="ListProductStoreRole" type="list" list-name="listIt" paginate-target="FindProductStoreRoles" default-entity-name="ProductStoreRole" separate-columns="true"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="table table-striped dataTable table-hover table-bordered">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="ProductStoreRole"/>
                <field-map field-name="orderBy" from-field="parameters.sortField"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <field name="partyId" title="${uiLabelMap.PartyPartyId}">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${groupName}${lastName},${firstName}">
                <sub-hyperlink  link-style="" target="/partymgr/control/viewprofile" target-type="inter-app" description="[${partyId}]" >
                    <parameter param-name="partyId"/>
                </sub-hyperlink>
            </display-entity>
        </field>
        <field name="roleTypeId" title="${uiLabelMap.PartyRoleTypeId}"><display-entity entity-name="RoleType"/></field>
        <field name="fromDate"><display/></field>
        <field name="thruDate"><display/></field>
        <field name="sequenceNum"><display/></field>
        <field name="editLink" widget-style="btn open-sans icon-edit btn-mini btn-primary" title="${uiLabelMap.CommonEdit}">
           <hyperlink target="FindProductStoreRoles" description="${uiLabelMap.CommonEdit}">
                <parameter param-name="partyId"/>
                <parameter param-name="productStoreId"/>
                <parameter param-name="roleTypeId"/>
                <parameter param-name="fromDate"/>
            </hyperlink>
        </field>
        <field name="deleteLink" widget-style="btn open-sans icon-trash btn-mini btn-danger " title="${uiLabelMap.CommonDelete}">
            <hyperlink target="storeRemoveRole" description="${uiLabelMap.CommonDelete}">
                <parameter param-name="partyId"/>
                <parameter param-name="productStoreId"/>
                <parameter param-name="roleTypeId"/>
                <parameter param-name="fromDate"/>
            </hyperlink>
        </field>
    </form>
    
    <form name="ListPhysInvVar" type="list" list-name="listPhysInvVar" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true">
        <field name="physicalInventoryId">
			<display></display>
		</field>
        <field name="physicalInventoryDate" title="${uiLabelMap.TimeCheck}"><display></display></field>
        <field name="inventoryItemId" title="${uiLabelMap.InventoryItemId}"><display></display></field>
        <field name="productId" title="${uiLabelMap.ProductId}">
        	<display-entity entity-name="Product" description="${productName}" key-field-name="productId" >
        	</display-entity>
        </field>
        <field name="facilityId" title="${uiLabelMap.FacilityId}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId" ></display-entity></field>
        <field name="varianceReasonId"><display-entity entity-name="VarianceReason" description="${description}" key-field-name="varianceReasonId" ></display-entity></field>
        <field name="quantity"><display></display></field>
    </form>
    
    <form name="TransferDamagedInventoryItem" type="single" target="CreateInventoryTransfer">
    	<field name="inventoryItemId"><display></display></field>
    	<field name="facilityId"><display></display></field>
    	<field name="locationSeqId"><display></display></field>
    	<field name="inventoryItemTypeId"><display></display></field>
    	<field name="productId" widget-style="btn btn-mini"><display></display></field>
    	<field name="statusId"><display></display></field>
    	<field name="comments"><display></display></field>
    	<field name="ATPQOH"><display></display></field>
    	<field name="transferStatus"><drop-down></drop-down></field>
    	<field name="transferSendDate"><date-time/></field>
    	<field name="toFacility"><drop-down></drop-down></field>
    	<field name="toContainer"><text></text></field>
    	<field name="toLocation"><lookup target-form-name=""></lookup></field>
    	<field name="comment"><text></text></field>
    	<field name="quantity"><text></text></field>
    </form>
    
	<!--========================================================== end physical form dat ===============================================-->
	
    <form name="ListPurchaseAgreements" list-name="listPurchaseAgreements" default-table-style="table-bordered table table-striped table-hover dataTable" type="list">
    	<field name="agreementId" title="${uiLabelMap.AgreementId}" tooltip="${uiLabelMap.CommonDetail}">
    		<hyperlink target="getDetailAgreementPurchaseOrder" description="${agreementId}">
    			<parameter param-name="agreementId" from-field="agreementId"/>
    		</hyperlink>
    	</field>
    	<field name="partyIdFrom" title="${uiLabelMap.SlideA}">
    		<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName} ${partyIdFrom}" key-field-name="partyId">
            </display-entity>
    	</field>
    	<field name="partyIdTo" title="${uiLabelMap.SlideB}">
    		<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}" key-field-name="partyId">
            </display-entity>
    	</field>
    	<field name="agreementDate" title="${uiLabelMap.AgreementDate}">
    		<display/>
    	</field>
    	<field name="description" title="${uiLabelMap.description}">
    		<display/>
    	</field>
    </form>
    <form name="ListPurchaseOrder" type="list" default-map-name="OH" list-name="listPurchaseOrders" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
    	<row-actions>
    		<entity-one value-field="orderHeader" entity-name="OrderHeader"></entity-one>
    	</row-actions>
    	<field name="orderId" title="${uiLabelMap.OrderId}">
    		<hyperlink target="getDetailPurchaseOrder" description="${orderId}">
    			<parameter param-name="orderId" from-field="orderId"/>
    		</hyperlink>
    	</field>
    	<field name="orderDate" title="${uiLabelMap.OrderDate}"><display/></field>
    	<field name="orderName" title="${uiLabelMap.OrderName}"><display/></field>
    	<field name="productStoreId" title="${uiLabelMap.productStore}"><display/></field>
    	<field name="grandTotal" title="${uiLabelMap.totalAmount}"><display currency="${orderHeader.currencyUom}" type="currency"/></field>
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"/></field>
    </form>
    <form name="DetailAgreementPurchaseOrder" type="single" default-map-name="agreement">
    	<actions>
    	</actions>
    	<field name="agreementId" title="${uiLabelMap.AgreementId}"><display/></field>
    	<field name="agreementDate" title="${uiLabelMap.AgreementDate}"><display/></field>
    	<field name="partyIdFrom" title="${uiLabelMap.SlideA}">
    		<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName} ${agreement.partyIdFrom}" key-field-name="partyId">
            </display-entity>
        </field>
    	<field name="partyIdTo" title="${uiLabelMap.SlideB}">
    		<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName} ${agreement.partyIdTo}" key-field-name="partyId">
            </display-entity>
    	</field>
    	<field name="description" title="${uiLabelMap.description}"><display/></field>
    </form>
    <form name="ListShipmentCost" type="list" default-map-name="OH" list-name="listShipmentCosts" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
    	<row-actions>
    	</row-actions>
    	<field name="shipmentId">
    		<hidden/>
    	</field>
    	<field name="originFacilityId" title="${uiLabelMap.FacilityFrom}"><display-entity description="${facilityName}" entity-name="Facility" key-field-name="facilityId"/></field>
    	<field name="destFacilityId" title="${uiLabelMap.FacilityTo}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity></field>
    	<field name="originContactMechId" title="${uiLabelMap.OriginContactMech}"><display-entity entity-name="PostalAddress" description="${address1}" key-field-name="contactMechId"/></field>
    	<field name="destContactMechId" title="${uiLabelMap.DestinationContactMech}"><display-entity entity-name="PostalAddress" description="${address1}" key-field-name="contactMechId"/></field>
    	<field name="actualTransportCost" title="${uiLabelMap.TransportCost}"><display type="currency" currency="${shipment.currencyUomId}"/></field>
    	<field name="actualServiceCost" title="${uiLabelMap.ServiceCost}"><display type="currency" currency="${shipment.currencyUomId}"/></field>
    	<field name="actualOtherCost" title="${uiLabelMap.OtherCost}"><display type="currency" currency="${shipment.currencyUomId}"/></field>
    	<field name="actualCost" title="${uiLabelMap.CommonTotal}"><display currency="${shipment.currencyUomId}" type="currency"/></field>
    </form>
   	<form name="GeneralShipmentCostInfo" type="single" default-map-name="">
    	<actions>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getGeneralShipmentCostInfo.groovy"/>
    		<set field="actualTransportCost" value="${actualTransportCost}"/>
    		<set field="actualServiceCost" value="${actualServiceCost}"/>
    		<set field="actualOtherCost" value="${actualOtherCost}"/>
    		<set field="actualCost" value="${actualCost}"/>
    		<set field="originFacilityId" value="${shipment.originFacilityId}"/>
    		<set field="destFacilityId" value="${shipment.destinationFacilityId}"/>
    		<set field="estimatedShipCost" value="${shipment.estimatedShipCost}"/>
    		<set field="destinationContactMechId" value="${shipment.destinationContactMechId}"/>
    	</actions>
    	<field name="shipmentId" title="${uiLabelMap.ShipmentId}"><display/></field>
    	<field name="originFacilityId" title="${uiLabelMap.FacilityFrom}"><display-entity description="${facilityName}" entity-name="Facility" key-field-name="facilityId"/></field>
    	<field name="originContactMechId" title="${uiLabelMap.OriginContactMech}"><display-entity entity-name="PostalAddress" description="${address1}" key-field-name="contactMechId"/></field>
    	<field name="destFacilityId" title="${uiLabelMap.FacilityTo}" use-when="&quot;TRANSFER&quot;.equals(shipmentTypeId)"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity></field>
    	<field name="destinationContactMechId" title="${uiLabelMap.DestinationContactMech}"><display-entity entity-name="PostalAddress" description="${address1}" key-field-name="contactMechId"/></field>
    	<field name="estimatedShipCost" title="${uiLabelMap.EstimatedShipCost}"><display type="currency" currency="${shipment.currencyUomId}"/></field>
    	<field name="actualTransportCost" title="${uiLabelMap.TransportCost}"><display type="currency" currency="${shipment.currencyUomId}"/></field>
    	<field name="actualServiceCost" title="${uiLabelMap.ServiceCost}"><display type="currency" currency="${shipment.currencyUomId}"/></field>
    	<field name="actualOtherCost" title="${uiLabelMap.OtherCost}"><display type="currency" currency="${shipment.currencyUomId}"/></field>
    	<field name="actualCost" title="${uiLabelMap.CommonTotal}"><display currency="${shipment.currencyUomId}" type="currency"/></field>
    	<sort-order>
        	<field-group style="no-widget-header no-left-margin span6">
        		<sort-field name="shipmentId"/>
        		<sort-field name="originFacilityId"/>
        		<sort-field name="originContactMechId"/>
        		<sort-field name="destFacilityId"/>
        		<sort-field name="destinationContactMechId"/>
        		<sort-field name="estimatedShipCost"/>
        	</field-group>
        	<field-group style="no-widget-header span6 end-group-group">
        		<sort-field name="actualTransportCost"/>
        		<sort-field name="actualServiceCost"/>
        		<sort-field name="actualOtherCost"/>
        		<sort-field name="actualCost"/>
        	</field-group>
        </sort-order>
    </form>
    <form name="ListAllDeliveries" type="multi" target="" list-name="listIt" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="Delivery"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
    	<row-actions>
    		<entity-one entity-name="OrderHeader" value-field="OH">
    			<field-map field-name="orderId" value="${orderId}"/>
    		</entity-one>
    	</row-actions>
    	<field name="deliveryId" title="${uiLabelMap.DeliveryId}">
    		<hyperlink target="EditDelivery" description="${deliveryId}">
    			<parameter param-name="deliveryId" from-field="deliveryId"/>
    		</hyperlink>
    	</field>
    	<field name="statusId" title="${uiLabelMap.Status}">
    		<display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity>
    	</field>
    	<field name="newStatusId"><hidden value=""/></field>
    	<field name="partyId" title="${uiLabelMap.Receiver}">
    		<display-entity entity-name="PartyNameView" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}">
            </display-entity>
       	</field>
       	<field name="contactMechId" title="${uiLabelMap.address}">
    		<display-entity entity-name="PostalAddress" description="${address1}" key-field-name="contactMechId"> 
   			</display-entity>
   		</field>
    	<field name="orderId" title="${uiLabelMap.OrderId}"><display/></field>
    	<field name="shipmentId" title="${uiLabelMap.ShipmentId}"><hidden/></field>
    	<field name="productStoreId" title="${uiLabelMap.productStore}"><display-entity entity-name="ProductStore" key-field-name="productStoreId" description="${storeName}"></display-entity></field>
    	<field name="originFacilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName}"></display-entity></field>
    	<field name="orderItemTypeId" title="${uiLabelMap.DeliveryReason}">
			<display-entity entity-name="OrderItemType" description="${description}" key-field-name="orderItemTypeId">
			</display-entity>    	
    	</field>
    	<field name="orderDate" title="${uiLabelMap.OrderDate}"><display default-value="${OH.orderDate}"></display></field>
    	<field name="createDate" title="${uiLabelMap.createDate}"><display/></field>
    	<field name="deliveryDate" title="${uiLabelMap.deliveryDate}"><display/></field>
    	<field name="totalAmount"><display currency="${OH.currencyUom}" type="currency"/></field>
    	<field name="no" title="${uiLabelMap.noNumber}"><display/></field>
    	
    	<field name="Detail" title="${uiLabelMap.CommonDetail}">
    		<hyperlink target="getDetailDelivery" description="${uiLabelMap.CommonDetail}">
                <parameter param-name="deliveryId" from-field="deliveryId"/>
                <parameter param-name="orderId" from-field="orderId"/>
                <parameter param-name="partyId" from-field="partyId"/>
    		</hyperlink>
    	</field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check all-checked="false" /></field>
    	<field name="exportedButton" title="${uiLabelMap.Exported}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-cloud-upload"/>
        </field>
        <field name="deliveredButton" title="${uiLabelMap.Delivered}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="ListReturnOrders" type="list" target="" title="" list-name="listReturnOrders"
        odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
        <row-actions>
        	<entity-condition entity-name="OrderRole" list="listCustomers">
        		<condition-list>
	        		<condition-expr field-name="orderId" operator="equals" from-field="orderId"/>
        			<condition-expr field-name="roleTypeId" operator="equals" value="PLACING_CUSTOMER"/>
        		</condition-list>
        	</entity-condition>
        	<entity-one entity-name="PartyNameView" value-field="partyNameView">
        		<field-map field-name="partyId" value="${listCustomers[0].partyId}"/>
        	</entity-one>
        </row-actions>
        <field name="orderId" title="${uiLabelMap.OrderId}">
        	<hyperlink target="getDetailReturnOrder" description="${orderId}">
        		<parameter param-name="orderId" from-field="orderId"/>
        	</hyperlink>
       	</field>
        <field name="orderName" title="${uiLabelMap.OrderName}"><display/></field>
        <field name="orderDate" title="${uiLabelMap.OrderDate}"><display/></field>
        <field name="partyId" title="${uiLabelMap.PartyEmplId}">
        	<display default-value="${listCustomers[0].partyId}"></display>
        </field>
        <field name="partyName" title="${uiLabelMap.PartyEmplName}">
        	<display default-value="${partyNameView.firstName} ${partyNameView.middleName} ${partyNameView.lastName} ${partyNameView.groupName}"/>
        </field>
        <field name="productStoreId" title="${uiLabelMap.productStore}"><display-entity entity-name="ProductStore" description="${storeName}" key-field-name="productStoreId"></display-entity></field>
        <field name="originFacilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity></field>
        <field name="entryDate"><display/></field>
        <field name="priority"><display/></field>
        <field name="currencyUom"><display/></field>
        <field name="remainingSubTotal"><display/></field>
        <field name="grandTotal"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
    </form>
    <form name="EditReturn" type="single" target="updateReturnInfo" default-map-name="returnHeader" id="editReturn"
        header-row-style="header-row" default-table-style="basic-table">
        <actions>
            <entity-one entity-name="StatusItem" value-field="currentStatus" auto-field-map="false">
                <field-map field-name="statusId" from-field="returnHeader.statusId"/>
            </entity-one>
        </actions>
        <alt-target use-when="returnHeader==null" target="createNewReturn"/>
        <auto-fields-service service-name="updateReturnHeader"/>
        <field use-when="returnHeader!=null" name="returnId"><display/></field>
        <field use-when="returnHeader==null&amp;&amp;returnId!=null" name="returnId" tooltip="${uiLabelMap.OrderReturnCannotBeFound} ${returnId}"><text size="20" maxlength="20"/></field>
        <field use-when="returnHeader==null&amp;&amp;returnId==null" name="returnId"><ignored/></field>
        <field name="returnHeaderTypeId" id-name="returnHeaderTypeId">
            <drop-down allow-empty="false">
                <entity-options entity-name="ReturnHeaderType" description="${description}"/>
            </drop-down>
        </field>
        <field name="createdBy" use-when="returnHeader != null"><display/></field>
        <field name="createdBy" use-when="returnHeader == null"><hidden/></field>
        <field name="statusId" use-when="returnHeader==null" id-name="statusId" title="${uiLabelMap.Status}">
            <drop-down>
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" value="ORDER_RETURN_STTS"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
                <list-options key-name="statusIdTo" list-name="returnStatus" description="${transitionName}"/>
            </drop-down>
        </field>
        <field name="statusId" use-when="returnHeader!=null" title="${uiLabelMap.Status}">
            <drop-down current-description="${currentStatus.description}">
                <entity-options entity-name="StatusValidChangeToDetail" key-field-name="statusIdTo" description="${transitionName} (${description})">
                    <entity-constraint name="statusId" env-name="returnHeader.statusId"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="currencyUomId" use-when="returnHeader==null" title="${uiLabelMap.currencyUomId}">
            <drop-down no-current-selected-key="${defaultOrganizationPartyCurrencyUomId}">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="currencyUomId" use-when="returnHeader!=null" title="${uiLabelMap.currencyUomId}">
            <display-entity entity-name="Uom" key-field-name="uomId" description="${abbreviation} - ${description}"/>
        </field>
        <field name="destinationFacilityId" title="${uiLabelMap.FacilityTo}">
            <drop-down allow-empty="true">
                <entity-options entity-name="Facility" key-field-name="facilityId" description="${facilityName}">
                	<entity-constraint name="facilityTypeId" value="WAREHOUSE"/>
                    <entity-order-by field-name="facilityName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="fromPartyId" title="${uiLabelMap.ReturnFromParty}"><lookup target-form-name="lookupPartyInfo"/></field>
        <field name="toPartyId" title="${uiLabelMap.ReturnToParty}"><lookup target-form-name="lookupPartyInfo"/></field>
        <field name="originContactMechId" use-when="returnHeader!=null" title="${uiLabelMap.OriginContactMech}">
            <display-entity entity-name="PostalAddress" key-field-name="contactMechId" description="${toName} ${attnName} ${address1} ${address2} ${city} ${stateProvinceGeoId} ${postalCode} ${countryGeoId}"/>
        </field>
        <field name="originContactMechId" title="${uiLabelMap.OriginContactMech}" use-when="returnHeader!=null&amp;&amp;&quot;RETURN_REQUESTED&quot;.equals(returnHeader.getString(&quot;statusId&quot;))">
            <drop-down allow-empty="true">
                <list-options key-name="postalAddress.contactMechId" list-name="addresses" description="${postalAddress.toName} ${postalAddress.attnName} ${postalAddress.address1} ${postalAddress.address2} ${postalAddress.city} ${postalAddress.stateProvinceGeoId} ${postalAddress.postalCode} ${postalAddress.countryGeoId}"/>
            </drop-down>
        </field>
        <field name="originContactMechId" use-when="returnHeader == null"><hidden/></field>
        <field name="billingAccountId" use-when="billingAccountList!=null&amp;&amp;billingAccountList.size()&gt;0">
            <drop-down allow-empty="true">
                <list-options key-name="billingAccountId" list-name="billingAccountList" description="${billingAccountId}: ${description}"/>
            </drop-down>
        </field>
        <field name="billingAccountId" use-when="!(billingAccountList!=null&amp;&amp;billingAccountList.size()&gt;0)">
        	<hidden/>
        </field>
        <field name="finAccountId" use-when="finAccounts!=null&amp;&amp;finAccounts.size()&gt;0">
            <drop-down allow-empty="true">
                <list-options key-name="finAccountId" list-name="finAccounts" description="${finAccountId}: ${finAccountName}"/>
            </drop-down>
        </field>
        <field name="finAccountId" use-when="!(finAccounts!=null&amp;&amp;finAccounts.size()&gt;0)">
        	<hidden/>
        </field>
        <field name="paymentMethodId" use-when="creditCardList!=null&amp;&amp;creditCardList.size()&gt;0">
            <drop-down allow-empty="true">
                <list-options list-name="creditCardList" list-entry-name="creditCardPm" key-name="creditCardPm.paymentMethodId" description="${bsh:org.ofbiz.party.contact.ContactHelper.formatCreditCard(creditCardPm.getRelatedOne(&quot;CreditCard&quot;, false))}"/>
            </drop-down>
        </field>
        <field name="paymentMethodId" use-when="!(creditCardList!=null&amp;&amp;creditCardList.size()&gt;0)">
            <hidden/>
        </field>
        <field name="newCreditCard" widget-style="buttontext" use-when="returnHeader!=null&amp;&amp;returnHeader.getString(&quot;fromPartyId&quot;)!=null">
            <hyperlink also-hidden="false" target="/partymgr/control/editcreditcard" target-window="partymgr" description="${uiLabelMap.AccountingCreateNewCreditCard}" target-type="inter-app">
                <parameter param-name="partyId" from-field="returnHeader.fromPartyId"/>
            </hyperlink>
        </field>
        <field name="needsInventoryReceive">
            <drop-down no-current-selected-key="N"><option key="N"/><option key="Y"/></drop-down>
        </field>
        <field name="supplierRmaId"><hidden/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-primary btn-small open-sans"><submit image-location="icon-ok" button-type="button"/></field>
    <sort-order>
    	<field-group style="no-left-margin span6 no-widget-header">
    		<sort-field name="returnId"/>
    		<sort-field name="returnHeaderTypeId"/>
    		<sort-field name="statusId"/>
    		<sort-field name="createdBy"/>
    		<sort-field name="fromPartyId"/>
    		<sort-field name="toPartyId"/>
    		<sort-field name="paymentMethodId"/>
    		<sort-field name="finAccountId"/>
    	</field-group>
    	<field-group style="span6 no-widget-header">
    		<sort-field name="billingAccountId"/>
    		<sort-field name="entryDate"/>
    		<sort-field name="originContactMechId"/>
    		<sort-field name="destinationFacilityId"/>
    		<sort-field name="needsInventoryReceive"/>
    		<sort-field name="currencyUomId"/>
    		<sort-field name="supplierRmaId"/>
    		<sort-field name="newCreditCard"/>
    	</field-group>
    	<field-group style="no-widget-header span12 align-center no-left-margin">
    		<sort-field name="submitButton"/>
    	</field-group>
   	</sort-order>
    </form>
    <form name="ListReturns" type="list"  target="" title="" list-name="listIt"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" paginate-target="">
        <actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="ReturnHeader"/>
                <field-map field-name="orderBy" value="entryDate DESC"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
            <set field="isLookup" from-field="isLookup"/>
        </actions>
        <field name="returnId" title="${uiLabelMap.OrderReturnId}" sort-field="true" use-when="isLookup == null">
            <hyperlink description="${returnId}" target="updateReturnInfo" >
                <parameter param-name="returnId"/>
            </hyperlink>
        </field>
        <field name="returnId" title="${uiLabelMap.OrderReturnId}" sort-field="true" use-when="isLookup != null">
            <hyperlink description="${returnId}" also-hidden="false" target-type="plain" target="javascript:set_value('${returnId}')">
            </hyperlink>
        </field>
        <field name="entryDate" title="${uiLabelMap.OrderEntryDate}" sort-field="true">
            <display/>
        </field>
        <field name="fromPartyId" title="${uiLabelMap.OrderReturnFromParty}" sort-field="true">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${groupName} ${firstName} ${lastName}"></display-entity>
        </field>
        <field name="destinationFacilityId"  title="${uiLabelMap.OrderReturnDestinationFacility}" sort-field="true">
        <display/>
        </field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}" sort-field="true">
            <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
    </form>
     <form name="FindReturns" type="single"  target="findReturn" title="" header-row-style="header-row" default-table-style="basic-table">
        <actions>
        	<set field="isLookup" from-field="isLookup"/>
        </actions>
        <alt-target use-when="isLookup != null" target="lookupReturn"/>
        <field name="returnHeaderTypeId" use-when="isLookup == null">
            <drop-down allow-empty="true">
                <entity-options entity-name="ReturnHeaderType" description="${description}"/>
            </drop-down>
        </field>
        <field name="returnHeaderTypeId" use-when="isLookup != null">
    		<hidden value="${parameters.parm0}"/>
   		</field>
   		<field name="statusId" use-when="isLookup != null">
    		<hidden value="${parameters.parm1}"/>
   		</field>
   		<field name="destinationFacilityId" use-when="isLookup != null">
   			<hidden value="${parameters.parm2}"/>
   		</field>
        <field name="returnId" title="${uiLabelMap.OrderReturnId}"><text-find/></field>
        <field name="fromPartyId" title="${uiLabelMap.OrderReturnFromParty}">
            <lookup target-form-name="lookupPartyInfo"/>
        </field>
        <field name="billingAccountId" title="${uiLabelMap.AccountingBillingAccount}">
            <text-find/>
        </field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}" use-when="isLookup == null">
            <drop-down allow-empty="true">
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" operator="equals" value="ORDER_RETURN_STTS"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="entryDate" title="${uiLabelMap.OrderEntryDate}">
            <date-find/>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
        <sort-order>
        	<field-group style="no-widget-header no-left-margin span12">
        		<sort-field name="returnHeaderTypeId" position="1"/>
        		<sort-field name="returnId" position="2"/>
        		<sort-field name="fromPartyId" position="3"/>
        		<sort-field name="billingAccountId" position="4"/>
        		<sort-field name="statusId" position="5"/>
        		<sort-field name="entryDate" position="6"/>
        		<sort-field name="submitButton" position="7"/>
        	</field-group>
        </sort-order>
    </form>
    <form name="SelectCreateOrderFrom" type="single" target="createChangeDateOrder">
		<field name="reasonTypeId" title="${uiLabelMap.CommonCreateNew} ${uiLabelMap.CommonFrom}">
	        <drop-down allow-empty="false">
	        	<option key="FR_REQUIREMENT" description="${uiLabelMap.FromRequirement}"/>
	        	<option key="FR_RETURN" description="${uiLabelMap.FromReturn}"/>
	        </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonContinue}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-arrow-right"/>
        </field>
    </form>
    <form name="ReturnInvoices" type="list"  target="" title="" list-name="listReturnInvoices"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" paginate-target="">
		<auto-fields-entity entity-name="ReturnItemBilling" default-field-type="display"/>
    </form>
    <form name="SelectFacilityToReceive" type="single" target="getIncomingShipments">
   		<field name="productStoreId" title="${uiLabelMap.productStore}">
            <drop-down allow-empty="false" no-current-selected-key="${requirement.productStoreId}">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
		<field name="facilityId" title="${uiLabelMap.facility}">
			<drop-down>
				<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
			</drop-down>
		</field>
		<field name="submitButton" title="${uiLabelMap.CommonContinue}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-arrow-right"/>
        </field>
        <sort-order>
    	<field-group style="no-left-margin span6 no-widget-header">
    		<sort-field name="productStoreId" position="1"/>
    		<sort-field name="facilityId" position="2"/>
    		<sort-field name="submitButton" position="3"/>
    	</field-group>
   	</sort-order>
	</form>
	<form name="PurchaseOrderToRecives" type="list" target="" title="" list-name="listPurchaseOrders"
        odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
        <row-actions>
        	<entity-condition entity-name="OrderRole" list="listCustomers">
        		<condition-list>
	        		<condition-expr field-name="orderId" operator="equals" from-field="orderId"/>
        			<condition-expr field-name="roleTypeId" operator="equals" value="PLACING_CUSTOMER"/>
        		</condition-list>
        	</entity-condition>
        	<entity-one entity-name="PartyNameView" value-field="partyNameView">
        		<field-map field-name="partyId" value="${listCustomers[0].partyId}"/>
        	</entity-one>
        </row-actions>
        <field name="orderId" title="${uiLabelMap.OrderId}">
        	<hyperlink target="prepareOrderToReceive" description="${orderId}">
        		<parameter param-name="purchaseOrderId" from-field="orderId"/>
        	</hyperlink>
       	</field>
        <field name="orderName" title="${uiLabelMap.OrderName}"><display/></field>
        <field name="orderDate" title="${uiLabelMap.OrderDate}"><display/></field>
        <field name="partyId" title="${uiLabelMap.PartyEmplId}">
        	<display default-value="${listCustomers[0].partyId}"></display>
        </field>
        <field name="partyName" title="${uiLabelMap.PartyEmplName}">
        	<display default-value="${partyNameView.firstName} ${partyNameView.middleName} ${partyNameView.lastName} ${partyNameView.groupName}"/>
        </field>
        <field name="productStoreId" title="${uiLabelMap.productStore}"><display-entity entity-name="ProductStore" description="${storeName}" key-field-name="productStoreId"></display-entity></field>
        <field name="originFacilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity></field>
        <field name="entryDate"><display/></field>
        <field name="priority"><display/></field>
        <field name="currencyUom"><display/></field>
        <field name="remainingSubTotal"><display/></field>
        <field name="grandTotal"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
    </form>
    <form name="OrderFromShipment" type="list" default-map-name="" list-name="listOrderShipments" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
    	<auto-fields-entity entity-name="OrderShipment" default-field-type="display"/>
    	<field name="orderId" title="${uiLabelMap.OrderId}">
    		<hyperlink target="getOrderItemToReceives" description="${orderId}">
    			<parameter param-name="orderId" from-field="orderId"/>
    			<parameter param-name="facilityId" from-field="facilityId"/>
    			<parameter param-name="shipmentId" from-field="shipmentId"/>
    		</hyperlink>
    	</field>
    </form>
    <form name="ListOrderToDelivery" type="list" target="" title="" list-name="listOrders"
        odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="false">
        <row-actions>
        	<entity-condition entity-name="OrderRole" list="listCustomers">
        		<condition-list>
	        		<condition-expr field-name="orderId" operator="equals" from-field="orderId"/>
        			<condition-expr field-name="roleTypeId" operator="equals" value="PLACING_CUSTOMER"/>
        		</condition-list>
        	</entity-condition>
        	<entity-one entity-name="PartyNameView" value-field="partyNameView">
        		<field-map field-name="partyId" value="${listCustomers[0].partyId}"/>
        	</entity-one>
        </row-actions>
        <field name="orderId" title="${uiLabelMap.OrderId}">
        	<hyperlink target="getDetailOrderToDelivery" description="${orderId}">
        		<parameter param-name="orderId" from-field="orderId"/>
        	</hyperlink>
       	</field>
        <field name="orderName" title="${uiLabelMap.OrderName}"><display/></field>
        <field name="orderDate" title="${uiLabelMap.OrderDate}"><display/></field>
        <field name="partyId" title="${uiLabelMap.PartyEmplId}">
        	<display default-value="${listCustomers[0].partyId}"></display>
        </field>
        <field name="partyName" title="${uiLabelMap.PartyEmplName}">
        	<display default-value="${partyNameView.firstName} ${partyNameView.middleName} ${partyNameView.lastName} ${partyNameView.groupName}"/>
        </field>
        <field name="productStoreId" title="${uiLabelMap.productStore}"><display-entity entity-name="ProductStore" description="${storeName}" key-field-name="productStoreId"></display-entity></field>
        <field name="originFacilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity></field>
        <field name="entryDate"><display/></field>
        <field name="priority"><display/></field>
        <field name="currencyUom"><display/></field>
        <field name="remainingSubTotal"><display/></field>
        <field name="grandTotal"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
    </form>
    <form name="SelectOrderToCreateDelivery" target="EditDelivery" type="single">
    	<field name="orderTypeId"><hidden value="SALES_ORDER"/></field>
    	<field name="statusId"><hidden value="ORDER_APPROVED"/></field>
    	<field name="orderId" title="${uiLabelMap.CommonSelect} ${uiLabelMap.OrderOrder}">
    		<lookup target-form-name="LookupOrderHeaderShorten" target-parameter="orderTypeId, statusId"></lookup>
    	</field>
    	<field name="submitButton" title="${uiLabelMap.CommonContinue}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-arrow-right"/>
        </field>
    </form>
    <form name="SelectShipmentType" target="editShipmentInfo" type="single">
    	<field name="shipmentTypeId" title="${uiLabelMap.ShipmentType}">
    		<drop-down>
    			<entity-options description="${description}" entity-name="ShipmentType">
    				<entity-constraint name="parentTypeId" operator="equals" value=""/>
    			</entity-options>
    		</drop-down>
    	</field>
    	<field name="submitButton" title="${uiLabelMap.CommonContinue}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-arrow-right"/>
        </field>
    </form>
    
    <!-- BEGIN EDIT BY DATNV -->
    <form name="TargetCompany" type="multi" target="createTargetCompany" paginate-target="getCompanytargets" separate-columns="true" list-name="targetCompany"
    odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
    	<field name="targetHeaderId"><hidden/></field>
    	<field name="targetHeaderName"><hidden/></field>
    	<field name="targetTypeId"><hidden/></field>
    	<field name="ofYear"><hidden/></field>
    	<field name="createBy"><hidden/></field>
    	<field name="createDate"><hidden/></field>
    	<field name="targetItemSeqId"><hidden></hidden></field>
    	<field name="primaryProductCategoryId" title="${uiLabelMap.productCategoryId}"><display></display></field>
    	<field name="productId"><display-entity entity-name="Product" key-field-name="productId" description="${internalName}"></display-entity></field>
    	<field name="quantity" event="onchange" action="document.TargetCompany._rowSubmit_o_${itemIndex}.checked = true;"><text></text></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check all-checked="true" /></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
     <form name="EditTargetCompany" type="multi" target="editTargetItemCompany" paginate-target="EditTargetCompany" separate-columns="true" list-name="showTargerItem"
    odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
    	<field name="targetHeaderId"><hidden></hidden></field>
    	<field name="targetTypeId"><hidden></hidden></field>
    	<field name="targetItemSeqId"><hidden/></field>
    	<field name="productCategoryId" title="${uiLabelMap.productCategoryId}"><display></display></field>
    	<field name="productId"><display-entity entity-name="Product" key-field-name="productId" description="${internalName}"></display-entity></field>
    	<field name="quantity" event="onchange" action="document.EditTargetCompany._rowSubmit_o_${itemIndex}.checked = true;"><text></text></field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check/></field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
    <form name="ShowTargetCompany" type="multi" target="" separate-columns="true"  list-name="listTargetCompany"
    odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
    	<field name="targetHeaderId" title="${uiLabelMap.targetHeaderYear}">
    		<hyperlink target="EditTargetCompany" description="${ofYear}">
        		<parameter param-name="targetHeaderId" from-field="targetHeaderId"/>
        		<parameter param-name="targetTypeId" from-field="targetTypeId"/>		
       		</hyperlink>
    	</field>
    	<field name="targetTypeId" title="${uiLabelMap.targetHeaderYear}"><hidden/></field>
    	<field name="ofYear"><hidden/></field>
    	<field name="targetHeaderName" title="${uiLabelMap.targetHeaderName}"><display></display></field>
    </form>
    		
    <form name="CreateTargetCompanyHeader" type="single" target="getCompanytargets" separate-columns="true"
    odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
    	<field name="entityName"><hidden value="TargetHeader" /></field>
    	<field name="targetHeaderId"><hidden></hidden></field>
    	<field name="targetHeaderName" title="${uiLabelMap.targetHeaderName}"><text></text></field>
    	<field name="targetTypeId"><hidden></hidden></field>
    	<field name="ofYear" title="${uiLabelMap.targetHeaderYear}"><text></text></field>
    	<field name="createBy" title="${uiLabelMap.CreateBy}"><text></text></field>
    	<field name="createDate" title="${uiLabelMap.CreationDate}"><date-time/></field>
    	<field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-small btn-primary btn-position-center">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>		
    <form name="FindCustomTimePeriodInImportPlan" type="list" list-name="listCustomTimePeriodByForecast" target="findSalesForecastByYear" paginate-target="findSalesForecastByYear" view-size="5"
            odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" header-row-style="header-row-2" separate-columns="true">
    	<field name="customTimePeriodId" title="${uiLabelMap.DAFormFieldTitle_customTimePeriodId}">
    		<hyperlink target="ViewImportPlansFollowSalesForcast" description="${customTimePeriodId}"><parameter param-name="customTimePeriodId"/></hyperlink>
    	</field>
    	<field name="periodName" title="${uiLabelMap.DAFormFieldTitle_periodName}"><display></display></field>
    </form>
    <!-- END EDIT BY DATNV -->
    <form name="ListInventoryItemsTotal" type="list" list-name="listProducts" default-table-style="table table-striped dataTable table-hover table-bordered">
    	<row-actions>
   			<entity-one entity-name="Product" value-field="product">
   				<field-map field-name="productId" from-field="productId"/>
   			</entity-one>
   			<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getListInventoryItemsTotals.groovy"/>
   		</row-actions>
    	<field name="productId" title="${uiLabelMap.ProductProductId}">
    		<hyperlink target="getInventoryItemsByProduct" description="${productId}">
    			<parameter param-name="productId" from-field="productId"/>
    			<parameter param-name="facilityId" from-field="parameters.facilityId"/>
    		</hyperlink>
   		</field>
   		<field name="internalName" title="${uiLabelMap.ProductProductName}"><display default-value="${product.internalName}"/></field>
    	<field name="quantityOnHandTotal"><display/></field>
    	<field name="availableToPromiseTotal"><display/></field>
    	<field name="accountingQuantityTotal" title="${uiLabelMap.AccQuantityTotal}"><hidden/></field>
    	<field name="quantityOnOrder" title="${uiLabelMap.QuantityOnOrder}"><display default-value="${quantityOnOrdered}"/></field>
    </form>
    <form name="ListInventoryItemsByProduct" type="list" list-name="listInventoryItemsByProduct" view-size="10" default-table-style="table table-striped dataTable table-hover table-bordered">
    	<field name="inventoryItemId" title="${uiLabelMap.InventoryItemId}">
			<hyperlink target="editInventoryItemInfo" description="${inventoryItemId}">
				<parameter param-name="inventoryItemId" from-field="inventoryItemId"/>
			</hyperlink>
		</field>
    	<field name="internalName" title="${uiLabelMap.ProductProductName}"><display/> </field>
		<field name="inventoryItemTypeId" title="${uiLabelMap.InventoryItemType}"><hidden/></field>
		<field name="datetimeManufactured" title="${uiLabelMap.DatetimeManufactured}"><display/></field>
		<field name="expireDate" title="${uiLabelMap.ProductExpireDate}"><display/></field>
		<field name="serialNumber"><display/></field>
    	<field name="unitCost" title="${uiLabelMap.UnitCost}"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="containerId" title="${uiLabelMap.Container}"><display/></field>
    	<field name="binNumber" title="${uiLabelMap.BinNumber}"><display/></field>
    	<field name="lotId" title="${uiLabelMap.ProductLotId}"><display/></field>
    	<field name="datetimeReceived" title="${uiLabelMap.DatetimeReceived}"><display/></field>
    	<field name="quantityOnHandTotal" title="${uiLabelMap.FormFieldTitle_quantityOnHandTotal}"><display/></field>
    	<field name="availableToPromiseTotal" title="${uiLabelMap.FormFieldTitle_availableToPromiseTotal}"><display/></field>
    	<!-- HUNGNC START EDIT -->
    	<field name="locationSeqId" widget-style="btn btn-info btn-mini">
            <hyperlink target="EditFacilityLocation" description="${areaId}:${aisleId}:${sectionId}:${levelId}:${positionId} [${locationSeqId}]">
                <parameter param-name="facilityId"/>
                <parameter param-name="locationSeqId"/>
            </hyperlink>
        </field>
        <!-- HUNGNC END EDIT -->
    </form>
    <form name="FindPurchaseOrders" type="single"  target="searchPurchaseOrders" title="" header-row-style="header-row" default-table-style="basic-table">
        <field name="orderId" title="${uiLabelMap.OrderId}"><text-find/></field>
        <field name="orderName" title="${uiLabelMap.OrderName}">
            <text-find></text-find>
        </field>
        <field name="orderTypeId"><hidden value="PURCHASE_ORDER"/></field>
        <field name="orderDate"><date-find/></field>
        <field name="productStoreId" title="${uiLabelMap.productStoreId}"><text-find/></field>
        <field name="originFacilityId" title="${uiLabelMap.facilityId}"><text-find/></field>
        <field name="entryDate"><text-find/></field>
        <field name="currencyUom" title="${uiLabelMap.currencyUomId}"><text-find/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
        	<drop-down allow-empty="true">
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" value="ORDER_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="ListPurchaseOrders" type="multi" target="approvedPurchaseOrders" title="" list-name="listIt"
        odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
        <actions>
        	<set field="requestParameters.orderTypeId" value="PURCHASE_ORDER"/>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="OrderHeader"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
        	<entity-condition entity-name="OrderRole" list="listCustomers">
        		<condition-list>
	        		<condition-expr field-name="orderId" operator="equals" from-field="orderId"/>
        			<condition-expr field-name="roleTypeId" operator="equals" value="PLACING_CUSTOMER"/>
        		</condition-list>
        	</entity-condition>
        	<entity-one entity-name="PartyNameView" value-field="partyNameView">
        		<field-map field-name="partyId" value="${listCustomers[0].partyId}"/>
        	</entity-one>
        </row-actions>
        <field name="orderId" title="${uiLabelMap.OrderId}">
        	<hyperlink target="getDetailPurchaseOrder" description="${orderId}">
        		<parameter param-name="orderId" from-field="orderId"/>
        	</hyperlink>
       	</field>
        <field name="orderName" title="${uiLabelMap.OrderName}"><display/></field>
        <field name="orderDate" title="${uiLabelMap.OrderDate}"><display/></field>
        <field name="partyName" title="${uiLabelMap.Customer}">
        	<display default-value="${partyNameView.firstName} ${partyNameView.middleName} ${partyNameView.lastName} ${partyNameView.groupName}"/>
        </field>
        <field name="productStoreId" title="${uiLabelMap.productStore}"><display-entity entity-name="ProductStore" description="${storeName}" key-field-name="productStoreId"></display-entity></field>
        <field name="originFacilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity></field>
        <field name="entryDate"><display/></field>
        <field name="priority"><display/></field>
        <field name="currencyUom"><display/></field>
        <field name="remainingSubTotal"><display/></field>
        <field name="grandTotal"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
		<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;ORDER_COMPLETED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_CANCELLED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_REJECTED&quot;)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="FindInternalSalesOrder" type="single"  target="findInternalSalesOrder" title="" header-row-style="header-row" default-table-style="basic-table">
        <field name="orderId" title="${uiLabelMap.OrderId}"><text-find/></field>
        <field name="orderName" title="${uiLabelMap.OrderName}">
            <text-find></text-find>
        </field>
        <field name="salesMethodChannelEnumId"><hidden value="LOG_SALES_INTERNAL"/></field>
        <field name="orderDate"><date-find/></field>
        <field name="productStoreId" title="${uiLabelMap.productStoreId}"><text-find/></field>
        <field name="originFacilityId" title="${uiLabelMap.facilityId}"><text-find/></field>
        <field name="entryDate"><text-find/></field>
        <field name="currencyUom" title="${uiLabelMap.currencyUomId}"><text-find/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
        	<drop-down allow-empty="true">
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" value="ORDER_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="ListInternalSalesOrders" type="multi" target="approvedInternalSalesOrders" title="" list-name="listIt"
        odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
		<actions>
        	<set field="requestParameters.salesMethodChannelEnumId" value="LOG_SALES_INTERNAL"/>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="OrderHeader"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
        	<entity-condition entity-name="OrderRole" list="listCustomers">
        		<condition-list>
	        		<condition-expr field-name="orderId" operator="equals" from-field="orderId"/>
        			<condition-expr field-name="roleTypeId" operator="equals" value="PLACING_CUSTOMER"/>
        		</condition-list>
        	</entity-condition>
        	<entity-one entity-name="PartyNameView" value-field="partyNameView">
        		<field-map field-name="partyId" value="${listCustomers[0].partyId}"/>
        	</entity-one>
        </row-actions>
        <field name="orderId" title="${uiLabelMap.OrderId}">
        	<hyperlink target="getDetailInternalSalesOrder" description="${orderId}">
        		<parameter param-name="orderId" from-field="orderId"/>
        	</hyperlink>
       	</field>
        <field name="orderName" title="${uiLabelMap.OrderName}"><display/></field>
        <field name="orderDate" title="${uiLabelMap.OrderDate}"><display/></field>
        <field name="partyId" title="${uiLabelMap.PartyEmplId}">
        	<display default-value="${listCustomers[0].partyId}"></display>
        </field>
        <field name="partyName" title="${uiLabelMap.PartyEmplName}">
        	<display default-value="${partyNameView.firstName} ${partyNameView.middleName} ${partyNameView.lastName} ${partyNameView.groupName}"/>
        </field>
        <field name="productStoreId" title="${uiLabelMap.productStore}"><display-entity entity-name="ProductStore" description="${storeName}" key-field-name="productStoreId"></display-entity></field>
        <field name="originFacilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity></field>
        <field name="entryDate"><display/></field>
        <field name="priority"><display/></field>
        <field name="currencyUom"><display/></field>
        <field name="remainingSubTotal"><display/></field>
        <field name="grandTotal"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
		<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;ORDER_COMPLETED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_CANCELLED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_REJECTED&quot;)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="FindMarketingOrder" type="single"  target="findMarketingOrder" title="" header-row-style="header-row" default-table-style="basic-table">
        <field name="orderId" title="${uiLabelMap.OrderId}"><text-find/></field>
        <field name="orderName" title="${uiLabelMap.OrderName}">
            <text-find></text-find>
        </field>
        <field name="salesMethodChannelEnumId"><hidden value="MKT_METHOD_CHANNEL"/></field>
        <field name="orderDate"><date-find/></field>
        <field name="productStoreId" title="${uiLabelMap.productStoreId}"><text-find/></field>
        <field name="originFacilityId" title="${uiLabelMap.facilityId}"><text-find/></field>
        <field name="entryDate"><text-find/></field>
        <field name="currencyUom" title="${uiLabelMap.currencyUomId}"><text-find/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
        	<drop-down allow-empty="true">
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" value="ORDER_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="ListMarketingOrders" type="multi" target="approvedMarketingOrders" title="" list-name="listIt"
        odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
        <actions>
        	<set field="requestParameters.salesMethodChannelEnumId" value="MKT_METHOD_CHANNEL"/>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="OrderHeader"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
        	<entity-condition entity-name="OrderRole" list="listCustomers">
        		<condition-list>
	        		<condition-expr field-name="orderId" operator="equals" from-field="orderId"/>
        			<condition-expr field-name="roleTypeId" operator="equals" value="PLACING_CUSTOMER"/>
        		</condition-list>
        	</entity-condition>
        	<entity-one entity-name="PartyNameView" value-field="partyNameView">
        		<field-map field-name="partyId" value="${listCustomers[0].partyId}"/>
        	</entity-one>
        </row-actions>
        <field name="orderId" title="${uiLabelMap.OrderId}">
        	<hyperlink target="getDetailMarketingOrder" description="${orderId}">
        		<parameter param-name="orderId" from-field="orderId"/>
        	</hyperlink>
       	</field>
        <field name="orderName" title="${uiLabelMap.OrderName}"><display/></field>
        <field name="orderDate" title="${uiLabelMap.OrderDate}"><display/></field>
        <field name="partyId" title="${uiLabelMap.PartyRequestorEmplId}">
        	<display default-value="${listCustomers[0].partyId}"></display>
        </field>
        <field name="partyName" title="${uiLabelMap.PartyRequestorName}">
        	<display default-value="${partyNameView.firstName} ${partyNameView.middleName} ${partyNameView.lastName} ${partyNameView.groupName}"/>
        </field>
        <field name="productStoreId" title="${uiLabelMap.productStore}"><display-entity entity-name="ProductStore" description="${storeName}" key-field-name="productStoreId"></display-entity></field>
        <field name="originFacilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity></field>
        <field name="entryDate"><display/></field>
        <field name="priority"><display/></field>
        <field name="currencyUom"><display/></field>
        <field name="remainingSubTotal"><display/></field>
        <field name="grandTotal"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity></field>
		<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;ORDER_COMPLETED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_CANCELLED&quot;) &amp;&amp; !statusId.equals(&quot;ORDER_REJECTED&quot;)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="FindChangeDateOrder" type="single"  target="findChangeDateOrder" title="" header-row-style="header-row" default-table-style="basic-table">
        <field name="orderId" title="${uiLabelMap.OrderId}"><text-find/></field>
        <field name="orderName" title="${uiLabelMap.OrderName}">
            <text-find></text-find>
        </field>
        <field name="salesMethodChannelEnumId"><hidden value="LOG_CHANGE_DATE"/></field>
        <field name="orderDate"><date-find/></field>
        <field name="productStoreId" title="${uiLabelMap.productStoreId}"><text-find/></field>
        <field name="originFacilityId" title="${uiLabelMap.facilityId}"><text-find/></field>
        <field name="entryDate"><text-find/></field>
        <field name="currencyUom" title="${uiLabelMap.currencyUomId}"><text-find/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
        	<drop-down allow-empty="true">
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" value="ORDER_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="FindTransferOrder" type="single"  target="findTransferOrder" title="" header-row-style="header-row" default-table-style="basic-table">
        <field name="orderId" title="${uiLabelMap.OrderId}"><text-find/></field>
        <field name="orderName" title="${uiLabelMap.OrderName}">
            <text-find></text-find>
        </field>
        <field name="orderTypeId"><hidden value="TRANSFER_ORDER"/></field>
        <field name="orderDate"><date-find/></field>
        <field name="productStoreId" title="${uiLabelMap.productStoreId}"><text-find/></field>
        <field name="originFacilityId" title="${uiLabelMap.facilityId}"><text-find/></field>
        <field name="entryDate"><text-find/></field>
        <field name="currencyUom" title="${uiLabelMap.currencyUomId}"><text-find/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
        	<drop-down allow-empty="true">
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" value="ORDER_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="FindShippingContract" type="single"  target="findShippingContract" title="" header-row-style="header-row" default-table-style="basic-table">
        <field name="contractId" title="${uiLabelMap.contractId}"><text-find/></field>
   		<field name="contractName" title="${uiLabelMap.contractName}"><text-find/></field>
   		<field name="toPartyId" title="${uiLabelMap.toParty}"><text-find/></field>
   		<field name="toPartyGroupId" title="${uiLabelMap.toPartyGroup}"><text-find/></field>
   		<field name="toContactMechPhoneId" title="${uiLabelMap.toContactMechPhone}"><text-find/></field>
   		<field name="toContactMechFaxId" title="${uiLabelMap.toContactMechFax}"><text-find/></field>
   		<field name="toGeoId" title="${uiLabelMap.toGeo}"><text-find/></field>
   		<field name="toFinAccountId" title="${uiLabelMap.toFinAccount}"><text-find/></field>
   		<field name="toTaxCodeId" title="${uiLabelMap.taxCode}"><text-find/></field>
   		<field name="createdDate" title="${uiLabelMap.createdDate}"><date-find/></field>
   		<field name="fromDate" title="${uiLabelMap.fromDate}"><date-find/></field>
   		<field name="thruDate" title="${uiLabelMap.thruDate}"><date-find/></field>
   		<field name="statusId" title="${uiLabelMap.Status}">
   			<drop-down>
   				<entity-options description="${description}" entity-name="ContractStatus"></entity-options>
   			</drop-down>
   		</field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="FindVehicle" type="single"  target="findVehicle" title="" header-row-style="header-row" default-table-style="basic-table">
        <field name="vehicleId" title="${uiLabelMap.vehicleId}"><text-find/></field>
   		<field name="vehicleName" title="${uiLabelMap.vehicleName}"><text-find/></field>
   		<field name="partyCarrierId" title="${uiLabelMap.Owner}"><text-find/></field>
   		<field name="statusId" title="${uiLabelMap.Status}">
   			<drop-down>
   				<entity-options description="${description}" entity-name="VehicleStatus"></entity-options>
   			</drop-down>
   		</field>
   		<field name="shipmentMethodTypeId"><text-find/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="FindRequirement" type="single"  target="${targetFormSearch}" title="" header-row-style="header-row" default-table-style="basic-table">
       	<field name="requirementId" widget-style="open-sans" title="${uiLabelMap.requirementId}"><text-find></text-find></field>
        <field name="partyIdFrom" title="${uiLabelMap.Requestor}"><text-find/></field>
		<field name="facilityId" title="${uiLabelMap.FacilityFrom}"><text-find/></field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><date-find/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><date-find/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
        	<drop-down allow-empty="true">
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" value="REQUIREMENT_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="FindDelivery" type="single"  target="finDelivery" title="" header-row-style="header-row" default-table-style="basic-table">
       	<field name="deliveryId" title="${uiLabelMap.DeliveryId}"><text-find/></field>
    	<field name="statusId" title="${uiLabelMap.Status}">
        	<drop-down allow-empty="true">
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" value="DELIVERY_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
    	<field name="partyId" title="${uiLabelMap.Receiver}"><text-find/></field>
       	<field name="contactMechId" title="${uiLabelMap.address}"><text-find/></field>
    	<field name="orderId" title="${uiLabelMap.OrderId}"><display/></field>
    	<field name="productStoreId" title="${uiLabelMap.productStore}"><text-find/></field>
    	<field name="originFacilityId" title="${uiLabelMap.facility}"><text-find/></field>
    	<field name="orderDate" title="${uiLabelMap.OrderDate}"><date-find/></field>
    	<field name="createDate" title="${uiLabelMap.createDate}"><date-find/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="FindProduct" type="single"  target="finProduct" title="" header-row-style="header-row" default-table-style="basic-table">
       	<field name="productId" title="${uiLabelMap.ProductProductId}"><text-find/></field>
        <field name="productTypeId" title="${uiLabelMap.ProductTypeId}"><text-find/></field>
        <field name="facilityId" title="${uiLabelMap.facilityId}"><text-find/></field>
        <field name="internalName"><text-find/></field>
        <field name="brandName" title="${uiLabelMap.BrandName}"><text-find/></field>
        <field name="productName" title="${uiLabelMap.ProductName}"><text-find/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    
	<form name="FindReceipts" type="single"  target="searchReceipts" title="" header-row-style="header-row" default-table-style="basic-table">
        <field name="receiptId" title="${uiLabelMap.ReceiptId}"><text-find/></field>
        <field name="agreementId" title="${uiLabelMap.AgreementId}"><text-find/></field>
        <field name="facilityId" title="${uiLabelMap.facility}"><text-find/></field>
        <field name="createDate" title="${uiLabelMap.createDate}"><date-find/></field>
        <field name="receiptDate" title="${uiLabelMap.ReceiptDate}"><date-find/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
        	<drop-down allow-empty="true">
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" value="RECEIPT_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
    <form name="ListReceipts" type="list" title="" list-name="listIt" odd-row-style="alternate-row" default-table-style="table-bordered table table-striped table-hover dataTable">
        <actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="Receipt"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <field name="receiptId" title="${uiLabelMap.ReceiptId}">
       		<hyperlink target="getDetailReceipts" description="${receiptId}">
        		<parameter param-name="receiptId" from-field="receiptId"/>
        	</hyperlink>
       	</field>
       	<field name="facilityId" title="${uiLabelMap.ReceiptToFacility}"><display-entity description="${facilityName}" entity-name="Facility"/></field>
       	<field name="agreementId" title="${uiLabelMap.AgreementId}"><display/></field>
       	<field name="orderId" title="${uiLabelMap.OrderId}"><display/></field>
       	<field name="no" title="${uiLabelMap.No}"><display/></field>
       	<field name="createDate" title="${uiLabelMap.createDate}"><display/></field>
       	<field name="receiptDate" title="${uiLabelMap.ReceiptDate}"><display/></field>
       	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"/></field>
    </form>
    
    <form name="DetailReceipt" type="single" default-map-name="receipt" target="">
    	<actions>
    		<set field="partyUserLogin" from-field="userLogin.partyId"/>
    		<entity-condition entity-name="PartyRole" list="listPartyRole">
    			<condition-list>
    				<condition-expr field-name="partyId" value="${partyUserLogin}"></condition-expr>
    				<condition-expr field-name="roleTypeId" value="LOG_SPECIALIST"></condition-expr>
    			</condition-list>
    		</entity-condition>
   		</actions>
    	<alt-target use-when="!listPartyRole.isEmpty()" target="sendNotifyToStorekeepers"></alt-target>
    	<field name="openTime"><hidden value="${receiptDate}"/></field>
    	<field name="header"><hidden value="${uiLabelMap.NewReceiptIncoming}"/></field>
    	<field name="action"><hidden value="getDetailReceipts"/></field>
    	<field name="targetLink"><hidden value="receiptId=${receiptId};facilityId=${facilityId}"/></field>
    	<field name="receiptId" title="${uiLabelMap.ReceiptId}"><display/></field>
    	<field name="agreementId" title="${uiLabelMap.AgreementId}"><display/></field>
    	<field name="orderId" title="${uiLabelMap.OrderId}"><display/></field>
    	<field name="productStoreId" title="${uiLabelMap.productStoreId}"><display-entity entity-name="ProductStore" description="${storeName}"/></field>
    	<field name="facilityId" title="${uiLabelMap.facility}"><display-entity entity-name="Facility" description="${facilityName}"/></field>
    	<field name="contactMechId" title="${uiLabelMap.FacilityAddress}"><display-entity description="${address1}" entity-name="PostalAddress"/></field>
    	<field name="receiptDate" title="${uiLabelMap.ReceiptDate}"><display/></field>
    	<field name="statusId" title="${uiLabelMap.CurrentStatus}"><display-entity entity-name="StatusItem" description="${description}"/></field>
    	<sort-order>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="receiptId"/>
        		<sort-field name="agreementId"/>
        		<sort-field name="orderId"/>
        		<sort-field name="statusId"/>
        	</field-group>
        	<field-group style="span6 no-widget-header end-group-group">
        		<sort-field name="productStoreId"/>
        		<sort-field name="facilityId"/>
        		<sort-field name="contactMechId"/>
        		<sort-field name="receiptDate"/>
        	</field-group>
        	<field-group style="no-widget-header span12 no-left-margin align-center">
            	<sort-field name="submitButton"/>
            </field-group>
        </sort-order>
    </form>
    
    <form name="EditReceipt" type="single" default-map-name="receipt" target="updateReceipt">
    	<alt-target target="createReceipt" use-when="receipt == null"></alt-target>
    	<field name="receiptId" title="${uiLabelMap.ReceiptId}" use-when="receipt == null"><text/></field>
    	<field name="receiptId" title="${uiLabelMap.ReceiptId}" use-when="receipt != null"><display/></field>
    	<field name="agreementId" title="${uiLabelMap.PurchaseAgreement}">
    		<lookup target-form-name="lookupPurchaseAgreement" default-value="${receipt.agreementId}"></lookup>
    	</field>
    	<field name="productStoreId" title="${uiLabelMap.ProductStoreFrom}">
            <drop-down allow-empty="false" no-current-selected-key="${receipt.productStoreId}">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field name="facilityId" title="${uiLabelMap.facility}">
            <drop-down allow-empty="false" no-current-selected-key="${receipt.facilityId}">
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
    	<field name="contactMechId" title="${uiLabelMap.FacilityAddress}">
    		<drop-down allow-empty="false" no-current-selected-key="${receipt.contactMechId}">
    			<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
    		</drop-down>
    	</field>
        <field name="no" title="${uiLabelMap.No}"><text default-value="${receipt.no}"/></field>
        <field name="receiptDate" title="${uiLabelMap.ReceiptDate}"><date-time default-value="${receipt.receiptDate}"/></field>
        <field name="statusId" title="${uiLabelMap.Status}">
        	<drop-down no-current-selected-key="${receipt.statusId}">
        		<entity-options description="${description}" entity-name="StatusItem">
        			<entity-constraint name="statusTypeId" value="RECEIPT_STATUS"></entity-constraint>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="createDate" title="${uiLabelMap.createDate}"><date-time default-value="${groovy: org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSave}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-save"/>
        </field>
    </form>
    <form name="ListProductByReceipt" type="multi" target="updateReceiptItem" list-name="listItemToReceives" default-table-style="table table-striped table-bordered table-hover dataTable" use-row-submit="false">
    	<row-actions>
    		<set field="curLackQuantity" from-field="lackQuantity"/>
    		<set field="curQuantityRejected" from-field="quantityRejected"/>
    		<script location="component://delys/webapp/delys/WEB-INF/actions/logistics/getActualQuantity.groovy"/>
    		<set field="actualQuantityTmp" value="${actualQuantity}"/>
    	</row-actions>
    	<field name="receiptId"><hidden value="${receiptId}"/></field>
    	<field name="receiptItemSeqId"><hidden value="${receiptItemSeqId}"/></field>
    	<field name="statusId"><hidden value="RECEIPT_STK_ACCEPTED"/></field>
    	<field name="itemSeqId" title="${uiLabelMap.SequenceId}"><display default-value="${receiptItemSeqId}"/></field>
    	<field name="productId" title="${uiLabelMap.ProductProduct}"><display/></field>
   		<field name="orderedQuantity" title="${uiLabelMap.QuantityOrdered}"><hidden value="${orderedQuantity}"/></field>
    	<field name="inventoryItemTypeId"><hidden value="NON_SERIAL_INV_ITEM"/></field>
    	<field name="expireDate" title="${uiLabelMap.ProductExpireDate}"><display default-value="${expireDate}"/></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}"><display-entity description="${description}" entity-name="Uom" key-field-name="uomId"/></field>
  	   	<field name="quantityOrdered" title="${uiLabelMap.QuantityOrdered}"><display default-value="${orderedQuantity}"/></field>
  	   	<field name="orderId"><hidden value="${fromOrderId}"/></field>
  	   	<field name="orderItemSeqId"><hidden value="${fromOrderItemSeqId}"/></field>
  	   	<field name="priorityOrderId"><hidden value="${fromOrderId}"/></field>
  	   	<field name="priorityOrderItemSeqId"><hidden value="${fromOrderItemSeqId}"/></field>
  	   	<field name="facilityId"><hidden value="${receipt.facilityId}"/></field>
  	   	<field name="unitPrice" title="${uiLabelMap.UnitCost}">
    		<display type="currency" currency="${currencyUomId}"/>
   		</field>
   		<field name="subTotal" title="${uiLabelMap.SubTotal}">
    		<display type="currency" currency="${currencyUomId}"/>
   		</field>
   		
   		<field name="roleTypeId"><hidden value="IMPORT_SPECIALIST"/></field>
    	<field name="header"><hidden value="AReceiptUpdatedMustBeApprove"/></field>
    	<field name="action"><hidden value="getImportDetailReceipts"/></field>
    	<field name="targetLink"><hidden value="receiptId=${receiptId}"/></field>
   		
   		<field name="testQuantity" title="${uiLabelMap.ProductTestQuantity}" widget-style="width80pc"><display default-value="${testQuantity}"/></field>
   		<field name="sampleQuantity" title="${uiLabelMap.ProductSampleQuantity}" widget-style="width80pc"><display default-value="${sampleQuantity}"/></field>
   		<field name="inspectQuantity" title="${uiLabelMap.ProductInspectQuantity}"  widget-style="width80pc"><display default-value="${inspectQuantity}"/></field>
   		<field name="actualQuantity" title="${uiLabelMap.QuantityActualReceipt}" widget-style="width80pc" separate-column="true"><text default-value="${actualQuantity}"/></field>
   		<field name="lackQuantity" title="${uiLabelMap.ProductLackQuantity}" widget-style="width80pc" separate-column="true" ><text default-value="${lackQuantity}"/></field>
		<field name="quantityRejected" title="${uiLabelMap.DamagedQuantity}" widget-style="width80pc" separate-column="true" ><text default-value="${quantityRejected}" disabled="false"/></field>
    	<field name="rejectionId">
<!--     		<drop-down allow-empty="true" no-current-selected-key="{rejectionId}"> -->
<!--     			<entity-options description="${description}" entity-name="RejectionReason" key-field-name="rejectionId"></entity-options> -->
<!--     		</drop-down> -->
			<hidden value="SRJ_DAMAGED"/>
    	</field>
    	<field name="comment" title="${uiLabelMap.Note}" widget-style="width80pc" separate-column="true"><text default-value="${comment}"/></field>
        <field name="updateButton" title="${uiLabelMap.Accept}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="ListProductByReceiptCompleted" type="multi" target="addInventoryItemFromReceipt" list-name="listItemToReceives" default-table-style="table table-striped table-bordered table-hover dataTable" use-row-submit="false">
    	<field name="curReceiptId"><hidden value="${receiptId}"/></field>
    	<field name="receiptItemSeqId"><hidden value="${receiptItemSeqId}"/></field>
    	<field name="itemSeqId" title="${uiLabelMap.SequenceId}"><display default-value="${receiptItemSeqId}"/></field>
    	<field name="productId" title="${uiLabelMap.ProductProduct}"><display/></field>
   		<field name="orderedQuantity" title="${uiLabelMap.QuantityOrdered}"><display default-value="${orderedQuantity}"/></field>
    	<field name="inventoryItemTypeId"><hidden value="NON_SERIAL_INV_ITEM"/></field>
    	<field name="expireDate" title="${uiLabelMap.ProductExpireDate}"><display default-value="${expireDate}"/></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}"><display-entity description="${description}" entity-name="Uom" key-field-name="uomId"/></field>
  	   	<field name="quantityOrdered" title="${uiLabelMap.QuantityOrdered}"><hidden value="${orderedQuantity}"/></field>
  	   	<field name="orderId"><hidden value="${fromOrderId}"/></field>
  	   	<field name="shipmentId"><hidden value="${receipt.shipmentId}"/></field>
  	   	<field name="orderItemSeqId"><hidden value="${fromOrderItemSeqId}"/></field>
  	   	<field name="priorityOrderId"><hidden value="${fromOrderId}"/></field>
  	   	<field name="priorityOrderItemSeqId"><hidden value="${fromOrderItemSeqId}"/></field>
  	   	<field name="facilityId"><hidden value="${receipt.facilityId}"/></field>
  	   	<field name="inventoryItemTypeId"><hidden value="NON_SERIAL_INV_ITEM"/></field>
  	   	<field name="orderCurrencyUomId"><hidden value="${currencyUomId}"/></field>
  	   	<field name="currencyUomId"><hidden value="${facilityCurrencyUomId}"/></field>
  	   	<field name="orderCurrencyUnitPrice"><hidden value="${unitPrice}"/></field>
  	   	<field name="unitPrice" title="${uiLabelMap.UnitCost}">
    		<display type="currency" currency="${currencyUomId}"/>
   		</field>
   		<field name="subTotal" title="${uiLabelMap.SubTotal}">
    		<display type="currency" currency="${currencyUomId}"/>
   		</field>
   		<field name="testQuantity" title="${uiLabelMap.ProductTestQuantity}" widget-style="width80pc"><display default-value="${testQuantity}"/></field>
   		<field name="sampleQuantity" title="${uiLabelMap.ProductSampleQuantity}" widget-style="width80pc"><display default-value="${sampleQuantity}"/></field>
   		<field name="inspectQuantity" title="${uiLabelMap.ProductInspectQuantity}"  widget-style="width80pc"><display default-value="${inspectQuantity}"/></field>
   		<field name="actualQuantity" title="${uiLabelMap.QuantityActualReceipt}" widget-style="width80pc" separate-column="true"><display default-value="${actualQuantity}"/></field>
   		<field name="lackQuantity" title="${uiLabelMap.ProductLackQuantity}" widget-style="width80pc" separate-column="true" ><display default-value="${lackQuantity}"/></field>
		<field name="rejected" title="${uiLabelMap.DamagedQuantity}" widget-style="width80pc" separate-column="true" ><display default-value="${quantityRejected}"/></field>
		<field name="comment" title="${uiLabelMap.Note}" widget-style="width80pc" separate-column="true"><text default-value="${comment}"/></field>
				
		<field name="quantityQualityAssurance"><hidden value="${groovy: sampleQuantity.add(testQuantity.add(inspectQuantity))}"/></field>
		<field name="quantityAccepted"><hidden value="${actualQuantity}"/></field>
		<field name="quantityRejected"><hidden value="${groovy: quantityRejected.add(lackQuantity)}"/></field>
		<field name="quantityExcess"><hidden value="${groovy: actualQuantity.add(quantityRejected.add(lackQuantity.add(sampleQuantity.add(testQuantity.add(inspectQuantity)))).subtract(orderedQuantity))}"/></field>
    	<field name="rejectionId" title="${uiLabelMap.RejectReason}" widget-style="width80pc" separate-column="true">
   			<hidden value="SRJ_DAMAGED"/>
    	</field>
    	
        <field name="receiveButton" title="${uiLabelMap.ReceiveProduct}" widget-style="btn btn-small btn-primary" >
            <submit button-type="button" image-location="icon-cloud-download"/>
        </field>
    </form>
    
    <form name="DisplayProductByReceipt" type="list" target="" list-name="listItemToReceives" default-table-style="table table-striped table-bordered table-hover dataTable" use-row-submit="false">
    	<field name="receiptId"><hidden value="${receiptId}"/></field>
    	<field name="receiptItemSeqId"><hidden value="${receiptItemSeqId}"/></field>
    	<field name="itemSeqId" title="${uiLabelMap.SequenceId}"><display default-value="${receiptItemSeqId}"/></field>
    	<field name="productId" title="${uiLabelMap.ProductProduct}"><display/></field>
   		<field name="orderedQuantity" title="${uiLabelMap.QuantityOrdered}"><hidden value="${orderedQuantity}"/></field>
    	<field name="inventoryItemTypeId"><hidden value="NON_SERIAL_INV_ITEM"/></field>
    	<field name="expireDate" title="${uiLabelMap.ProductExpireDate}"><display default-value="${expireDate}"/></field>
    	<field name="quantityUomId" title="${uiLabelMap.QuantityUomId}"><display-entity description="${description}" entity-name="Uom" key-field-name="uomId"/></field>
  	   	<field name="quantityOrdered" title="${uiLabelMap.QuantityOrdered}"><display default-value="${orderedQuantity}"/></field>
  	   	<field name="orderId"><hidden value="${fromOrderId}"/></field>
  	   	<field name="orderItemSeqId"><hidden value="${fromOrderItemSeqId}"/></field>
  	   	<field name="facilityId"><hidden value="${receipt.facilityId}"/></field>
  	   	<field name="unitPrice" title="${uiLabelMap.UnitCost}">
    		<display type="currency" currency="${currencyUomId}"/>
   		</field>
   		<field name="subTotal" title="${uiLabelMap.SubTotal}">
    		<display type="currency" currency="${currencyUomId}"/>
   		</field>
   		<field name="testQuantity" title="${uiLabelMap.ProductTestQuantity}" widget-style="width80pc"><display default-value="${testQuantity}"/></field>
   		<field name="sampleQuantity" title="${uiLabelMap.ProductSampleQuantity}" widget-style="width80pc"><display default-value="${sampleQuantity}"/></field>
   		<field name="inspectQuantity" title="${uiLabelMap.ProductInspectQuantity}"  widget-style="width80pc"><display default-value="${inspectQuantity}"/></field>
   		<field name="actualQuantity" title="${uiLabelMap.QuantityActualReceipt}" widget-style="width80pc" separate-column="true"><display default-value="${actualQuantity}"/></field>
   		<field name="lackQuantity" title="${uiLabelMap.ProductLackQuantity}" widget-style="width80pc" separate-column="true" ><display default-value="${lackQuantity}"/></field>
		<field name="quantityRejected" title="${uiLabelMap.QuantityReject}" widget-style="width80pc" separate-column="true" ><display/></field>
    	<field name="rejectionId" title="${uiLabelMap.RejectReason}" widget-style="width80pc" separate-column="true">
    			<display-entity description="${description}" entity-name="RejectionReason" key-field-name="rejectionId"></display-entity>
    	</field>
    	<field name="comment" title="${uiLabelMap.Note}" widget-style="width80pc" separate-column="true"><display default-value="${comment}"/></field>
    </form>
    <form name="FindReceiptReqProposed" type="single" target="findReceiptRequirement" title="" header-row-style="header-row" default-table-style="basic-table">
        <field name="requirementId" title="${uiLabelMap.requirementId}"><text-find/></field>
        <field name="agreementId" title="${uiLabelMap.AgreementId}"><text-find/></field>
        <field name="orderId" title="${uiLabelMap.OrderId}"><text-find/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><date-find/></field>
        <field name="requirementDate" title="${uiLabelMap.ReceiveDate}"><date-find/></field>
        <field name="statusId"><hidden value="REQ_PROPOSED"/></field>
        <field name="noConditionFind"><hidden value="Y"/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-search"/>
        </field>
    </form>
   	<form name="AcceptReceiptRequirements" target="acceptReceiptRequirement" type="multi" list-name="listIt" default-table-style="table-bordered table table-striped table-hover dataTable" use-row-submit="true">
        <actions>
       		<set field="requestParameters.statusId" value="REQ_PROPOSED"></set>
       		<set field="requestParameters.requirementTypeId" value="RECEIVE_ORDER_REQ"></set>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="OrderRequirementDetail"/>
                <field-map field-name="orderBy" value="fromDate DESC"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
            <entity-condition list="containerByOrder" entity-name="OrderAndContainer">
            	<condition-expr field-name="orderId" from-field="orderId"></condition-expr>
            </entity-condition>
            <set field="containerId" value="${containerByOrder[0].containerId}"></set>
            <entity-one entity-name="Container" value-field="cont"><field-map field-name="containerId" from-field="containerId"></field-map></entity-one>
            <set field="containerNumber" value="${cont.containerNumber}"></set>
        </row-actions>
        <field name="requirementId" title="${uiLabelMap.requirementId}"><display/></field>
        <field name="agreementId" title="${uiLabelMap.AgreementId}"><hyperlink target="detailPurchaseAgreement" description="${agreementId}"><parameter param-name="agreementId" from-field="agreementId"></parameter></hyperlink></field>
        <field name="orderId" title="${uiLabelMap.OrderId}"><hidden value="${orderId}"/></field>
        <field name="containerId" title="${uiLabelMap.ContainerId}"><hidden/></field>
        <field name="containerNumber" title="${uiLabelMap.ContNumber}"><display/></field>
        <field name="productStoreId" title="${uiLabelMap.productStore}"><display-entity description="${storeName}" entity-name="ProductStore"/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity description="${description}" entity-name="StatusItem"/></field>
        <field name="requirementDate" title="${uiLabelMap.ReceiveDate}"><display/></field>
        <field name="partyIdTo"><hidden value="IMPORT_SPECIALIST"/></field>
        <field name="sendMessage"><hidden value="ReceiptRequirementAccepted"/></field>
        <field name="action"><hidden value="getListReceiptRequirements"/></field>
        <field name="facilityId" title="${uiLabelMap.facility}" separate-column="true">
        	<drop-down allow-empty="false" no-current-selected-key="${facilityId}">
    			<entity-options description="${facilityName}" entity-name="ProductStoreFacilityByOrder">
    				<entity-constraint name="orderId" operator="equals" value="${orderId}"></entity-constraint>
    			</entity-options>
    		</drop-down>
        </field>
        <field name="contactMechId" title="${uiLabelMap.FacilityAddress}" separate-column="true">
	     	<drop-down allow-empty="false" no-current-selected-key="${contactMechId}">
	     		<list-options list-name="listFacilityContactMechs" description="${address1}" key-name="contactMechId"></list-options>
	     	</drop-down>
        </field>
<!--         <field name="facilityId" title="${uiLabelMap.facility}" use-when="!&quot;REQ_PROPOSED&quot;.equals(statusId)" separate-column="true"><display-entity entity-name="Facility" description="${facilityName}"></display-entity></field> -->
<!--         <field name="contactMechId" title="${uiLabelMap.FacilityAddress}" use-when="!&quot;REQ_PROPOSED&quot;.equals(statusId)" separate-column="true"><display-entity entity-name="PostalAddress" description="${address1}"/></field> -->
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" separate-column="true" use-when="&quot;REQ_PROPOSED&quot;.equals(statusId)"><check all-checked="true"/></field>
        <field name="submitButton" title="${uiLabelMap.Accepted}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
   	</form>
    
    <!-- START EDIT BY HUNGNC -->
    <form name="EditFacilityGeoPoint" type="single" target="updateFacilityGeoPoint" default-map-name="geoPoint"
        default-table-style="basic-table">
        <field name="facilityId"><hidden value="${facilityId}"/></field>
        <field name="geoPointId"><hidden/></field>
        <field name="dataSourceId">
            <drop-down allow-empty="false">
                <entity-options description="${description}" entity-name="DataSource">
                    <entity-constraint name="dataSourceTypeId" value="GEOPOINT_SUPPLIER"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="latitude"><text/></field>
        <field name="longitude"><text/></field>
        <field name="elevation"><text/></field>
        <field name="elevationUomId">
            <drop-down allow-empty="false">
                <entity-options description="${description}" entity-name="Uom" key-field-name="uomId">
                    <entity-constraint name="uomTypeId" value="LENGTH_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="information"><text size="50" maxlength="60"/></field>
        <field name="selectButton" title="${uiLabelMap.CommonSubmit}" widget-style="btn btn-small btn-primary"><submit image-location="icon-ok" button-type="button"/></field>
    </form>
    
    
    
    <form name="FindLocationFacility" target="FindLocationFacility" title="" type="single"
        header-row-style="header-row" default-table-style="table table-striped table-bordered table-hover dataTable">
        <field name="facilityId" ><hidden value="${facilityId}"/></field>
        <field name="locationSeqID" title="${uiLabelMap.ProductLocationSeqId}"><text-find/></field>
        <field name="areaId" title="${uiLabelMap.CommonArea}"><text-find/></field>
        <field name="aisleId" title="${uiLabelMap.ProductAisle}"><text-find/></field>
        <field name="sectionId" title="${uiLabelMap.ProductSection}"><text-find/></field>
        <field name="levelId" title="${uiLabelMap.ProductLevel}"><text-find/></field>
        <field name="positionId" title="${uiLabelMap.ProductPosition}"><text-find/></field>
        <!-- <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit icon-search btn btn-small btn-primary" ><submit button-type="button"/></field> -->
         <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    
    <form name="listFindLocationFacility" list-name="listIt" title="" type="list" paginate-target="FindLocationFacility"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" view-size="20">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="FacilityLocation"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="facilityId" title="${uiLabelMap.facilityId}">
        	<display/>
        </field>
        <field name="locationSeqId" title="${uiLabelMap.ProductLocationSeqId}">
        	<hyperlink target="InventoryItemDetailByFacilityId" also-hidden="false" target-type="plain" description="${locationSeqId}">
        		<parameter param-name="facilityId" value="${facilityId}"/>
        		<parameter param-name="locationSeqId" value="${locationSeqId}"/>		
       		</hyperlink>
        </field>
        <field name="areaId" title="${uiLabelMap.CommonArea}"><display/></field>
        <field name="aisleId" title="${uiLabelMap.ProductAisle}"><display/></field>
        <field name="sectionId" title="${uiLabelMap.ProductSection}"><display/></field>
        <field name="positionId" title="${uiLabelMap.ProductPosition}"><display/></field>
        <!-- <field name="productId" title="${uiLabelMap.ProductProductId}">
        	<display default-value="${fa.productId}"/>
        </field>
        <field name="inventoryItemId" title="${uiLabelMap.InventoryItemId}">
        	<display default-value="${fa.inventoryItemId}"/>
        </field> -->
    </form>

    <form name="InventoryItemDetailByFacilityId" type="list" default-entity-name="InventoryItem"
        odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable" view-size="20">
        <!-- <actions>
    		<entity-condition entity-name="InventoryItem" list="listFacility">
    			<condition-list>
    				<condition-expr field-name="facilityId" operator="equals" from-field="facilityId"/>
    				<condition-expr field-name="locationSeqId" operator="equals" from-field="locationSeqId"/>
    			</condition-list>
    		</entity-condition>
    		<set field="facilityId" from-field="inventoryItem.facilityId"/>
    		<set field="locationSeqId" from-field="inventoryItem.locationSeqId"/>
    	</actions> -->
       	<!-- <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="FacilityLocation"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions> -->
        <!-- <actions>
    		<entity-condition entity-name="InventoryItem" list="listSupplier">
    			<condition-expr field-name="roleTypeId" operator="equals" value="SUPPLIER"/>
    		</entity-condition>
    		<set field="facilityId" from-field="product.productId"/>
    		<set field="quantityUomId" from-field="product.quantityUomId"/>
    	</actions> -->
        <!-- <row-actions>
       		<entity-condition entity-name="Facility" list="listFacility"  >
	        	<condition-expr field-name="facilityId" operator="equals" from-field="facilityId"  />
        	</entity-condition>
        	<entity-one entity-name="InventoryItem" value-field="inventoryItemView">
        		<field-map field-name="facilityId" value="${listFacility[0].facilityId}"/>
        		<field-map field-name="locationSeqId" value="${listFacility[1].locationSeqId}"/>
        	</entity-one>
        </row-actions>
        -->
        <!-- <field name="facilityId" title="${uiLabelMap.FacilityId}" use-when="facility != null"><display/></field>
        <field name="locationSeqId" title="${uiLabelMap.FacilityId}" use-when="facility != null"><display/></field>
        <field name="inventoryItemTypeId" title="${uiLabelMap.FacilityId}" use-when="inventoryItem != null"><display/></field>
        <field name="productId" title="${uiLabelMap.CommonArea}" use-when="inventoryItem != null"><display/></field> -->
        <field name="inventoryItemId" title="inventoryItemId">
        	<display default-value="${listInventoryItem.inventoryItemId}"/>
        </field>
        <field name="inventoryItemTypeId" title="${uiLabelMap.ProductLocationSeqId}">
        	<display default-value="${listInventoryItem.inventoryItemTypeId}"/>
        </field>
        <field name="productId" title="${uiLabelMap.CommonArea}">
        	<display default-value="${listInventoryItem.productId}" />
        </field>
        
    </form>
    
    
   <!--  <form name="EditInventoryItem" type="single" target="UpdateInventoryItemLocation" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <actions>
            <set field="inventoryItemTypeId" from-field="inventoryItem.inventoryItemTypeId"/>
            <set field="productId" from-field="inventoryItem.productId"/>
            <set field="facilityId" from-field="inventoryItem.facilityId"/>
            <set field="locationSeqId" from-field="inventoryItem.locationSeqId"/>
            <set field="statusId" from-field="inventoryItem.statusId"/>
            <entity-one entity-name="FacilityLocation" value-field="facilityLocation">
                <field-map field-name="locationSeqId" from-field="locationSeqId"/>
                <field-map field-name="facilityId" from-field="facilityId"/>
            </entity-one>
        </actions>
        <alt-target use-when="inventoryItemId==null" target="CreateInventoryItem"/>
        <auto-fields-service service-name="updateInventoryItem" map-name="inventoryItem"/>

        ignored fields
        <field name="oldAvailableToPromise"><ignored/></field>
        <field name="oldQuantityOnHand"><ignored/></field>

        custom formatted fields
        <field use-when="inventoryItem!=null" name="inventoryItemId" title="${uiLabelMap.InventoryItemId}"><display/></field>
        <field use-when="inventoryItem==null" name="inventoryItemId" position="1" title="${uiLabelMap.InventoryItemId}"><hidden/></field>
        <field name="inventoryItemTypeId" title="${uiLabelMap.InventoryItemType}">
            <hidden value="NON_SERIAL_INV_ITEM"/>
        </field>
        <field name="productId" required-field="true" title="${uiLabelMap.ProductProductId}" use-when="inventoryItem!=null">
            <display/>
        </field>
        <field name="productId" required-field="true" title="${uiLabelMap.ProductProductId}" use-when="inventoryItem == null">
            <lookup target-form-name="LookupProduct">
            </lookup>
        </field>
        <field name="containerId" title="${uiLabelMap.ContainerId}">
            <lookup target-form-name="LookupContainer">
            </lookup>
        </field>
        <field name="statusId" title="${uiLabelMap.Status}">
            <drop-down allow-empty="true">
                <entity-options entity-name="StatusItem" description="${description}" key-field-name="statusId">
                    <entity-constraint name="statusTypeId" operator="equals" value="INV_NON_SER_STTS"/>
                </entity-options>
                <entity-options entity-name="StatusItem" description="${description}" key-field-name="statusId">
                    <entity-constraint name="statusTypeId" operator="equals" value="INV_SERIALIZED_STTS"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="expireDate" title="${uiLabelMap.ProductExpireDate}" required-field="true">
        	<date-time/>
        </field>
        <field name="quantity" title="${uiLabelMap.Quantity}">
        	<hidden/>
        </field>
        <field name="facilityId" title="${uiLabelMap.facility}" required-field="true">
            <drop-down allow-empty="false">
                <entity-options entity-name="Facility" description="${facilityName}" key-field-name="facilityId">
                    <entity-order-by field-name="facilityName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="unitProduct" title="${uiLabelMap.UnitProduct}" required-field="true">
            <hidden/>
        </field>
        <field name="fixedAssetId" title="${uiLabelMap.FixedAssetId}">
        	<lookup target-form-name="LookupFixedAsset">
            </lookup>
        </field>
        <field name="lotId" title="${uiLabelMap.ProductLotId}">
        	<lookup target-form-name="LookupProductLot">
            </lookup>
        </field>
        <field name="uomId" title="${uiLabelMap.ProductUomId}"><hidden/></field>
        <field name="binNumber" title="${uiLabelMap.ProductBinNumber}">
        	<hidden/>
        </field>
        <field name="locationSeqId" title="${uiLabelMap.ProductFacilityLocation}">
            <lookup target-form-name="LookupFacilityLocation">
                <sub-hyperlink use-when="locationSeqId!=null" target="EditFacilityLocation" link-style="btn btn-mini btn-info">
                <parameter param-name="facilityId"/>
                <parameter param-name="locationSeqId"/>
            </sub-hyperlink>
            </lookup>
        </field>
        <field name="currencyUomId" title="${uiLabelMap.currencyUomId}">
            <drop-down allow-empty="true" no-current-selected-key="${defaultOrganizationPartyCurrencyUomId}">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="partyId">
            <hidden/>
        </field>
        <field name="ownerPartyId" title="${uiLabelMap.Owner}">
            <lookup target-form-name="lookupPartyInfo"/>
        </field>
        <field name="unitCost" title="${uiLabelMap.UnitCost}"><text/></field>

        <field name="accountingQuantityTotal" use-when="inventoryItem!=null">
            <hidden/>
        </field>
        <field name="accountingQuantityTotal" use-when="inventoryItem==null">
            <hidden/>
        </field>
        <field name="serialNumber" use-when="inventoryItem!=null">
            <display/>
        </field>
        <field name="serialNumber" use-when="inventoryItem==null">
            <hidden/>
        </field>
        <field name="QOH" use-when="inventoryItem!=null" title="${uiLabelMap.QOHTotal}">
            <display description="${inventoryItem.quantityOnHandTotal}"/>
        </field>
        <field name="QOH" use-when="inventoryItem==null" title="${uiLabelMap.QOHTotal}">
            <hidden/>
        </field>
		 <field name="ATP" use-when="inventoryItem!=null" title="${uiLabelMap.ATPTotal}">
            <display description="${inventoryItem.availableToPromiseTotal}"/>
        </field>
        <field name="ATP" use-when="inventoryItem==null" title="${uiLabelMap.ATPTotal}">
            <hidden/>
        </field>
        <field use-when="inventoryItem!=null" name="submit" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
        <field use-when="inventoryItem==null" name="submit" title="${uiLabelMap.CommonCreate}" widget-style="btn btn-primary btn-small">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
        <field name="softIdentifier"><hidden/></field>
        <field name="activationNumber"><hidden/></field>
        <field name="serialNumber"><hidden/></field>
        <field name="locationSeqId"><display/></field>
        <field name="activationValidThru"><hidden/></field>
        <field name="fixedAssetId"><hidden/></field>
        <field name="comments"><hidden/></field>
        <sort-order>
	        <field-group style="no-widget-header span6 no-left-margin">
        	 	<sort-field name="productId"/>
        	 	<sort-field name="inventoryItemId"/>
        	 	<sort-field name="QOH"/>
           		<sort-field name="ATP"/>
	            <sort-field name="facilityId" position="1"/>
	            <sort-field name="ownerPartyId" position="2"/>
	            <sort-field name="statusId" position="3"/>
	            <sort-field name="expireDate" position="4"/>
	        </field-group>
           <field-group style="span6 no-widget-header">
           		<sort-field name="containerId" position="1"/>
	            <sort-field name="binNumber" position="2"/>
	            <sort-field name="lotId" position="3"/>
	            <sort-field name="unitCost" position="4"/>
	            <sort-field name="currencyUomId" position="5"/>
	            <sort-field name="datetimeReceived" position="6"/>
	            <sort-field name="datetimeManufactured" position="7"/>
	            <sort-field name="locationSeqId" position="8"/>
	            <sort-field name="unitProduct" position="9"/>
           </field-group>
           <field-group style="no-widget-header span12 no-left-margin align-center">
           	<sort-field name="submit"/>
           </field-group>
        </sort-order>
    </form> -->
    
    <form name="UpdateInventoryItemLocation" type="single" target="addInventoryItemLocation" title=""
        default-table-style="basic-table">
        <field name="inventoryItemId"><text/></field>
        <field name="facilityId"><text/></field>
        <field name="locationSeqId"><text/></field>
        <field name="quantity"><text/></field>
        <field name="uomId" title="${uiLabelMap.UomId}" required-field="true">
            <drop-down allow-empty="false">
                <entity-options entity-name="Uom" description="${description}" key-field-name="uomId">
                	<entity-constraint name="uomTypeId" operator="equals" value="PRODUCT_PACKING"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-primary btn-small"><submit button-type="button" image-location="icon-ok"/></field>
    </form>
    
    <form name="ListInventoryItemLocation" type="multi" target="updateInventoryItemLocationByInventoryItemId" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="table table-hover table-striped table-bordered dataTable" separate-columns="true" list-name="inventoryItemLocation">
        <!-- <auto-fields-entity entity-name="InventoryItemLocation" default-field-type="display"/> -->
        <!-- <actions>
            <set field="inventoryItemId" from-field="inventoryItemLocation.inventoryItemId"/>
            <set field="facilityId" from-field="inventoryItemLocation.facilityId}"/>
            <set field="locationSeqId" from-field="inventoryItemLocation.locationSeqId"/>
        </actions> -->
        <field name="inventoryItemId" title="${uiLabelMap.InventoryItemId}">
        	<text/>
		</field>
		<field name="facilityId" title=""><text/></field>
		<field name="locationSeqId" title=""><text/></field>
		<field name="quantity"><text/></field>
		<field name="uomId" title="${uiLabelMap.UomId}" required-field="true">
            <drop-down allow-empty="false">
                <entity-options entity-name="Uom" description="${description}" key-field-name="uomId">
                	<entity-constraint name="uomTypeId" operator="equals" value="PRODUCT_PACKING"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check all-checked="true" /></field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-primary btn-small"><submit button-type="button" image-location="icon-ok"/></field>
    </form>
    
    <form name="lookupInventoryItemLocation" target="LookupInventoryItemLocation"
		title="" type="single" header-row-style="header-row"
		default-table-style="table table-striped table-bordered table-hover dataTable">
		<auto-fields-entity entity-name="InventoryItemLocation"
			default-field-type="find" />
		<field name="facilityId">
			<drop-down allow-empty="false">
				<entity-options entity-name="Facility" description="${facilityName}"
					key-field-name="facilityId">
					<entity-order-by field-name="facilityName" />
				</entity-options>
			</drop-down>
		</field>
		<!-- <field name="locationTypeEnumId">
			<drop-down allow-empty="false">
				<entity-options entity-name="Enumeration"
					description="${description}" key-field-name="enumId">
					<entity-constraint name="enumTypeId" value="FACLOC_TYPE" />
					<entity-order-by field-name="sequenceId" />
				</entity-options>
			</drop-down>
		</field> -->
		<field name="noConditionFind">
			<hidden value="Y" /><!-- if this isn't there then with all fields 
				empty no query will be done -->
		</field>
		<field name="submitButton" title="${uiLabelMap.CommonFind}"
			widget-style="btn btn-primary btn-small">
			<submit button-type="button" image-location="icon-ok"/>
		</field>
	</form>
	
	
	<form name="listLookupInventoryItemLocation" list-name="listIt" title=""
		type="list" odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable"
		paginate-target="LookupInventoryItemLocation">
		<actions>
			<service service-name="performFind" result-map="result"
				result-map-list="listIt">
				<field-map field-name="inputFields" from-field="parameters" />
				<field-map field-name="entityName" value="InventoryItemLocation" />
				<field-map field-name="viewIndex" from-field="viewIndex" />
				<field-map field-name="viewSize" from-field="viewSize" />
			</service>
		</actions>
		<auto-fields-entity entity-name="InventoryItemLocation"
			default-field-type="display" />
		<field name="locationSeqId" title=" " widget-style="buttontext">
			<hyperlink also-hidden="false" target-type="plain"
				description="${locationSeqId}" target="javascript:set_value('${locationSeqId}')" />
		</field>
		<field name="facilityId">
			<hidden />
		</field>
	</form>
	
	<form name="ListProductInventoryItemLocation" list-name="locationList"
		title="" type="list" paginate-target="ListProductInventoryItemLocation"
		odd-row-style="alternate-row" default-table-style="basic-table hover-bar"
		view-size="20">
		<field name="InventoryItemId">
			<display />
		</field>
		<field name="LocationSeqId" title="" widget-style="buttontext">
			<hyperlink also-hidden="false" target-type="plain"
				description="${LocationSeqId}" target="javascript:set_value('${LocationSeqId}')" />
		</field>
		<field name="Quantity" title="${uiLabelMap.Quantity}">
			<display />
		</field>
	</form>
	   
	<form name="AddInventoryItemForFacility" type="single" target="addInventoryItemForFacility" title=""
        default-table-style="basic-table">
		<field name="productId" title="${uiLabelMap.ProductProductId}" title-style="asterisk" required-field="true">
			<lookup target-form-name="LookupInventoryItemsNotLocation" target-parameter="facilityId">
            </lookup>
		</field>
		<!-- <field name="productId"><hidden value="${facilityId}" /></field> -->
        <field name="facilityId"><hidden value="${facilityId}" /></field>
        <field name="locationSeqId"><hidden value="${locationSeqId}" /></field>
        <field name="locationSeqIdCurrent" title="${uiLabelMap.FacilitylocationSeqIdCurrent}">
        	<lookup target-form-name="LookupInventoryItemLocation" target-parameter="facilityId, productId">
            </lookup>
        </field>
        <field name="quantity" title-style="asterisk"><text/></field>
        <field name="uomId" title="${uiLabelMap.QuantityUomId}" required-field="true">
            <drop-down allow-empty="false">
                <entity-options entity-name="Uom" description="${description}" key-field-name="uomId">
                	<entity-constraint name="uomTypeId" operator="equals" value="PRODUCT_PACKING"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        
        <field name="submitButton" title="${uiLabelMap.CommonAdd}" widget-style="btn btn-primary btn-small"><submit button-type="button" image-location="icon-ok"  /></field>
        
	</form>
	   
    
    <!-- END EDIT BY HUNGNC -->
    <form name="ReceiptStatus" type="list" list-name="listStatus" odd-row-style="alternate-row" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"></display-entity></field>
    	<field name="statusDatetime" title="${uiLabelMap.StatusDatetime}"><display/></field>
    	<field name="statusUserLogin" title="${uiLabelMap.StatusUserLogin}"><display/></field>
    	<field name="changeReason" title="${uiLabelMap.ChangeReason}"><display/></field>
    </form>
    
    <form name="OutgoingTransferRequirements" type="multi" list-name="listIt" target="approvedTransferRequirement" use-row-submit="true" paginate-target="ApprovedTransferRequirement" default-table-style="table-bordered table table-striped table-hover dataTable">
        <actions>
        	<set field="requestParameters.requirementTypeId" value="TRANSFER_REQ"/>
        	<set field="requestParameters.facilityIdFrom" from-field="facilityId"/>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="RequirementAndFacility"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
            <entity-condition entity-name="RequirementRole" list="listReqOwner">
				<condition-list>
					<condition-expr field-name="requirementId" from-field="requirementId"/>
					<condition-expr field-name="roleTypeId" value="OWNER"/>
				</condition-list>
				<order-by field-name="-fromDate"/>
			</entity-condition> 
			<entity-one entity-name="PartyNameView" value-field="party">
				<field-map field-name="partyId" value="${listReqOwner[0].partyId}"/>
			</entity-one>
        </row-actions>
        <field name="requirementId" widget-style="open-sans" title="${uiLabelMap.requirementId}">
            <hyperlink description="${requirementId} [${uiLabelMap.CommonDetail}]" target="editTransferRequirement">
                <parameter param-name="requirementId" from-field="requirementId"/>
                <parameter param-name="facilityId" from-field="facilityId"/>
            </hyperlink>
        </field>
        <field name="partyId" title="${uiLabelMap.Requestor}"><display default-value="${party.firstName} ${party.middleName} ${party.lastName} ${party.groupName} [${listReqOwner[0].partyId}]"/></field>
		<field name="facilityIdFrom" title="${uiLabelMap.FacilityFrom}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
		</field>
        <field name="facilityIdTo" title="${uiLabelMap.FacilityTo}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
        </field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;REQ_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;REQ_ORDERED&quot;)"><check/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary" action="">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    
    <form name="IncomingTransferRequirements" type="multi" list-name="listIt" target="approvedTransferRequirement" use-row-submit="true" paginate-target="ApprovedTransferRequirement" default-table-style="table-bordered table table-striped table-hover dataTable">
        <actions>
        	<set field="requestParameters.requirementTypeId" value="TRANSFER_REQ"/>
        	<set field="requestParameters.facilityIdTo" from-field="facilityId"/>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="RequirementAndFacility"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
                <field-map field-name="noConditionFind" value="Y"/>
            </service>
        </actions>
        <row-actions>
            <entity-condition entity-name="RequirementRole" list="listReqOwner">
				<condition-list>
					<condition-expr field-name="requirementId" from-field="requirementId"/>
					<condition-expr field-name="roleTypeId" value="OWNER"/>
				</condition-list>
				<order-by field-name="-fromDate"/>
			</entity-condition> 
			<entity-one entity-name="PartyNameView" value-field="party">
				<field-map field-name="partyId" value="${listReqOwner[0].partyId}"/>
			</entity-one>
        </row-actions>
        <field name="requirementId" widget-style="open-sans" title="${uiLabelMap.requirementId}">
            <hyperlink description="${requirementId} [${uiLabelMap.CommonDetail}]" target="editTransferRequirement">
                <parameter param-name="requirementId" from-field="requirementId"/>
                <parameter param-name="facilityId" from-field="facilityId"/>
            </hyperlink>
        </field>
        <field name="partyId" title="${uiLabelMap.Requestor}"><display default-value="${party.firstName} ${party.middleName} ${party.lastName} ${party.groupName} [${listReqOwner[0].partyId}]"/></field>
		<field name="facilityIdFrom" title="${uiLabelMap.FacilityFrom}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
		</field>
        <field name="facilityIdTo" title="${uiLabelMap.FacilityTo}">
			<display-entity entity-name="Facility" description="${facilityName}" key-field-name="facilityId"></display-entity>
        </field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><display/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><display/></field>
        <field name="statusId" title="${uiLabelMap.Status}"><display-entity entity-name="StatusItem" description="${description}"/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" use-when="!statusId.equals(&quot;REQ_APPROVED&quot;) &amp;&amp; !statusId.equals(&quot;REQ_ORDERED&quot;)"><check/></field>
        <field name="submitButton" title="${uiLabelMap.Approved}" widget-style="btn btn-small btn-primary" action="">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
    </form>
    <form name="ListInventoryItemsByProductView" type="list" list-name="listInventoryItemsByProduct" view-size="10" default-table-style="table table-striped dataTable table-hover table-bordered">
    	<field name="inventoryItemId" title="${uiLabelMap.InventoryItemId}">
			<display/>
		</field>
		<field name="internalName" title="${uiLabelMap.ProductProductName}"><display/> </field>
		<field name="inventoryItemTypeId" title="${uiLabelMap.InventoryItemType}"><hidden/></field>
		<field name="datetimeManufactured" title="${uiLabelMap.DatetimeManufactured}"><display/></field>
		<field name="expireDate" title="${uiLabelMap.ProductExpireDate}"><display/></field>
		<field name="serialNumber"><display/></field>
    	<field name="unitCost" title="${uiLabelMap.UnitCost}"><display type="currency" currency="${currencyUomId}"/></field>
    	<field name="containerId" title="${uiLabelMap.Container}"><display/></field>
    	<field name="binNumber" title="${uiLabelMap.BinNumber}"><display/></field>
    	<field name="lotId" title="${uiLabelMap.ProductLotId}"><display/></field>
    	<field name="datetimeReceived" title="${uiLabelMap.DatetimeReceived}"><display/></field>
    	<field name="quantityOnHandTotal" title="${uiLabelMap.FormFieldTitle_quantityOnHandTotal}"><display/></field>
    	<field name="availableToPromiseTotal" title="${uiLabelMap.FormFieldTitle_availableToPromiseTotal}"><display/></field>
    	
    </form>
    <form name="EditTransferRequirement" type="single" target="updateRequirement" title="" default-map-name="requirement"
        header-row-style="header-row" default-table-style="basic-table">
        <actions>
        	<set field="requirementType" from-field="requirementTypeId"/>
        	<entity-one entity-name="RequirementFacility" value-field="requirementFacility">
        		<field-map field-name="requirementId" from-field="requirementId"/>
        	</entity-one>
        	<entity-condition entity-name="Facility" list="listFacilities">
        	</entity-condition>
        	<entity-condition entity-name="ProductStore" list="listProductStores"></entity-condition>
        	<entity-one entity-name="PartyNameView" value-field="requestor">
        		<field-map field-name="partyId" value="${listRequestor[0].partyId}"/>
        	</entity-one>
        	<set field="originContactMechId" from-field="RequirementFacility.originContactMechId"/>
        </actions>
        <alt-target use-when="requirement==null" target="createRequirement"/>
        <auto-fields-service service-name="updateRequirement" default-field-type="edit"/>
        <field name="contactMechId"><hidden/></field>
        <field id-name="facilityIdFrom" name="facilityIdFrom"><hidden value="${requirementFacility.facilityIdFrom}"/></field>
        <field id-name="facilityIdTo" name="facilityIdTo"><hidden value="${requirementFacility.facilityIdTo}"/></field>
        <field id-name="requirementId" name="requirementId" title="${uiLabelMap.requirementId}" use-when="requirement != null"><display/></field>
        <field name="requirementId" title="${uiLabelMap.requirementId}" use-when="requirement == null" id-name="requirementId"><hidden/></field>
        <field id-name="requirementTypeId" name="requirementTypeId" title="${uiLabelMap.RequirementType}">
            <hidden/>
        </field>
        <field name="statusId" title="${uiLabelMap.Status}" use-when="requirement != null">
            <drop-down allow-empty="false" no-current-selected-key="${requirement.statusId}">
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" value="REQUIREMENT_STATUS"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="statusId" title="${uiLabelMap.Status}" use-when="requirement == null"><hidden value="REQ_CREATED"/></field>
        <field name="description"><textarea/></field>
        <field id-name="productStoreId" name="productStoreId" title="${uiLabelMap.ProductStoreFrom}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement != null">
            <drop-down allow-empty="false" no-current-selected-key="${requirementFacility.productStoreIdFrom}">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field name="productStoreId" title="${uiLabelMap.ProductStoreFrom}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null">
            <drop-down allow-empty="false">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field id-name="facilityId" name="facilityId" title="${uiLabelMap.FacilityFrom}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null &amp;&amp; requirementFacility == null">
            <drop-down allow-empty="false">
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
        <field id-name="facilityId" name="facilityId" title="${uiLabelMap.FacilityFrom}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement != null &amp;&amp; requirementFacility == null">
            <drop-down allow-empty="true">
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
        <field id-name="facilityId" name="facilityId" title="${uiLabelMap.FacilityFrom}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirementFacility != null">
            <drop-down allow-empty="false" no-current-selected-key="${requirementFacility.facilityIdFrom}">
                <list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
            </drop-down>
        </field>
        <field id-name="originContactMechId" name="originContactMechId" title="${uiLabelMap.OriginContactMech}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirementFacility != null">
        	<drop-down no-current-selected-key="${requirementFacility.originContactMechId}">
        		<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
        	</drop-down>
        </field>
        <field id-name="originContactMechId" name="originContactMechId" title="${uiLabelMap.OriginContactMech}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirementFacility == null">
        	<drop-down>
        		<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
        	</drop-down>
        </field>
        <field id-name="productStoreIdTo" name="productStoreIdTo" title="${uiLabelMap.ProductStoreTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirementFacility != null">
            <drop-down allow-empty="false" no-current-selected-key="${requirementFacility.productStoreIdTo}">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field id-name="productStoreIdTo" name="productStoreIdTo" title="${uiLabelMap.ProductStoreTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null &amp;&amp; requirementFacility == null">
            <drop-down allow-empty="false">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field id-name="productStoreIdTo" name="productStoreIdTo" title="${uiLabelMap.ProductStoreTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement != null &amp;&amp; requirementFacility == null">
            <drop-down allow-empty="true">
                <list-options key-name="productStoreId" list-name="listProductStores" description="${storeName}"/>
            </drop-down>
        </field>
        <field id-name="facilityTo" name="facilityTo" title="${uiLabelMap.FacilityTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirementFacility != null" required-field="true">
        	<drop-down no-current-selected-key="${requirementFacility.facilityIdTo}">
        		<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
        	</drop-down>
        </field>
        <field id-name="facilityTo" name="facilityTo" title="${uiLabelMap.FacilityTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement == null &amp;&amp; requirementFacility == null" required-field="true">
        	<drop-down>
        		<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
        	</drop-down>
        </field>
        <field id-name="facilityTo" name="facilityTo" title="${uiLabelMap.FacilityTo}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;) &amp;&amp; requirement != null &amp;&amp; requirementFacility == null" required-field="true">
        	<drop-down allow-empty="true">
        		<list-options key-name="facilityId" list-name="listFacilities" description="${facilityName}"/>
        	</drop-down>
        </field>
        <field id-name="destContactMechId" name="destContactMechId" title="${uiLabelMap.DestinationContactMech}" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;)">
        	<drop-down no-current-selected-key="">
        		<list-options key-name="contactMechId" list-name="listFacilityContactMechs" description="${address1}"/>
        	</drop-down>
        </field>
        <field id-name="curDestContactMechId" name="curDestContactMechId" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;)"><hidden value="${requirementFacility.destContactMechId}"/></field>
        <field id-name="curOriginContactMechId" name="curOriginContactMechId" use-when="requirementType.equals(&quot;TRANSFER_REQ&quot;)"><hidden value="${requirementFacility.originContactMechId}"/></field>
        <field name="requirementStartDate" title="${uiLabelMap.RequirementStartDate}"><date-time/></field>
        <field name="requiredByDate" title="${uiLabelMap.RequiredByDate}"><date-time default-value="${groovy: org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/></field>
        <field name="requestor" title="${uiLabelMap.Requestor}" use-when="requirement == null" required-field="true">
        	<lookup target-form-name="lookupPartyInfo"></lookup>
        </field>
        <field name="requestor" use-when="requirement != null"><hidden value="${listRequestor[0].partyId}"/></field>
        <field name="requestorDisplay" title="${uiLabelMap.Requestor}" use-when="requirement != null">
        	<display default-value="${requestor.firstName} ${requestor.middleName} ${requestor.lastName} ${requestor.groupName} [${listRequestor[0].partyId}]"/>
        </field>
        <field name="requestorDisplay" title="${uiLabelMap.Requestor}" use-when="requirement == null">
        	<hidden/>
        </field>
        <field name="useCase"><hidden/></field>
        <field name="deliverableId"><hidden/></field>
		<field name="quantity"><hidden/></field>
		<field name="uomId"><hidden/></field>
		<field name="fixedAssetId"><hidden/></field>
		<field name="currencyUomId">
			<drop-down no-current-selected-key="VND">
   				<entity-options description="${abbreviation}" entity-name="Uom" key-field-name="uomId">
   					<entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
  				</entity-options>
			</drop-down>
		</field>
		<field name="productId"><hidden/></field>
		<!-- delivery type when create delivery -->
		<field name="deliveryTypeId"><hidden value="DELIVERY_TRANSFER"/></field>
		<field name="submitButton" title="${uiLabelMap.ProductAddProduct}" widget-style="btn btn-small btn-primary center" use-when="requirement == null">
            <submit button-type="button" image-location="icon-arrow-right icon-on-right"/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="btn btn-small btn-primary center" use-when="requirement != null">
            <submit button-type="button" image-location="icon-ok"/>
        </field>
        <sort-order>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="requirementId"/>
        		<sort-field name="requestorDisplay"/>
        		<sort-field name="productStoreId"/>
        		<sort-field name="facilityId"/>
        		<sort-field name="originContactMechId"/>
        		<sort-field name="productStoreIdTo"/>
        		<sort-field name="facilityTo"/>
        		<sort-field name="destContactMechId"/>
        	</field-group>
        	<field-group style="span6 no-widget-header end-group-group">
        		<sort-field name="requiredByDate"/>
        		<sort-field name="requirementStartDate"/>
        		<sort-field name="estimatedBudget"/>
        		<sort-field name="currencyUomId"/>
        		<sort-field name="reason"/>
        		<sort-field name="statusId"/>
        		<sort-field name="description"/>
        	</field-group>
        	<field-group style="no-left-margin no-widget-header span6 begin-group-group">
        		<sort-field name="submitButtonUpdate" position="1"/>
        	</field-group>
        </sort-order>
    </form>
    
    <form name="ListTransferDelivery" type="multi" target="" list-name="listTransferDelivery" default-table-style="table table-striped table-bordered table-hover dataTable">
    	<field name="deliveryId" title="${uiLabelMap.DeliveryTransferId}">
    		<hyperlink target="EditDelivery" description="${deliveryId}">
    			<parameter param-name="deliveryId" from-field="deliveryId"/>
    		</hyperlink>
    	</field>
    	<field name="no" title="${uiLabelMap.noNumber}"><display/></field>
       	<field name="originFacilityId" title="${uiLabelMap.FacilityFrom}"><display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName}"></display-entity></field>
       	<field name="originContactMechId" title="${uiLabelMap.OriginContactMech}">
    		<display-entity entity-name="PostalAddress" description="${address1}" key-field-name="contactMechId"> 
   			</display-entity>
   		</field>
   		<field name="destFacilityId" title="${uiLabelMap.FacilityTo}"><display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName}"></display-entity></field>
   		<field name="destContactMechId" title="${uiLabelMap.DestinationContactMech}">
    		<display-entity entity-name="PostalAddress" description="${address1}" key-field-name="contactMechId"> 
   			</display-entity>
   		</field>
   		<field name="partyIdFrom" title="${uiLabelMap.StorekeeperDelivery}">
    		<display-entity entity-name="PartyNameView" key-field-name="partyId" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}">
            </display-entity>
       	</field>
       	<field name="partyIdTo" title="${uiLabelMap.StorekeeperReceive}">
    		<display-entity entity-name="PartyNameView" key-field-name="partyId" also-hidden="true" description="${firstName} ${middleName} ${lastName} ${groupName}">
            </display-entity>
       	</field>
    	<field name="createDate" title="${uiLabelMap.createDate}"><display/></field>
    	<field name="deliveryDate" title="${uiLabelMap.TransferDate}"><display/></field>
    	<field name="statusId" title="${uiLabelMap.Status}">
    		<display-entity entity-name="StatusItem" description="${description}" key-field-name="statusId"></display-entity>
    	</field>
    	<field name="Detail" title="${uiLabelMap.CommonDetail}">
    		<hyperlink target="getDetailTransferDelivery" description="${uiLabelMap.CommonDetail}">
                <parameter param-name="deliveryId" from-field="deliveryId"/>
    		</hyperlink>
    	</field>
    	<field name="_rowSubmit" title="${uiLabelMap.CommonSelect}" ><check all-checked="true" /></field>
        <field name="deliveredButton" title="${uiLabelMap.Delivered}" widget-style="btn btn-small btn-primary">
            <submit button-type="button" image-location="icon-ok"/>
        </field>	
    </form>
</forms>