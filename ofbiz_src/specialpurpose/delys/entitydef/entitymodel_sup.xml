<?xml version="1.0" encoding="UTF-8"?>
<entitymodel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/entitymodel.xsd">
	<!-- ========================================================= -->
	<!-- ======================== Defaults ======================= -->
	<!-- ========================================================= -->
	<title>Entity of Delys Component</title>
	<description>None</description>
	<copyright></copyright>
	<version></version>
	
	<view-entity entity-name="FindSalesmanOfSup" package-name="org.ofbiz.delys">
		<member-entity entity-alias="PR" entity-name="PartyRole"></member-entity>
		
		<member-entity entity-alias="P1" entity-name="Party"></member-entity>
		<member-entity entity-alias="P2" entity-name="Party"></member-entity>
		<member-entity entity-alias="P3" entity-name="Party"></member-entity>
		<member-entity entity-alias="P4" entity-name="Party"></member-entity>
		
		<member-entity entity-alias="PS1" entity-name="PartyRelationship"></member-entity>
		<member-entity entity-alias="PS2" entity-name="PartyRelationship"></member-entity>
		<member-entity entity-alias="PS3" entity-name="PartyRelationship"></member-entity>
		
		<member-entity entity-alias="PN" entity-name="Person"></member-entity>
		
		<alias name="PartyId" entity-alias="P4" field="partyId"></alias>
		<alias name="FirstName" entity-alias="PN" field="firstName"></alias>
		<alias name="MiddleName" entity-alias="PN" field="middleName"></alias>
		<alias name="LastName" entity-alias="PN" field="lastName"></alias>
		<alias name="BirthDate" entity-alias="PN" field="birthDate"></alias>
		<alias name="Role" entity-alias="PS3" field="partyIdTo"></alias>
		<!-- <alias name="RoleTypeId" entity-alias="PR" field="roleTypeId"></alias>
		<alias name="PartyIdFrom" entity-alias="PS3" field="partyIdFrom"></alias> -->
		
		
		<view-link rel-entity-alias="PR" entity-alias="P1">
			<key-map rel-field-name="partyId" field-name="partyId"/>
		</view-link>
		<view-link rel-entity-alias="PS1" entity-alias="P1">
			<key-map field-name="partyId" rel-field-name="partyIdFrom"/>
		</view-link>
		
		<entity-condition>
			<condition-list>
				<condition-expr field-name="roleTypeId" 
					entity-alias="PR" operator="equals" value="DELYS_SALESSUP_GT" />
				<condition-expr field-name="partyId"
					entity-alias="P1" rel-entity-alias="PR" rel-field-name="partyId" operator="equals" />
				<condition-expr field-name="partyIdFrom"
					entity-alias="PS1" rel-entity-alias="P1" rel-field-name="partyId" operator="equals"/>
				<condition-expr field-name="roleTypeIdFrom"
					entity-alias="PS1" operator="equals" value="MANAGER"/>	
				<condition-expr field-name="roleTypeIdTo"
					entity-alias="PS1" operator="equals" value="INTERNAL_ORGANIZATIO"/>
				<condition-expr field-name="partyId"
					entity-alias="P2" rel-entity-alias="PR" rel-field-name="partyId" operator="equals" />
				<condition-expr field-name="partyIdFrom"
					entity-alias="PS2" rel-entity-alias="PS1" rel-field-name="partyIdTo" operator="equals"/>
				<condition-expr field-name="roleTypeIdFrom"
					entity-alias="PS2" operator="equals" value="DELYS_SALESSUP_GT"/>	
				<condition-expr field-name="roleTypeIdTo"
					entity-alias="PS2" operator="equals" value="DELYS_ROUTE"/>
				<condition-expr field-name="partyId"
					entity-alias="P3" rel-entity-alias="PR" rel-field-name="partyId" operator="equals" />
				<condition-expr field-name="partyIdFrom"
					entity-alias="PS3" rel-entity-alias="PS2" rel-field-name="partyIdTo" operator="equals"/>
				<condition-expr field-name="roleTypeIdFrom"
					entity-alias="PS3" operator="equals" value="DELYS_ROUTE"/>	
				<condition-expr field-name="roleTypeIdTo"
					entity-alias="PS3" operator="equals" value="DELYS_SALESMAN_GT"/>

				<condition-expr field-name="partyId"
					entity-alias="P4" rel-entity-alias="PS3" rel-field-name="partyIdTo" operator="equals" />	
				<condition-expr field-name="partyId"
					entity-alias="PN" rel-entity-alias="P4" rel-field-name="partyId" operator="equals" />	
			<!-- 	<condition-expr field-name="roleTypeIdFrom"
					entity-alias="PS" operator="equals" value="DELYS_SALESSUP_GT"/>	
				<condition-expr field-name="roleTypeIdTo"
					entity-alias="PS" operator="equals" value="DELYS_ROUTE"/> -->			
			</condition-list>
		</entity-condition>
	</view-entity>	
	
	
	<view-entity entity-name="FindRouteBySup" package-name="org.ofbiz.delys">
		<member-entity entity-alias="PR" entity-name="PartyRole"></member-entity>
		
		<member-entity entity-alias="P1" entity-name="Party"></member-entity>
		<member-entity entity-alias="P2" entity-name="Party"></member-entity>
		
		<member-entity entity-alias="PS1" entity-name="PartyRelationship"></member-entity>
		<member-entity entity-alias="PS2" entity-name="PartyRelationship"></member-entity>
		
		<alias name="PartyId" entity-alias="P2" field="partyId"></alias>
		<alias name="PartyIdTo" entity-alias="PS2" field="partyIdTo"></alias>

		
		<view-link rel-entity-alias="PR" entity-alias="P1">
			<key-map rel-field-name="partyId" field-name="partyId"/>
		</view-link>
		<view-link rel-entity-alias="PS1" entity-alias="P1">
			<key-map field-name="partyId" rel-field-name="partyIdFrom"/>
		</view-link>
		
		<entity-condition>
			<condition-list>
				<condition-expr field-name="roleTypeId" 
					entity-alias="PR" operator="equals" value="DELYS_SALESSUP_GT" />
				<condition-expr field-name="partyId"
					entity-alias="P1" rel-entity-alias="PR" rel-field-name="partyId" operator="equals" />
				<condition-expr field-name="partyIdFrom"
					entity-alias="PS1" rel-entity-alias="P1" rel-field-name="partyId" operator="equals"/>
				<condition-expr field-name="roleTypeIdFrom"
					entity-alias="PS1" operator="equals" value="MANAGER"/>	
				<condition-expr field-name="roleTypeIdTo"
					entity-alias="PS1" operator="equals" value="INTERNAL_ORGANIZATIO"/>
				
				<condition-expr field-name="partyId"
					entity-alias="P2" rel-entity-alias="PR" rel-field-name="partyId" operator="equals" />
				<condition-expr field-name="partyIdFrom"
					entity-alias="PS2" rel-entity-alias="PS1" rel-field-name="partyIdTo" operator="equals"/>
				<condition-expr field-name="roleTypeIdFrom"
					entity-alias="PS2" operator="equals" value="DELYS_SALESSUP_GT"/>	
				<condition-expr field-name="roleTypeIdTo"
					entity-alias="PS2" operator="equals" value="DELYS_ROUTE"/>
					
			</condition-list>
		</entity-condition>
	</view-entity>
	
	
	
	
	<view-entity entity-name="FindCustomerInfoByRoute" package-name="org.ofbiz.delys">
	
		<member-entity entity-alias="PR" entity-name="PartyRelationship"></member-entity>
		<member-entity entity-alias="PG" entity-name="PartyGroup"></member-entity>
		
		<alias name="routeId" entity-alias="PR" field="partyIdFrom"></alias>
		<alias name="customerId" entity-alias="PG" field="partyId"></alias>
		<alias name="customerName" entity-alias="PG" field="groupName"></alias>
		
		
		<!-- <view-link rel-entity-alias="PR" entity-alias="P1">
			<key-map rel-field-name="partyId" field-name="partyId"/>
		</view-link>
		<view-link rel-entity-alias="PS1" entity-alias="P1">
			<key-map field-name="partyId" rel-field-name="partyIdFrom"/>
		</view-link> -->
		<view-link rel-entity-alias="PG" entity-alias="PR">
			<key-map field-name="partyIdTo" rel-field-name="partyId"/>
		</view-link>
		
		<entity-condition>
			<condition-list>
				<condition-expr field-name="roleTypeIdFrom" entity-alias="PR" value="DELYS_ROUTE"/>
				<condition-expr field-name="roleTypeIdTo" entity-alias="PR" value="DELYS_CUSTOMER_GT"/>
			</condition-list>
		</entity-condition>
	</view-entity>
	
	<view-entity entity-name="ProductPromoRegisterAndCustomerDetail" package-name="org.ofbiz.delys">
	    <member-entity entity-alias="PPR" entity-name="ProductPromoRegister"></member-entity>
	    <member-entity entity-alias="PRD" entity-name="PartyRoleAndPartyDetail"></member-entity>
	    <alias-all entity-alias="PPR"></alias-all>
	    <alias name="groupName" entity-alias="PRD"></alias>
	    <view-link rel-entity-alias="PPR" entity-alias="PRD">
			<key-map field-name="partyId"/>	        
	    </view-link>
	</view-entity>
	
 	<view-entity entity-name="PartyRelAndCK" package-name="org.ofbiz.delys" title="View Entity">
        <member-entity entity-alias="PRSP1" entity-name="PartyRelationship"/>
        <member-entity entity-alias="PRSP2" entity-name="PartyRelationship"/>
        <member-entity entity-alias="PRSP3" entity-name="PartyRelationship"/>
        <member-entity entity-alias="PRSP4" entity-name="PartyRelationship"/>
        <member-entity entity-alias="PERSON" entity-name="Person"/>
        <member-entity entity-alias="PTYGRP" entity-name="PartyGroup"/>
        <member-entity entity-alias="PTY" entity-name="Party"/>
        <alias-all entity-alias="PTY"/>
        <alias-all entity-alias="PERSON">
            <exclude field="comments"/>
        </alias-all>
        <alias-all entity-alias="PTYGRP">
            <exclude field="comments"/>
        </alias-all>
        <alias name="fullName">
        	<complex-alias operator="||' '||">
        		<complex-alias-field field="lastName" entity-alias="PERSON" default-value="''"/>
        		<complex-alias-field field="middleName" entity-alias="PERSON" default-value="''"/>
        		<complex-alias-field field="firstName" entity-alias="PERSON" default-value="''"/>
        		<complex-alias-field field="groupName" entity-alias="PTYGRP" default-value="''"/>
        	</complex-alias>
        </alias>
        <alias name="partyRelationshipTypeId" entity-alias="PRSP1"/>
        <alias name="partyIdFrom" entity-alias="PRSP1"/>
        <alias name="partyIdFrom2" field="partyIdFrom" entity-alias="PRSP2"/>
        <alias name="partyIdFrom3" field="partyIdFrom" entity-alias="PRSP3"/>
        <alias name="partyIdFrom4" field="partyIdFrom" entity-alias="PRSP4"/>
        <alias name="partyIdTo" entity-alias="PRSP1"/>
        <alias name="partyIdTo2" field="partyIdTo" entity-alias="PRSP2"/>
        <alias name="partyIdTo3" field="partyIdTo" entity-alias="PRSP3"/>
        <alias name="partyIdTo4" field="partyIdTo" entity-alias="PRSP4"/>
        <alias name="fromDate" entity-alias="PRSP1"/>
        <alias name="thruDate" entity-alias="PRSP1"/>
        <alias name="roleTypeIdFrom" entity-alias="PRSP1"/>
        <alias name="roleTypeIdTo" entity-alias="PRSP1"/>
        <alias name="relStatusId" field="statusId" entity-alias="PRSP1"/>
        <view-link entity-alias="PRSP1" rel-entity-alias="PTY">
        	<key-map field-name="partyIdTo" rel-field-name="partyId"/>
        </view-link>
        <view-link entity-alias="PTY" rel-entity-alias="PERSON" rel-optional="true">
            <key-map field-name="partyId"/>
        </view-link>
        <view-link entity-alias="PTY" rel-entity-alias="PTYGRP" rel-optional="true">
            <key-map field-name="partyId"/>
        </view-link>
        
         <entity-condition >
			<condition-list combine="and">
				<condition-list>
					<condition-expr field-name="partyIdTo" entity-alias="PRSP1" rel-entity-alias="PRSP2" rel-field-name="partyIdTo" operator="equals"/>
					<condition-expr field-name="partyRelationshipTypeId" entity-alias="PRSP1" operator="equals" value="KEY_PERSON" />
				</condition-list>
				<condition-list>
					<condition-expr field-name="partyIdFrom" entity-alias="PRSP2" rel-entity-alias="PRSP3" rel-field-name="partyIdTo" operator="equals"/>
					<condition-expr field-name="partyRelationshipTypeId" entity-alias="PRSP2" operator="equals" value="CUSTOMER" />
				</condition-list>
			 	<condition-list>
					<condition-expr field-name="partyIdFrom" entity-alias="PRSP3" rel-entity-alias="PRSP4" rel-field-name="partyIdTo" operator="equals"/>
					<condition-expr field-name="partyRelationshipTypeId" entity-alias="PRSP3" operator="equals" value="DISTRIBUTION" />
					<condition-expr field-name="roleTypeIdFrom" entity-alias="PRSP3" operator="equals" value="DELYS_SALESSUP_GT"/>
				</condition-list>
				<condition-expr field-name="partyRelationshipTypeId" entity-alias="PRSP4" operator="equals" value="MANAGER"/>
			</condition-list>
		</entity-condition>
    </view-entity>
    
    <view-entity entity-name="PartyRelAndListCustomer" package-name="org.ofbiz.delys" title="View Entity">
        <member-entity entity-alias="PRSP1" entity-name="PartyRelationship"/>
      <member-entity entity-alias="PRSP2" entity-name="PartyRelationship"/>
          <member-entity entity-alias="PRSP3" entity-name="PartyRelationship"/>
     <!--    <member-entity entity-alias="PRSP4" entity-name="PartyRelationship"/> -->
       <!--  <member-entity entity-alias="PRSP5" entity-name="PartyRelationship"/> -->
        <member-entity entity-alias="PERSON" entity-name="Person"/>
        <member-entity entity-alias="PTYGRP" entity-name="PartyGroup"/>
        <member-entity entity-alias="PTY" entity-name="Party"/>
        <alias-all entity-alias="PTY"/>
        <alias-all entity-alias="PERSON">
            <exclude field="comments"/>
        </alias-all>
        <alias-all entity-alias="PTYGRP">
            <exclude field="comments"/>
        </alias-all>
        <alias name="fullName">
        	<complex-alias operator="||' '||">
        		<complex-alias-field field="lastName" entity-alias="PERSON" default-value="''"/>
        		<complex-alias-field field="middleName" entity-alias="PERSON" default-value="''"/>
        		<complex-alias-field field="firstName" entity-alias="PERSON" default-value="''"/>
        		<complex-alias-field field="groupName" entity-alias="PTYGRP" default-value="''"/>
        	</complex-alias>
        </alias>
        <alias name="partyRelationshipTypeId" entity-alias="PRSP1"/>
        <alias name="partyIdFrom" entity-alias="PRSP1"/>
       <alias name="partyIdFrom2" field="partyIdFrom" entity-alias="PRSP2"/>
         <alias name="partyIdFrom3" field="partyIdFrom" entity-alias="PRSP3"/>
       <!--  <alias name="partyIdFrom4" field="partyIdFrom" entity-alias="PRSP4"/> -->
        <alias name="partyIdTo" entity-alias="PRSP1"/>
        <alias name="partyIdTo2" field="partyIdTo" entity-alias="PRSP2"/>
        <alias name="partyIdTo3" field="partyIdTo" entity-alias="PRSP3"/>
     <!--    <alias name="partyIdTo4" field="partyIdTo" entity-alias="PRSP4"/> -->
        <alias name="fromDate" entity-alias="PRSP1"/>
        <alias name="thruDate" entity-alias="PRSP1"/>
        <alias name="roleTypeIdFrom" entity-alias="PRSP1"/>
        <alias name="roleTypeIdTo" entity-alias="PRSP1"/>
        <alias name="relStatusId" field="statusId" entity-alias="PRSP1"/>
        <view-link entity-alias="PRSP1" rel-entity-alias="PTY">
        	<key-map field-name="partyIdTo" rel-field-name="partyId"/>
        </view-link>
        <view-link entity-alias="PTY" rel-entity-alias="PERSON" rel-optional="true">
            <key-map field-name="partyId"/>
        </view-link>
        <view-link entity-alias="PTY" rel-entity-alias="PTYGRP" rel-optional="true">
            <key-map field-name="partyId"/>
        </view-link>
        
         <entity-condition >
         	<condition-list>
         		<condition-list>
					<condition-expr field-name="partyIdFrom" entity-alias="PRSP1" rel-entity-alias="PRSP2" rel-field-name="partyIdTo" operator="equals"/>
					<condition-expr field-name="partyRelationshipTypeId" entity-alias="PRSP2" operator="equals" value="DISTRIBUTION" />
				</condition-list>
				<condition-list>
					<condition-expr field-name="partyIdFrom" entity-alias="PRSP2" rel-entity-alias="PRSP3" rel-field-name="partyIdTo" operator="equals"/>
 					<condition-expr field-name="partyRelationshipTypeId" entity-alias="PRSP3" operator="equals" value="SALES_EMPLOYEE" />
				</condition-list>
			 	<condition-expr field-name="partyRelationshipTypeId" entity-alias="PRSP1" operator="equals" value="CUSTOMER"/>
		 	</condition-list>
		</entity-condition>
    </view-entity>
    
</entitymodel>