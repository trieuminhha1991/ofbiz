<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">
	<screen name="OrderCommonDecorator">
		<section>
			<widgets>
				<decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
                    	<decorator-section-include name="body"/>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="ViewOrderDetail">
		<section>
			<actions>
				<script location="component://appbase/webapp/appbase/WEB-INF/actions/navigator/nav_orderList.groovy"/>
			</actions>
			<widgets>
				<decorator-screen name="ViewOrderDetail" location="component://basesales/widget/OrderScreens.xml">
					<decorator-section name="container">
						<include-screen location="component://baseaccounting/widget/PaymentScreens.xml" name="OrderPayment"/>
						<include-screen location="component://appbase/widget/logistics/DeliveryScreens.xml" name="SalesDelivery"/>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="NewSalesOrder">
		<section>
			<actions>
				<set field="selectedMenuItem" value="order"/>
				<set field="selectedSubMenuItem" value="newSalesOrder"/>
				<set field="titleProperty" value="BSCreateNewOrder"/>
				<set field="layoutSettings.javaScripts[+0]" value="/aceadmin/jqw/jqwidgets/olbMain.js" global="true"/>
				
				<set field="enableCheckLiability" value="true" type="Boolean" />
				<set field="enableCheckInventory" value="true" type="Boolean" />
				<set field="enableDropShip" value="true" type="Boolean" />
			</actions>
			<widgets>
				<include-screen name="NewSalesOrder" location="component://basesales/widget/OrderScreens.xml"/>
			</widgets>
		</section>
	</screen>
	
	<screen name="OrderReceivePayment">
	  <section>
		   <actions>
			    <set field="titleProperty" value="OrderReceiveOfflinePayments" />
			    <set field="headerItem" value="findorders" />
<!-- 			    <script location="component://dms/webapp/dms/WEB-INF/actions/navigator/nav_orderList.groovy"/> -->
			    <script location="component://baseaccounting/webapp/baseaccounting/WEB-INF/actions/payment/ReceivePayment.groovy" />    
			    <!-- <script location="component://delys/webapp/delys/WEB-INF/actions/accounting/GetListPaymentMethods.groovy" /> -->
			    
			    <entity-and entity-name="OrderRole" list="orderRoles">
			     <field-map field-name="orderId" value="${parameters.orderId}" />
			     <field-map field-name="roleTypeId" value="BILL_FROM_VENDOR" />
			    </entity-and>
			    <entity-and entity-name="PaymentMethod" list="paymentMethods">
			     <field-map field-name="partyId" from-field="orderRoles[0].partyId" />
			    </entity-and>    
		   </actions>
		   <widgets>
		    <decorator-screen name="OrderCommonDecorator">        
		     <decorator-section name="body">      
		      <platform-specific>
		       <html><html-template location="component://baseaccounting/webapp/baseaccounting/payment/receivePayment.ftl" /></html>
		      </platform-specific>
		     </decorator-section>
		    </decorator-screen>
		   </widgets>
	  </section>
	 </screen>
</screens>